---
title: Política de seguridad de contenidos (CSP) autoalojada
sidebar_title: Política de seguridad de contenidos (CSP)
sidebar_order: 70
---

<Alert level="warning">
  Esta es una función experimental. Esto significa que las funciones y los flujos de trabajo no están completamente probados; ¡úsala bajo tu propio riesgo!
</Alert>

A partir de Sentry `23.5.0`, es posible habilitar la [cabecera CSP](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP) en instalaciones de Sentry autoalojadas. La buena noticia es que el propio Sentry admite la [recopilación de informes de CSP](https://docs.sentry.io/product/security-policy-reporting/). Recomendamos crear un proyecto de Sentry aparte para los informes de CSP. Para habilitar CSP y la recopilación de informes, deberás configurar los siguientes ajustes en `sentry.conf.py`:

```python
CSP_REPORT_URI = "https://your-sentry-url-prefix.com/api/{csp-project-id}/security/?sentry_key={sentry-key}"
CSP_REPORT_ONLY = True
```

Recomendamos empezar con `CSP_REPORT_ONLY = True`. Cuando ya no haya infracciones durante el uso normal, puedes cambiarlo a `CSP_REPORT_ONLY = False`. Esto aplicará la CSP y se bloquearán todos los scripts/recursos no deseados.

Si quieres permitir orígenes personalizados, puedes agregar palabras clave adicionales de CSP. Admitimos la sintaxis de [django-csp](https://django-csp.readthedocs.io/en/latest/configuration.html). Por ejemplo:

```python
CSP_SCRIPT_SRC += ["example.com"]
```

La configuración predeterminada de `CSP_*` se define en [`server.py`](https://github.com/getsentry/sentry/blob/master/src/sentry/conf/server.py).
