---
title: Sentry autogestionado
description: Cómo ejecutar todo Sentry en tu propio servidor, sin pagar nada.
sidebar_order: 110
---

Además de publicar su código fuente, Sentry ofrece y mantiene una configuración mínima que funciona de inmediato para casos de uso sencillos. Esta versión no incluye garantías ni soporte dedicado. Los ingenieros de Sentry harán todo lo posible por responder preguntas y se comprometen a asegurarse de que la versión autogestionada esté funcionando, pero ahí termina nuestra participación. Para cualquier otra cosa, esperamos que los usuarios recurran a la [comunidad de Sentry Self-Hosted](https://discord.gg/sentry) en Discord. El repositorio de autogestionado debe servir como plano de cómo se conectan los distintos servicios de Sentry para un despliegue completo. Esto será útil para quienes estén dispuestos a mantener instalaciones más grandes con infraestructura personalizada.

Por simplicidad y ubiquidad, hemos optado por usar [Docker](https://www.docker.com/) y [Docker Compose](https://docs.docker.com/compose/), junto con un script de instalación y actualización basado en bash.

Si estás ejecutando Sentry de forma autogestionada y quieres saber cómo cambiar a Sentry SaaS, consulta este [taller en vivo](https://sentry.io/resources/migrate-to-sentry-saas-workshop/) para conocer más sobre nuestras herramientas de migración.

<div id="differences-between-self-hosted-and-saas">
  ## Diferencias entre self-hosted y SaaS
</div>

La diferencia se limita a algunas cosas que la mayoría no puede alojar y a aspectos de facturación/pagos. Estas son algunas de las funciones que no están disponibles en self-hosted (por los motivos anteriores):

* Planes de precios y sistema de facturación.
* [Protección contra picos](https://docs.sentry.io/pricing/quotas/spike-protection/), ya que está estrechamente ligada a las cuotas de facturación.
* [Asignación de gasto](https://docs.sentry.io/pricing/quotas/spend-allocation/), ya que está estrechamente ligada a las cuotas de facturación.
* Seer y otras funciones de IA y ML, ya que actualmente son de código cerrado.
* [Ubicación de almacenamiento de datos](https://docs.sentry.io/organization/data-storage-location/), porque tú eres el propietario de tus datos.
* Resolución limitada de stack traces para plataformas móviles, pero todas las demás funciones están disponibles:
  * [Simbolicación de iOS](https://docs.sentry.io/platforms/apple/data-management/debug-files/symbol-servers#built-in-repositories), porque Apple no proporciona un servidor público de símbolos ni nos permite distribuir nosotros mismos los Debug Information Files (DIF).
  * Símbolos del sistema de Android, con símbolos recopilados mediante su [servicio symbol-collector](https://github.com/getsentry/symbol-collector/), pero no se pueden redistribuir. Esto ayuda a ofrecer stack traces de mejor calidad para errores nativos de Android.
* Compatibilidad limitada con plataformas de videojuegos, especialmente para PlayStation y Nintendo Switch:
  * La compatibilidad con [PlayStation](https://docs.sentry.io/platforms/playstation/) implica componentes que forman parte de una colaboración con Sony que no pueden hacerse públicos ni redistribuirse. Sentry tiene un servicio privado que obtiene errores de Sony a Sentry; por lo tanto, no es posible usar la compatibilidad con PlayStation sin el permiso de Sony.
  * [Nintendo Switch](https://docs.sentry.io/platforms/nintendo-switch/) tiene un alcance de compatibilidad limitado, ya que no está completamente probado en un entorno self-hosted. Los usuarios pueden proporcionar a Nintendo el DSN de su Sentry self-hosted para que reenvíen los datos.

En pocas palabras, considera self-hosted como el plan Business sin limitaciones de software y sin niveles de pago.

<div id="required-minimum-system-resources">
  ## Recursos mínimos del sistema necesarios
</div>

Se requiere al menos **Docker 19.03.6** y **Docker Compose 2.32.2**. Se recomienda instalar siguiendo la [guía de instalación de Docker Engine](https://docs.docker.com/engine/install/).

Estos son los requisitos mínimos:

* 4 núcleos de CPU
* 16 GB de RAM + 16 GB de swap
* 20 GB de espacio libre en disco

Recomendamos usar 32 GB de RAM, pero también funciona con 16 GB de RAM + 16 GB de swap. No notarás desventajas si tu swap de 16 GB está en un disco de alta velocidad.

Según tu volumen de tráfico, quizá quieras aumentar la configuración de tu sistema para manejar una mayor carga. Aunque la mayoría de las veces este no es el caso en Sentry autoalojado, ya que, sin importar cuán pequeño o grande sea el tráfico, lo más probable es que el uso de recursos se mantenga similar.

Si no es posible ampliar el espacio de almacenamiento en disco, puedes migrar el almacenamiento a uno externo como AWS S3 o Google Cloud Storage (GCS). Reducir el valor de la variable de entorno `SENTRY_RETENTION_DAYS` te ahorrará algo de espacio y evitará que se llene, a costa de un período de retención de datos más corto. Consulta la sección [Retención de eventos](/es/self-hosted/configuration#event-retention).

A continuación se muestra un desglose de la compatibilidad de la instalación de Sentry autoalojado con varias distribuciones de Linux:

* Se prefieren las distribuciones **basadas en Debian/Ubuntu**; la mayoría de los usuarios tienen éxito con ellas y se usan en la instancia dogfooding de Sentry.
* Las distribuciones de **Linux basadas en RHEL** (p. ej., CentOS, Rocky Linux, AlmaLinux) presentan problemas de instalación conocidos. Aunque algunos usuarios han logrado que funcione deshabilitando SELinux, esto es muy desaconsejable.
* En **Amazon Linux 2023**, un derivado de Fedora, una persona logró ejecutar Sentry autoalojado con éxito. Esto se consiguió con SELinux habilitado y añadiendo su usuario al grupo `docker`.
* **Alpine Linux** no es compatible debido a la incompatibilidad con el script de instalación.

Si logras instalar Sentry en una distribución diferente, ¡comparte tu experiencia en el [Discord de Sentry](https://discord.gg/sentry)!

<div id="getting-started">
  ## Primeros pasos
</div>

Te recomendamos clonar el [último lanzamiento del repositorio self-hosted](https://github.com/getsentry/self-hosted/releases/latest) y luego ejecutar `./install.sh` dentro de ese directorio. Este script se encargará de todo lo necesario para empezar, incluida una configuración básica, y luego te indicará que ejecutes `docker compose up --wait` para iniciar Sentry. De forma predeterminada, Sentry escucha en el puerto `9000`. Deberías poder acceder a la página de inicio de sesión en [http://127.0.0.1:9000](http://127.0.0.1:9000/).

Se recomienda actualizar tu Sentry self-hosted con regularidad. Más información en [Lanzamientos y actualizaciones](/es/self-hosted/releases/).

{/* Créditos a Chuckame: https://gist.github.com/steinwaywhw/a4cd19cda655b8249d908261a62687f8?permalink_comment_id=4843419#gistcomment-4843419 */}

```bash
VERSION=$(curl -Ls -o /dev/null -w %{url_effective} https://github.com/getsentry/self-hosted/releases/latest)
VERSION=${VERSION##*/}
git clone https://github.com/getsentry/self-hosted.git
cd self-hosted
git checkout ${VERSION}
./install.sh
# Después de la instalación, ejecuta lo siguiente para iniciar Sentry:
docker compose up --wait
```

Obtén más información sobre cómo configurar tu Sentry autoalojado en la [sección de configuración](/es/self-hosted/configuration/).

<div id="self-hosted-monitoring">
  ### Monitoreo autohospedado
</div>

Cuando ejecutes `./install.sh`, puedes elegir si participar o no en nuestro monitoreo. Este monitoreo se utiliza con fines de desarrollo y depuración para que estemos al tanto de los problemas que enfrentas y así ofrecer un proceso de instalación más fluido. Si optas por participar en nuestro monitoreo, enviaremos información a nuestra propia instancia autohospedada de Sentry con fines de desarrollo y depuración. Podemos recopilar:

* Nombre de usuario del sistema operativo
* Dirección IP
* Registro de instalación
* Errores de tiempo de ejecución en Sentry
* Datos de rendimiento

Conservación por treinta (30) días. Sin fines de marketing. Política de privacidad en sentry.io/privacy.

A partir de la versión 22.10.0, quienes ejecuten el instalador de Sentry deberán elegir si desean participar o no. Si ejecutas el instalador mediante automatización, quizá quieras establecer `REPORT_SELF_HOSTED_ISSUES` o pasar `--(no-)report-self-hosted-issues` al instalador según corresponda.

<div id="air-gapped-installation">
  ### Instalación en entornos aislados (air-gapped)
</div>

Sentry puede ejecutarse en entornos aislados, sin acceso a Internet. Según qué tan hermético sea tu entorno, la mejor manera es realizar la instalación y las actualizaciones detrás de un proxy; consulta [Instalación detrás de un proxy](#installing-behind-a-proxy) más abajo. Si esto no es posible, puedes compilar toda la pila de Docker Compose en otra máquina, usar `docker commit` para “congelar” las imágenes y luego usar una combinación de `docker save` y `docker load`, que convierten la imagen en un archivo `.tar` y la transfieren a la máquina aislada. Después, puedes usar `docker-compose up` para iniciar los servicios. Aunque esto puede ser factible, no ofrecemos más ayuda para este caso de uso, ya que no es un escenario común.

Se recomienda establecer `SENTRY_AIR_GAP` en `True` en tu archivo `sentry/sentry.conf.py` para asegurarte de que no haya llamadas de red desde tu instalación de Sentry.

<div id="self-hosted-beacon">
  ### Beacon autohospedado
</div>

Si decides participar, la instalación autohospedada de Sentry se comunicará periódicamente con un servidor beacon remoto. Esto se utiliza principalmente para:

* Obtener información sobre la versión actual de Sentry
* Recibir avisos importantes del sistema

El servidor remoto es operado por el equipo de Sentry (sentry.io), y la información enviada sigue la [política de privacidad](https://sentry.io/privacy/) de la empresa.

Se envía la siguiente información:

1. Un ID de instalación único
2. La versión de Sentry
3. Un correo electrónico de contacto técnico si se opta por enviar información de contacto (system.admin-email)
4. Estadísticas anónimas generales sobre los patrones de datos (como la cantidad de usuarios y el volumen de errores)
5. Nombres y versiones de los módulos de Python instalados

Nota: El correo electrónico de contacto se utiliza para anuncios de seguridad y nunca se usará fuera de ese fin. Puedes cambiar tu configuración de participación para el envío de información de contacto en cualquier momento en los ajustes del panel de administración.

Los datos enviados son mínimos y ayudan enormemente al equipo de desarrollo de Sentry. Dicho esto, puedes desactivar el beacon con la siguiente configuración:

```python
SENTRY_BEACON = False
```

<div id="installing-behind-a-proxy">
  ### Instalación detrás de un proxy
</div>

En algunas configuraciones empresariales no hay conexión directa a Internet, por lo que debes usar un servidor proxy HTTP. ¿Cómo instalar Sentry en este entorno? Supongamos:

1. Tu instalación de Sentry se ejecuta en Linux.
2. `http://proxy:3128` es la dirección de tu proxy.
3. `127.0.0.0/8` es la única red a la que se debe acceder sin proxy.

Sigue estos pasos:

1. Define las variables `http_proxy`, `https_proxy` y `no_proxy` en el archivo `/etc/environment`.
2. Para que el comando `docker pull` respete tu configuración de proxy, crea el archivo `/etc/systemd/system/docker.service.d/http-proxy.conf` con este contenido:

```systemd
[Service]
Environment="HTTP_PROXY=http://proxy:3128"
Environment="HTTPS_PROXY=http://proxy:3128"
Environment="NO_PROXY=127.0.0.0/8"
```

3. Ejecuta `systemctl daemon-reload` y reinicia Docker con `systemctl restart docker.service`.

A partir de ahí, puedes ejecutar `./install.sh` como de costumbre.

De forma predeterminada, Sentry envía estadísticas de uso anónimas al equipo de Sentry; esto ayuda a mejorar el producto. Puedes desactivar esta función añadiendo `SENTRY_BEACON = False` en el archivo `sentry.conf.py`. También puede haber distintas integraciones externas con servicios de terceros como Slack o Twilio. Para que estas funciones funcionen, es necesario permitir que los contenedores de Docker accedan a Internet. Para añadir tus variables de entorno de proxy a los contenedores de Docker de Sentry, crea el archivo `/etc/docker/config.json` (o `~/.docker/config.json` si estás ejecutando Docker en modo rootless) con este contenido:

```json
{
  "proxies": {
    "httpProxy": "http://proxy:3128",
    "httpsProxy": "http://proxy:3128",
    "noProxy": "smtp,memcached,redis,postgres,pgbouncer,kafka,clickhouse,seaweedfs,snuba-api,symbolicator,web,worker,nginx,relay,vroom,taskbroker,172.17.0.0/16,127.0.0.0/8"
  }
}
```

Para aplicar la nueva configuración del daemon de Docker, reinicia el servicio con `systemctl restart docker.service`.

<Alert title="Nota">
  El valor `172.17.0.0/16` es el pool de IP predeterminado de Docker. Si vas a personalizar los pools de IP predeterminados de Docker, ajusta el valor en consecuencia.
  Puedes encontrar más información sobre los pools de IP predeterminados de Docker en la [guía de solución de problemas](/es/self-hosted/troubleshooting/docker/#docker-network-conflicting-ip-address).
</Alert>

<div id="productionalizing">
  ## Puesta en producción
</div>

Recomendamos encarecidamente usar un balanceador de carga dedicado delante de tu instalación de Sentry, vinculado a un dominio o subdominio dedicado. Un balanceador de carga dedicado que realice la terminación SSL/TLS y además reenvíe la dirección IP del cliente dentro de la red interna de Docker Compose (ya que esto es [casi imposible de lograr de otro modo](https://github.com/getsentry/self-hosted/issues/554)) te ofrecerá la mejor experiencia con Sentry. Como parte de esta configuración, recomendamos configurar una comprobación de estado del balanceador de carga contra el endpoint `/_health/` usando el protocolo HTTP. Esto devolverá un 200 si Sentry está operativo o un 500 con la lista de problemas.

Una vez que hayas configurado un balanceador de carga o proxy inverso para tu instancia de Sentry, debes modificar `system.url-prefix` en el archivo `config.yml` para que coincida con tu nueva URL y protocolo. También debes actualizar la sección SSL/TLS en el script `sentry/sentry.conf.py`; de lo contrario, podrías obtener errores relacionados con CSRF al realizar ciertas acciones, como configurar integraciones.

Ten en cuenta que toda esta configuración usa nodos únicos para todos los servicios, incluido Kafka. Para cargas mayores, necesitarás una máquina potente con mucha RAM y almacenamiento en disco. Para escalar aún más, es muy probable que uses clústeres con una herramienta más compleja, como Kubernetes. Debido a la naturaleza altamente personalizada de las instalaciones self‑hosted, no ofrecemos recomendaciones ni orientación sobre cómo escalar. Nosotros hacemos lo que nos funciona para nuestros miles de clientes en [sentry.io](https://sentry.io/) y nos encantaría que te pasaras por allí cuando sientas que el mantenimiento de tu instalación local se vuelve una carga en lugar de una satisfacción.

<div id="licensing">
  ## Licencias
</div>

Sentry es [Fair Source](https://fair.io/) bajo la [FSL (Functional Source License)](https://fsl.software/). Ten en cuenta que Fair Source no está bajo el paraguas de la [OSI](https://opensource.org/); pasa a ser literalmente open source con la [licencia Apache 2.0](https://www.apache.org/licenses/LICENSE-2.0) tras 2 años, y es prácticamente open source antes de eso, salvo cuando eres un competidor de Sentry. Esta licencia permite que los usuarios utilicen Sentry y lo implementen en cualquier lugar (incluso dentro de un ecosistema empresarial), pero prohíbe vender una instancia autoalojada de Sentry como cualquier tipo de oferta (SaaS u otro modelo de negocio) y prohíbe ser un competidor directo de Sentry utilizando el código de Sentry con licencia FSL. El código fuente de Sentry y de los servicios y bibliotecas relacionados para la implementación autoalojada está disponible en GitHub.

Para más información sobre la licencia FSL, puedes [visitar el sitio web fsl.software](https://fsl.software/) o [leer la entrada del blog del anuncio](https://blog.sentry.io/introducing-the-functional-source-license-freedom-without-free-riding/).