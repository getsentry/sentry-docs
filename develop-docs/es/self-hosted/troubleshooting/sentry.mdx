---
title: Solución de problemas en Sentry
sidebar_title: Sentry
sidebar_order: 1
---

<div id="csrf-verification-failed">
  ## Error de verificación de CSRF
</div>

Desde la versión 24.1.0, Sentry migró a Django 4, que incorpora una protección CSRF más estricta. De forma predeterminada, los orígenes de confianza para CSRF se establecen en tu `system.url-prefix`, pero si tu implementación de Sentry es accesible desde varios dominios, tendrás que configurar `CSRF_TRUSTED_ORIGINS` en el archivo `sentry.conf.py`.

```python
# Suponiendo que tu instancia de Sentry sea accesible desde sentry.example.com, 10.100.10.10 y 127.0.0.1.
CSRF_TRUSTED_ORIGINS = ["https://sentry.example.com", "http://10.100.10.10", "http://127.0.0.1:9000"]
```

Consulta la [documentación de Django sobre CSRF](https://docs.djangoproject.com/en/4.2/ref/settings/#std-setting-CSRF_TRUSTED_ORIGINS) para más información.


<div id="containers-taking-too-much-cpuram-usage">
  ## Contenedores con uso excesivo de CPU/RAM
</div>

Si estás recibiendo una mayor carga de tráfico entrante, es algo esperable. En ese caso, quizá quieras aumentar los recursos de tu máquina.

Sin embargo, si el tráfico entrante es muy bajo y la CPU/RAM se disparan constantemente, puedes comprobar con el comando `top` (o `htop`, o similar) qué procesos están consumiendo más recursos. Luego, identifica el contenedor de Docker correspondiente y revisa si hay logs que te ayuden a encontrar el problema.

Por lo general, la mayoría de los contenedores que no son dependencias (como Postgres o Kafka) consumen bastante CPU y RAM durante el arranque, especialmente al ponerse al día con el backlog. Si están en un [bootloop](https://en.wikipedia.org/wiki/Booting#Bootloop), normalmente se debe a una configuración inválida o a una dependencia rota.

<div id="sentry-data-volume-not-being-cleaned-up">
  ## El volumen `sentry-data` no se está limpiando
</div>

Es posible que veas que `sentry-data` esté ocupando demasiado espacio en disco. Puedes limpiarlo manualmente (o configurar un cron para la limpieza).

Para encontrar el punto de montaje de Docker para el volumen, ejecuta:

```bash
docker volume inspect sentry-data

# O si prefieres hacerlo directamente (asumiendo que tienes `jq` en tu sistema):
docker volume inspect sentry-data | jq -r .[0].Mountpoint
```

Luego ejecuta el siguiente comando para eliminar el contenido del volumen de los últimos 30 días (cambia el `30` por el valor que quieras; está en días):

```bash
# `/var/lib/docker/volumes/sentry-data/_data` hace referencia al punto de montaje del volumen
# según la salida del comando anterior. Cámbialo si es diferente.
find /var/lib/docker/volumes/sentry-data/_data -type f -mtime +30 -delete
```


<div id="background-workers-havent-checked-in-recently">
  ## Los procesos en segundo plano no se han reportado recientemente
</div>

Si ves un error como

```
Los workers en segundo plano no se han reportado recientemente. Parece que tienes una acumulación de 200 tareas pendientes. O tus workers no se están ejecutando o necesitas más capacidad.
```

puede resultar útil usar workers adicionales dedicados. Para ello, cree nuevos servicios de `worker` en `docker-compose.override.yml` y asígnelos a colas específicas usando el argumento `-Q queue_name`. Por ejemplo:

```yaml
worker1:
    << : *sentry_defaults
    command: run worker -Q events.process_event
```

Para ver un ejemplo más completo, consulta [un ejemplo de solución en nuestro foro de la comunidad](https://forum.sentry.io/t/how-to-clear-backlog-and-monitor-it/10715/14?u=byk).


<div id="cannot-load-javascript-or-css-files-from-web-interface">
  ## No se pueden cargar archivos JavaScript o CSS desde la interfaz web
</div>

Si ejecutas tu instancia de Sentry detrás de una CDN como Cloudflare, Fastly u otra similar, es posible que veas errores por archivos JavaScript o CSS no válidos cargados desde la interfaz web. Esto sucede porque algunos archivos de recursos estáticos ya están optimizados por los empaquetadores, pero no se sirven con extensiones minificadas (por ejemplo, `.min.js`). Por ello, la CDN que usas intentará optimizar los archivos por segunda vez, lo que provocará que se corrompan.

Algunas rutas conocidas donde podrías ver este error:

* _static/dist/sentry/entrypoints/sentry.css
* _static/dist/sentry/entrypoints/app.js

Para solucionarlo, puedes desactivar la optimización automática que realiza tu CDN.