---
title: Inicio de sesión único (SSO) autohospedado
sidebar_title: Inicio de sesión único (SSO)
sidebar_order: 60
---

El SSO en Sentry se gestiona de dos maneras:

* Mediante un middleware que trabaja con un proxy ascendente que define el usuario autenticado
* Mediante un servicio de terceros que implementa un flujo de autenticación

<div id="using-a-middleware-proxy-saml2">
  ## Uso de un proxy de middleware (SAML2)
</div>

Desde Sentry 20.6.0, la versión autoalojada de Sentry incluye compatibilidad integrada con SAML2 y ciertos proveedores de autenticación. Para versiones anteriores, debes añadir la siguiente línea en [`sentry/requirements.txt`](https://github.com/getsentry/self-hosted/blob/10.0.1/sentry/requirements.example.txt) antes de ejecutar `./install.sh`:

```
sentry-auth-saml2@https://github.com/getsentry/sentry-auth-saml2/archive/master.zip#egg=sentry-auth-saml2
```

La forma de configurarlo es la misma que en [sentry.io](https://sentry.io), excepto que debes usar el [`url-prefix`](https://develop.sentry.dev/config/#general) de tu propia instancia para las URL mencionadas en la documentación.

Consulta nuestra [documentación principal sobre SAML](https://docs.sentry.io/accounts/sso/#saml2-identity-provider) para todos los detalles.

<div id="sso-with-oauth">
  ## SSO con OAuth
</div>

<Alert title="Nota">
  Una vez que habilites el SSO, esta será la única forma de acceder a tu instancia autogestionada. Si necesitas registro gratuito además de SSO, puedes comentar en el <Link to="https://github.com/getsentry/sentry/pull/16247">PR de GitHub</Link>.
</Alert>

<div id="google-auth">
  ### Autenticación con Google
</div>

Desde [Sentry 9.1](https://github.com/getsentry/self-hosted/releases/tag/9.1.2), la versión autoalojada de Sentry incluye compatibilidad integrada con la autenticación de Google. Para habilitarla, debes [crear un ID de cliente y un secreto para tu aplicación de Google](https://developers.google.com/identity/sign-in/web/server-side-flow#step_1_create_a_client_id_and_client_secret) y luego introducir esos valores en tu archivo [`sentry/config.yaml`](https://github.com/getsentry/self-hosted/blob/master/sentry/config.example.yml), respectivamente:

```yaml
auth-google.client-id: '<ID de cliente>'
auth-google.client-secret: '<secreto de cliente>'
```

<Alert title="Nota">
  Después de cambiar los archivos de configuración, vuelve a ejecutar el script <code>./install.sh</code> para reconstruir y reiniciar los contenedores. Consulta la <Link to="/self-hosted/#configuration">sección de configuración</Link> para obtener más información.
</Alert>

<div id="github-auth">
  ### Autenticación con GitHub
</div>

A partir de [Sentry 10](https://github.com/getsentry/self-hosted/releases/tag/10.0.1), Sentry autoalojado incluye compatibilidad integrada con la autenticación de GitHub. Para habilitarla, deberás crear una nueva GitHub App en tu organización e instalarla.

<div id="create-github-app-for-sso-integration">
  #### Crear una GitHub App para SSO e integración
</div>

<Alert level="warning">
  El nombre de la GitHub App no debe contener espacios.
</Alert>

<CreateGitHubAppForm url="https://github.com/organizations/:org/settings/apps/new?name=:org-Sentry-Integration&public=false&members=read&emails=read&administration=read&contents=read&issues=write&pull_requests=write&repository_hooks=write&url=:url-prefix&callback_url=:url-prefix%2Fauth%2Fsso%2F&setup_url=:url-prefix%2Fextensions%2Fgithub%2Fsetup%2F&webhook_url=:url-prefix%2Fextensions%2Fgithub%2Fwebhook%2F&events[]=push&events[]=pull_request&webhook_active=true" defaultOrg="your-organization" defaultUrlPrefix="https://your-sentry-url-prefix.com" />

Si el formulario anterior no te funciona, necesitas la siguiente configuración para tu GitHub App:

| Configuración                    | Valor                                                                    |
| -------------------------------- | ------------------------------------------------------------------------ |
| Homepage URL                     | `${url-prefix}`                                                          |
| Callback URLs                    | `${url-prefix}/auth/sso/` y `${url-prefix}/extensions/github/setup/`    |
| Setup URL (opcional)             | `${url-prefix}/extensions/github/setup/`                                 |
| Webhook URL                      | `${url-prefix}/extensions/github/webhook/`                               |
| Webhook secret                   | &quot;my-super-secret-example-secret&quot;                                         |

<Alert level="warning">
  No olvides reemplazar todas las apariciones de <code>{'${urlPrefix}'}</code> por tu propio prefijo de URL.
</Alert>

Cuando se te soliciten permisos, elige lo siguiente:

| Permiso                            | Configuración        |
| ---------------------------------- | -------------------- |
| Organization permissions / members | Solo lectura         |
| User permissions / Email addresses | Solo lectura         |
| Repository administration          | Solo lectura         |
| Repository contents                | Solo lectura         |
| Issues                             | Lectura y escritura  |
| Pull requests                      | Lectura y escritura  |
| Repository webhooks                | Lectura y escritura  |

<div id="update-your-configuration-with-your-github-app-information">
  #### Actualiza tu configuración con la información de tu GitHub App
</div>

A continuación, deberás establecer los siguientes valores de configuración:

En [`sentry/config.yaml`](https://github.com/getsentry/self-hosted/blob/master/sentry/config.example.yml)

```yaml
github-app.id: <App ID>
github-app.name: '<GitHub App name>'
github-app.webhook-secret: '<Webhook secret>' # Usar solo si está configurado en GitHub
github-app.client-id: '<Client ID>'
github-app.client-secret: '<Client secret>'
github-app.private-key: |
  -----BEGIN RSA PRIVATE KEY-----
  privatekeyprivatekeyprivatekeyprivatekey
  privatekeyprivatekeyprivatekeyprivatekey
  privatekeyprivatekeyprivatekeyprivatekey
  privatekeyprivatekeyprivatekeyprivatekey
  privatekeyprivatekeyprivatekeyprivatekey
  -----END RSA PRIVATE KEY-----

# Solo es necesario si tienes varias organizaciones habilitadas
github-login.client-id: '<Client ID>'
github-login.client-secret: '<Client secret>'
github-login.require-verified-email: true # Opcional pero recomendado
```

Esto también habilitará la [integración con GitHub](/es/integrations/github/) para tu instancia.

<Alert title="Nota">
  Después de cambiar los archivos de configuración, vuelve a ejecutar el script <code>./install.sh</code> para reconstruir y reiniciar los contenedores. Consulta la <Link to="/self-hosted/#configuration">sección de configuración</Link> para obtener más información.
</Alert>

<div id="custom-providers">
  ### Proveedores personalizados
</div>

Por ahora, la API se considera inestable y sujeta a cambios. Es poco probable que cambie mucho, pero hay algunas áreas que necesitan pulirse.

Con esto en mente, si deseas crear tu propio proveedor, revisa una de las [implementaciones de referencia anteriores](https://github.com/getsentry/sentry/tree/master/src/sentry/auth/providers).