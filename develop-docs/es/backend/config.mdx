---
title: Configuración
sidebar_order: 10
---

Este documento describe la configuración disponible para el propio servidor de Sentry.

<div id="first-install">
  ## Primera instalación
</div>

Durante una nueva instalación, Sentry primero te pedirá que completes el Asistente de instalación. Este asistente te ayudará a configurar algunas opciones esenciales antes de comenzar. Al finalizar, tendrás dos archivos:

`config.yml`

: La configuración YAML se introdujo en Sentry 8 y te permitirá configurar varios atributos principales. Con el tiempo, esto se ampliará.

`sentry.conf.py`

: Este archivo de Python se cargará una vez que se haya procesado el resto de la configuración y te permitirá ajustar varios parámetros del servidor, así como realizar una afinación más avanzada.

Muchos de los ajustes disponibles en `config.yml` también pueden configurarse desde la interfaz de Sentry. Declararlos en el archivo generalmente sobrescribe el valor configurado dinámicamente y evita que se cambie desde la interfaz. Estos mismos ajustes también pueden configurarse mediante la herramienta de línea de comandos `sentry config`.

<div id="general">
  ## General
</div>

<ConfigValue name="SENTRY_ENVIRONMENT" location="env"><markdown>

El nombre del entorno para esta instalación. Esto también controlará los valores predeterminados para cosas como `DEBUG`.

```bash
SENTRY_ENVIRONMENT=production sentry ...
```

</markdown></ConfigValue>

<ConfigValue name="system.admin-email" location="yaml"><markdown>

La dirección de contacto técnico para esta instalación. Se enviará aguas arriba al equipo de Sentry (como parte de Beacon) y será el punto de contacto para actualizaciones críticas y notificaciones de seguridad.

```yaml
system.admin-email: "admin@example.com"
```

</markdown></ConfigValue>

<ConfigValue name="system.url-prefix" location="yaml"><markdown>

El prefijo de URL en el que Sentry es accesible. Se usará tanto para hacer referencia a URLs en la interfaz de usuario como en notificaciones salientes. Esto solo funciona para el esquema, el nombre de host y el puerto. Sentry debe estar en la raíz de su propio (sub)dominio o dirección IP, y no puedes incluir información de ruta (ni siquiera una barra final) en la opción `system.url-prefix`.

```yaml
system.url-prefix: "https://sentry.example.com"
```

</markdown></ConfigValue>

<ConfigValue name="system.secret-key" location="yaml"><markdown>

Una clave secreta usada para firmar sesiones. Si se ve comprometida, es importante regenerarla; de lo contrario, será mucho más fácil secuestrar sesiones de usuario.

```yaml
system.secret-key: "a-really-long-secret-value"
```

Para generar un nuevo valor, hemos incluido una utilidad:

```shell
sentry config generate-secret-key
```

</markdown></ConfigValue>

<div id="logging">
  ## Registro
</div>

Sentry registra en dos lugares principales: `stdout` y su proyecto interno en Sentry. De forma predeterminada, todos los niveles de registro se imprimen en la consola, pero solo los de nivel `error` se capturan y envían a Sentry. Para desactivar el registro en el proyecto interno (es decir, para impedir que la instancia de SDK integrada del servidor envíe eventos a Sentry), agrega un registrador cuyo único controlador sea `'console'` y con `propagate` establecido en `False`.

<Alert level="warning">
A continuación encontrarás la opción de la CLI y las variables de entorno relacionadas con el registro. Estas opciones anulan el
registrador raíz y cualquier valor en <code>LOGGING.overridable</code>. Ten mucho cuidado con esto
en un sistema de producción, porque el registrador de Celery puede ser extremadamente prolijo cuando se establece en INFO o DEBUG.
</Alert>

<ConfigValue name="-l/--loglevel" location="cli"><markdown>

Sentry puede anular los niveles del registrador pasando a la CLI la opción `-l/--loglevel`.

El valor puede ser una de las [cadenas estándar de niveles de registro de Python](https://docs.python.org/3/library/logging.html#logging-levels).

```shell
sentry --loglevel=WARNING
```

</markdown></ConfigValue>

<ConfigValue name="SENTRY_LOG_LEVEL" location="env"><markdown>

Sentry puede anular los niveles del registrador con la variable de entorno `SENTRY_LOG_LEVEL`.

El valor puede ser una de las [cadenas estándar de niveles de registro de Python](https://docs.python.org/3/library/logging.html#logging-levels).

```shell
SENTRY_LOG_LEVEL=WARNING sentry ...
```

</markdown></ConfigValue>

<ConfigValue name="LOGGING" location="python"><markdown>

Puedes modificar o anular toda la configuración de registro con este ajuste. Ten cuidado de no eliminar ni sobrescribir valores predeterminados importantes. Puedes consultar [la configuración predeterminada](https://github.com/getsentry/sentry/blob/8f500feaf8f9cce3a56a4a4517931acc9f47f90a/src/sentry/conf/server.py#L649-L777) como referencia.

```python
LOGGING['default_level'] = 'WARNING'
```

Si el registro en un módulo en particular no aparece cuando lo esperas, comprueba el nivel de registro de ese módulo en `src/sentry/conf/server.py`, en la variable `LOGGING`.
</markdown></ConfigValue>

<div id="redis">
  ## Redis
</div>

<ConfigValue name="redis.clusters" location="yaml"><markdown>

Describe los clústeres de Redis disponibles para el servidor de Sentry. Estos clústeres pueden luego referenciarse por nombre desde otros servicios internos como la caché, los resúmenes (digests) y los backends de TSDB, entre otros.

Por ejemplo:

```yaml
redis.clusters:
  default: # cluster name
    hosts: # connection options, passed to `rb.Cluster`
      0:
        host: redis-1.example.com
        port: 6379
      1:
        host: redis-2.example.com
        port: 6379
  other:
    hosts:
      0:
        host: redis-3.example.com
        port: 6379
```

</markdown></ConfigValue>

<div id="authentication">
  ## Autenticación
</div>

Las siguientes claves controlan la compatibilidad con la autenticación.

<ConfigValue name="auth.allow-registration" location="yaml"><markdown>

¿Debería Sentry permitir que los usuarios creen cuentas nuevas?

El valor predeterminado es `False`.

Este ajuste solo controla el registro público. Los usuarios aún pueden crear cuentas nuevas mediante inicio de sesión único (Single Sign-On) y con invitaciones de membresía.

```yaml
auth.allow-registration: true
```

Nota: Este ajuste suele configurarse desde la interfaz.

</markdown></ConfigValue>

<ConfigValue name="SENTRY_PUBLIC" location="python"><markdown>

¿Debería Sentry hacer que todos los datos sean de acceso público? Esto **solo** debe usarse si estás instalando Sentry detrás del firewall de tu empresa.

Los usuarios aún necesitarán tener una cuenta para ver cualquier dato.

El valor predeterminado es `False`.

```python
SENTRY_PUBLIC = True
```

</markdown></ConfigValue>

<ConfigValue name="SENTRY_ALLOW_ORIGIN" location="python"><markdown>

**Nota:** Este ajuste ha cambiado y ya no se aplica a las solicitudes a `/api/store/`.

Si se establece, Sentry agregará el encabezado Access-Control-Allow-Origin en todas las respuestas de la API web.

Puedes obtener más información sobre estos encabezados en la [documentación para desarrolladores de Mozilla](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS).

El valor predeterminado es `*` (permitir el acceso a la API desde cualquier dominio)

```python
SENTRY_ALLOW_ORIGIN = "http://foo.example"
```

</markdown></ConfigValue>

<div id="web-server">
  ## Servidor web
</div>

Las siguientes configuraciones están disponibles para el servidor web integrado:

<ConfigValue name="SENTRY_WEB_HOST" location="python">
  <markdown>
    El nombre de host al que debe vincularse el servidor web.

    De forma predeterminada, `localhost`.

    ```python
    SENTRY_WEB_HOST = '0.0.0.0'  # vincular a todas las direcciones
    ```
  </markdown>
</ConfigValue>

<ConfigValue name="SENTRY_WEB_PORT" location="python">
  <markdown>
    El puerto en el que el servidor web debe escuchar.

    De forma predeterminada, `9000`.

    ```python
    SENTRY_WEB_PORT = 9000
    ```
  </markdown>
</ConfigValue>

<ConfigValue name="SENTRY_WEB_OPTIONS" location="python">
  <markdown>
    Un diccionario con opciones de configuración adicionales para pasar a uWSGI.

    De forma predeterminada, `{}`.

    ```python
    SENTRY_WEB_OPTIONS = {
        'workers': 10,
        'buffer-size': 32768,
    }
    ```
  </markdown>
</ConfigValue>

Además, si usas SSL, te conviene configurar las siguientes opciones en `sentry.conf.py`:

```python
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
```


<div id="github-app-integration">
  ## Integración de la aplicación de GitHub
</div>

<ConfigValue name="github-app.id" location="yaml"><markdown>

El ID de tu aplicación de GitHub.

</markdown></ConfigValue>

<ConfigValue name="github-app.name" location="yaml"><markdown>

El nombre de tu aplicación de GitHub.

</markdown></ConfigValue>

<ConfigValue name="github-app.webhook-secret" location="yaml"><markdown>

El secreto utilizado para verificar los eventos del webhook de la aplicación de GitHub.

</markdown></ConfigValue>

<ConfigValue name="github-app.private-key" location="yaml"><markdown>

La clave privada de tu aplicación; es mejor usar [multilínea](https://yaml-multiline.info/):

```yml
github-app.private-key: |
  -----BEGIN RSA PRIVATE KEY-----
  privatekeyprivatekeyprivatekeyprivatekey
  privatekeyprivatekeyprivatekeyprivatekey
  privatekeyprivatekeyprivatekeyprivatekey
  privatekeyprivatekeyprivatekeyprivatekey
  privatekeyprivatekeyprivatekeyprivatekey
  -----END RSA PRIVATE KEY-----
```

</markdown></ConfigValue>

<ConfigValue name="github-app.client-id" location="yaml"><markdown>

El ID de cliente de tu aplicación de GitHub.

</markdown></ConfigValue>

<ConfigValue name="github-app.client-secret" location="yaml"><markdown>

El secreto de cliente de tu aplicación de GitHub.

</markdown></ConfigValue>

<div id="azure-devops-integration">
  ## Integración con Azure DevOps
</div>

Primero, [crea una aplicación de Azure DevOps](https://app.vsaex.visualstudio.com/app/register)

<ConfigValue name="vsts.client-id" location="yaml"><markdown>

El ID de la aplicación (App ID) de tu aplicación de Azure DevOps

</markdown></ConfigValue>

<ConfigValue name="vsts.client-secret" location="yaml"><markdown>

El secreto de la aplicación (App Secret) de tu aplicación de Azure DevOps

</markdown></ConfigValue>