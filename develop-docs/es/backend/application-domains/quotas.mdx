---
title: Cuotas
sidebar_order: 160
---

Por la forma en que funciona Sentry, podrías encontrarte con demasiado tráfico entrante sin una buena manera de descartar los mensajes sobrantes. Hay varias soluciones para esto y, si te enfrentas a este problema, probablemente querrás aplicar todas.

<div id="event-quotas">
  ## Cuotas de eventos
</div>

Uno de los mecanismos principales para regular la carga de trabajo en Sentry es la configuración de cuotas de eventos. Estas pueden definirse por proyecto y a nivel del sistema, y permiten limitar la cantidad máxima de eventos aceptados en un período de 60 segundos.

<div id="configuration">
  ### Configuración
</div>

La implementación principal usa Redis y solo requiere que configures la información de conexión:

```python
SENTRY_QUOTAS = 'sentry.quotas.redis.RedisQuota'
```

De forma predeterminada, esto utilizará el clúster de Redis llamado `default`. Para usar un clúster diferente, proporciona la opción `cluster`, así:

```python
SENTRY_QUOTA_OPTIONS = {
    'cluster': 'quota',
}
```

Si tienes necesidades adicionales, puedes ampliar la clase base Quota, igual que lo hace la implementación de Redis.


<div id="system-wide-rate-limiting">
  ### Limitación de velocidad a nivel del sistema
</div>

Puedes configurar el límite máximo de solicitudes por minuto a nivel del sistema:

```yaml
system.rate-limit: 500
```

Por ejemplo, en el archivo `sentry.conf.py` de tu proyecto, puedes hacer algo como esto:

```python
from sentry.conf.server import SENTRY_OPTIONS


SENTRY_OPTIONS['system.rate-limit'] = 500
```

Como alternativa, si navegas a `/manage/settings/`, encontrarás un panel de administración con una opción para configurar el `Rate Limit`, que se almacena en tu implementación de cuota descrita arriba.


<div id="user-based-rate-limiting">
  ### Limitación de tasa por usuario
</div>

Puedes configurar el límite máximo por minuto por usuario:

```yaml
auth.user-rate-limit: 100
auth.ip-rate-limit: 100
```


<div id="project-based-rate-limiting">
  ### Limitación de frecuencia por proyecto
</div>

Para aplicar la limitación de frecuencia por proyecto, haz clic en `Settings` de un proyecto. En la pestaña `Client Keys (DSN)`, busca la clave a la que quieras aplicar la limitación y haz clic en el Button `Configure` correspondiente. Se abrirá la configuración de limitación de frecuencia específica de esa clave/proyecto.

<div id="notification-rate-limits">
  ## Límites de notificaciones
</div>

En algunos casos, puede preocupar limitar elementos como las notificaciones de correo electrónico salientes. Para ello, Sentry ofrece un subsistema de limitación de notificaciones que admite límites arbitrarios.

<div id="configuration">
  ### Configuración
</div>

Al igual que las cuotas de eventos, la implementación principal utiliza Redis:

```python
SENTRY_RATELIMITER = 'sentry.ratelimits.redis.RedisRateLimiter'
```

De forma predeterminada, esto utilizará el clúster de Redis llamado `default`. Para usar un clúster diferente, proporciona la opción `cluster`, de la siguiente manera:

```python
SENTRY_RATELIMITER_OPTIONS = {
    'cluster': 'ratelimiter',
}
```
