---
title: Selectores de PII
---

Los selectores te permiten restringir reglas a ciertas partes del evento. Esto es
útil para eliminar incondicionalmente ciertos datos por nombre de variable/campo del
evento, pero también se pueden usar para probar reglas de forma conservadora en datos reales.

El saneamiento de datos siempre actúa sobre la carga útil sin procesar del evento. Ten en cuenta que algunos
campos en la UI pueden llamarse de forma diferente en el esquema JSON. Al ver
un evento, siempre debería haber un enlace llamado &quot;JSON&quot; que te permita
ver lo que ve el saneador de datos.

Por ejemplo, lo que se llama &quot;Datos adicionales&quot; en la UI se llama `extra` en la
carga útil del evento. Para eliminar una clave específica llamada `foo`, escribirías:

```
[Eliminar] [Cualquier cosa] de [extra.foo]
```

Otro ejemplo. Sentry distingue dos tipos de mensajes de error: el mensaje de la excepción y el mensaje de registro de nivel superior. Aquí tienes un ejemplo de cómo se vería una carga útil de evento enviada por el SDK (y descargable desde la interfaz):

```json
{
  "logentry": {
    "formatted": "No se pudo implementar el dinglebop"
  },
  "exceptions": {
    "values": [
      {
        "type": "ZeroDivisionError",
        "value": "división entera o módulo entre cero"
      }
    ]
  }
}
```

Dado que el «mensaje de error» se toma del `value` de la `exception` y el
«mensaje» se toma de `logentry`, tendríamos que escribir lo siguiente para
eliminar ambos del evento:

```
[Eliminar] [Anything] de [exception.value]
[Eliminar] [Anything] de [logentry.formatted]
```


<div id="boolean-logic">
  ### Lógica booleana
</div>

Puedes combinar selectores usando lógica booleana.

- Antepone `!` para invertir el selector. `foo` coincide con la clave JSON `foo`,
  mientras que `!foo` coincide con todo excepto `foo`.
- Construye la conjunción (AND) usando `&&`, por ejemplo: `foo && !extra.foo` para
  hacer coincidir la clave `foo` excepto cuando está dentro de `extra`.
- Construye la disyunción (OR) usando `||`, por ejemplo: `foo || bar` para
  hacer coincidir `foo` o `bar`.

<div id="wildcards">
  ### Comodines
</div>

- `**` coincide con todas las subrutas, por lo que `foo.**` coincide con todas las claves JSON dentro de
  `foo`.
- `*` coincide con un único elemento de ruta, por lo que `foo.*` coincide con todas las claves JSON un
  nivel por debajo de `foo`.

<div id="value-types">
  ### Tipos de valores
</div>

Selecciona subsecciones por tipo de JSON usando lo siguiente:

- `$string` coincide con cualquier valor de cadena
- `$number` coincide con cualquier valor entero o de coma flotante
- `$datetime` coincide con cualquier campo del evento que represente una marca de tiempo
- `$array` coincide con cualquier valor de arreglo (array) JSON
- `$object` coincide con cualquier objeto JSON

Selecciona partes conocidas del esquema usando lo siguiente:

- `$exception` coincide con una única instancia de excepción en `{"exception": {"values": [...]}}`
- `$stacktrace` coincide con una instancia de rastro de pila (stack trace)
- `$frame` coincide con un marco (frame)
- `$request` coincide con el contexto de la solicitud HTTP de un evento
- `$user` coincide con el contexto del usuario de un evento
- `$logentry` (también aplica al atributo `message`)
- `$thread` coincide con una única instancia de hilo en `{"threads": {"values": [...]}}`
- `$breadcrumb` coincide con una única miga (breadcrumb) en `{"breadcrumbs": [...]}`
- `$span` coincide con un [span de traza]
- `$sdk` coincide con el contexto del SDK en `{"sdk": ...}`

<div id="examples">
  #### Ejemplos
</div>

- Eliminar `event.user`:

  ```
  [Remove] [Anything] from [$user]
  ```

- Eliminar todas las variables locales del marco:

  ```
  [Remove] [Anything] from [$frame.vars]
  ```

<div id="escaping-specal-characters">
  ### Escape de caracteres especiales
</div>

Si la clave del objeto que quieres hacer coincidir contiene espacios o caracteres especiales,
puedes usar comillas para escaparla:

```
[Eliminar] [Cualquier cosa] de [extra.'my special value']
```

Esto coincide con la clave `my special value` en *Datos adicionales*.

Para escapar `'` (comilla simple) dentro de comillas, sustitúyela por `''` (dos comillas):

```
[Quitar] [cualquier cosa] de [extra.'mi valor especial '' value']
```

Esto coincide con la clave `my special ' value` en *Datos adicionales*.

[trace span]: https://docs.sentry.io/product/performance/distributed-tracing/#spans
