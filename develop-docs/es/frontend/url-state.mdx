---
title: Estado de la URL
sidebar_order: 85
---

El **estado de la URL** es cualquier parte del estado que debe reflejarse en la URL del navegador (normalmente como parámetros de consulta). Si una persona recarga, comparte un enlace, navega con atrás/adelante o abre la página en otra pestaña, el estado debe restaurarse desde la URL. Ejemplos típicos:

- Consultas y filtros de búsqueda (p. ej., `?project=11276&statsPeriod=14d`)
- Paginación y ordenación (p. ej., `?page=3&sort=price`)
- Controles de vista de la interfaz (pestaña seleccionada, zoom del mapa, modo de diseño)
- Conmutadores y flags de funcionalidades ligeras

<Alert level="warning">
  No pongas datos sensibles ni voluminosos en la URL. Manténla legible y acotada.
</Alert>

<div id="nuqs">
  ## nuqs
</div>

De ahora en adelante, usaremos [nuqs](https://nuqs.dev/) para gestionar el estado de la URL en React. Nuqs es un gestor de estado de parámetros de búsqueda con tipado seguro para React que expone una API similar a `useState` y que se sincroniza con la URL. También gestiona con elegancia los valores que no se pueden analizar, admite valores predeterminados y limita la frecuencia de las actualizaciones a la URL desde el primer momento. Nuqs incluye analizadores y serializadores integrados para tipos de estado comunes y es personalizable, por lo que podemos crear los nuestros.

<div id="parsers">
  ## Parsers
</div>

De forma predeterminada, todo se interpreta como `string`. Se recomienda usar cualquiera de los parsers integrados o escribir uno propio en lugar de hacer aserciones o coerciones de tipos en el componente. Los tipos pueden inferirse a partir de lo que devuelvan los parsers, y estos también se encargan de la serialización de vuelta a la URL.

```tsx
// se analiza como cadena de forma predeterminada
const [cursor, setCursor] = useQueryState('cursor')

// con un analizador predefinido
const [page, setPage] = useQueryState('page', parseAsNumber)

// con un analizador personalizado
const [mailbox, setMailbox] = useQueryState('mailbox', parseAsMailbox);
```


<div id="array-parsing">
  ### Análisis de arrays
</div>

Para los `SingleParsers`, `nuqs` solo toma en cuenta el primer valor de un parámetro de consulta en la URL. Esto significa que los arrays se representan como un único valor con un separador.

```jsx
useQueryState('project', parseAsArrayOf(parseAsInteger))
// ?project=1,2,3
```

Como normalmente queremos representar los valores de los arrays como varios parámetros de URL, debemos usar `parseAsNativeArrayOf`, que es un `MultiParser`:

```jsx
useQueryState('foo', parseAsNativeArrayOf(parseAsInteger))
// ?project=1&project=2&project=3
```


<div id="default-options">
  ## Opciones predeterminadas
</div>

De forma predeterminada, `nuqs` **reemplazará** la entrada actual del historial **sin desplazarse** hasta la parte superior de la página. Esto se puede personalizar en los puntos de uso:

```jsx
const [state, setState] = useQueryState(
  'foo',
  {
   ...parseAsString,
    history: 'push',
    scroll: true,
  }
)
```

También puedes pasar opciones como segundo argumento del «state setter»:

```jsx
setState('bar', { history: 'push', scroll: true })
```
