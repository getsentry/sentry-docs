---
title: Módulo de caché
---

La integración de caché del SDK es independiente del motor subyacente que se utilice. En la mayoría de los casos, el SDK instrumentará las abstracciones de caché existentes en determinados frameworks o bibliotecas.

<div id="span-conventions">
  ## Convenciones de span
</div>

<div id="span-operations">
  ### Operaciones de span
</div>

| Operación de span | Descripción |
|:--|:--|
| `cache.get` | Se recupera uno o varios elementos de la caché |
| `cache.put` | Se escriben uno o varios elementos en la caché |
| `cache.remove` | Se eliminan uno o varios elementos de la caché |
| `cache.flush` | Se elimina todo el contenido de la caché |

<div id="span-description">
  ### Descripción del span
</div>

La descripción de los spans de caché debe configurarse con la(s) clave(s) de caché, separadas por comas; p. ej., `posts` o `article1, article2`.

<div id="span-data">
  ### Datos del span
</div>

| Clave de datos | Tipo | Descripción | Condiciones
|:--|:--|:--|:--|
| `cache.hit` | bool | acierto o fallo de caché | requerido solo en operaciones de lectura (`cache.get`)
| `cache.key` | array | la(s) clave(s) involucrada(s) en la operación | requerido solo en operaciones que tienen una clave

Los siguientes atributos de datos solo deben establecerse si los expone la abstracción de caché instrumentada o si se pueden recuperar con una sobrecarga mínima.

| Clave de datos | Tipo | Descripción | Condiciones
|:--|:--|:--|:--|
| `cache.item_size ` | int | el tamaño de los elementos leídos/escritos/eliminados en `bytes` | solo en operaciones que tienen una clave
| `cache.success ` | bool | si la operación ha tenido éxito o ha fallado |
| `cache.ttl ` | int | el tiempo de vida en `seconds` | solo en operaciones que tienen una clave
| `network.peer.address` | string | el nombre de host de la instancia de caché |
| `network.peer.port` | int | el puerto usado por la instancia de caché |

<div id="instrumentation">
  ## Instrumentación
</div>

Cuando una aplicación realiza una operación de caché, el SDK crea un nuevo span basado en esa operación y encapsula cualquier span del motor subyacente como hijo directo.

**Ejemplo**

```
item = Cache::get('posts')
```

Esto debería generar los siguientes spans, suponiendo un acierto de caché con una instancia de Redis como backend.

```
<span op:"cache.get" description:"posts" cache.key:"posts" cache.hit=true>
	<span op:db.redis description:"GET posts"></span>
</span>
```


<div id="sdk-options">
  ### Opciones del SDK
</div>

Si resulta conveniente, el SDK puede ofrecer opcionalmente la opción `cache_prefixes`, que envuelve las instrumentaciones existentes en un span de caché.
Esto probablemente solo será útil si se usa Redis como caché.

```
Sentry.init({
  integrations: [
    Sentry.redisIntegration({
	    cachePrefixes: ['posts:', 'authors:'],
    }),
  ],
})
```

En este ejemplo, todas las consultas de Redis que utilicen claves que coincidan con `posts:*` y `authors:*` se incluirán en el span `cache.*`.
