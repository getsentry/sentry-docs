---
title: Grabaciones de reproducción
---

Una grabación de reproducción es una lista de instrucciones que el reproductor ejecuta para el espectador. Esta página documenta los eventos personalizados que se usan además de los eventos proporcionados por [rrweb](https://github.com/rrweb-io/rrweb), la biblioteca de grabación que impulsa Session Replay.

El evento de grabación es un objeto con las siguientes propiedades obligatorias:

`type`

: **EventTypeEnum** El `type` describe qué tipo de evento es. Consulta el enum a continuación.

```
EventTypeEnum {
  DomContentLoaded,
  Load,
  FullSnapshot,
  IncrementalSnapshot,
  Meta,
  Custom,
  Plugin,
}
```

`timestamp`

: **float** La marca de tiempo (en milisegundos) en la que se produce el evento

`data`

: **unknown** El esquema de `data` depende del `type`. Consulta los [tipos base](https://github.com/rrweb-io/rrweb/blob/master/packages/types/src/index.ts) o los [tipos personalizados](https://github.com/getsentry/sentry-javascript/blob/master/packages/replay-internal/src/types/replayFrame.ts) de Sentry.


<div id="custom-events">
  ## Eventos personalizados
</div>

Los eventos personalizados de Sentry añaden contexto adicional a la reproducción para ayudar al usuario a depurar problemas. Los eventos personalizados tienen el siguiente formato para la propiedad `data` del evento:

`tag`

: **string** La etiqueta se utiliza para describir el “tipo” de evento personalizado. Esto determinará cómo se usa el evento en la interfaz de usuario.

`payload`

: **object** El `payload` es similar al atributo `data` de nivel superior, cuyo esquema depende de la `tag`.

Además de las referencias de TypeScript vinculadas arriba, las siguientes secciones describen el `payload` esperado para los eventos personalizados.

<div id="options">
  ### Opciones
</div>

Este evento de grabación se usa para registrar las opciones de configuración del SDK. Solo debe enviarse en el primer segmento, ya que no esperamos que las opciones cambien durante el ciclo de vida de una reproducción. Consulta [este issue](https://github.com/getsentry/sentry-javascript/issues/7140) para más contexto sobre la decisión de enviarlo como un evento de grabación en lugar de parte de `"replay_event"`. Ten en cuenta que estas opciones suelen usarse internamente para depuración y no como una función orientada al cliente (p. ej., no hay forma de consultar/filtrar reproducciones usando estas opciones).

La carga útil de `"options"` es un registro de nombre de configuración -&gt; valor de configuración. No hay un esquema definido, ya que las opciones pueden variar según el SDK.

```json
{
  "type": 5,
  "timestamp": 1709218280301,
  "data": {
    "tag": "options",
    "payload": {
      "shouldRecordCanvas": false,
      "sessionSampleRate": 1,
      "errorSampleRate": 1,
      "useCompressionOption": true,
      "blockAllMedia": false,
      "maskAllText": false,
      "maskAllInputs": false,
      "useCompression": false,
      "networkDetailHasUrls": false,
      "networkCaptureBodies": true,
      "networkRequestHasHeaders": true,
      "networkResponseHasHeaders": true
    }
  }
}
```


<div id="breadcrumbs">
  ### Migas de pan
</div>

Se llaman así porque el SDK web las intercepta y las reenvía como un evento de grabación personalizado. Tienen la misma estructura descrita en la <Link to="/sdk/data-model/event-payloads/breadcrumbs/">interfaz de breadcrumbs</Link>.

```json
{
  "type": 5,
  "timestamp": 1710853999781,
  "data": {
    "tag": "breadcrumb",
    "payload": {
      "timestamp": 1710853999.781,
      "type": "default",
      "category": "navegación",
      "data": {
        "from": "/issues/4893218638/",
        "to": "/performance/trace/b6e75da452bf40ee8330af41c5989545/"
      }
    }
  }
}
```


<div id="performancespan">
  ### performanceSpan
</div>

Al igual que las migas de pan, `"performanceSpan"` tiene una interfaz similar a los Spans. A continuación se muestra un ejemplo de una solicitud de red realizada en el navegador. Contamos con instrumentación adicional para capturar los payloads de la solicitud y la respuesta cuando se configura para ello.

```json
{
  "type": 5,
  "timestamp": 1710854008431,
  "data": {
    "tag": "performanceSpan",
    "payload": {
      "op": "resource.fetch",
      "description": "https://us.sentry.io/api/0/projects/foo/javascript/events/eea92bc02315448591e159d8138ef3e8/owners/",
      "startTimestamp": 1710854008.431,
      "endTimestamp": 1710854009.234,
      "data": {
        "method": "GET",
        "statusCode": 200,
        "request": {
          "headers": {
            "content-type": "application/json",
            "accept": "application/json; charset=utf-8",
            "sentry-trace": "b07d0e356aa1477bb279d9fe5680fcd0-83881f299ca64b4f-1"
          }
        },
        "response": {
          "headers": {
            "content-length": "36",
            "content-type": "application/json"
          },
          "size": 36,
          "body": {
            "owners": [],
            "rule": null,
            "rules": []
          }
        }
      }
    }
  }
},

```


<div id="mobile-replay-events">
  ## Eventos de reproducción en dispositivos móviles
</div>

Las reproducciones en dispositivos móviles se capturan como video en lugar de una serie de mutaciones. Para admitir reproducciones móviles, se requiere el siguiente evento personalizado:

| property               | type      | description                                                                                                                          |
| ---------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| type                   | `5`       | Evento personalizado                                                                                                                 |
| data.tag               | `"video"` | La cadena `"video"`                                                                                                                  |
| data.payload.duration  | integer   | La duración del video en milisegundos                                                                                                |
| data.payload.segmentId | integer   | El ID del segmento. Debe ser el mismo que el ID del segmento de la reproducción. La IU lo usará para obtener el video desde la API de Sentry |

```json
{
  "type": 5,
  "timestamp": 1710854008431,
  "data": {
    "tag": "video",
    "payload": {
      "duration": 5000,
      "segmentId": 0
    }
  }
}
```


<div id="additional-events">
  ### Eventos adicionales
</div>

Las repeticiones en dispositivos móviles siguen el mismo protocolo de rrweb, pero como se capturan en video, la mayoría de los eventos de rrweb no aplican. A continuación se detallan los que sí.

<div id="meta-event">
  #### Evento Meta
</div>

Debe emitirse al inicio de una reproducción (es decir, en el primer segmento) y cuando cambien las dimensiones del viewport del usuario.

| propiedad   | tipo     | descripción                        |
| ----------- | -------- | ---------------------------------- |
| type        | `4`      | evento «Meta»                      |
| data.href   | string   | El URI actual                      |
| data.width  | integer  | El ancho del viewport actual       |
| data.height | integer  | La altura del viewport actual      |

```json
{
  "type": 4,
  "timestamp": 1710854008431,
  "data": {
    "href": "file://screen",
    "width": 360,
    "height": 800
  }
}
```


<div id="touch-interactions">
  #### Interacciones táctiles
</div>

| property         | type    | description                                                                                                                                                                                                                 |
| ---------------- | ------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| type             | `3`     | Evento de “mutación incremental”                                                                                                                                                                                            |
| data.source      | `2`     | “Interacción con el mouse”                                                                                                                                                                                                  |
| data.type        | integer | Enumeración [MouseInteraction](https://github.com/getsentry/rrweb/blob/0722035e75a9aeedd716107cbcc949eba6da2a6a/packages/types/src/index.ts#L361-L373). TouchStart = 7, TouchMove_Departed = 8, TouchEnd = 9, TouchCancel = 10 |
| data.id          | integer | ID único del evento                                                                                                                                                                                                          |
| data.x           | integer | Coordenada x del evento táctil                                                                                                                                                                                              |
| data.y           | integer | Coordenada y del evento táctil                                                                                                                                                                                              |
| data.pointerType | `2`     | Enumeración [PointerTypes](https://github.com/getsentry/rrweb/blob/0722035e75a9aeedd716107cbcc949eba6da2a6a/packages/types/src/index.ts#L375-L379). Touch = 2                                                              |