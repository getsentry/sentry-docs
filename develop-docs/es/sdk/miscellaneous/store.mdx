---
title: Endpoint de store (obsoleto)
sidebar_order: 2
---

<Alert title="Nota" level="warning">
  <markdown>
    El endpoint `/store` está obsoleto. Todos los datos deben enviarse al endpoint `/envelope`. Consulta [Envelopes](/es/sdk/data-model/envelopes/).
  </markdown>
</Alert>

El endpoint de store se usa para enviar cargas útiles de eventos JSON a Sentry. Se encuentra en:

```
POST /api/<project_id>/store/
```

<div id="building-the-json-packet">
  ## Creación del paquete JSON
</div>

El cuerpo de la publicación es una representación en texto de un objeto JSON. Por ejemplo,
si se incluye un evento Exception, un cuerpo JSON básico podría verse como lo
siguiente:

```json
{
  "event_id": "fc6d8c0c43fc4630ad850ee518f1b9d0",
  "transaction": "my.module.function_name",
  "timestamp": "2011-05-02T17:41:36",
  "tags": {
    "ios_version": "4.0"
  },
  "exception": {"values":[{
    "type": "SyntaxError",
    "value": "¡¿Quéee?!",
    "module": "__builtins__"
  }]}
}
```

El cuerpo del evento puede incluir atributos o valores de interfaz. La diferencia
entre ambos es que los atributos son pares clave/valor muy básicos (en su mayor
parte), mientras que las interfaces son elementos de interfaz con un estilo más rico. Ejemplos de
atributos son `event_id` o `tags`, mientras que la clave `exception` corresponde a una interfaz.

Para ver la lista de todos los atributos e interfaces admitidos en las cargas útiles de eventos, consulta <Link to="/sdk/data-model/event-payloads/">Cargas útiles de eventos</Link>.

<div id="http-headers">
  ## Encabezados HTTP
</div>

El endpoint de almacenamiento admite únicamente cargas JSON. Aunque el endpoint no lo exige, recomendamos enviar el tipo MIME válido para cargas JSON:

```
Content-Type: application/json
```

<div id="request-compression">
  ## Compresión de solicitudes
</div>

Además del <Link to="/sdk/overview#request-compression">`content-encoding`
admitido por todos los endpoints de ingesta</Link>, este endpoint acepta JSON
comprimido con zlib dentro de un contenedor en base64, que se detecta
independientemente del encabezado. Esto te permite enviar eventos comprimidos
en entornos muy restrictivos. En este caso, no configures el encabezado
`content-encoding`.

En pseudocódigo, esto se corresponde con:

```py
comprimido = base64_encode(zlib.compress(payload))
```

<div id="size-limits">
  ## Límites de tamaño
</div>

La ingesta de eventos establece límites al tamaño de una solicitud de almacenamiento:

* *200 KB* para una solicitud de almacenamiento comprimida
* *1 MB* para la carga útil completa del evento tras la descompresión

<div id="a-working-example">
  ## Un ejemplo funcional
</div>

En resumen, deberías enviar una solicitud HTTP POST a un servidor web de Sentry, donde la ruta es `BASE_URI/api/PROJECT_ID/store/`. Con el siguiente DSN:

```
https://b70a31b3510c4cf793964a185cfe1fd0:b7d80b520139450f903720eb7991bf3d@sentry.example.com/1
```

El cuerpo de la solicitud debería tener el siguiente aspecto:

```http
POST /api/1/store/ HTTP/1.1
User-Agent: sentry-python/1.0
Content-Type: application/json
X-Sentry-Auth: Sentry sentry_version=7,
  sentry_key=b70a31b3510c4cf793964a185cfe1fd0,
  sentry_secret=b7d80b520139450f903720eb7991bf3d,
  sentry_client=sentry-python/1.0

{
  "event_id": "fc6d8c0c43fc4630ad850ee518f1b9d0",
  "culprit": "my.module.function_name",
  "timestamp": "2011-05-02T17:41:36",
  "message": "SyntaxError: ¡Whaaaaat!",
  "exception": {
    "values": [
      {
        "type": "SyntaxError",
        "value": "¡Whaaaaat!",
        "module": "__builtins__"
      }
    ]
  }
}
```

<div id="creating-events-from-sample-files">
  ### Creación de eventos a partir de archivos de ejemplo
</div>

Tenemos varias cargas útiles de ejemplo en el código base que son útiles cuando quieres
simular errores en diferentes plataformas pero no cuentas con una aplicación disponible en esa plataforma.

```shell
cd ~/code/sentry

# Dado un DSN: http://3385d72507004b2b8129b2cb963d79b2@dev.getsentry.net:8000/1
export SENTRY_KEY="3385d72507004b2b8129b2cb963d79b2"

# Crear un evento nativo
curl -v -XPOST http://${SENTRY_KEY}@dev.getsentry.net:8000/api/1/store/ \
 -H 'Content-Type: application/json' \
 -H "X-Sentry-Auth: Sentry sentry_version=7,sentry_client=sentry-curl/1.0,sentry_key=${SENTRY_KEY}" \
 -d "$(cat src/sentry/data/samples/native.json)"

# Crear un evento de minidump
curl -v -X POST "http://dev.getsentry.net:8000/api/1/minidump/?sentry_key=${SENTRY_KEY}" \
 -F upload_file_minidump=@tests/fixtures/native/windows.dmp \
 -F upload_file_makefile=@Makefile \
 -F upload_file_license=@LICENSE

# Crear un evento de Python
curl -v -XPOST http://${SENTRY_KEY}@dev.getsentry.net:8000/api/1/store/ \
 -H 'Content-Type: application/json' \
 -H "X-Sentry-Auth: Sentry sentry_version=7,sentry_client=sentry-curl/1.0,sentry_key=${SENTRY_KEY}" \
 -d "$(cat src/sentry/data/samples/python.json)"
```
