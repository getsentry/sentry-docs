---
title: Trace Propagation Cheat Sheet
---

This is a cheat sheet where you can see how the trace propagation work in SDKs in different scenarios.

| SCENARIO:<br/>Incoming trace in `sentry-trace/baggage` headers | SCENARIO:<br/>Incoming sampled flag in `sentry-trace/baggage` header | SCENARIO:<br/>`traces_propagation_targets` are matching? | SCENARIO:<br/>`traces_sample_rate` setting | OUTCOME:<br/>Send Spans to Sentry? | OUTCOME:<br/>Outgoing Requests Have Trace? (`sentry-trace/baggage` are present) | OUTCOME:<br/>Continue Incoming Trace? (outgoing `trace_id` is the incoming `trace_id`) |
| -------------------------------------------------------------- | :------------------------------------------------------------------: | :------------------------------------------------------: | :----------------------------------------: | :--------------------------------: | :-----------------------------------------------------------------------------: | :------------------------------------------------------------------------------------: |
| not present                                                    |                                  -                                   |                           yes                            |                    null                    |                 no                 |                                       yes                                       |                                           -                                            |
| not present                                                    |                                  -                                   |                           yes                            |                     0                      |                 no                 |                                       yes                                       |                                           -                                            |
| not present                                                    |                                  -                                   |                           yes                            |                     1                      |                yes                 |                                       yes                                       |                                           -                                            |
| --------------------                                           |                         --------------------                         |                   --------------------                   |            --------------------            |        --------------------        |                              --------------------                               |                                  --------------------                                  |
| not present                                                    |                                  -                                   |                            no                            |                    null                    |                 no                 |                                       no                                        |                                           -                                            |
| not present                                                    |                                  -                                   |                            no                            |                     0                      |                 no                 |                                       no                                        |                                           -                                            |
| not present                                                    |                                  -                                   |                            no                            |                     1                      |                yes                 |                                       no                                        |                                           -                                            |
| --------------------                                           |                         --------------------                         |                   --------------------                   |            --------------------            |        --------------------        |                              --------------------                               |                                  --------------------                                  |
| present                                                        |                           empty (deferred)                           |                           yes                            |                    null                    |                 no                 |                                       yes                                       |                                          yes                                           |
| present                                                        |                           empty (deferred)                           |                           yes                            |                     0                      |                 no                 |                                       yes                                       |                                          yes                                           |
| present                                                        |                           empty (deferred)                           |                           yes                            |                     1                      |                yes                 |                                       yes                                       |                                          yes                                           |
| --------------------                                           |                         --------------------                         |                   --------------------                   |            --------------------            |        --------------------        |                              --------------------                               |                                  --------------------                                  |
| present                                                        |                                  1                                   |                           yes                            |                    null                    |                 no                 |                                       yes                                       |                                          yes                                           |
| present                                                        |                                  1                                   |                           yes                            |                     0                      |                yes                 |                                       yes                                       |                                          yes                                           |
| present                                                        |                                  1                                   |                           yes                            |                     1                      |                yes                 |                                       yes                                       |                                          yes                                           |
| --------------------                                           |                         --------------------                         |                   --------------------                   |            --------------------            |        --------------------        |                              --------------------                               |                                  --------------------                                  |
| present                                                        |                                  0                                   |                           yes                            |                    null                    |                 no                 |                                       yes                                       |                                          yes                                           |
| present                                                        |                                  0                                   |                           yes                            |                     0                      |                 no                 |                                       yes                                       |                                          yes                                           |
| present                                                        |                                  0                                   |                           yes                            |                     1                      |                 no                 |                                       yes                                       |                                          yes                                           |
| --------------------                                           |                         --------------------                         |                   --------------------                   |            --------------------            |        --------------------        |                              --------------------                               |                                  --------------------                                  |
| present                                                        |                           empty (deferred)                           |                            no                            |                    null                    |                 no                 |                                       no                                        |                                           -                                            |
| present                                                        |                           empty (deferred)                           |                            no                            |                     0                      |                 no                 |                                       no                                        |                                           -                                            |
| present                                                        |                           empty (deferred)                           |                            no                            |                     1                      |                yes                 |                                       no                                        |                                           -                                            |
| --------------------                                           |                         --------------------                         |                   --------------------                   |            --------------------            |        --------------------        |                              --------------------                               |                                  --------------------                                  |
| present                                                        |                                  1                                   |                            no                            |                    null                    |                 no                 |                                       no                                        |                                           -                                            |
| present                                                        |                                  1                                   |                            no                            |                     0                      |                yes                 |                                       no                                        |                                           -                                            |
| present                                                        |                                  1                                   |                            no                            |                     1                      |                yes                 |                                       no                                        |                                           -                                            |
| --------------------                                           |                         --------------------                         |                   --------------------                   |            --------------------            |        --------------------        |                              --------------------                               |                                  --------------------                                  |
| present                                                        |                                  0                                   |                            no                            |                    null                    |                 no                 |                                       no                                        |                                           -                                            |
| present                                                        |                                  0                                   |                            no                            |                     0                      |                 no                 |                                       no                                        |                                           -                                            |
| present                                                        |                                  0                                   |                            no                            |                     1                      |                 no                 |                                       no                                        |                                           -                                            |

## FAQ

**Why are we sometimes sampling even if `traces_sample_rate` is 0? Why are we sometimes unsampling if `traces_sample_rate` is 1?**

A `traces_sample_rate` between 0 and 1 is only taken into account if there is no incoming trace and the SDK has to make its own sampling decision. If there is an incoming trace, the parent sampling decision always takes precedence over `traces_sample_rate`.
