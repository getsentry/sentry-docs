---
title: Tracing
sidebar_order: 30
---

## Scenarios
In the Native SDK we have the following scenarios, showcasing how trace-context data flows:

### Tracing without Performance
In Tracing without Performance ([TwP](https://develop.sentry.dev/sdk/telemetry/traces/tracing-without-performance/)) the SDK does not create spans. However, we still want to connect events across boundaries (e.g. through `sentry_set_trace()`), so we use a `propagation_context` to store the relevant data (a `trace_id` and a `span_id`) which gets generated during SDK initialization.

-- TODO add images of the scenarios (plain init | set_trace)

### Tracing with Performance
When any [traces sampling option](https://docs.sentry.io/platforms/native/configuration/sampling/#configuring-the-transaction-sample-rate) is enabled, the SDK can send spans. Just like in TwP, we still use a `propagation_context` to store the relevant data (a `trace_id` and a `span_id`). Now, events and spans can be connected through a common `trace_id` and, if a span is scoped, it will additionally be connected hierarchically to the event through the `span_id`. By default, all spans and events will inherit the same `trace_id` from the `propagation_context` as generated during SDK initialization.

Downstream SDKs are still able to use `sentry_set_trace()`, which updates the `propagation_context` with a new `trace_id`, `span_id` and `parent_span_id`. Root spans (=transactions) will pick up the data currently in the `propagation_context`, but this can still be overwritten by `sentry_transaction_context_update_from_header()`. Child spans will inherit the trace data from their parent. While a span is scoped, any event will use that span's data. If no spans are scoped, events will just use the `propagation_context` data directly.

-- TODO add images of the scenarios (same 2 as TwP, maybe not needed? | tx->set_trace->event | tx->set_trace->scope(tx)->event->finish(tx)->event | tx->event )
