Describes a single output chunk from an AI agent's streaming response. Each logical message produced by the agent (assistant message, tool use message, etc.) becomes one output chunk span. For streamed assistant messages that arrive as incremental events (start, delta, stop), all events are accumulated into a single chunk span.

Output chunk spans are always children of an [Invoke Agent Span](#invoke-agent-span).

- The span `op` MUST be `"gen_ai.output_chunk"`.
- The span `name` SHOULD be `"output_chunk {gen_ai.agent.name}"`. (e.g. `"output_chunk Weather Agent"`)
- The `gen_ai.operation.name` attribute MUST be `"output_chunk"`.
- The `gen_ai.agent.name` attribute SHOULD be set to the agent's name. (e.g. `"Weather Agent"`)
- All [Common Span Attributes](#common-span-attributes) SHOULD be set (all `required` common attributes MUST be set).

Additional attributes on the span:

| Data Attribute                         | Type    | Requirement Level | Description                                                                          | Example                                                                                            |
| :------------------------------------- | :------ | :---------------- | :----------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------- |
| `gen_ai.output.messages`               | string  | optional          | Stringified array of message objects representing the chunk's content. **[0]**, **[1]** | `"[{\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"...\"}]}]"` |
| `gen_ai.response.model`               | string  | optional          | The concrete response model.                                                         | `"claude-sonnet-4-20250514"`                                                                  |
| `gen_ai.response.id`                  | string  | optional          | Unique identifier for the message.                                                   | `"msg_abc123"`                                                                                     |
| `gen_ai.response.streaming`           | boolean | optional          | Whether this chunk was part of a streamed response.                                  | `true`                                                                                             |
| `gen_ai.usage.input_tokens`           | int     | optional          | The number of input tokens used for this chunk.                                      | `60`                                                                                               |
| `gen_ai.usage.output_tokens`          | int     | optional          | The number of output tokens used for this chunk.                                     | `130`                                                                                              |
| `gen_ai.usage.total_tokens`           | int     | optional          | The sum of input and output tokens.                                                  | `190`                                                                                              |

- **[0]:** Span attributes only allow primitive data types. This means you need to use a stringified version of a list of dictionaries. Do NOT set `[{"foo": "bar"}]` but rather the string `"[{\"foo\": \"bar\"}]"`.
- **[1]:** Each message item uses the format `{role:"", parts:[...]}`. The `role` can be `"user"`, `"assistant"`, `"tool"`, or `"system"`.

**Note:** Cost attributes (`gen_ai.cost.*`) should NOT be set on output chunk spans. Cost is only tracked on the parent Invoke Agent span.
