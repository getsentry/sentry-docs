---
draft: false
categories: []
toc: true
title: Advanced Usage
tags: []
---

## Capturing uncaught exceptions on macOS

By default, MacOS applications do not crash whenever an uncaught exception occurs. To enable this with Sentry:

- Open the application's `Info.plist` file
- Search for `Principal class` (the entry is expected to be NSApplication)
- Replace `NSApplication` with `SentryCrashExceptionApplication`

## Dealing with Scopes

There are three different ways to interact with Scopes in the SDK. Either using [configureScope](#scope-configureScope), [passing a scope](#scope-pass) or using the [scope callback](#scope-callback).

### configureScope {#scope-configureScope}

Using `SentrySDK:configureScope` lets you set context data globally, which will be attached to all future events.

<PlatformContent includePath="configure-scope" />

### Passing a Scope Instance {#scope-pass}

Setting an instance of Scope is helpful when you want to completely control what should be attached to the event.

<PlatformContent includePath="cocoa/pass-scope" />

### Using Scope Callback {#scope-callback}

To maintain global state, but mutate context data for one capture call, use the Scope callback:

<PlatformContent includePath="cocoa/scope-callback" />

## Integrations

The SDK enables all integrations by default. To disable any of them:

<PlatformContent includePath="cocoa/integrations" />

#### SentryCrashIntegration

This integration is the core part of the SDK. It hooks into all signal and exception handlers to capture uncaught errors or crashes. This integration is also responsible for adding most of the device information to events. If it is disabled, you will not receive crash reports, nor will events contain much device data.

#### SentryAutoBreadcrumbTrackingIntegration

This integration will swizzle some methods to create breadcrumbs e.g.: for `UIApplicationDidReceiveMemoryWarningNotification`, `sendAction:to:from:forEvent:` (UI interactions) or `viewDidAppear:` those breadcrumbs will be attached to your events.

## In App Stack Frames

To highlight essential frames of your stacktrace, sentry.io displays frames related to only your application by default. Sentry marks such frames as inApp.
To achieve this, the SDK sets the `inApp` flag for frames originating from only the main executable by using the [CFBundleExecutable].
Public frameworks such as UIKitCore, CoreFoundation, GraphicsServices, and so forth, are always marked as `not inApp`.
For private frameworks, such as Sentry, dynamic or static frameworks differ. If you are not familiar with these terms, we recommend
reading [Dynamic Library Programming Topics].

[CFBundleExecutable]: https://developer.apple.com/documentation/bundleresources/information_property_list/cfbundleexecutable
[Dynamic Library Programming Topics]: https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/DynamicLibraries/000-Introduction/Introduction.html

### Dynamic Frameworks

If you use dynamic frameworks, such as, for example, Sentry, the SDK marks these as `not inApp`. In case you have a private framework that should be `inApp`,
you can use <PlatformLink to="/configuration/options/#in-app-include">inAppInclude</PlatformLink> or <PlatformLink to="/configuration/options/#in-app-exclude">inAppExclude</PlatformLink> of the SentryOptions.



```swift {tabTitle:Swift}
import Sentry

SentrySDK.start { options in
    options.dsn = "___PUBLIC_DSN___"

    // The SDK marks all frameworks starting with MyBusinessLogic as inApp
    options.add(inAppInclude: "MyBusinessLogic")

    // The SDK marks all frameworks starting with MyFramework as not inApp
    options.add(inAppExclude: "MyFramework")
}
```

```objc {tabTitle:Objective-C}
@import Sentry;

[SentrySDK startWithConfigureOptions:^(SentryOptions *options) {
    options.dsn = @"___PUBLIC_DSN___";

    // The SDK marks all frameworks starting with MyBusinessLogic as inApp
    [options addInAppInclude:@"MyBusinessLogic"];

    // The SDK marks all framework starting with MyFramework as not inApp
    [options addInAppExclude:@"MyFramework"];
}];
```

### Static Frameworks

When using static frameworks, the frameworks end up in the main executable. Therefore, the SDK currently can't detect if a frame of the main executable
originates from your application or a private framework and marks all of them as `inApp`. To improve your experience, use <PlatformLink to="/data-management/event-grouping/stack-trace-rules/#mark-in-app-frames">stack trace rules</PlatformLink> to tell Sentry which should be marked as `not inApp`.

## Known Limitations

- Since version 6.0.0 of this SDK, Sentry on-premises version greater than version 20.6.0 is required. If you are using sentry.io, no action is needed.
- We recommend upgrading to 6.x.x to get reliable <PlatformLink to="/configuration/releases/">Release Health</PlatformLink> data,
as we added many improvements over 5.x.x, in which we introduced Release Health.
- If you're currently using a version between 6.0.2 and 6.0.8, we **highly recommend** you upgrade to the latest version to avoid [a regression](https://github.com/getsentry/sentry-cocoa/pull/786) that affected the quality of the stacktraces and error messages, which was fixed in 6.0.9.
- To use Sentry via Carthage on Macs with Apple Silicon, please use Carthage >= 0.37.0, which introduced support for XCFramework needed for Apple Silicons. Learn more in the [release notes for Carthage 0.37.0](https://github.com/Carthage/Carthage/releases/tag/0.37.0).
