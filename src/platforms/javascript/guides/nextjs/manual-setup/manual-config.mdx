---
title: Manual Configuration
sidebar_order: 1
description: "Learn about manual configuration of the SDK."
---

If you canâ€™t (or prefer not to) run the [configuration step](/platforms/javascript/guides/nextjs/#configure), you can follow the instructions below to configure your application.

## Set Initialization Config Files

Create two files in the root directory of your project, `sentry.client.config.js` and `sentry.server.config.js`, and include in them your initialization code for the client-side SDK and server-side SDK, respectively.

For the client configuration:

```javascript {filename:sentry.client.config.js}
import * as Sentry from "@sentry/nextjs";

const SENTRY_DSN = process.env.SENTRY_DSN || process.env.NEXT_PUBLIC_SENTRY_DSN;

Sentry.init({
  dsn: SENTRY_DSN || "___PUBLIC_DSN___",
  // ...
  // Note: if you want to override the automatic release value, do not set a
  // `release` value here - use the environment variable `SENTRY_RELEASE`, so
  // that it will also get attached to your source maps
});
```

And the server configuration:

```javascript {filename:sentry.server.config.js}
import * as Sentry from "@sentry/nextjs";

const SENTRY_DSN = process.env.SENTRY_DSN || process.env.NEXT_PUBLIC_SENTRY_DSN;

Sentry.init({
  dsn: SENTRY_DSN || "___PUBLIC_DSN___",
  // ...
  // Note: if you want to override the automatic release value, do not set a
  // `release` value here - use the environment variable `SENTRY_RELEASE`, so
  // that it will also get attached to your source maps
});
```

You can include your DSN directly in these two files, or provide it in either of two environment variables, `SENTRY_DSN` or `NEXT_PUBLIC_SENTRY_DSN`.

## Extend Default Webpack Usage for Source Maps

Extend the default Next.js usage of Webpack to generate source maps and upload them to Sentry. Include the following in `next.config.js`:

```javascript {filename:next.config.js}
const SentryWebpackPlugin = require("@sentry/webpack-plugin");
const fs = require("fs");

const {
  VERCEL_GITHUB_COMMIT_SHA,
  VERCEL_GITLAB_COMMIT_SHA,
  VERCEL_BITBUCKET_COMMIT_SHA,
  SENTRY_URL,
  SENTRY_ORG,
  SENTRY_PROJECT,
  SENTRY_AUTH_TOKEN,
  SENTRY_RELEASE,
} = process.env;

function getSentryRelease() {
  return (
    SENTRY_RELEASE ||
    VERCEL_GITHUB_COMMIT_SHA ||
    VERCEL_GITLAB_COMMIT_SHA ||
    VERCEL_BITBUCKET_COMMIT_SHA
  );
}

// Next.js requires a plugin's version to match the Next.js version, so we fake
// it here by rewriting our plugin's package.json
function syncSentryPluginVersion() {
  const packageJson = require("./package.json");
  if (
    packageJson &&
    packageJson.dependencies &&
    packageJson.dependencies.next
  ) {
    const packagePluginPath = `./node_modules/@sentry/next-plugin-sentry/package.json`;
    const packagePlugin = require(packagePluginPath);
    packagePlugin.version = packageJson.dependencies.next;
    fs.writeFileSync(packagePluginPath, JSON.stringify(packagePlugin));
  } else {
    console.error(`Can't find 'next' dependency`);
  }
}
syncSentryPluginVersion();

module.exports = {
  experimental: { plugins: true },
  plugins: ["@sentry/next-plugin-sentry"],
  productionBrowserSourceMaps: true,
  webpack: (config, { dev }) => {
    if (!dev) {
      // Enable high-quality source-maps for non-dev builds. See
      // https://github.com/vercel/next.js/blob/master/errors/improper-devtool.md
      config.devtool = "source-map";
    }
    config.plugins.push(
      new SentryWebpackPlugin({
        release: getSentryRelease(),
        url: SENTRY_URL,
        org: SENTRY_ORG,
        project: SENTRY_PROJECT,
        authToken: SENTRY_AUTH_TOKEN,
        configFile: "sentry.properties",
        stripPrefix: ["webpack://_N_E/"],
        urlPrefix: `~/_next`,
        include: ".next/",
        ignore: ["node_modules", "webpack.config.js"],
        dryRun: dev,
        // for all available options, see
        // https://github.com/getsentry/sentry-webpack-plugin#options
      })
    );
    return config;
  },
};
```

Set up the `SentryWebpackPlugin` as the final plugin to run; otherwise, the source maps the plugin receives may not be final.

## Configure sentry-cli

Under the hood, the `SentryWebpackPlugin` uses `sentry-cli`, which can be configured in one of two ways - using a properties file, or with environment variables - both of which are discussed below. For full details, see [the CLI configuration docs](https://docs.sentry.io/product/cli/configuration/). (If you choose to combine the two approaches, the environment variables will take precedence over values set in the properties file.)

### Properties File

You can create a `sentry.properties` file in the base directory of your project. (This is the approach taken by the wizard.) Here is an example:

```properties {filename:sentry.properties}
defaults.url=https://sentry.io/
defaults.org=___ORG_SLUG___
defaults.project=___PROJECT_SLUG___
auth.token=___TOKEN___
# cli.executable=../path/to/bin/sentry-cli
```

### Environment Variables

Alternatively, the cli can be configured using environment variables.

| Property name      | Environment variable |
| ------------------ | -------------------- |
| `defaults.url`     | `SENTRY_URL`         |
| `defaults.org`     | `SENTRY_ORG`         |
| `defaults.project` | `SENTRY_PROJECT`     |
| `auth.token`       | `SENTRY_AUTH_TOKEN`  |
