---
title: Symfony
sdk: sentry.php.symfony
redirect_from:
  - /clients/php/integrations/symfony2/
  - /platforms/php/symfony/
description: "Learn about using Sentry with Symfony."
---

Symfony is supported via the [sentry-symfony](https://github.com/getsentry/sentry-symfony) package as a native bundle.

## Install

Install the `sentry/sentry-symfony` package:

```bash
composer require sentry/sentry-symfony
```

**Warning:** due to a bug in all versions lower than `6.0` of the [`SensioFrameworkExtraBundle`](https://github.com/sensiolabs/SensioFrameworkExtraBundle) bundle,
if you have it installed you will likely get an error during the execution of the command above in regards to the missing `Nyholm\Psr7\Factory\Psr17Factory`
class. To workaround the issue, if you are not using the PSR-7 bridge, please change the configuration of that bundle as follows:

```yaml
sensio_framework_extra:
   psr_message:
      enabled: false
```

For more details about the issue see [https://github.com/sensiolabs/SensioFrameworkExtraBundle/pull/710](https://github.com/sensiolabs/SensioFrameworkExtraBundle/pull/710).

## Configure

Add your DSN to `config/packages/sentry.yaml`:

```yaml {filename:config/packages/sentry.yaml}
sentry:
  dsn: "___PUBLIC_DSN___"
```

If you **are not** using Symfony Flex, you'll also need to enable the bundle in `config/bundles.php`:

```php {filename:config/bundles.php}
<?php

return [
    // ...
    Sentry\SentryBundle\SentryBundle::class => ['all' => true],
];
```

### Monolog Integration

If you are using monolog these additional configuration and services are needed to log the errors correctly:

```yaml {filename:config/packages/sentry.yaml}
sentry:
    register_error_listener: false # Disables the ErrorListener to avoid duplicated log in sentry
    dsn: "%env(SENTRY_DSN)%"

monolog:
    handlers:
        sentry:
            type: service
            id: Sentry\Monolog\Handler

services:
    Sentry\Monolog\Handler:
        arguments:
            $hub: '@Sentry\State\HubInterface'
            $level: !php/const Monolog\Logger::ERROR
```

Additionally, you can register the `PsrLogMessageProcessor` to resolve PSR-3 placeholders in reported messages:

```yaml {filename:config/packages/sentry.yaml}
services:
    Monolog\Processor\PsrLogMessageProcessor:
        tags: { name: monolog.processor, handler: sentry }
```

## Test the implementation

To test that both logger error and exception are correctly send to sentry
we can create the following controller:

```php
<?php

namespace App\Controller;

use Psr\Log\LoggerInterface;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Routing\Annotation\Route;

class SentryTestController
{
    /**
     * @var LoggerInterface
     */
    private $logger;

    public function __construct(LoggerInterface $logger)
    {
        $this->logger = $logger;
    }

    /**
     * @Route(name="sentry_test", path="/_sentry-test")
     */
    public function testLog(Request $request)
    {
        $this->logger->error('My custom logged error.');

        throw new \RuntimeException('Example exception.');
    }
}
```

After you visit now `/_sentry-test` this **both** errors should appear on sentry.
