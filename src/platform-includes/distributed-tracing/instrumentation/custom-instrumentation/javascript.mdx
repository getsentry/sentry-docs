<!--

NOTE

This page is not yet visible in the docs, as the apis used here are not public.
We will implement "Tracing without Performance" for Javascript Browser first,
then revisit this page and change it to match the new official apis to use.

-->

<Alert title="Note" level="note">

All Sentry JavaScript SDKs support distributed tracing out of the box if you add the <PlatformLink to="/performance/instrumentation/automatic-instrumentation/">BrowserTracing</PlatformLink> integration to your `Sentry.init` option. The [Next.js](/platforms/javascript/guides/nextjs/) and [SvelteKit](/platforms/javascript/guides/sveltekit/) SDKs already include this integration by default.

If you are using one of the integrations of Frameworks listed above, **you do not need to do anything** for distributed tracing to work!

You can stop reading this page now and continue building an amazing product.

</Alert>

Please read the note above. If you want to implement distributed tracing "by hand" two things need to be done:

- When loading the page, extract and store incoming tracing information from HTML `meta` tags.
- When doing outgoing requests, inject tracing information to the outgoing request.

To learn more see also: <PlatformLink to="/distributed-tracing/#how-does-distributed-tracing-work-in-sentry">How Does Distributed Tracing Work in Sentry?</PlatformLink>

## Extract Tracing Information From HTML `meta` Tags

This code snipped assumes, that the backend that renders the HTML, injects tracing information into the HTML as `meta` tags.

See for example [Inject Tracing Information Into Rendered HTML](/platforms/python/distributed-tracing/instrumentation/custom-instrumentation/#inject-tracing-information-into-rendered-html) to learn how your backend can inject this information.

On `pageload` do the following:

```javascript
// Read meta tag values
const sentryTraceMetaTagValue = getMetaContent("sentry-trace");
const baggageMetaTagValue = getMetaContent("baggage");

// Extract Sentry trace information
const traceParentData = extractTraceparentData(sentryTraceMetaTagValue);

// Create Dynamic Sampling Context
const dynamicSamplingContext =
  baggageHeaderToDynamicSamplingContext(baggageMetaTagValue);

// Create transaction context
const transactionContext = {
  ...traceParentData,
  metadata: {
    dynamicSamplingContext: dynamicSamplingContext,
  },
};

// Start transaction with tracing information of meta tags
const pageLoadTransaction = startTransaction(hub, transactionContext);
```

In this example, we create a new transaction that is attached to the trace specified in the `sentry-trace` and `baggage` HTML `meta` tags.

## Inject Tracing Information to Outgoing Requests

For distributed tracing to work, the two headers that you extracted and stored in the `pageLoadTransaction`, `sentry-trace` and `baggage`, must be added to outgoing XHR/fetch requests.

Here's an example of how to collect and inject this tracing information to outgoing requests:

If you are do outgoing requests in another way you can generate the tracing information like follows:

```javascript
// Create `sentry-trace` header
const sentryTraceHeader = pageLoadTransaction.toTraceparent();

// Create `baggage` header
const dynamicSamplingContext = pageLoadTransaction.getDynamicSamplingContext();
const sentryBaggageHeader = dynamicSamplingContextToSentryBaggageHeader(
  dynamicSamplingContext
);

// Make outgoing request
fetch("https://example.com", {
  method: "GET",
  headers: {
    baggage: sentryBaggageHeader,
    "sentry-trace": sentryTraceHeader,
  },
}).then((response) => {
  // ...
});
```

In this example, tracing information is propagated to the project running at `https://example.com`. If this project uses a Sentry SDK, it will extract and save the tracing information for later use.

The two services are now connected with your custom distributed tracing implementation.

## Verification

If you make outgoing requests from your project to other services, check if the headers `sentry-trace` and `baggage` are present in the request. If so distributed tracing is working.
