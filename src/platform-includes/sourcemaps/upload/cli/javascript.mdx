In this guide, you'll learn how to successfully upload source maps using our `sentry-cli` tool.

## Introduction

You can use two methods of uploading source maps:
1. Artifact Bundles (Preferred): Upload source maps whenever you need
2. Release Bundles: Upload source maps when you create a new [Sentry release](https://docs.sentry.io/product/releases/)

<Note>
Regardless of the method you choose, we highly recommend integrating `sentry-cli` into your CI/CD pipeline.
</Note>

## Configure Sentry CLI

Make sure `sentry-cli` is configured for your project. You can use a `.sentryclirc` file or environment variables:

```ìni {filename:.sentryclirc}
[auth]
token=your-auth-token

[defaults]
org=___ORG_SLUG___
project=___PROJECT_SLUG___
```

```bash
export SENTRY_AUTH_TOKEN=your-auth-token
export SENTRY_ORG=___ORG_SLUG___
export SENTRY_PROJECT=___PROJECT_SLUG___
```

<Note>

You can find installation instructions for `sentry-cli` here: https://docs.sentry.io/product/cli/installation/

For more info on `sentry-cli` configuration visit the [Sentry CLI configuration docs](/product/cli/configuration/).

</Note>

<Note>

Visit the [auth token user settings page](https://sentry.io/settings/account/api/auth-tokens/) to find your auth tokens.

</Note>

## Option 1: Upload an Artifact Bundle (Preferred)

<Note>

Uploading artifact bundles requires:
- `sentry-cli` version >= `2.17.0`
- Sentry Javascript SDK version >= `7.47.0`

</Note>

If you decide to upload as an artifact bundle you should use Debug IDs. Debug IDs are unique identifiers generated by the `sentry-cli` that bind together minified sources and their respective source maps. Each pair of `(minified source, source map)` contain the same Debug ID, which is injected into specific parts of each file.

The generated Debug IDs are used by Sentry during processing to determine which source map file should be used to symbolicate an event's stackframes.

<Note>

Since `sentry-cli` modifies your source files after they are bundled, we currently don't recommend using Debug IDs if your application has [integrity checks](https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity) in place, or you check for file changes before upload (e.g., on a CDN) based uniquely on their filename.

</Note>

### 1. Generate Your Artifacts

To use Debug IDs, your code needs to be bundled with the `sourcesContent` field in the source map. The way to do this varies based on your bundler configuration, so check the documentation of the bundler your application uses.

Here's an example of what this looks like for webpack:

```javascript {filename:webpack.config.js}
module.exports = {
  ...
  entry: "./src/index.js",
  output: {
    filename: "main.js",
    path: path.resolve(__dirname, "build"),
  },
  // Enable "sourcesContent".
  devtool: "source-map",
  ...
};
```

### 2. Inject Debug IDs Into Artifacts

During injection, `sentry-cli` will evaluate all minified sources and respective source maps (known as build artifacts), adding the Debug IDs required to correctly symbolicate an event.

To inject Debug IDs, use the new `inject` command:

```bash
sentry-cli sourcemaps inject /path/to/directory
```

<Note>

Please note that the `inject` command **injects code at the end of your bundle**, thus if an error occurs before that code, resolving with Debug IDs won't work. This more commonly occurs if an error is thrown during application initialization. _(We are currently working to overcome this limitation)_

</Note>

#### Verify Debug IDs Were Injected in Artifacts

Minified source files should contain at the end a comment named `debugId` like:

```javascript {filename:example_minified_file.js}
...
//# debugId=<debug_id>
//# sourceMappingURL=<sourcemap_url>
```

Source maps should contain a field named `debug_id` like:

```json {filename:example_source_map.js.map}
{
    ...
    "debug_id":"<debug_id>",
    ...
}
```

### 3. Upload Artifact Bundle

After you've injected your artifact files, upload them using the new `--use-artifact-bundle` option.

```bash
sentry-cli sourcemaps upload --use-artifact-bundle /path/to/directory
```

#### Verify That Artifact Bundles Were Uploaded

Open up Sentry and navigate to **Project Settings > Source Maps**. If you choose “Artifact Bundles” in the tabbed navigation, you'll see all the artifact bundles that have been successfully uploaded to Sentry.

#### Associating `release` with Artifact Bundle (Optional)

If you are having troubles with Debug IDs, we suggest that you associate a release to an artifact bundle. _The release association will help Sentry figure out which artifact bundle(s) to use for symbolication when Debug IDs are not present._

First, you must provide a `release` property in your SDK options.

```javascript
Sentry.init({
// This value must be identical to the release name specified during upload
// with the `sentry-cli`.
release: "<release_name>",
});
```

After that, run the `sourcemaps upload` command with the additional `--release` option. Please ensure that the value specified for `<release_name>` is the same value specified in your SDK options.

```bash
sentry-cli sourcemaps upload --use-artifact-bundle --release=<release_name> /path/to/directory
```

<Note>

Running `upload` with `--release` **doesn't automatically create a release in Sentry**. For that, you should create a release with the same name as a separate step in your pipeline or send the first event to Sentry with that release.

</Note>

#### Associating `dist` with Artifact Bundle (Optional)

In addition to `release`, you can also add a `dist` to your uploaded artifacts. For that, run the `sourcemaps upload` command with the additional  `--dist` option.

```bash
sentry-cli sourcemaps upload --use-artifact-bundle --release=<release_name> --dist=<dist_name> /path/to/directory
```

## Option 2: Upload a Release Bundle (Legacy)

Sentry can also use [releases](/product/releases/) to match uploaded source maps to events. You can use `sentry-cli` to create releases and upload their source maps to Sentry.

<Note>

We strongly suggest to use the new Debug IDs system for uploading your artifacts since it provides more reliable symbolication and the old release-based system will be faded out in the future.

</Note>

### 1. Update SDK Options

To match Sentry errors with the correct release, you must provide a `release` property in the SDK options:

```javascript
Sentry.init({
  // This value must be identical to the name you give the release that you
  // create below using `sentry-cli`.
  release: "<release_name>",
});
```

### 2. Upload Source Maps Using Sentry CLI

You must first create a release with `sentry-cli`. The release name must be unique within your organization:

```bash
sentry-cli releases new <release_name>
```

Next, upload your release artifacts (source files and source maps):

```bash
sentry-cli releases files <release_name> upload-sourcemaps /path/to/directory
```

You can verify your uploaded artifacts by navigating to **Releases -> [latest release] -> Source Maps (right sidebar)** on Sentry.

At this point, the release is in a draft state (“_unreleased_”). Once all source maps have been uploaded and your app has been published successfully, finalize the release with the following command:

```bash
sentry-cli releases finalize <release_name>
```

For more information on how to configure releases via Sentry CLI, see our [Sentry CLI release management docs](/product/cli/releases/).
