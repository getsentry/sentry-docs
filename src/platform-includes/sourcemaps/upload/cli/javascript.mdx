If you use [`sentry-cli`](/product/cli/) to upload your artifacts, you'll need to be able to generate source maps using your build toolchain.

After you've generated the source maps, you'll need to upload them to Sentry so they can be matched to events. There are two ways of doing this: either by using Debug IDs (preferred), or by using [releases](/product/releases/).

Uploading source maps using Debug IDs is the more modern, flexible method. In contrast, uploading using releases, requires creating a release for each change to your application. For example, to see symbolicated errors for an internal development build, you'd need to create a release for that build, which would then show up on the Sentry **Releases** page.

This doc describes both options for uploading source maps.

<Note>

For the best user experience we reccomend to setup `sentry-cli` in your CI/CD pipeline.

</Note>

## Configure Sentry CLI

Make sure `sentry-cli` is configured for your project. You can use a `.sentryclirc` file or environment variables:

```ìni {filename:.sentryclirc}
[auth]
token=your-auth-token

[defaults]
org=___ORG_SLUG___
project=___PROJECT_SLUG___
```

```bash
export SENTRY_AUTH_TOKEN=your-auth-token
export SENTRY_ORG=___ORG_SLUG___
export SENTRY_PROJECT=___PROJECT_SLUG___
```

<Note>

You can find installation instructions for `sentry-cli` here: https://docs.sentry.io/product/cli/installation/

For more info on `sentry-cli` configuration visit the [Sentry CLI configuration docs](/product/cli/configuration/).

</Note>

<Note>

Visit the [auth token user settings page](https://sentry.io/settings/account/api/auth-tokens/) to find your auth tokens.

</Note>

## Option 1: Upload with Debug ID (Preferred)

Debug IDs are unique identifiers generated by the `sentry-cli` that bind together minified sources and their respective source maps. Each pair of `(minified source, source map)` contain the same Debug ID, which is injected into specific parts of each file.

The generated Debug IDs are used by Sentry during processing to determine which source map file should be used to symbolicate an event's stackframes.

<Note>

Since `sentry-cli` modifies your source files after they are bundled, we currently don't recommend using Debug IDs if your application has [integrity checks](https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity) in place, or you check for file changes before upload (e.g., on a CDN) based uniquely on their filename.

</Note>

### 1. Generate Your Artifacts

To use Debug IDs, your code needs to be bundled with the `sourcesContent` field in the source map. The way to do this varies based on your bundler configuration, so check the documentation of the bundler your application uses.

Here's an example of what this looks like for webpack:

```javascript {filename:webpack.config.js}
module.exports = {
  ...
  entry: "./src/index.js",
  output: {
    filename: "main.js",
    path: path.resolve(__dirname, "build"),
  },
  // Enable "sourcesContent".
  devtool: "source-map",
  ...
};
```

### 2. Inject Debug IDs Using Sentry CLI

During injection, `sentry-cli` will go over all the minified sources and their respective source maps and add the Debug IDs required by Sentry to correctly symbolicate the event.

To inject Debug IDs, use the new `inject` command:

```bash
sentry-cli sourcemaps inject /path/to/folder
```

<Note>

You can verify your injected artifact files by looking at their contents.

The minified source should contain at the end a comment named `debugId` like:
```javascript {filename:minified-file.js}
...
//# debugId=<debug_id>
//# sourceMappingURL=<sourcemap_url>
```

The source map should contain a field named `debug_id` like:
```json {filename:source-map.js.map}
{
    ...
    "debug_id":"<debug_id>",
    ...
}
```

</Note>

### 3. Upload Artifacts Using Sentry CLI

Once your artifact files are injected, upload them to Sentry with the `upload` command and the `--use-artifact-bundle` flag:

```bash
# The --use-artifact-bundle flag is used to tell `sentry-cli` to
# upload your artifacts with the new format.
sentry-cli sourcemaps upload --use-artifact-bundle /path/to/folder
```

You can verify your uploaded artifacts by navigating to **Project Settings -> Source Maps (left sidebar) -> Artifact Bundles** on Sentry.

At this point, the `sentry-cli` will notify you if there are files that don't contain Debug IDs (because for example, you forgot to run the `inject` command). The CLI will then prompt you to create a _Weak Release Association_ to connect a release to this artifact. This connection allows Sentry to properly symbolicate events without Debug IDs.

#### Weak Release Associations

_Weak Release Associations_ are an extension of the Debug ID system. By weakly associating artifacts with a `release`, and optionally a `dist`, Sentry can look up sources for symbolication, even if Debug IDs are missing.

Creating a Weak Release Association doesn't create a release in Sentry. You must create a release with the same name you specified in the Weak Release Association as a separate step in your pipeline.

It's important that the name of the `release` you specify during upload exactly matches the name of the `release` you create with the `sentry-cli` and/or the `release` in your SDK, e.g.:
```javascript
Sentry.init({
  // This value must be identical to the release name specified during upload
  // with the `sentry-cli`.
  release: "<release_name>",
});
```

Add these parameters to the `upload` command to weakly associate artifacts with a `release` and optionally `dist`:

```bash
# --dist is optional.
sentry-cli sourcemaps upload --release=<release_name> --dist=<dist_name> /path/to/folder
```

<Note>

While it's possible to only use Weak Release Associations and skip Debug ID injection via the `inject` command, we strongly recommend using Debug ID injection if it works with your project setup.

</Note>

## Option 2: Upload with Release (Legacy)

Sentry can also use [releases](/product/releases/) to match uploaded source maps to events. You can use `sentry-cli` to create releases and upload their source maps to Sentry.

<Note>

We strongly suggest to use the new Debug IDs system for uploading your artifacts since it provides more reliable symbolication and the old release-based system will be faded out in the future.

</Note>

### 1. Update SDK Options

To match Sentry errors with the correct release, you must provide a `release` property in the SDK options:

```javascript
Sentry.init({
  // This value must be identical to the name you give the release that you
  // create below using `sentry-cli`.
  release: "<release_name>",
});
```

### 2. Upload Source Maps Using Sentry CLI

You must first create a release with `sentry-cli`. The release name must be unique within your organization:

```bash
sentry-cli releases new <release_name>
```

Next, upload your release artifacts (source files and source maps):

```bash
sentry-cli releases files <release_name> upload-sourcemaps /path/to/folder
```

You can verify your uploaded artifacts by navigating to **Releases -> [latest release] -> Source Maps (right sidebar)** on Sentry.

At this point, the release is in a draft state (“_unreleased_”). Once all source maps have been uploaded and your app has been published successfully, finalize the release with the following command:

```bash
sentry-cli releases finalize <release_name>
```

For more information on how to configure releases via Sentry CLI, see our [Sentry CLI release management docs](/product/cli/releases/).
