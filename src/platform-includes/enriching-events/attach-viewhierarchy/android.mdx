```xml {filename:AndroidManifest.xml}
<application>
  <meta-data android:name="io.sentry.attach-view-hierarchy" android:value="true" />
</application>
```

### Customize View Hierarchy Capturing

On Android capturing view hierarchy can be an resource-intense operation, thus capturing is limited to one view hierarchy every 2 seconds using a debouncing mechanism. This behavior can be overruled by supplying a `BeforeCaptureCallback` for view hierarchies in the `SentryAndroidOptions`.

The `BeforeCaptureCallback` also allows you to customize the behavior based on event data, giving you full control over when a view hierarchy should be captured and when not.

For example, view hierarchy capturing can be limited to only crashed events:

```java
import io.sentry.android.core.SentryAndroid;

SentryAndroid.init(this, options -> {
    options.setBeforeViewHierarchyCaptureCallback((event, hint, debounce) -> {
        if (event.isCrashed()) {
            return true;
        }
        return false;
    });
});
```

```kotlin
import io.sentry.android.core.SentryAndroid

SentryAndroid.init(this) { options ->
    options.setBeforeViewHierarchyCaptureCallback { event, hint, debounce ->
        if (event.isCrashed) {
            return@setBeforeViewHierarchyCaptureCallback true
        }
        return@setBeforeViewHierarchyCaptureCallback false
    }
}
```

### Jetpack Compose Support using the Sentry Kotlin Compiler Plugin

<Note>

The Sentry Kotlin Compiler plugin is considered _experimental_. Give it a try and provide early feedback [on GitHub](https://github.com/getsentry/sentry-android-gradle-plugin).

</Note>

If your application uses Jetpack Compose, you can use the <PlatformLink to="/kotlin-compiler-plugin/">Sentry Kotlin Compiler Plugin</PlatformLink> to see the function names of your `@Composable` elements. You must add the plugin to all modules that contain `@Composable` elements.

```groovy {filename:app/build.gradle}
plugins {
  id "io.sentry.kotlin.compiler.gradle" version "{{@inject packages.version('sentry.kotlin.compiler-plugin', '3.7.0') }}"
}
```

```kotlin {filename:app/build.gradle.kts}
plugins {
  id("io.sentry.kotlin.compiler.gradle") version "{{@inject packages.version('sentry.kotlin.compiler-plugin', '3.7.0') }}"
}
```
