---
title: "Okta SCIM Provisioning"
sidebar_order: 3
description: "Set up Okta's SCIM Integration for Member and Team Provisioning"
---

<Note>

This feature is only available if your organization is on a Business or Enterprise plan. This feature is not available on Trial plans.

</Note>

<Alert level="warning">

If you change your organization slug, you'll need to make the same update in the steps where you enter the SCIM configuration values.

</Alert>

### Supported Features

- Create users
- Deactivate users
- Push groups
- Import groups
- Configure organization-level role

### Requirements

Okta SCIM provisioning requires:

- A subscription to Sentry Business Plan or higher.
- Configuration of SAML SSO for Okta [as documented here](/product/accounts/sso/okta-sso/), or use the Okta sign-on tab in your Sentry Okta application to configure SAML.
- **Selection of Email for the Application username format** in the Sign On application tab in Okta.
  ![Okta username configuration](scim-username-config.png)

### Sentry Configuration

1. Sign in to [sentry.io](https://sentry.io). Select **Settings > Auth**
   ![Sentry Okta SCIM Auth Page](../scim-settings-auth.png)
1. Under General Settings select "Enable SCIM", then "Save Settings"
   ![Sentry Enable SCIM Instruction](../scim-enable-sentry.png)
   Sentry will display "SCIM Information" that contains your Auth Token and SCIM Base URL.
   ![SCIM Credentials Fields](../scim-sentry-fields.png)

### Okta Configuration

1. Sign in to your Okta organization with your administrator account. From the admin console's sidebar, select Applications > Applications, then select the existing Sentry application.

1. Select the "Provisioning" tab, then "Configure API integration".
   ![Okta configure SCIM API](scim-okta-configure.png)

1. Select "Enable API Integration", enter the SCIM URL from the auth settings page as the Base URL field. For the API Token, copy the Auth Token value from the auth settings page.

1. Select "Test API Credentials", and confirm the message "the app was verified successfully" displays.

1. Select "Save" to be directed to SCIM App settings.

1. On the Provisioning page, select "To App", then "edit":
   ![Okta Save SCIM Settings](scim-okta-edit.png)

1. Enable both "Create Users" and "Deactivate Users", then "Save" your changes.

As a result of these changes, users who are assigned will be sent an invitation email. When a user is un-assigned, their membership object in Sentry will be deleted.

You can use "Push Groups" to sync and assign groups in Okta; they will be reflected in Sentry teams.

### Configuring organization-level roles (Beta)

<Alert level="note">

Organization role provisioning is in beta. If you'd like to try this feature, contact support@sentry.io.

</Alert>

Here's how to assign an organization-level role to an Okta group:

1. Add a new custom attribute to your Okta application profile.

  a. Navigate to your application settings in Okta

  b. Under the "Provisioning" tab, select "Go to Profile Editor"
        ![Okta Provisioning Page](./okta-go-to-profile.png)

  c. Select "+ Add Attribute"

  d. Fill out the form with the following settings (you can set whatever value you want for any setting not listed below):

    * Data Type: `string`
    * External name: `sentryOrgRole`
    * External namespace: `urn:ietf:params:scim:schemas:core:2.0:User`
    * Attribute type: `Group`
  ![Okta Custom Attribute](./okta-custom-attribute-values.png)

2. Assign a group to your okta application
    ![Okta Assign Group](./okta-assign-group.png)

3. In the form, enter the string for the org-level role.
    ![Okta Set Role](./okta-set-group-attribute.png)

- If the `sentryOrgField` field is left blank, Group members will be provisioned with the default organization-level role. This default role is configured in Sentry, under Settings -> Organization -> Auth
- Invalid role names will prevent group members from being provisioned. To try again, you'll need to remove the group first.
- A list of valid roles can be found by going to the any organization member's settings page.
- For security, roles with the `org:admin` permission scope cannot my provisioned through SCIM.

<Alert level="note">

If a user is a member of multiple okta groups, only the attributes set by the first group will be used for the user.

</Alert>

### Known Issues / Troubleshooting

- Sentry does not currently support setting any User attributes other than `userName` and `active`.
- The Import Users feature is not currently supported. Sentry's SCIM API does not at this time support the User `name` attribute fields `firstName` and `lastName`. Instead, we return these with values of `N/A` for compatibility purposes.
- Setting `active` to `false` on a User will delete the organization member record associated with the user.
- The only filter operation supported for resources is `eq`.
- When provisioning a new team, Sentry will both normalize and convert the team `displayName` uppercase to lowercase, and convert spaces to dashes.
- The GET /Groups endpoint will return a maximum of 10000 members in a group, see [SCIM API documentation](/api/scim/) for more information.
