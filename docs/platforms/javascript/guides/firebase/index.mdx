---
title: Cloud Functions for Firebase
description: Learn how to set up Sentry in your Cloud Functions for Firebase project and capture your first errors.
sdk: sentry.javascript.node
fallbackGuide: javascript.node
categories:
  - javascript
  - server
  - server-node
  - serverless
---

<PlatformContent includePath="getting-started-primer" />

[Cloud Functions for Firebase](https://firebase.google.com/docs/functions) let you automatically run backend code in response to events triggered by Firebase features and HTTPS requests. Sentry's Node SDK works out of the box with Cloud Functions for Firebase.

## What's Instrumented

The Sentry SDK includes a built-in <PlatformLink to="/configuration/integrations/firebase">Firebase integration</PlatformLink> that automatically instruments:

- **Cloud Functions** - HTTP functions, background functions, and event triggers
- **[Firestore](https://firebase.google.com/docs/firestore)** - Database operations like reads, writes, and queries are instrumented out of the box

This integration is enabled by default, so you get automatic performance monitoring and error tracking without any additional configuration.

<PlatformContent includePath="getting-started-prerequisites" />

## Step 1: Install

Choose the features you want to configure, and this guide will show you how:

<OnboardingOptionButtons
  options={["error-monitoring", "performance", "profiling", "logs"]}
/>

<PlatformContent includePath="getting-started-features-expandable" />

### Install the Sentry SDK

Run the command for your preferred package manager to add the Sentry SDK to your Firebase Functions project:

```bash {tabTitle:npm}
npm install @sentry/node --save
```

```bash {tabTitle:yarn}
yarn add @sentry/node
```

```bash {tabTitle:pnpm}
pnpm add @sentry/node
```

## Step 2: Configure

Create an initialization file (for example, `instrument.js`) that imports and initializes Sentry. This file must be imported at the very top of your functions entry point, before any other imports.

```javascript {filename:instrument.js}
const Sentry = require("@sentry/node");

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Adds request headers and IP for users, for more info visit:
  // https://docs.sentry.io/platforms/javascript/guides/firebase/configuration/options/#sendDefaultPii
  sendDefaultPii: true,
  // ___PRODUCT_OPTION_START___ performance

  // Add Tracing by setting tracesSampleRate
  // Set tracesSampleRate to 1.0 to capture 100% of transactions
  // We recommend adjusting this value in production
  // Learn more at
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
  // ___PRODUCT_OPTION_START___ profiling

  // Set profilesSampleRate to 1.0 to profile 100% of sampled transactions.
  // This is relative to tracesSampleRate
  profilesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ profiling
  // ___PRODUCT_OPTION_START___ logs
  // Enable logs to be sent to Sentry
  enableLogs: true,
  // ___PRODUCT_OPTION_END___ logs
});
```

Import the initialization file at the very top of your functions entry point (for example, `index.js`), before any other imports:

```javascript {filename:index.js}
require("./instrument"); // Require Sentry initialization first

const { onRequest } = require("firebase-functions/https");
const { onDocumentCreated } = require("firebase-functions/firestore");
const admin = require("firebase-admin");

admin.initializeApp();

// HTTP function - automatically instrumented
exports.helloWorld = onRequest(async (request, response) => {
  response.send("Hello from Firebase!");
});

// Firestore trigger - automatically instrumented
exports.onUserCreated = onDocumentCreated(
  "users/{userId}",
  async (event) => {
    const userId = event.params.userId;
    // Your logic here
  }
);
```

<Alert>
  The key is to import the initialization file **before** any other `require` calls,
  including Firebase imports. This ensures Sentry can properly instrument all
  modules.
</Alert>

## Step 3: Add Readable Stack Traces With Source Maps (Optional)

<PlatformContent includePath="getting-started-sourcemaps-short-version" />

## Step 4: Verify Your Setup

Let's test your setup and confirm that Sentry is working correctly and sending data to your Sentry project.

### Issues

Add a test function that throws an error to verify Sentry is capturing errors:

```javascript {filename:index.js}
require("./instrument"); // Import Sentry initialization first
const { onRequest } = require("firebase-functions/https");

exports.testSentry = onRequest(async (request, response) => {
  throw new Error("Sentry Test Error - This is intentional!");
});
```

Deploy your functions and trigger the test endpoint:

```bash
firebase deploy --only functions
curl https://<region>-<project-id>.cloudfunctions.net/testSentry
```

<OnboardingOption optionId="performance">

### Tracing

Firebase Functions are automatically instrumented for tracing. You can also create custom spans:

```javascript {filename:index.js}
require("./instrument");
const Sentry = require("@sentry/node");
const { onRequest } = require("firebase-functions/https");

exports.tracedFunction = onRequest(async (request, response) => {
  await Sentry.startSpan(
    { op: "task", name: "My Custom Task" },
    async () => {
      // Simulate some work
      await new Promise((resolve) => setTimeout(resolve, 100));
    }
  );

  response.send("Done!");
});
```

</OnboardingOption>

### View Captured Data in Sentry

Now, head over to your project on [Sentry.io](https://sentry.io/) to view the collected data (it takes a couple of moments for the data to appear).

<PlatformContent includePath="getting-started-verify-locate-data" />

## Next Steps

At this point, you should have integrated Sentry into your Cloud Functions for Firebase project.

Now's a good time to customize your setup and look into more advanced topics:

- Explore [practical guides](/guides/) on what to monitor, log, track, and investigate after setup
- Continue to <PlatformLink to="/configuration">customize your configuration</PlatformLink>
- Learn how to <PlatformLink to="/usage">manually capture errors</PlatformLink>
- Get familiar with [Sentry's product features](/product/) like tracing, insights, and alerts

<Expandable permalink={false} title="Are you having problems setting up the SDK?">

- Find various topics in <PlatformLink to="/troubleshooting">Troubleshooting</PlatformLink>
- [Get support](https://sentry.zendesk.com/hc/en-us/)

</Expandable>
