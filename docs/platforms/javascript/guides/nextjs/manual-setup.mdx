---
title: "Quickstart: Manual Setup"
sidebar_order: 1
description: "Learn how to manually set up and configure Sentry in your Next.js application, capture your first errors, and view them in Sentry."
---

## Prerequisites

- A Sentry [account](https://sentry.io/signup/) and [project](https://docs.sentry.io/product/projects/)
- Be logged in to your Sentry account to have your project's data pre-filled (recommended)
- Your application up and running

## Step 1: Install

Run the following command for your preferred package manager to add the Sentry SDK to your application:

```bash {tabTitle:npm}
npm install @sentry/nextjs --save
```

```bash {tabTitle:yarn}
yarn add @sentry/nextjs
```

```bash {tabTitle:pnpm}
pnpm add @sentry/nextjs
```

### Choose Your Sentry Features

Select the features you want to set up in your application, in addition to error monitoring, using the checkboxes below. This guide will then adjust its content to provide you with the necessary information.

<Expandable title="Want to learn more about these features?">

- [**Issues**](/product/issues) (always enabled): Sentry's core error monitoring product that automatically reports errors,
  uncaught exceptions, and unhandled rejections. If you have something that
  looks like an exception, Sentry can capture it.
- [**Tracing**](/product/tracing): Track software performance while seeing the
  impact of errors across multiple systems. For example, distributed tracing
  allows you to follow a request from the frontend to the backend and back.
- [**Session Replay**](/product/explore/session-replay/web):
  Get to the root cause of an issue faster by viewing a video-like reproduction
  of what was happening in the user's browser before, during, and after the
  problem.

</Expandable>

You can add or remove features at any time, but setting them up now will save you the effort of configuring them manually later.

<OnboardingOptionButtons
  options={["error-monitoring", "performance", "session-replay"]}
/>

## Step 2: Configure

### Apply Instrumentation to Your App

To apply instrumentation to your application, use `withSentryConfig` to extend your app's default Next.js options.

Update your `next.config.js` or `next.config.mjs` file with the following:

```JavaScript {tabTitle:CJS} {filename:next.config.js}
const { withSentryConfig } = require("@sentry/nextjs");

const nextConfig = {
  // Your existing Next.js configuration
};

// Make sure adding Sentry options is the last code to run before exporting
module.exports = withSentryConfig(nextConfig, {
  org: "___ORG_SLUG___",
  project: "___PROJECT_SLUG___",

  // Only print logs for uploading source maps in CI
  // Set to `false` to surpress logs
  silent: !process.env.CI,

  // Route browser requests to Sentry through a Next.js rewrite to circumvent ad-blockers.
  // This can increase your server load as well as your hosting bill.
  // Note: Check that the configured route will not match with your Next.js middleware, otherwise reporting of client-side errors will fail.
  tunnelRoute: "/monitoring",

  // Automatically tree-shake Sentry logger statements to reduce bundle size
  disableLogger: true,
});
```

```JavaScript {tabTitle:ESM} {filename:next.config.mjs}
import { withSentryConfig } from "@sentry/nextjs";

const nextConfig = {
  // Your existing Next.js configuration
};

// Make sure adding Sentry options is the last code to run before exporting
export default withSentryConfig(nextConfig, {
  org: "___ORG_SLUG___",
  project: "___PROJECT_SLUG___",

  // Only print logs for uploading source maps in CI
  // Set to `false` to surpress logs
  silent: !process.env.CI,

  // Route browser requests to Sentry through a Next.js rewrite to circumvent ad-blockers.
  // This can increase your server load as well as your hosting bill.
  // Note: Check that the configured route will not match with your Next.js middleware, otherwise reporting of client-side errors will fail.
  tunnelRoute: "/monitoring",

  // Automatically tree-shake Sentry logger statements to reduce bundle size
  disableLogger: true,
});
```

<Expandable level="info" title="Avoid ad blockers with tunneling">
  You might notice that ad blockers sometimes block Sentry events, which you can
  circumvent using tunneling. Setting the `tunnelRoute` option will add an API
  endpoint to your application that is used to forward Sentry events to the
  Sentry servers.
</Expandable>

### Initialize Sentry Client-Side and Server-Side SDKs

Create three files in the root directory of your Next.js application: `sentry.client.config.js`, `sentry.server.config.js` and `sentry.edge.config.js`. In these files, add your initialization code for the client-side SDK and server-side SDK, respectively. We've included some examples below.

<Alert level="info" title="Note">
  There are slight differences between these files since they run in different
  places (browser, server, edge), so copy them carefully!
</Alert>

```javascript {tabTitle:Client} {filename:sentry.client.config.(js|ts)} {"onboardingOptions": {"performance": "8-13", "session-replay": "5-6, 15-20"}}
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: "___PUBLIC_DSN___",
  // Replay may only be enabled for the client-side
  integrations: [Sentry.replayIntegration()],

  // Set tracesSampleRate to 1.0 to capture 100%
  // of transactions for tracing.
  // We recommend adjusting this value in production
  // Learn more at
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,

  // Capture Replay for 10% of all sessions,
  // plus for 100% of sessions with an error
  // Learn more at
  // https://docs.sentry.io/platforms/javascript/session-replay/configuration/#general-integration-configuration
  replaysSessionSampleRate: 0.1,
  replaysOnErrorSampleRate: 1.0,

  // ...

  // Note: if you want to override the automatic release value, do not set a
  // `release` value here - use the environment variable `SENTRY_RELEASE`, so
  // that it will also get attached to your source maps
});
```

```javascript {tabTitle:Server} {filename:sentry.server.config.(js|ts)} {"onboardingOptions": {"performance": "6-11"}}
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Set tracesSampleRate to 1.0 to capture 100%
  // of transactions for tracing.
  // We recommend adjusting this value in production
  // Learn more at
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,

  // ...

  // Note: if you want to override the automatic release value, do not set a
  // `release` value here - use the environment variable `SENTRY_RELEASE`, so
  // that it will also get attached to your source maps
});
```

```javascript {tabTitle:Edge} {filename:sentry.edge.config.(js|ts)} {"onboardingOptions": {"performance": "6-11"}}
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Set tracesSampleRate to 1.0 to capture 100%
  // of transactions for tracing.
  // We recommend adjusting this value in production
  // Learn more at
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,

  // ...

  // Note: if you want to override the automatic release value, do not set a
  // `release` value here - use the environment variable `SENTRY_RELEASE`, so
  // that it will also get attached to your source maps
});
```

<Alert level="success" title="Tip">
  We recommend you include your [Data Source
  Name](/concepts/key-terms/dsn-explainer/) (DSN) directly in these three files.
  Alternatively you can pass the DSN via a _public_ environment variable like
  `NEXT_PUBLIC_SENTRY_DSN`.
</Alert>

### Register Sentry Server-Side SDK Initialization

While the client initialization code will be injected into your application's client bundle by `withSentryConfig` which we set up earlier,
the configuration for the server and edge runtime needs to be imported from a [Next.js Instrumentation file](https://nextjs.org/docs/app/building-your-application/optimizing/instrumentation).

<Alert>
For Next.js versions `<15` enable the Next.js instrumentation hook by setting the [`experimental.instrumentationHook`](https://nextjs.org/docs/14/pages/api-reference/next-config-js/instrumentationHook) to `true` in your `next.config.js`.
</Alert>

Add a `instrumentation.ts` file to the root directory of your Next.js application (or inside the `src` folder if you're using one) and add the following content:

```javascript {filename:instrumentation.(js|ts)}
export async function register() {
  if (process.env.NEXT_RUNTIME === "nodejs") {
    await import("./sentry.server.config");
  }

  if (process.env.NEXT_RUNTIME === "edge") {
    await import("./sentry.edge.config");
  }
}
```

Make sure that the `import` statements point to your newly created `sentry.server.config.(js|ts)` and `sentry.edge.config.(js|ts)` files.

## Step 3: Capture React Render Errors

To capture React render errors you need to add Error components for the App Router.

### React Render Errors in App Router

Create a [Custom Next.js Global Error component](https://nextjs.org/docs/app/building-your-application/routing/error-handling) for the App router:

```tsx {filename:global-error.tsx}
"use client";

import * as Sentry from "@sentry/nextjs";
import NextError from "next/error";
import { useEffect } from "react";

export default function GlobalError({
  error,
}: {
  error: Error & { digest?: string };
}) {
  useEffect(() => {
    Sentry.captureException(error);
  }, [error]);

  return (
    <html>
      <body>
        {/* `NextError` is the default Next.js error page component. Its type
        definition requires a `statusCode` prop. However, since the App Router
        does not expose status codes for errors, we simply pass 0 to render a
        generic error message. */}
        <NextError statusCode={0} />
      </body>
    </html>
  );
}
```

```jsx {filename:global-error.jsx}
"use client";

import * as Sentry from "@sentry/nextjs";
import NextError from "next/error";
import { useEffect } from "react";

export default function GlobalError({ error }) {
  useEffect(() => {
    Sentry.captureException(error);
  }, [error]);

  return (
    <html>
      <body>
        {/* This is the default Next.js error component. */}
        <NextError />
      </body>
    </html>
  );
}
```

### Errors from Nested React Server Components

_Requires `@sentry/nextjs` version `8.28.0` or higher and Next.js 15._

To capture errors from nested React Server Components, use the `onRequestError` hook in `instrumentation.(js|ts)`.
[The `onRequestError` hook is a feature provided by Next.js](https://nextjs.org/docs/app/api-reference/file-conventions/instrumentation#onrequesterror-optional), which allows reporting errors to Sentry.

To report errors using the `onRequestError` hook, pass all arguments to the `captureRequestError` function:

```TypeScript {filename:instrumentation.ts}
import * as Sentry from "@sentry/nextjs";

export const onRequestError = Sentry.captureRequestError;
```

```JavaScript {filename:instrumentation.js}
import * as Sentry from "@sentry/nextjs";

export const onRequestError = Sentry.captureRequestError;
```

## Step 4: Add readable Stack Traces With Source Maps (optional)

By default, `withSentryConfig` will generate and upload source maps to Sentry automatically, so that errors have readable stack traces.
However, this only works if you provide an auth token in `withSentryConfig`.

Update `withSentryConfig` in your `next.config.js` or `next.config.mjs` file with the following additions:

```javascript {tabTitle:ESM} {filename:next.config.mjs}
export default withSentryConfig(nextConfig, {
  // Pass the auth token
  authToken: process.env.SENTRY_AUTH_TOKEN,
  // Hides source maps from generated client bundles
  hideSourceMaps: true,
  // Upload a larger set of source maps for prettier stack traces (increases build time)
  widenClientFileUpload: true,
});
```

```javascript {tabTitle:CJS} {filename:next.config.js}
module.exports = withSentryConfig(nextConfig, {
  // Pass the auth token
  authToken: process.env.SENTRY_AUTH_TOKEN,
  // Hides source maps from generated client bundles
  hideSourceMaps: true,
  // Upload a larger set of source maps for prettier stack traces (increases build time)
  widenClientFileUpload: true,
});
```

Alternatively, you can set the `SENTRY_AUTH_TOKEN` environment variable in your `.env` file:

```sh {filename:.env}
SENTRY_AUTH_TOKEN=___ORG_AUTH_TOKEN___
```

<Alert level="warning" title="Important">

Make sure to keep your auth token secret and don't commit it to version control.

</Alert>

## Step 5: Instrumentation of Vercel Cron Jobs (optional)

If you have configured [Vercel Cron Jobs](https://vercel.com/docs/cron-jobs) you can set the `automaticVercelMonitors` option to automatically create [Cron Monitors](/product/crons/) in Sentry.

```javascript {tabTitle:ESM} {filename:next.config.mjs}
export default withSentryConfig(nextConfig, {
  automaticVercelMonitors: true,
});
```

```javascript {tabTitle:CJS} {filename:next.config.js}
module.exports = withSentryConfig(nextConfig, {
  automaticVercelMonitors: true,
});
```

<Alert>

Automatic instrumentation of Vercel cron jobs currently only works for the Pages Router. App Router route handlers are not yet supported.

</Alert>

## Step 6: Capture React Component Names (optional)

You can capture the names of React components in your application, so that you can, for example, see the name of a component that a user clicked on in different Sentry features, like Session Replay and Performance page.

Update `withSentryConfig` in your `next.config.js` or `next.config.mjs` with the following addition to capture component names:

```javascript {tabTitle:ESM} {filename:next.config.mjs}
export default withSentryConfig(nextConfig, {
  reactComponentAnnotation: {
    enabled: true,
  },
});
```

```javascript {tabTitle:CJS} {filename:next.config.js}
module.exports = withSentryConfig(nextConfig, {
  reactComponentAnnotation: {
    enabled: true,
  },
});
```

## Step 7: Verify

<Expandable level="warning" title="Are you developing with Turbopack?">

The Sentry SDK doesn't fully support `next dev --turbo` as Turbopack is still under development. This means that the Sentry SDK will not capture any data from your frontend. Other than that, your dev server should be fully operational.

Check the latest information on [Sentry's support for Turbopack on GitHub](https://github.com/getsentry/sentry-javascript/issues/8105).

</Expandable>

Let's test your setup and confirm that Sentry is working properly and sending data to your Sentry project.

### Issues

To test if Sentry captures errors and creates issues for them in your Sentry project, add a test button to one of your existing pages or create a new one:

```javascript
<button
  type="button"
  onClick={() => {
    throw new Error("Sentry Test Error");
  }}
>
  Break the world
</button>
```

<OnboardingOption optionId="performance" hideForThisOption>
  Open the page with your test button in it in your browser. For most Next.js
  applications, this will be at localhost. Clicking the button triggers a
  frontend error.
</OnboardingOption>

<OnboardingOption optionId="performance">
### Tracing

To see whether Sentry tracing is working, create a test route that throws an error:

```javascript
import { NextResponse } from "next/server";
export const dynamic = "force-dynamic";

// A faulty API route to test Sentry's error monitoring
export function GET() {
  throw new Error("Sentry Example API Route Error");
  return NextResponse.json({ data: "Testing Sentry Error..." });
}
```

Next, update the `onClick` event in your button to call the API route and throw an error if the API response is not `ok`:

```javascript
onClick={async () => {
	await Sentry.startSpan({
	  name: 'Example Frontend Span',
	  op: 'test'
	}, async () => {
	  const res = await fetch("/api/sentry-example-api");
	  if (!res.ok) {
		throw new Error("Sentry Example Frontend Error");
	  }
	});
  }
```

Open the page with your test button in it in your browser. For most Next.js applications, this will be at localhost.
Clicking the button triggers two errors:

- a frontend error
- an error within the API route

Sentry captures both of these errors for you. Additionally, the button click starts a performance trace to measure the time it takes for the API request to complete.

</OnboardingOption>

### View Captured Data in Sentry

Now, head over to your project on [Sentry.io](https://sentry.io) to view the collected data (it takes a couple of moments for the data to appear).

<Alert level="warning" title="Important">

Errors triggered from within your browser's developer tools (i.e., the browser console) are sandboxed, so they will not trigger Sentry's error monitoring.

</Alert>

<Expandable title="Need help locating the captured errors in your Sentry project?">

1. Open the [**Issues**](https://sentry.io/orgredirect/organizations/:orgslug/issues) page and select an error from the issues list to view the full details and context of this error. For an interactive UI walkthrough, click [here](/product/sentry-basics/integrate-frontend/generate-first-error/#ui-walkthrough).
2. Open the [**Traces**](https://sentry.io/orgredirect/organizations/:orgslug/traces) page and select a trace to reveal more information about each span, its duration, and any errors. For an interactive UI walkthrough, click [here](/product/sentry-basics/distributed-tracing/generate-first-error/#ui-walkthrough).
3. Open the [**Replays**](https://sentry.io/orgredirect/organizations/:orgslug/replays) page and select an entry from the list to get a detailed view where you can replay the interaction and get more information to help you troubleshoot.

</Expandable>

## Next Steps

At this point, you should have integrated Sentry into your Next.js application and should already be sending error and performance data to your Sentry project.

Now's a good time to customize your setup and look into more advanced topics.
Our next recommended steps for you are:

- Instrument Next.js server actions
- Add error components for the Pages Router
- Learn how to [manually capture errors](/platforms/javascript/guides/nextjs/usage/)
- Continue to [customize your configuration](/platforms/javascript/guides/nextjs/configuration/)
- Learn more about our [Vercel integration](/organization/integrations/deployment/vercel/)

<Expandable permalink={false} title="Did you experience any issues with this guide?">

- If you encountered issues with our installation wizard, try [setting up Sentry manually](/platforms/javascript/guides/nextjs/manual-setup/)
- [Get support](https://sentry.zendesk.com/hc/en-us/)

</Expandable>
