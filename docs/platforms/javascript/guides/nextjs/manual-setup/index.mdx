---
title: "Manual Setup"
sidebar_order: 1
description: "Learn how to manually set up Sentry in your Next.js app with Turbopack and App Router."
---

<Alert type="info">
  For the fastest setup, we recommend using the [wizard
  installer](/platforms/javascript/guides/nextjs).
</Alert>

This guide covers manual setup for **Next.js 15+ with Turbopack and App Router**. For other setups, see:

- [Pages Router Setup](/platforms/javascript/guides/nextjs/manual-setup/pages-router/) - For applications using the Pages Router
- [Webpack Setup](/platforms/javascript/guides/nextjs/manual-setup/webpack-setup/) - For applications not using Turbopack

<PlatformContent includePath="getting-started-prerequisites" />

<StepConnector selector="h2" showNumbers={true}>

## Install

Choose the features you want to configure, and this guide will show you how:

<OnboardingOptionButtons
  options={[
    "error-monitoring",
    "performance",
    "session-replay",
    "user-feedback",
    "logs",
  ]}
/>

<PlatformContent includePath="getting-started-features-expandable" />

<SplitLayout>

<SplitSection>
<SplitSectionText>

### Install the Sentry SDK

Run the command for your preferred package manager to add the Sentry SDK to your application.

</SplitSectionText>
<SplitSectionCode>

```bash {tabTitle:npm}
npm install @sentry/nextjs --save
```

```bash {tabTitle:yarn}
yarn add @sentry/nextjs
```

```bash {tabTitle:pnpm}
pnpm add @sentry/nextjs
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>

## Configure

<SplitLayout>

<SplitSection>
<SplitSectionText>

### Apply Instrumentation to Your App

Extend your app's default Next.js options by adding `withSentryConfig` into your `next.config.ts` file.

</SplitSectionText>
<SplitSectionCode>

```typescript {filename:next.config.ts}
import type { NextConfig } from "next";
import { withSentryConfig } from "@sentry/nextjs";

const nextConfig: NextConfig = {
  // Your existing Next.js configuration
};

export default withSentryConfig(nextConfig, {
  org: "___ORG_SLUG___",
  project: "___PROJECT_SLUG___",

  // Only print logs for uploading source maps in CI
  silent: !process.env.CI,

  // Automatically tree-shake Sentry logger statements to reduce bundle size
  disableLogger: true,
});
```

</SplitSectionCode>
</SplitSection>

<SplitSection>
<SplitSectionText>

### Initialize Sentry SDKs

Create the following files in your application's root directory (or `src` folder if you have one):

- `instrumentation-client.ts` - Client-side SDK initialization
- `sentry.server.config.ts` - Server-side SDK initialization
- `sentry.edge.config.ts` - Edge runtime SDK initialization

<Alert title="Tip">
  Include your DSN directly in these files, or use a _public_ environment
  variable like `NEXT_PUBLIC_SENTRY_DSN`.
</Alert>

</SplitSectionText>
<SplitSectionCode>

```typescript {tabTitle:Client} {filename:instrumentation-client.ts}
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Adds request headers and IP for users
  sendDefaultPii: true,
  // ___PRODUCT_OPTION_START___ performance

  // Set tracesSampleRate to 1.0 to capture 100% of transactions for tracing.
  // We recommend adjusting this value in production
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
  integrations: [
    // ___PRODUCT_OPTION_START___ session-replay
    Sentry.replayIntegration(),
    // ___PRODUCT_OPTION_END___ session-replay
    // ___PRODUCT_OPTION_START___ user-feedback
    Sentry.feedbackIntegration({
      colorScheme: "system",
    }),
    // ___PRODUCT_OPTION_END___ user-feedback
  ],
  // ___PRODUCT_OPTION_START___ session-replay

  // Capture Replay for 10% of all sessions,
  // plus for 100% of sessions with an error
  replaysSessionSampleRate: 0.1,
  replaysOnErrorSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ session-replay
  // ___PRODUCT_OPTION_START___ logs

  // Enable logs to be sent to Sentry
  enableLogs: true,
  // ___PRODUCT_OPTION_END___ logs
});

// ___PRODUCT_OPTION_START___ performance
// This export will instrument router navigations
export const onRouterTransitionStart = Sentry.captureRouterTransitionStart;
// ___PRODUCT_OPTION_END___ performance
```

```typescript {tabTitle:Server} {filename:sentry.server.config.ts}
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Adds request headers and IP for users
  sendDefaultPii: true,
  // ___PRODUCT_OPTION_START___ performance

  // Set tracesSampleRate to 1.0 to capture 100% of transactions for tracing.
  // We recommend adjusting this value in production
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
  // ___PRODUCT_OPTION_START___ logs

  // Enable logs to be sent to Sentry
  enableLogs: true,
  // ___PRODUCT_OPTION_END___ logs
});
```

```typescript {tabTitle:Edge} {filename:sentry.edge.config.ts}
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Adds request headers and IP for users
  sendDefaultPii: true,
  // ___PRODUCT_OPTION_START___ performance

  // Set tracesSampleRate to 1.0 to capture 100% of transactions for tracing.
  // We recommend adjusting this value in production
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
  // ___PRODUCT_OPTION_START___ logs

  // Enable logs to be sent to Sentry
  enableLogs: true,
  // ___PRODUCT_OPTION_END___ logs
});
```

</SplitSectionCode>
</SplitSection>

<SplitSection>
<SplitSectionText>

### Register Server-Side SDK

Create a [Next.js Instrumentation file](https://nextjs.org/docs/app/building-your-application/optimizing/instrumentation) named `instrumentation.ts` in your project root (or `src` folder). This file imports your server and edge configurations.

</SplitSectionText>
<SplitSectionCode>

```typescript {filename:instrumentation.ts}
export async function register() {
  if (process.env.NEXT_RUNTIME === "nodejs") {
    await import("./sentry.server.config");
  }

  if (process.env.NEXT_RUNTIME === "edge") {
    await import("./sentry.edge.config");
  }
}
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>

## Capture React Render Errors

<SplitLayout>

<SplitSection>
<SplitSectionText>

### Global Error Component

Create `app/global-error.tsx` to capture errors that occur anywhere in your App Router application.

</SplitSectionText>
<SplitSectionCode>

<PlatformContent includePath="getting-started-capture-errors/nextjs/app-router-global-error" />

</SplitSectionCode>
</SplitSection>

<SplitSection>
<SplitSectionText>

### Nested React Server Component Errors

To capture errors from nested React Server Components, export the `onRequestError` hook from your `instrumentation.ts` file.

<Alert type="info">
  Requires `@sentry/nextjs` version `8.28.0` or higher and Next.js 15.
</Alert>

</SplitSectionText>
<SplitSectionCode>

<PlatformContent includePath="getting-started-capture-errors/nextjs/nested-server-components" />

</SplitSectionCode>
</SplitSection>

</SplitLayout>

## Manually Capture Exceptions

By default, Sentry captures errors automatically. For cases where you want to manually capture errors, use `Sentry.captureException()`.

<SplitLayout>

<SplitSection>
<SplitSectionText>

### Server-Side (API Routes & Server Actions)

Capture errors in API route handlers and Server Actions.

</SplitSectionText>
<SplitSectionCode>

```typescript {filename:app/api/example/route.ts}
import * as Sentry from "@sentry/nextjs";

export async function GET() {
  try {
    // Your code that might throw
    throw new Error("Failed to fetch data");
  } catch (err) {
    Sentry.captureException(err);
    throw err; // Optionally re-throw
  }
}
```

```typescript {filename:app/actions.ts}
"use server";
import * as Sentry from "@sentry/nextjs";

export async function submitOrder(formData: FormData) {
  try {
    // ...perform work that might throw
  } catch (err) {
    Sentry.captureException(err);
    throw err;
  }
}
```

</SplitSectionCode>
</SplitSection>

<SplitSection>
<SplitSectionText>

### Client-Side

Capture errors from user interactions and client-side logic.

</SplitSectionText>
<SplitSectionCode>

```tsx {filename:app/components/DangerousButton.tsx}
"use client";
import * as Sentry from "@sentry/nextjs";

export function DangerousButton() {
  const onClick = async () => {
    try {
      throw new Error("User action failed");
    } catch (err) {
      Sentry.captureException(err);
      throw err; // Optional: trigger error boundaries
    }
  };

  return <button onClick={onClick}>Do risky thing</button>;
}
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>

## Source Maps (Optional)

Enable readable stack traces by uploading source maps to Sentry.

<SplitLayout>

<SplitSection>
<SplitSectionText>

### Configure Source Maps

Add the `authToken` option to your `next.config.ts` and set the `SENTRY_AUTH_TOKEN` environment variable.

<Alert level="warning" title="Important">
  Keep your auth token secret and out of version control.
</Alert>

</SplitSectionText>
<SplitSectionCode>

```typescript {filename:next.config.ts}
export default withSentryConfig(nextConfig, {
  org: "___ORG_SLUG___",
  project: "___PROJECT_SLUG___",

  // Pass the auth token
  authToken: process.env.SENTRY_AUTH_TOKEN,

  // Upload a larger set of source maps for prettier stack traces
  widenClientFileUpload: true,
});
```

```sh {filename:.env.local}
SENTRY_AUTH_TOKEN=___ORG_AUTH_TOKEN___
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>

## Tunneling (Optional)

Prevent ad blockers from blocking Sentry events by routing them through your Next.js server.

<SplitLayout>

<SplitSection>
<SplitSectionText>

### Configure Tunnel Route

Set `tunnelRoute: true` to automatically generate a random tunnel route for each build.

<Alert level="info">
  This increases server load. Consider the trade-off for your application.
</Alert>

</SplitSectionText>
<SplitSectionCode>

```typescript {filename:next.config.ts}
export default withSentryConfig(nextConfig, {
  // Generate a random route for each build (recommended)
  tunnelRoute: true,

  // Or use a fixed route
  // tunnelRoute: "/monitoring",
});
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>

## React Component Names (Optional)

Capture React component names to see which component a user clicked on in Session Replay.

<SplitLayout>

<SplitSection>
<SplitSectionText>

### Enable Component Annotation

</SplitSectionText>
<SplitSectionCode>

```typescript {filename:next.config.ts}
export default withSentryConfig(nextConfig, {
  reactComponentAnnotation: {
    enabled: true,
  },
});
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>

## Verify

Test your setup by creating a button that throws an error:

<SplitLayout>

<SplitSection>
<SplitSectionText>

Add this button to any page and click it to trigger a test error.

<PlatformContent includePath="getting-started-browser-sandbox-warning" />

</SplitSectionText>
<SplitSectionCode>

```jsx
<button
  type="button"
  onClick={() => {
    throw new Error("Sentry Test Error");
  }}
>
  Break the world
</button>
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>

Head over to your project on [Sentry.io](https://sentry.io) to view the captured error.

<PlatformContent includePath="getting-started-verify-locate-data" />

</StepConnector>

## Next Steps

- [Structured Logs](/platforms/javascript/guides/nextjs/logs/) - Send logs to Sentry
- [Session Replay](/platforms/javascript/guides/nextjs/session-replay/) - Configure replay options
- [Distributed Tracing](/platforms/javascript/guides/nextjs/tracing/) - Set up tracing across services
- [Enriching Events](/platforms/javascript/guides/nextjs/enriching-events/) - Add context to your events
- [Configuration Options](/platforms/javascript/guides/nextjs/configuration/) - All configuration options

<Expandable permalink={false} title="Are you having problems setting up the SDK?">

- Try the [installation wizard](/platforms/javascript/guides/nextjs/) for automatic setup
- [Get support](https://sentry.zendesk.com/hc/en-us/)

</Expandable>
