---
title: Google Cloud Functions
description: "Learn how to manually set up Sentry in your Google Cloud Functions and capture your first errors."
sdk: sentry.javascript.google-cloud-serverless
fallbackGuide: javascript.node
categories:
  - javascript
  - server
  - server-node
  - serverless
---

<Alert>
  This guide is for `@sentry/google-cloud-serverless` version `8.0.0` and up.
</Alert>
<PlatformContent includePath="getting-started-prerequisites" />

## Step 1: Install

Choose the features you want to configure, and this guide will show you how:

<OnboardingOptionButtons
  options={["error-monitoring", "performance", "profiling", "logs"]}
/>

<PlatformContent includePath="getting-started-features-expandable" />

### Install the Sentry SDK

Run the command for your preferred package manager to add the Sentry SDK to your application:

<PlatformContent includePath="getting-started-install" />

## Step 2: Configure

Make sure to initialize Sentry at the top of your function code and wrap each function with the appropriate helper. Select the tab that matches the kind of function you're using (HTTP, Background, or CloudEvent):

```javascript {tabTitle:Http functions}
const Sentry = require("@sentry/google-cloud-serverless");

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Adds request headers and IP for users, for more info visit:
  // https://docs.sentry.io/platforms/javascript/guides/gcp-functions/configuration/options/#sendDefaultPii
  sendDefaultPii: true,
  // ___PRODUCT_OPTION_START___ performance

  // Add Tracing by setting tracesSampleRate and adding integration
  // Set tracesSampleRate to 1.0 to capture 100% of transactions
  // We recommend adjusting this value in production
  // Learn more at
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
  // ___PRODUCT_OPTION_START___ logs

  // Enable logs to be sent to Sentry
  enableLogs: true,
  // ___PRODUCT_OPTION_END___ logs
});

exports.helloHttp = Sentry.wrapHttpFunction((req, res) => {
  // your code
});
```

```javascript {tabTitle:Background functions}
const Sentry = require("@sentry/google-cloud-serverless");

Sentry.init({
  dsn: "___PUBLIC_DSN___",
  // ___PRODUCT_OPTION_START___ performance

  // Add Tracing by setting tracesSampleRate and adding integration
  // Set tracesSampleRate to 1.0 to capture 100% of transactions
  // We recommend adjusting this value in production
  // Learn more at
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
});

exports.helloEvents = Sentry.wrapEventFunction((data, context, callback) => {
  // your code
});
```

```javascript {tabTitle:CloudEvent functions}
const Sentry = require("@sentry/google-cloud-serverless");

Sentry.init({
  dsn: "___PUBLIC_DSN___",
  // ___PRODUCT_OPTION_START___ performance

  // Add Tracing by setting tracesSampleRate and adding integration
  // Set tracesSampleRate to 1.0 to capture 100% of transactions
  // We recommend adjusting this value in production
  // Learn more at
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
});

exports.helloEvents = Sentry.wrapCloudEventFunction((context, callback) => {
  // your code
});
```

## Step 3: Add Readable Stack Traces With Source Maps (Optional)

<PlatformContent includePath="getting-started-sourcemaps-short-version" />

## Step 4: Verify Your Setup

Let's test your setup and confirm that Sentry is working correctly and sending data to your Sentry project.

### Issues

First, let's verify that Sentry captures errors and creates issues in your Sentry project. Add an intentional error in your function:

```javascript {tabTitle:Http functions}
exports.helloHttp = Sentry.wrapHttpFunction((req, res) => {
  throw new Error("Sentry Test Error - This is intentional!");
});
```

```javascript {tabTitle:Background functions}
exports.helloBackground = Sentry.wrapBackgroundFunction(
  (data, context, callback) => {
    throw new Error("Sentry Test Error - This is intentional!");
  }
);
```

```javascript {tabTitle:CloudEvent functions}
exports.helloEvents = Sentry.wrapCloudEventFunction((context, callback) => {
  throw new Error("Sentry Test Error - This is intentional!");
});
```

<OnboardingOption optionId="performance">
### Tracing
To test tracing, wrap your code in a span:

```javascript {tabTitle:Http functions}
exports.helloHttp = Sentry.wrapHttpFunction(async (req, res) => {
  await Sentry.startSpan(
    { op: "test", name: "My First Test Transaction" },
    async () => {
      // Simulate some work
      await new Promise((resolve) => setTimeout(resolve, 100));
    }
  );

  res.status(200).send("Success!");
});
```

```javascript {tabTitle:Background functions}
exports.helloBackground = Sentry.wrapBackgroundFunction(
  async (data, context) => {
    await Sentry.startSpan(
      { op: "test", name: "My First Test Transaction" },
      async () => {
        // Simulate some work
        await new Promise((resolve) => setTimeout(resolve, 100));
      }
    );
  }
);
```

```javascript {tabTitle:CloudEvent functions}
exports.helloEvent = Sentry.wrapCloudEventFunction(async (context) => {
  await Sentry.startSpan(
    { op: "test", name: "My First Test Transaction" },
    async () => {
      // Simulate some work
      await new Promise((resolve) => setTimeout(resolve, 100));
    }
  );
});
```

</OnboardingOption>

### View Captured Data in Sentry

Now, head over to your project on [Sentry.io](https://sentry.io/) to view the collected data (it takes a couple of moments for the data to appear).

<PlatformContent includePath="getting-started-verify-locate-data" />

## Next Steps

At this point, you should have integrated Sentry into your Google Cloud Platform functions, which should already be sending data to your Sentry project.

Now's a good time to customize your setup and look into more advanced topics. Our next recommended steps for you are:

- Continue to <PlatformLink to="/configuration">customize your configuration</PlatformLink>
- Learn how to <PlatformLink to="/usage">manually capture errors</PlatformLink>
- Get familiar with [Sentry's product features](/product/) like tracing, insights, and alerts

<Expandable permalink={false} title="Are you having problems setting up the SDK?">

- Find various topics in <PlatformLink to="/troubleshooting">Troubleshooting</PlatformLink>
- [Get support](https://sentry.zendesk.com/hc/en-us/)

</Expandable>
