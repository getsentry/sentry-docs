---
title: wrapMiddlewaresWithSentry
description: "Learn how to add tracing to your TanStack Start middleware."
---

<Alert>
  `wrapMiddlewaresWithSentry` is available from version `@sentry/tanstackstart-react` 10.34.0 and up.
</Alert>

The `wrapMiddlewaresWithSentry` function allows you to add tracing to your TanStack Start [middleware](https://tanstack.com/start/latest/docs/framework/react/guide/middleware). This feature enables more granular performance monitoring and helps you gather detailed insights into the performance of individual middlewares within your application.

## Usage

Pass your middlewares as an object to `wrapMiddlewaresWithSentry`. The function returns an array of wrapped middlewares in the same order:

```tsx {filename:app/middleware.ts}
import { wrapMiddlewaresWithSentry } from "@sentry/tanstackstart-react";
import { createMiddleware } from "@tanstack/react-start";

const authMiddleware = createMiddleware().server(async ({ next }) => {
  // Your auth logic
  return next();
});

const loggingMiddleware = createMiddleware().server(async ({ next }) => {
  // Your logging logic
  return next();
});

const [wrappedAuth, wrappedLogging] = wrapMiddlewaresWithSentry({
  authMiddleware,
  loggingMiddleware,
});

export { wrappedAuth as authMiddleware, wrappedLogging as loggingMiddleware };
```

The middleware name in Sentry is automatically assigned based on the object key (e.g., `authMiddleware`, `loggingMiddleware`).

## Next Steps:

- [Return to **Getting Started**](../../)
- [Return to the main integrations page](../)
