---
title: Automatic Instrumentation
description: "Learn what spans are captured after tracing is enabled."
sidebar_order: 10
notSupported:
  - javascript.cordova
---

<Alert>

Capturing spans requires that you first <PlatformLink to="/tracing/">set up tracing in your app</PlatformLink> if you haven't already.

</Alert>

<PlatformContent includePath="performance/automatic-instrumentation-intro" />

## What's Captured Automatically

Once you enable tracing, the SDK automatically captures performance data without additional code:

| What | Description | Metrics |
|------|-------------|---------|
| **Page loads** | Full page load performance | LCP, CLS, TTFB |
| **Navigations** | Client-side route changes | Duration, Web Vitals |
| **HTTP requests** | All fetch/XHR calls | Duration, status, URL |
| **User interactions** | Clicks, inputs that trigger work | INP (responsiveness) |
| **Long tasks** | Main thread blocking > 50ms | Duration, attribution |

<PlatformContent includePath="performance/what-instrumentation-provides" />

## Enable Instrumentation

<PlatformContent includePath="performance/enable-automatic-instrumentation" />

## Common Configuration

Most apps only need these options:

- [Distributed Tracing Targets](#distributed-tracing-targets) — Connect frontend and backend spans
- [Customize Span Names](#customize-span-names) — Normalize URLs or add context
- [Filter Out Unwanted Requests](#filter-out-unwanted-requests) — Exclude health checks, analytics

### Distributed Tracing Targets

<SdkOption name="tracePropagationTargets" type='Array<string | RegExp>' defaultValue={'[\'localhost\', /^\\\/$/]'}>

Controls which outgoing requests include tracing headers (`sentry-trace` and `baggage`). **Required for connecting frontend spans to backend spans.**

By default, tracing headers are only attached to requests containing `localhost` or starting with `/`. Add your API domains to trace requests across services:

<PlatformContent includePath="performance/tracePropagationTargets-example" />

<Alert level="warning">

Your server must allow these headers via CORS: `Access-Control-Allow-Headers: sentry-trace, baggage`

</Alert>

</SdkOption>

### Customize Span Names

<SdkOption name="beforeStartSpan" type='(options: StartSpanOptions) => StartSpanOptions'>

Modify span data before it's captured. Useful for adding context or normalizing URLs with dynamic segments:

<PlatformContent includePath="performance/beforeNavigate-example" />

</SdkOption>

<PlatformSection supported={["javascript.react"]}>

<Alert level="info">

For React Router integration, see <PlatformLink to="/configuration/integrations/react-router/">React Router Integration</PlatformLink> for automatic route-based span names.

</Alert>

</PlatformSection>

### Filter Out Unwanted Requests

<SdkOption name="shouldCreateSpanForRequest" type='(url: string) => boolean'>

Exclude requests from tracing, such as health checks or analytics pings:

<PlatformContent includePath="performance/filter-span-example" />

</SdkOption>

## Web Vitals & Interactions

### Interaction to Next Paint (INP)

<SdkOption name="enableInp" type='boolean' defaultValue='true' availableSince='7.104.0' defaultNote="See note">

Automatically captures [INP](/product/insights/web-vitals/web-vitals-concepts/#interaction-to-next-paint-inp) events to measure responsiveness. Results appear in the [Web Vitals](/product/insights/web-vitals/) module.

Default: `true` in SDK 8.x+, `false` in 7.x.

<Alert level="info" title="INP replaces FID">

As of SDK version 10.0.0, First Input Delay (FID) is no longer reported. Google deprecated FID in favor of INP, which provides a more comprehensive measure of responsiveness. If you have alerts or dashboards based on FID, update them to use INP instead.

</Alert>

<PlatformContent includePath="performance/enable-inp-example" />

</SdkOption>

<SdkOption name="interactionsSampleRate" type='number' defaultValue='1.0'>

Sample rate for INP spans, applied on top of `tracesSampleRate`. For example, `interactionsSampleRate: 0.5` with `tracesSampleRate: 0.1` results in 5% of interactions captured.

</SdkOption>

## Advanced Options

<Expandable title="Timing & Timeout Options">

<SdkOption name="idleTimeout" type='number' defaultValue='1000'>

Time in ms to wait before finishing a pageload/navigation span when no unfinished child spans remain.

</SdkOption>

<SdkOption name="finalTimeout" type='number' defaultValue='30000'>

Maximum duration in ms for pageload/navigation spans. Spans exceeding this are automatically finished.

</SdkOption>

<SdkOption name="childSpanTimeout" type='number' defaultValue='15000'>

Maximum time in ms a child span can run before the parent pageload/navigation span is finished.

</SdkOption>

</Expandable>

<Expandable title="Enable/Disable Specific Instrumentation">

<SdkOption name="instrumentPageLoad" type='boolean' defaultValue='true'>

Enable/disable automatic `pageload` span creation on initial page load.

</SdkOption>

<SdkOption name="instrumentNavigation" type='boolean' defaultValue='true'>

Enable/disable automatic `navigation` span creation on history changes.

</SdkOption>

<SdkOption name="enableLongTask" type='boolean' defaultValue='true'>

Enable/disable automatic spans for long tasks (main thread blocking > 50ms).

</SdkOption>

<SdkOption name="enableLongAnimationFrame" type='boolean' defaultValue='true' availableSince='8.18.0'>

Enable/disable spans for long animation frames. Falls back to long tasks if browser doesn't support long animation frames.

</SdkOption>

<SdkOption name="markBackgroundSpan" type='boolean' defaultValue='true'>

Mark pageload/navigation spans as "cancelled" when the tab moves to background. Recommended to keep enabled for accurate measurements.

</SdkOption>

<SdkOption name="enableReportPageLoaded" type='boolean' defaultValue='false' availableSince='10.13.0'>

Enable the <PlatformLink to="/apis/#reportPageLoaded">`Sentry.reportPageLoaded()` function</PlatformLink>.

</SdkOption>

</Expandable>

<Expandable title="Filtering & Ignoring Spans">

<SdkOption name="ignoreResourceSpans" type='Array<string>' defaultValue='[]' availableSince='9.23.0'>

Ignore specific resource span categories by their `op` (e.g., `resource.script`, `resource.css`):

```javascript
Sentry.init({
  integrations: [
    Sentry.browserTracingIntegration({
      ignoreResourceSpans: ['resource.css', 'resource.script'],
    }),
  ],
});
```

</SdkOption>

<SdkOption name="ignorePerformanceApiSpans" type='Array<string | RegExp>' defaultValue='[]' availableSince='9.23.0'>

Ignore spans created from `performance.mark()` and `performance.measure()`:

```javascript
Sentry.init({
  integrations: [
    Sentry.browserTracingIntegration({
      ignorePerformanceApiSpans: ['myMeasurement', /myMark/],
    }),
  ],
});
```

</SdkOption>

<SdkOption name="onRequestSpanStart" type="(span: Span, requestInformation: { headers?: WebFetchHeaders }): void">

Callback invoked when a span starts for an outgoing fetch/XHR request. Use to annotate spans with additional attributes based on request headers.

</SdkOption>

</Expandable>

<PlatformSection supported={["javascript.nextjs"]} notSupported={["javascript"]}>

## Next.js Configuration

The `browserTracingIntegration` is automatically enabled in `@sentry/nextjs`. To customize options, include it explicitly in `instrumentation-client.js`:

```javascript
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: "___PUBLIC_DSN___",
  integrations: [
    Sentry.browserTracingIntegration({
      // your options here
    }),
  ],
  tracesSampleRate: 1.0,
  tracePropagationTargets: ["localhost", /^\//,  /^https:\/\/yourserver\.io\/api/],
});
```

</PlatformSection>
