---
title: Set Up Session Replay
sidebar_title: Session Replay
sidebar_order: 5
sidebar_section: features
notSupported:
  - javascript.cordova
  - javascript.wasm
  - javascript.bun
  - javascript.deno
  - javascript.node
  - javascript.aws-lambda
  - javascript.azure-functions
  - javascript.connect
  - javascript.express
  - javascript.fastify
  - javascript.gcp-functions
  - javascript.hapi
  - javascript.hono
  - javascript.koa
  - javascript.nestjs
  - javascript.cloudflare
description: "Learn how to enable Session Replay in your app if it is not already set up."
---

<Include name="session-replay-web-report-bug.mdx" />

[Session Replay](/product/explore/session-replay/) helps you get to the root cause of an error or latency issue faster by providing you with a video-like reproduction of what was happening in the user's browser before, during, and after the issue. You can rewind and replay your application's DOM state and see key user interactions, like mouse clicks, scrolls, network requests, and console entries, in a single combined UI inspired by your browser's DevTools.

By default, our Session Replay SDK masks all DOM text content, images, and user input, giving you heightened confidence that no sensitive data will leave the browser. To learn more, see <PlatformLink to="/session-replay/privacy">Session Replay Privacy</PlatformLink>.

<PlatformSection supported={["javascript.angular"]}>
  <Alert level="warning">
    Angular's{" "}
    <a
      target="_blank"
      rel="noopener noreferrer"
      href="https://angular.dev/api/core/ChangeDetectionStrategy#Default"
    >
      default "Change Detection" strategy
    </a>{" "}
    monkeypatches browser globals and can break or cause performance regressions
    in your application when using Session Replay. To avoid this, we recommend
    you use the `OnPush` strategy when using Angular.
  </Alert>
</PlatformSection>

## Prerequisites

<PlatformContent includePath="session-replay/pre-requisites" />

## Install

<PlatformContent includePath="session-replay/install" />

## Set Up

To set up the integration, add the following to your Sentry initialization. There are several options you can pass to the integration constructor. See the [configuration documentation](/platforms/javascript/session-replay/configuration/) for more details.

<PlatformSection supported={["javascript.nextjs"]}>
<Alert>

Session Replay only runs in the browser, so you only need to configure it in `instrumentation-client.ts`. The server (`sentry.server.config.ts`) and edge (`sentry.edge.config.ts`) entry points run in Node.js and Edge runtimes where Replay is not available.

</Alert>
</PlatformSection>

<PlatformContent
  includePath="session-replay/setup"
  fallbackPlatform="javascript"
/>

<PlatformSection notSupported={["javascript.deno", "javascript.bun", "javascript.wasm", "javascript.capacitor", "javascript.electron", "javascript.cloudflare"]}>

### Canvas Recording

<Alert level="warning">
  There is currently no PII scrubbing in canvas recordings!
</Alert>

<SplitLayout>

<SplitSection>
<SplitSectionText>

#### Enable Canvas Recording

Add `replayCanvasIntegration()` to record HTML canvas elements. This is opt-in and tree-shaken from your bundle if not used.

</SplitSectionText>
<SplitSectionCode>

<PlatformContent includePath="session-replay/setup-canvas" />

</SplitSectionCode>
</SplitSection>

<SplitSection>
<SplitSectionText>

#### 3D and WebGL Canvases

For 3D/WebGL canvases, the integration needs `preserveDrawingBuffer` to export images, which can affect performance. To avoid this, enable manual snapshotting and call `snapshot()` inside your paint loop.

Call `snapshot()` in the same execution loop as draw commands to avoid capturing empty buffers.

</SplitSectionText>
<SplitSectionCode>

```javascript
// Step 1: Enable manual snapshotting
Sentry.replayCanvasIntegration({
  enableManualSnapshot: true,
});

// Step 2: Call snapshot in your paint loop
function paint() {
  const canvasRef = document.querySelector("#my-canvas");
  Sentry.getClient()
    ?.getIntegrationByName("ReplayCanvas")
    ?.snapshot(canvasRef);
}
```

</SplitSectionCode>
</SplitSection>

<SplitSection>
<SplitSectionText>

#### WebGPU Canvases

WebGPU canvas textures expire after the current task completes. Use `skipRequestAnimationFrame: true` to capture immediately after rendering.

</SplitSectionText>
<SplitSectionCode>

```javascript
// Step 1: Enable manual snapshotting
Sentry.replayCanvasIntegration({
  enableManualSnapshot: true,
});

// Step 2: Snapshot immediately after rendering
function paint() {
  const canvasRef = document.querySelector("#my-canvas");
  const canvasIntegration = Sentry.getClient()
    ?.getIntegrationByName("ReplayCanvas");

  // ... your WebGPU rendering commands ...

  // Capture immediately - required for WebGPU
  canvasIntegration?.snapshot(canvasRef, {
    skipRequestAnimationFrame: true,
  });
}
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>
</PlatformSection>

### Content Security Policy (CSP)

<SplitLayout>

<SplitSection>
<SplitSectionText>

#### Configure CSP for Replay

Session Replay uses a WebWorker for compression off the main UI thread. Add these CSP entries to allow workers to load.

<PlatformSection notSupported={["javascript.electron"]}>

Safari versions ≤ 15.4 also need `child-src`.

</PlatformSection>

</SplitSectionText>
<SplitSectionCode>

```text
worker-src 'self' blob:
child-src 'self' blob:
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>

If you're unable to update your CSP policy to allow inline web workers, you can also [use a custom compression worker](./configuration#using-a-custom-compression-worker) instead.

<PlatformSection supported={["javascript.react"]}>
  ### React Component Names If you want to capture react component names in
  Sentry, you'll need to configure [React component name
  capturing](/platforms/javascript/guides/react/features/component-names). This
  will allow you to identify elements by the component name instead of the
  selector. The component names are searchable and will be surfaced in
  breadcrumbs, rage clicks, and dead clicks.
</PlatformSection>

## User Session

A user session starts when the Session Replay SDK is first loaded and initialized.
The session will capture any pageloads, refreshes, or navigations as long as the SDK is re-initialized on the same domain, and in the same browser tab, each time. Sessions continue capturing data until 5 minutes pass without any user interactions **or** until a maximum of 60 minutes have elapsed. Closing the browser tab will end the session immediately, according to the rules for [SessionStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage).

<Alert>

An _interaction_ refers to either a mouse click or a browser navigation event.

</Alert>

### Replay Captures on Errors Only

If you prefer not to record an entire session, you can elect to capture a replay only if an error occurs. In this case, the integration will buffer up to one minute worth of events prior to the error being thrown. It will continue to record the session, following the rules above regarding session life and activity. Read the [sampling](#sampling) section for configuration options.

## Sampling

Sampling controls how much traffic results in a Session Replay.

<SplitLayout>

<SplitSection>
<SplitSectionText>

#### Configure Sample Rates

- <PlatformIdentifier name="replays-session-sample-rate" /> - Percentage of sessions to record fully
- <PlatformIdentifier name="replays-on-error-sample-rate" /> - Percentage of sessions to record when an error occurs (buffers 1 minute before the error)

**Tip:** Keep `replaysOnErrorSampleRate` at `1.0` - error sessions provide the most debugging value.

#### Recommended Production Sample Rates

<div className="table-fit-content">

| Traffic Volume             | Session Rate | Error Rate |
| -------------------------- | ------------ | ---------- |
| **High** (100k+/day)       | `0.01` (1%)  | `1.0`      |
| **Medium** (10k-100k/day)  | `0.1` (10%)  | `1.0`      |
| **Low** (under 10k/day)    | `0.25` (25%) | `1.0`      |

</div>

</SplitSectionText>
<SplitSectionCode>

```javascript {filename:instrumentation-client.ts}
Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Capture 10% of all sessions
  replaysSessionSampleRate: 0.1,

  // Capture 100% of sessions with errors
  replaysOnErrorSampleRate: 1.0,

  integrations: [Sentry.replayIntegration()],
});
```

</SplitSectionCode>
</SplitSection>

</SplitLayout>

### How Sampling Works

Sampling begins as soon as a session starts. <PlatformIdentifier name="replays-session-sample-rate" /> is evaluated first. If it's sampled, the replay recording will begin. Otherwise, <PlatformIdentifier name="replays-on-error-sample-rate" /> is evaluated and if it's sampled, the integration will begin buffering the replay and will only upload it to Sentry if an error occurs. The remainder of the replay will behave similarly to a whole-session replay. 

Read more about <PlatformLink to="/session-replay/understanding-sessions/">understanding sessions</PlatformLink>.

## Error Linking

Errors that happen on the page while a replay is running will be linked to the replay, making it possible to jump between related issues and replays. However, it's **possible** that in some cases the error count reported on the **Replays Details** page won't match the actual errors that have been captured. That's because errors can be lost, and while this is uncommon, there are a few reasons why it could happen:

- The replay was rate-limited and couldn't be accepted.
- The replay was deleted by a member of your org.
- There were network errors and the replay wasn't saved.

## Verify

While you're testing, we recommend that you set <PlatformIdentifier name="replays-session-sample-rate" /> to `1.0`. This ensures that every user session will be sent to Sentry.

Once testing is complete, **we recommend lowering this value in production**. We still recommend keeping <PlatformIdentifier name="replays-on-error-sample-rate" /> set to `1.0`.

## Related Features

- <PlatformLink to="/tracing/">Tracing</PlatformLink> — Traces are visible in the Replay timeline, showing you performance data in context.
- <PlatformSection notSupported={["javascript.deno", "javascript.cordova"]}><PlatformLink to="/logs/">Logs</PlatformLink> — Logs emitted during a replay session are automatically linked for easy navigation.</PlatformSection>

## Replay Next Steps

<PageGrid />
