---
title: Set Up Java Profiling
sidebar_title: Profiling
description: "Learn how to enable profiling in your app if it is not already set up."
sidebar_order: 5000
supported:
  - java
---

<PlatformContent includePath="profiling/index/preface" />
<PlatformContent includePath="profiling/index/why-profiling" />

<Alert>

Continuous profiling is available starting in SDK version `8.23.0` for macOS and Linux.

</Alert>

## Install

In addition to your typical Sentry dependencies, you will need to add `sentry-async-profiler` as a dependency:

```groovy {tabTitle:Gradle}
implementation 'io.sentry:sentry-async-profiler:{{@inject packages.version('sentry.java.sentry-async-profiler', '8.23.0') }}'
```
```xml {tabTitle:Maven}
<dependency>
    <groupId>io.sentry</groupId>
    <artifactId>sentry-async-profiler</artifactId>
    <version>{{@inject packages.version('sentry.java.sentry-async-profiler', '8.23.0') }}</version>
</dependency>
```

## Enabling Continuous Profiling

Continuous profiling supports two modes - `manual` and `trace`. The two modes are mutually exclusive, and cannot be used at the same time.

In `manual` mode, the profiling data collection can be managed via calls to `Sentry.startProfiler()` and `Sentry.stopProfiler()`. You are entirely in control of when the profiler runs.

In `trace` mode, the profiler manages its own start and stop calls, which are based on spans: the profiler continues to run while there is at least one active span, and stops when there are no active spans.

<PlatformContent includePath="profiling/automatic-instrumentation-setup" />

### Managing Profile Sampling Rates

Sentry SDK supports an additional `profileSessionSampleRate` that must be set to a non-zero value to enable continuous profiling. This can be used to control session sampling rates at the service level as the sampling decision is evaluated only once at SDK initialization.

This is useful for cases where you deploy your service many times, but would only like a subset of those deployments to be profiled. In a single service environment we recommend to set this to 1.0.

### Manage Storage Location for Profiles
The files generated by the underlying profiler are temporarily stored. By default we use the directory `System.getProperty("java.io.tmpdir")/profiling_traces`. This path can be configured by setting the `profilingTracesDirPath` option.

## Platform Support

Continuous profiling for Java is currently supported on:

- macOS
- Linux

The profiler uses [async-profiler](https://github.com/async-profiler/async-profiler) version 3.0 under the hood to collect profiling data. It currently supports Java up to JDK 22.
