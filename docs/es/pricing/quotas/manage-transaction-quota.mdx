---
title: Administra tu cuota de spans
keywords:
  - mejores prácticas
sidebar_order: 40
description: Aprende a usar las herramientas que Sentry ofrece para controlar tu cuota de spans.
og_image: /og-images/pricing-quotas-manage-transaction-quota.png
---

En la mayoría de los casos, enviar todos los eventos de span a Sentry puede generar más datos de los que te resultan útiles y agotar tus spans demasiado rápido. Sentry ofrece herramientas para controlar el *tipo* y la *cantidad* de spans que se monitorean. Esto te permite contar con datos de trazas útiles y accionables.

Configurar correctamente el SDK es un proceso iterativo y continuo, pero estos consejos te mostrarán cómo aprovechar mejor las herramientas de Sentry para sacarle el máximo partido a tus spans. Estos consejos están ordenados de lo más fácil o menos laborioso a lo más desafiante o potencialmente más laborioso. Las dos primeras opciones son acciones que puedes realizar en [sentry.io](https://sentry.io), mientras que las restantes las harás en el SDK.

<div id="before-you-begin-check-your-quota-usage">
  ## Antes de comenzar: revisa el uso de tu cuota
</div>

<Alert title="Nota">
  La pestaña &quot;Usage Stats&quot; solo es visible si tienes un plan Team, Business o Enterprise.
</Alert>

Puedes ver tus eventos de forma agregada en la pestaña &quot;Usage Stats&quot; de **Stats**. Esta información te ayudará a responder preguntas clave sobre la distribución de tus eventos entrantes o qué proyectos están consumiendo tu cuota. Las respuestas a estas preguntas pueden ayudarte a determinar dónde necesitas ajustar más tus filtros y la configuración del SDK.

Esta página está disponible para todos los miembros de tu organización, por lo que los Owners de tu organización de Sentry pueden compartirla con los desarrolladores directamente responsables de un proyecto determinado. Además, puedes regresar a esta página para comprobar si los cambios que realizaste están teniendo el efecto deseado.

<div id="how-can-i-see-a-breakdown-of-incoming-events">
  ### ¿Cómo puedo ver un desglose de los eventos entrantes?
</div>

La pestaña [Usage Stats](/es/product/stats/#usage-stats) muestra detalles sobre la cantidad total de datos que Sentry ha recibido en toda tu organización durante un máximo de 90 días. La página desglosa los eventos (por proyecto) en tres categorías: *accepted*, *dropped* o *filtered*. Solo los eventos aceptados afectan tu cuota:

![Página de Usage Stats mostrando spans](./img/usage-stats-spans.png)

<div id="what-are-my-busiest-projects">
  ### ¿Cuáles son mis proyectos con más actividad?
</div>

La tabla &quot;Project&quot; en la pestaña &quot;Usage Stats&quot; de **Stats** desglosa tus eventos por proyecto para que puedas ver cuáles están consumiendo tu cuota. Al hacer clic en el ícono de configuración junto al nombre de un proyecto en la tabla, se abrirá la configuración del proyecto, donde puedes administrar sus [filtros de entrada](#2-inbound-data-filters).

<div id="managing-my-quota">
  ## Gestión de mi cuota
</div>

Los SDK de Sentry te permiten configurar una tasa de muestreo ([ejemplo](/es/platforms/javascript/configuration/sampling/)). La tabla &quot;Project&quot; en la pestaña &quot;Usage Stats&quot; de Stats también puede ayudarte a decidir la tasa de muestreo más adecuada para tu caso de uso.

<div id="adjusting-quotas">
  ## Ajuste de cuotas
</div>

<Alert>
  Las cuotas solo pueden ser actualizadas por un miembro con el rol Billing o Owner de tu organización de Sentry.
</Alert>

Cuando el volumen de tus unidades de span se acerque o supere la cuota, los miembros con el permiso de organización &quot;Owner&quot; recibirán correos electrónicos de [notificación](/es/product/alerts/notifications/#quota-notifications). Luego puedes optar por [aumentar](#increasing-quotas) o [disminuir](#decreasing-quotas) tu cuota.

<div id="increasing-quotas">
  ### Aumentar las cuotas
</div>

Si estás descartando eventos que quieres conservar porque superaste tu cuota, puedes aumentarla en cualquier momento de tu ciclo de facturación incrementando tu cuota [reservada](#reserved-volume) o la de [pago por uso](/es/pricing/#pricing-how-it-works).

Cuando superas el umbral de tu cuota, el servidor responde con el código de estado HTTP 429, que indica a los SDK y a los clientes que dejen de enviar eventos. Este código incluye un encabezado `Retry-After` que señala el tiempo durante el cual el límite está activo. Sin embargo, los clientes no deben reintentar enviar los eventos, sino descartarlos hasta que el límite expire, para evitar acumulaciones en la cola. Ten en cuenta que, como la ingesta de eventos y la limitación de velocidad ocurren de forma asíncrona, el código 429 siempre llega con un ligero retraso.

Para aumentar tu cuota, ve a **Settings &gt; Subscription** y haz clic en el botón &quot;Manage Subscription&quot; para acceder a tus opciones de suscripción. Cuando aumentas tu cuota, el cambio entra en vigor de inmediato.

Si estás en un plan Developer y quieres aumentar tu cuota, tendrás que actualizar a un plan Team o Business. En estos planes puedes prepagar más spans y comprar presupuesto de pago por uso, según sea necesario. Obtén más información sobre los planes de Sentry en nuestra [página de precios](https://sentry.io/pricing/).

<Alert>
  Si actualizas de Team a Business a mitad del período de facturación, tu precio de pago por uso cambia retroactivamente.
</Alert>

<div id="reserved-volume">
  ### Volumen reservado
</div>

Si la cantidad de eventos que necesitas aumenta de forma constante, quizá te convenga incrementar tu capacidad o volumen reservado. El volumen reservado es más económico que el volumen de pago por uso porque se paga por adelantado. También te permite elegir de antemano la cantidad de spans que quieres tener disponibles. Obtén más información sobre el [volumen reservado](/es/pricing/#prepaid-reserved-capacity) en nuestra documentación de precios.

No deberías incrementar tu volumen reservado si crees que tu necesidad de más eventos es temporal, ya que [reducir tu volumen reservado está vinculado a tu período de facturación](#decreasing-quotas).

<div id="pay-as-you-go-budget">
  ### Presupuesto de pago por uso
</div>

Si necesitas aumentar temporalmente tu cuota de spans, te recomendamos añadir o incrementar el presupuesto de pago por uso. Es ideal para situaciones como el lanzamiento de una nueva versión de tu aplicación, cuando anticipas más eventos durante el mes. Obtén más información sobre [pago por uso](/es/pricing/#pricing-how-it-works) en nuestra documentación de precios.

<div id="decreasing-quotas">
  ### Reducción de cuotas
</div>

Las degradaciones de plan y las reducciones en el volumen reservado se procesan al final de tu período de facturación, y el volumen restante no es reembolsable. Por ejemplo, si tu período de facturación mensual comienza el día 5 y reduces tu volumen reservado el 20 de junio, este cambio se procesará el 4 de julio. El período de facturación que comienza el 5 de julio reflejará tu nuevo volumen reservado.

<Alert level="warning">
  Si tienes un período de facturación anual, las degradaciones de plan y las reducciones en el volumen reservado entran en vigor al comienzo de tu **próximo año de facturación.**
</Alert>

Los cambios en el presupuesto de pago por uso normalmente entran en vigor de inmediato y, en cualquier caso, dentro de las 24 horas. Sin embargo, no puedes reducir tu presupuesto de pago por uso por debajo de lo que has consumido en el período actual.

Para reducir tu cuota, ve a **Settings &gt; Subscription** y haz clic en “Manage Subscriptions”. Cuando llegues al paso “Review &amp; Confirm”, se mostrará la fecha en que estos cambios entrarán en vigor.

<Alert>
  Te recomendamos encarecidamente realizar cambios en la suscripción **antes** del último día de tu período de facturación. Dependiendo de tu zona horaria, en algunos casos, los cambios realizados el último día del período de facturación no entrarán en vigor hasta el siguiente período de facturación.
</Alert>

<div id="inbound-filters">
  ## Filtros de entrada
</div>

Si bien la configuración del SDK requiere cambios en tu código fuente y depende de tu próximo despliegue, los filtros del lado del servidor se pueden configurar fácilmente por proyecto en la sección &quot;Data Filters&quot; de **[Project] &gt; Settings &gt; Inbound Filters**.

Una vez aplicados, puedes seguir los eventos filtrados (número y causa) usando la gráfica que aparece en la parte superior de la página &quot;Inbound Filters&quot;.

![Built-in Inbound Filters](./img/manage-event-stream-03.png)

Sentry ofrece varios métodos para filtrar en el servidor todos los eventos y adjuntos, los cuales se aplican antes de comprobar posibles límites de tasa. Los filtros de entrada incluyen:

* Errores comunes de extensiones del navegador
* Eventos provenientes de `localhost`
* Errores de navegadores antiguos conocidos
* Rastreadores web conocidos
* Versiones específicas de lanzamiento de tu código
* Ciertas direcciones IP

Las primeras cuatro opciones anteriores son ajustes que simplemente activas o desactivas. La configuración de las otras se explica más abajo.

Tras realizar estas comprobaciones, los eventos y adjuntos que no se descarten según estos filtros cuentan para tu cuota. Se aceptan en Sentry, donde se conservan y almacenan.

<div id="ip-filters">
  ### Filtros de IP
</div>

Si tienes un cliente malicioso, Sentry permite bloquear una IP para que no envíe datos. Ve a **[Project] &gt; Settings &gt; Inbound Filters** para agregar las direcciones IP (o subredes) en el campo &quot;IP Addresses&quot;.

<div id="filter-by-release">
  ### Filtrar por versión
</div>

<Include name="feature-available-for-plan-business.mdx" />

Si detectas una versión problemática que genere demasiado ruido, Sentry permite ignorar todos los eventos y archivos adjuntos de esa versión. Ve a **[Project] &gt; Settings &gt; Inbound Filters** y agrega la versión en el campo &quot;Releases&quot;.

<div id="sdk-filtering-beforesendtransaction">
  ## Filtrado del SDK: beforeSendTransaction
</div>

Los SDK de Sentry envían transacciones, cada una de las cuales contiene una cantidad arbitraria de spans. Algunos SDK de Sentry admiten el método de devolución de llamada `beforeSendTransaction`. Una vez implementado, este método se invoca cuando el SDK captura un evento de transacción, justo antes de enviarlo a tu cuenta de Sentry. Como recibe el objeto del evento de transacción como parámetro, puedes usarlo para modificar los datos del evento o descartarlo por completo (devolviendo `null`) según tu lógica personalizada y la información disponible en el evento, como *etiquetas* (*tags*), *entorno* (*environment*), *versión de la release*, *nombre de la transacción*, etc. Ten en cuenta que solo los eventos de transacción pasan por `beforeSendTransaction`. Los eventos de error y de mensaje tienen un método aparte, `beforeSend`, que está disponible en todos los SDK. Obtén más información sobre ambos métodos en [Filtrado de eventos](/es/platform-redirect/?next=/configuration/filtering/).

<div id="sdk-configuration-tracing-options">
  ## Configuración del SDK: opciones de tracing
</div>

Al configurar tu SDK, puedes controlar la cantidad de transacciones y, por ende, la cantidad de spans que se envían a Sentry mediante las [opciones de tracing](/es/platform-redirect/?next=/configuration/options/%23tracing-options), ya sea definiendo una tasa de muestreo o proporcionando una función de muestreo. También puedes configurar [instrumentación personalizada](/es/platform-redirect/?next=/tracing/instrumentation/custom-instrumentation/) para el tracing y capturar ciertos tipos de transacciones.