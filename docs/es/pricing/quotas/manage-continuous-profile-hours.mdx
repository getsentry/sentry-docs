---
title: Gestiona tus horas de Perfilado Continuo
keywords: ["best practices"]
sidebar_order: 51
description: Aprende a usar las herramientas de Sentry para gestionar la cantidad de horas de Perfilado Continuo por las que pagas.
---

Puedes controlar cuándo está activo el Perfilado Continuo y usar el muestreo para limitar la cantidad de horas de Perfilado Continuo que se te facturan. Consulta a continuación cómo hacerlo.

<div id="before-you-begin-check-your-usage">
  ## Antes de comenzar: revisa tu uso
</div>

Puedes consultar tus horas de Continuous Profile de forma agregada en la pestaña &quot;Usage Stats&quot; de la página **Stats** para entender el desglose de tus perfiles entrantes y ver qué proyectos están consumiendo tu cuota. Esto puede ayudarte a identificar dónde necesitas afinar aún más tu configuración.

<div id="how-can-i-sample-profiles">
  ## ¿Cómo puedo muestrear perfiles?
</div>

Continuous Profiling solo admite muestreo en el **cliente**. Para controlar el comportamiento de muestreo en el cliente, puedes establecer el parámetro de configuración `profile_session_sample_rate` en un valor entre 0.0 y 1.0 para controlar cuántas sesiones de perfilado se muestrean (el valor predeterminado es 0.0).

En Continuous Profiling, la sesión comienza cuando se inicializa el SDK de Sentry y se detiene cuando el servicio o proceso se **finaliza**. El muestreo solo se evalúa una vez durante la vida del proceso (durante la inicialización).

Por ejemplo, si usas Continuous Profiling con un servicio de backend donde hay `N` instancias del mismo servicio desplegadas (como contenedores o pods), `profile_session_sample_rate` controla el porcentaje de esas instancias que tendrán el perfilado habilitado. Establecer `profile_session_sample_rate` en 0.5 significa que un 50% aleatorio de las `N` instancias tendrá el perfilado habilitado. Esta tasa de muestreo solo se volverá a evaluar cuando la instancia se reinicie o se vuelva a desplegar.

<div id="how-can-i-control-when-profiling-is-active">
  ## ¿Cómo puedo controlar cuándo está activo el perfilado?
</div>

El perfilado continuo ofrece dos modos de &quot;ciclo de vida&quot; que pueden usarse para controlar cuándo se ejecuta el profiler. Estos modos se controlan configurando la opción del SDK `profile_lifecycle` con uno de estos dos valores:

* `manual` (predeterminado): proporciona control totalmente manual sobre cuándo se ejecuta el perfilado. Puedes usar las funciones `start_profile_session` y `stop_profile_session` para controlarlo con precisión. Ten en cuenta que una sesión de perfilado debe muestrearse según el valor de `profile_session_sample_rate` para que `start_profiler` tenga algún efecto. Llamar a `start_profile_session` no tendrá efecto en sesiones no muestreadas.

* `trace`: ofrece un comportamiento similar al producto anterior de perfilado basado en transacciones, donde el profiler se iniciará y detendrá automáticamente según el ciclo de vida del trace. En este modo, el profiler se iniciará automáticamente cuando haya al menos un root span/transacción activo y se detendrá automáticamente cuando no haya root spans/transacciones activos. Este modo de ciclo de vida solo funciona si se cumplen ambas condiciones:

  * La sesión de perfilado está muestreada (mediante `profile_session_sample_rate`)
  * El trace está muestreado (mediante `traces_sample_rate` o `traces_sampler`)

<div id="how-can-i-estimate-usage-for-continuous-profiling-on-the-backend">
  ## ¿Cómo puedo estimar el uso de Continuous Profiling en el backend?
</div>

Para estimar el uso mensual de Continuous Profiling cuando se usa en el backend, el cálculo es **730 horas al mes × el número de instancias de servicio muestreadas**. Por ejemplo, si el servicio A tiene 5 instancias y el servicio B tiene 10, el uso total sería **(5 + 10) instancias × 730 horas = 10,950 horas al mes.** En este contexto, una “instancia” es un único despliegue del mismo servicio; por ejemplo, podrías tener un único servicio desplegado en N pods de Kubernetes, y cada pod contendría al menos una instancia del servicio. Dado que cada instancia es independiente de las demás, pueden perfilarse de forma independiente. Puedes reducir el costo evitando perfilar varias instancias del mismo servicio (reduciendo `profile_session_sample_rate`): si en este ejemplo solo perfilaran 1 instancia de cada servicio, sería **2 instancias × 730 horas = 1,460 horas al mes.** Si hay varios servicios, los clientes también podrían optar por no perfilar aquellos que no son sensibles al rendimiento (como los de bajo throughput).

<div id="how-do-you-purchase-continuous-profiling">
  ## ¿Cómo adquirir Continuous Profiling?
</div>

Establece tu presupuesto de pago por uso (PAYG), que puedes destinar a Continuous Profiling y a otros productos de Sentry. Consulta la [documentación de precios](/es/pricing/) para obtener más información.

<div id="what-if-im-already-using-transaction-based-profiling">
  ## ¿Qué sucede si ya estoy usando el perfilado basado en transacciones?
</div>

El perfilado continuo y el anterior perfilado basado en transacciones son **mutuamente excluyentes** dentro del mismo servicio, lo que significa que **no puedes** usar ambos al mismo tiempo. Si estás configurando `profiles_sample_rate` o `profiles_sampler` en las opciones de configuración del SDK de Sentry, estás usando el perfilado basado en transacciones. Si estás configurando `profile_session_sample_rate`, estás usando el perfilado continuo.

<div id="what-if-i-try-to-activate-both-at-once">
  ### ¿Qué ocurre si intento activar ambos a la vez?
</div>

Si estableces `profile_session_sample_rate` mientras `profiles_sample_rate` o `profiles_sampler` están configurados, `profile_session_sample_rate` no tendrá ningún efecto y el perfilado basado en transacciones tendrá prioridad.

<div id="can-i-use-both-transaction-based-profiling-and-continuous-profiling-on-separate-services">
  ### ¿Puedo usar tanto el perfilado basado en transacciones como el perfilado continuo en servicios separados?
</div>

En aplicaciones o servicios **separados**, **puedes** optar por usar una combinación de las API de perfilado basado en transacciones y las nuevas API de perfilado continuo. Recomendamos que todos los usuarios migren a las API de perfilado continuo, ya que las API basadas en transacciones eventualmente quedarán obsoletas y se eliminarán en una versión mayor del SDK. Seguiremos admitiendo la ingesta de perfiles basados en transacciones enviados por SDKs antiguos para mantener la compatibilidad con versiones anteriores.

<div id="how-do-i-migrate-from-transaction-based-profiling-to-continuous-profiling">
  ## ¿Cómo migro del perfilado basado en transacciones al perfilado continuo?
</div>

* Sustituye el uso de `profiles_sample_rate` y `profiles_sampler` por `profile_session_sample_rate`
* Si usas el modo de ciclo de vida de perfil `manual`, agrega llamadas a `start_profile_session` y `stop_profile_session`
* Si usas el modo de ciclo de vida de perfil `trace`, asegúrate de que `traces_sample_rate` o `traces_sampler` estén configurados correctamente, además de `profile_session_sample_rate`

Consulta la [guía de migración](/es/product/explore/profiling/continuous-ui-profiling-migration-guide/) para más información.