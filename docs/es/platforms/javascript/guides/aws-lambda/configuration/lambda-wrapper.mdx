---
title: Wrapper del handler de Lambda
description: "Configura el wrapper de la función Lambda de Sentry"
sidebar_order: 2
---

En esta página conocerás las opciones para configurar el wrapper `Sentry.wrapHandler` para tu función Lambda.

Si usas la capa de AWS Lambda con variables de entorno (es decir, sin código de Sentry en tu función), omite esta guía o cambia a [inicializar el SDK en el código](../../install/layer#alternative-initialize-the-sdk-in-code).

<div id="flush-timeout">
  ## Tiempo de vaciado
</div>

Sentry mantiene activo el hilo de la función Lambda hasta 2 segundos para asegurarse de que se envíen los errores reportados. Puedes cambiar este límite de vaciado definiendo un valor de `flushTimeout` en las opciones del handler:

```javascript {filename:index.js} {2}
exports.handler = Sentry.wrapHandler(yourHandler, {
  flushTimeout: 1000,
});
```


<div id="timeout-warning">
  ## Advertencia de tiempo de espera
</div>

Sentry emite advertencias de tiempo de espera cuando la función Lambda está a 500 ms del tiempo de espera configurado. Puedes desactivar estas advertencias estableciendo `captureTimeoutWarning` en `false` en las opciones del handler.

```javascript {filename:index.js} {2}
exports.handler = Sentry.wrapHandler(yourHandler, {
  captureTimeoutWarning: false,
});
```

Para cambiar el límite de advertencia por tiempo de espera, asigna un valor numérico (en ms) a `timeoutWarningLimit`. Este valor indica el tiempo restante antes de que se active la advertencia.

```javascript {filename:index.js} {2}
exports.handler = Sentry.wrapHandler(yourHandler, {
  timeoutWarningLimit: 700, // Advertir cuando queden 700ms antes del timeout
});
```


<div id="capture-rejected-promises-in-promiseallsettled">
  ## Capturar promesas rechazadas en `Promise.allSettled`
</div>

De forma predeterminada, Sentry captura los errores generados por tu controlador.
Sin embargo, tu controlador podría devolver un resultado de `Promise.allSettled`.
En ese caso, aunque alguno de los mensajes falle, Sentry no capturará ninguna excepción.

La opción `captureAllSettledReasons` (valor predeterminado: `false`) captura todos los motivos de rechazo de las promesas.

```javascript {tabTitle:captureAllSettledReasons}
exports.handler = Sentry.wrapHandler(
  () => {
    return Promise.allSettled([
      Promise.rejected(new Error("first")),
      Promise.rejected(new Error("second")),
    ]);
  },
  { captureAllSettledReasons: true }
);
// Los errores `first` y `second` son capturados
```
