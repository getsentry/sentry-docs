---
title: Emisor de eventos de NestJS
description: "Aprende a instrumentar servicios de NestJS basados en eventos."
---

<Alert>
  El módulo @nestjs/event-emitter se instrumenta automáticamente a partir de `@sentry/nestjs` 8.39.0.
</Alert>

El SDK de NestJS envuelve automáticamente el decorador `@OnEvent` para:

- Crear trazas de rendimiento de las ejecuciones de los controladores de eventos.
- Capturar automáticamente cualquier excepción no gestionada que ocurra en los controladores de eventos.
- Mantener visibilidad en flujos asíncronos basados en eventos.

Cuando se ejecuta un controlador de eventos, se crea un nuevo span para rastrear su rendimiento y cualquier error se informa automáticamente a Sentry, preservando el comportamiento original del error.

<Alert level="info" title="Múltiples decoradores">
  Si se usan varios decoradores, recopilaremos todos los nombres de eventos para determinar el nombre del span.
  Si quieres asignar cada evento a un controlador específico, usa un decorador por controlador y mueve cualquier lógica compartida a una función aparte.
  
  ```typescript
  @OnEvent('event.A')
  function myHandlerA(payload: any) {
    commonHandler(payload)  
  }
  
  @OnEvent('event.B')
  function myHandlerB(payload: any) {
    commonHandler(payload)  
  }
  
  function commonHandler(payload: any) {
    // lógica común
  }
  ```
</Alert>

Esta instrumentación funciona de forma transparente con los controladores de eventos existentes de NestJS, sin requerir cambios en el código de tu aplicación.