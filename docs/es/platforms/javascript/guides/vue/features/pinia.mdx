---
title: Pinia
description: "Conoce el plugin de Pinia de Sentry."
---

Para capturar el estado de Pinia, usa `Sentry.createSentryPiniaPlugin()` y añádelo a tu instancia de store de Pinia:

```javascript
import { createPinia } from 'pinia';
import { createSentryPiniaPlugin } from '@sentry/vue';

const pinia = createPinia();

pinia.use(createSentryPiniaPlugin());
```


<div id="normalization-depth">
  ## Profundidad de normalización
</div>

De forma predeterminada, los SDK de Sentry normalizan cualquier contexto hasta una profundidad de 3. Puede que quieras aumentar este valor para enviar estados de Pinia, pasando `normalizeDepth` a la llamada a `Sentry.init`:

```javascript
Sentry.init({
  dsn: "___PUBLIC_DSN___",
  normalizeDepth: 10, // O la profundidad que quieras para el contexto de tu estado.
});
```


<div id="options">
  ## Opciones
</div>

Para configurar el complemento de Pinia, pasa un objeto de opciones como primer parámetro a `createSentryPiniaPlugin`.

<Alert level="warning" title="Nota">

Aunque hacemos todo lo posible para filtrar la información de identificación personal (PII), como contraseñas de usuario, recomendamos no enviar información sensible a Sentry.

</Alert>

<div id="attachpiniastate-boolean">
  ### `attachPiniaState` (Boolean)
</div>

Se utiliza para adjuntar el estado de Pinia a los eventos de Sentry. De forma predeterminada, esto se establece en `true`. Si no quieres adjuntar el estado de Pinia a los eventos enviados a Sentry, establécelo en `false`.

```javascript
createSentryPiniaPlugin({
  attachPiniaState: false,
});
```


<div id="addbreadcrumbs-boolean">
  ### `addBreadcrumbs` (Boolean)
</div>

Se utiliza para añadir breadcrumbs a los eventos de Sentry. De forma predeterminada, está establecido en `true`. Si no quieres añadir breadcrumbs a los eventos enviados a Sentry, cámbialo a `false`.

```javascript
createSentryPiniaPlugin({
  addBreadcrumbs: false,
});
```


<div id="actiontransformer-function">
  ### `actionTransformer` (Function)
</div>

Puede usarse para eliminar información sensible de las acciones de Pinia. El primer parámetro que recibe la función es el nombre de la acción de Pinia. Enviamos todas las acciones de forma predeterminada; si no quieres que se envíe un nombre de acción a Sentry, usa `return null`.

```javascript
createSentryPiniaPlugin({
  actionTransformer: (action) => {
    if (action === "GOVERNMENT_SECRETS") {
      // Devuelve null para no registrar la acción en Sentry
      return null;
    }

    return action;
  },
});
```


<div id="statetransformer-function">
  ### `stateTransformer` (Función)
</div>

Se utiliza para eliminar información sensible del estado de Pinia. El primer parámetro que se pasa a la función es el estado de Pinia. Adjuntamos todos los cambios de estado de forma predeterminada. Si no quieres adjuntar cambios de estado a los eventos que se envían a Sentry, usa `return null`. Ten en cuenta que, si decides no enviar el estado a Sentry, es posible que tus errores no incluyan la versión más reciente.

```javascript
createSentryPiniaPlugin({
  stateTransformer: (state) => {
    if (state.topSecret.doNotSend) {
      // Devuelve null para no enviar esta versión del estado.
      return null;
    }

    // Transforma el estado para eliminar información confidencial
    const transformedState = {
      ...state,
      topSecret: {
        ...state.topSecret,
        // Sustituye la información confidencial por otra cosa
        nuclearLaunchCodes: "Me encanta la pizza",
        // o simplemente elimínala por completo
        hiddenTreasureLocation: null,
      },
      // También deberías eliminar datos voluminosos irrelevantes para la depuración para no saturar tus incidencias en Sentry
      giganticState: null,
    };

    return transformedState;
  },
});
```
