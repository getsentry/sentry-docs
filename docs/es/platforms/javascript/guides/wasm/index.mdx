---
title: Wasm
sdk: sentry.javascript.wasm
description: "Aprende a configurar Sentry manualmente en tu aplicación de JavaScript con módulos de WebAssembly y a capturar tus primeros errores."
keywords: ["wasm", "webassembly"]
categories:
  - javascript
  - browser
---

<Alert title="¿Usas un framework de JavaScript?">
  Esta guía se centra en configurar Sentry para módulos de WebAssembly. Si tu
  aplicación usa un framework específico, empieza por seguir la guía de ese
  framework para configurar el SDK. Luego vuelve aquí para añadir la
  configuración específica de WebAssembly.
</Alert>

<PlatformContent includePath="getting-started-prerequisites" />

<div id="step-1-install">
  ## Paso 1: Instalar
</div>

Elige las funciones que quieres configurar y esta guía te mostrará cómo:

<OnboardingOptionButtons options={["error-monitoring", "performance", "logs"]} />

<PlatformContent includePath="getting-started-features-expandable" />

<div id="install-the-sentry-sdk">
  ### Instala el SDK de Sentry
</div>

Ejecuta el comando de tu gestor de paquetes preferido para agregar el SDK de Sentry a tu aplicación:

```bash {tabTitle:npm}
npm install @sentry/browser @sentry/wasm --save
```

```bash {tabTitle:yarn}
yarn add @sentry/browser @sentry/wasm
```

```bash {tabTitle:pnpm}
pnpm add @sentry/browser @sentry/wasm
```

<div id="step-2-configure">
  ## Paso 2: Configurar
</div>

Para usar el SDK, inicialízalo en el punto de entrada de tu aplicación antes de cargar los módulos de WebAssembly. La integración de Wasm de Sentry mejora el SDK del navegador y permite proporcionar información de depuración más detallada para los módulos de WebAssembly, incluidos Debug IDs, Debug Files, Code IDs, Code Files y direcciones de memoria.

```javascript
import * as Sentry from "@sentry/browser";
import { wasmIntegration } from "@sentry/wasm";

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Agrega encabezados de solicitud y la IP de los usuarios; para más información, visita:
  // https://docs.sentry.io/platforms/javascript/guides/wasm/configuration/options/#sendDefaultPii
  sendDefaultPii: true,

  integrations: [
    // ___PRODUCT_OPTION_START___ performance
    Sentry.browserTracingIntegration(),
    // ___PRODUCT_OPTION_END___ performance
    wasmIntegration(),
  ],
  // ___PRODUCT_OPTION_START___ performance

  // Establece tracesSampleRate en 1.0 para capturar el 100%
  // de las transacciones para el trazado.
  // Recomendamos ajustar este valor en producción.
  // Obtén más información en
  // https://docs.sentry.io/platforms/javascript/guides/wasm/configuration/options/#tracesSampleRate
  tracesSampleRate: 1.0,

  // Establece `tracePropagationTargets` para controlar en qué URL se debe habilitar la propagación de trazas
  tracePropagationTargets: ["localhost", /^https:\/\/yourserver\.io\/api/],
  // ___PRODUCT_OPTION_END___ performance
  // ___PRODUCT_OPTION_START___ logs

  // Habilita el envío de logs a Sentry
  enableLogs: true,
  // ___PRODUCT_OPTION_END___ logs
});
```

<div id="step-3-verify-your-setup">
  ## Paso 3: Verifica tu configuración
</div>

Probemos tu configuración y confirmemos que Sentry funciona correctamente y está enviando datos desde tus módulos de WebAssembly a tu proyecto de Sentry.

<div id="issues">
  ### Incidencias
</div>

Para comprobar que Sentry captura errores de módulos de WebAssembly y crea incidencias en tu proyecto de Sentry, agrega una función a tu módulo de WebAssembly que luego puedas llamar para provocar un error (por ejemplo, una división por cero).

Así podría verse en Rust:

```rust
#[no_mangle]
pub extern "C" fn divide(a: i32, b: i32) -> i32 {
    // Esto provocará una excepción por división entre cero cuando b sea 0
    a / b
}
```

Luego añade un botón a una de las páginas de tu aplicación que, al presionarlo, invoque la función de WebAssembly para generar un error. Aquí tienes un botón HTML sencillo:

```html
<button type="button" onclick="testWasmError()">
  Generar un error de WebAssembly
</button>
```

Aquí tienes el JavaScript que invoca la función de WebAssembly. Asegúrate de adaptarlo a tu framework de JavaScript. Ten en cuenta que, según cómo compiles los módulos, puedes llamar a la función directamente o acceder a ella mediante la API de WebAssembly.

```javascript
function testWasmError() {
  try {
    // Suponiendo que ya tienes tu módulo de WebAssembly cargado como 'wasmModule'
    // Sustituye esto por la instancia real de tu módulo de WebAssembly

    // Según cómo se haya compilado tu módulo, llama a la función directamente
    const result = wasmModule.divide(10, 0);
    // o mediante la API de WebAssembly
    //const result = wasmModule.instance.exports.divide(10, 0);
  } catch (e) {
    Sentry.captureException(e);
  }
}
```

<OnboardingOption optionId="performance" hideForThisOption>
  Abre tu app en el navegador y haz clic en el botón que acabas de crear para provocar
  un error en tu módulo de WebAssembly.
</OnboardingOption>

<PlatformContent includePath="getting-started-browser-sandbox-warning" />

<OnboardingOption optionId="performance">
  ### Trazas

  Para probar tu configuración de trazas, agrega una función a tu módulo de WebAssembly que realice algunos cálculos. Así podría verse en Rust:

  ```rust
  #[no_mangle]
  pub extern "C" fn compute_intensive_function(iterations: i32) -> i32 {
      // Add some computation to make tracing more visible
      let mut sum = 0;
      for i in 0..iterations * 1000 {
          sum += i;
      }
      sum
  }
  ```

  A continuación, agrega un nuevo botón a tu app:

  ```html
  <button type="button" onclick="testWasmTracing()">
    Probar WebAssembly con trazas
  </button>
  ```

  Por último, crea la función de JavaScript que envuelve las llamadas a tu función de WebAssembly en un span de Sentry para medir el tiempo de ejecución. Asegúrate de adaptar el código a tu configuración:

  ```javascript
  function testWasmTracing() {
    Sentry.startSpan({ op: "test", name: "Example Span" }, () => {
      try {
        // Suponiendo que ya cargaste tu módulo de WebAssembly como 'wasmModule'
        // Reemplaza esto con la instancia real de tu módulo de WebAssembly

        // según cómo esté compilado tu módulo, llama a la función directamente
        const result = wasmModule.compute_intensive_function(1000);
        // o a través de la API de WebAssembly
        // const result = wasmModule.instance.exports.compute_intensive_function(1000);
        console.log("Resultado:", result);
      } catch (e) {
        Sentry.captureException(e);
      }
    });
  }
  ```
</OnboardingOption>

<div id="view-captured-data-in-sentry">
  ### Ver los datos capturados en Sentry
</div>

Ahora, ve a tu proyecto en [Sentry.io](https://sentry.io/) para ver los datos recopilados (puede tardar unos momentos en aparecer).

<PlatformContent includePath="getting-started-verify-locate-data" />

<div id="next-steps">
  ## Próximos pasos
</div>

A estas alturas, deberías haber integrado Sentry en tu aplicación JavaScript con módulos WebAssembly y ya estar enviando datos a tu proyecto en Sentry.

Ahora es un buen momento para personalizar tu configuración y explorar temas más avanzados. Nuestros próximos pasos recomendados para ti son:

* Instrumenta tu frontend y backend usando nuestros [SDK](/es/)
* Sigue [personalizando tu configuración](/es/platforms/javascript/guides/wasm/configuration)
* Aprende a [capturar errores manualmente](/es/platforms/javascript/guides/wasm/usage)

<Expandable permalink={false} title="¿Tienes problemas para configurar el SDK?">
  - Encuentra distintos temas en <PlatformLink to="/troubleshooting">Solución de problemas</PlatformLink>
  - [Obtén ayuda](https://sentry.zendesk.com/hc/en-us/)
</Expandable>