---
title: Límite de error de React
excerpt: ''
description: >-
  Aprende cómo el SDK de React exporta un componente de límite de error que
  aprovecha las API de componentes de React.
og_image: /og-images/platforms-javascript-guides-react-features-error-boundary.png
---

El SDK de React exporta un componente de límite de error que aprovecha las [API de componentes de React](https://reactjs.org/docs/error-boundaries.html) para detectar y enviar automáticamente errores de JavaScript desde un árbol de componentes de React a Sentry.

<div id="configure">
  ## Configuración
</div>

```javascript
import React from "react";
import * as Sentry from "@sentry/react";

<Sentry.ErrorBoundary fallback={<p>Ocurrió un error</p>}}>
  <Example />
</Sentry.ErrorBoundary>;
```

El límite de errores de Sentry también está disponible como componente de orden superior.

```javascript
import React from "react";
import * as Sentry from "@sentry/react";

Sentry.withErrorBoundary(Example, { fallback: <p>se ha producido un error</p> });
```

<Alert level="warning" title="Nota">
  En modo de desarrollo, React volverá a propagar los errores capturados dentro de un límite de errores al controlador global de errores. Como resultado, Sentry solo informará un error desde el controlador global de errores, pero no desde el propio límite de errores. Recomendamos probar el límite de errores con una compilación de producción de React.
</Alert>

En el siguiente ejemplo, cuando el componente `<Example />` produce un error, el componente `<Sentry.ErrorBoundary>` enviará a Sentry datos sobre ese error y el árbol de componentes, abrirá un cuadro de comentarios del usuario y mostrará una interfaz de reserva.

```javascript
import React from "react";
import * as Sentry from "@sentry/react";

import { Example } from "../example";

function FallbackComponent() {
  return <div>Ocurrió un error</div>;
}

const myFallback = <FallbackComponent />;
// Como alternativa:
// const myFallback = () => <FallbackComponent />;

class App extends React.Component {
  render() {
    return (
      <Sentry.ErrorBoundary fallback={myFallback} showDialog>
        <Example />
      </Sentry.ErrorBoundary>
    );
  }
}

export default App;
```

<Alert level="warning" title="Nota">
  De forma predeterminada, React [registra todos los errores en la consola](https://github.com/facebook/react/blob/493f72b0a7111b601c16b8ad8bc2649d82c184a0/packages/react-reconciler/src/ReactFiberErrorLogger.js#L85), incluso si estás usando un límite de errores (error boundary) de React. Si usas la integración `CaptureConsole`, Sentry capturará el error a través de `CaptureConsole` y no mediante el límite de errores.
</Alert>


<div id="linked-errors">
  ## Errores vinculados
</div>

En [React v17 y versiones posteriores](https://reactjs.org/blog/2020/08/10/react-v17-rc.html#native-component-stacks), el SDK analizará automáticamente la [`componentStack` del error boundary](https://react.dev/reference/react/Component#componentdidcatch-parameters) y adjuntará la traza de pila completa al evento mediante `error.cause`. Esto requiere que la integración [`LinkedErrors`](../../configuration/integrations/linkederrors/) esté habilitada (lo está de forma predeterminada). Para obtener el contexto completo del código fuente, recomendamos configurar los [source maps](../../sourcemaps) de tu proyecto.

![Traza de pila de React Error Boundary](./img/errorboundary-error.png)

<div id="options">
  ## Opciones
</div>

El componente ErrorBoundary expone varias props que puedes pasar para una configuración adicional. No hay opciones obligatorias, pero recomendamos encarecidamente que configures un componente de reserva (fallback).

`showDialog` (boolean)

Si debe renderizarse un [Sentry User Feedback Widget](../../user-feedback/) cuando el Error Boundary captura un error.

`dialogOptions` (Object)

Opciones que se pasan al Sentry User Feedback Widget. Consulta todas las opciones de personalización [aquí](../../user-feedback/#customizing-the-widget).

`fallback` (React.ReactNode or Function)

Un elemento de React para renderizar cuando el error boundary captura un error. Puede ser un elemento de React (p. ej., `<Fallback />`) o una función que devuelva un elemento de React. Si proporcionas una función, Sentry la llamará con información adicional y utilidades (ver ejemplo a continuación).

`onError` (Function)

Una función que se llama cuando el Error Boundary encuentra un error. `onError` es útil si quieres propagar el error a una biblioteca de gestión de estado como Redux, o si quieres comprobar efectos secundarios que podrían haberse producido debido al error.

`onMount` (Function)

Una función que se llama en `componentDidMount()` de ErrorBoundary.

`onUnmount` (Function)

Una función que se llama en `componentWillUnmount()` de ErrorBoundary.

`beforeCapture` (Function)

_(Disponible a partir de la versión 5.20.0)_

Una función que se llama antes de que se envíe un error a Sentry, lo que permite agregar etiquetas o contexto adicionales al error.

<div id="examples">
  ## Ejemplos
</div>

<div id="setting-a-fallback-function-render-props">
  #### Configurar una función de respaldo (Render Props)
</div>

A continuación se muestra un ejemplo en el que se utiliza una prop de respaldo, siguiendo el [enfoque de render props](https://reactjs.org/docs/render-props.html), para mostrar una interfaz de respaldo en caso de error. La interfaz de respaldo vuelve al estado estándar del componente cuando se restablece mediante la API `resetError()` que el componente expone a través de render props.

```javascript
import React from "react";
import * as Sentry from "@sentry/react";

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      message: "Esta es mi app",
    };
  }

  render() {
    return (
      <Sentry.ErrorBoundary
        fallback={({ error, componentStack, resetError }) => (
          <React.Fragment>
            <div>Se produjo un error</div>
            <div>{error.toString()}</div>
            <div>{componentStack}</div>
            <button
              onClick={() => {
                this.setState({ message: "This is my app" });
                {
                  /* When resetError() is called it will remove the Fallback component */
                }
                {
                  /* and render the Sentry ErrorBoundary's children in their initial state */
                }
                resetError();
              }}
            >
              ¡Haz clic aquí para restablecer!
            </button>
          </React.Fragment>
        )}
      >
        <div>{this.state.message}</div>
        {/* al hacer clic, este botón establece un objeto como mensaje, no una cadena. */}
        {/* lo cual provocará un error en el árbol de componentes */}
        <button
          onClick={() => this.setState({ message: { text: "Hola, mundo" } })}
        >
          ¡Haz clic aquí para cambiar el mensaje!
        </button>
      </Sentry.ErrorBoundary>
    );
  }
}

export default App;
```


<div id="using-multiple-error-boundaries">
  #### Uso de múltiples límites de error
</div>

Cuando uses múltiples límites de error, te recomendamos usar `beforeCapture` para establecer etiquetas y contexto, de modo que puedas identificar en cuál límite de error se produjo el error. En el siguiente ejemplo, adjuntamos etiquetas a los errores según la ruta en la que se renderizaron.

```javascript
import React from "react";
import * as Sentry from "@sentry/react";

function App({ props }) {
  return (
    <React.Fragment>
      <Sentry.ErrorBoundary
        beforeCapture={(scope) => {
          scope.setTag("location", "primero");
          scope.setTag("anotherTag", "otroValor");
        }}
      >
        <Route to="ruta/a/primero" component={First} />
      </Sentry.ErrorBoundary>
      <Sentry.ErrorBoundary
        beforeCapture={(scope) => {
          scope.setTag("location", "segundo");
        }}
      >
        <Route to="ruta/a/segundo" component={Second} />
      </Sentry.ErrorBoundary>
    </React.Fragment>
  );
}

export default App;
```


<div id="manually-capturing-errors">
  ## Capturar errores manualmente
</div>

Si no quieres usar el componente Sentry Error Boundary, puedes usar la función `captureReactException` para capturar errores manualmente con tu propio Error Boundary. Esto seguirá garantizando que `componentStack` esté asociado al error, como se explica en la sección [Errores vinculados](#linked-errors). La función `Sentry.captureReactException` requiere React SDK `v9.8.0` o posterior.

```javascript
import * as Sentry from "@sentry/react";

class ErrorBoundary extends React.Component {
  componentDidCatch(error, info) {
    Sentry.captureReactException(error, info);
  }

  render() {
    return this.props.children;
  }
}
```


<div id="next-steps">
  ## Próximos pasos:
</div>

- [Volver a **Introducción**](../../)
- [Volver a la página principal de componentes](../)