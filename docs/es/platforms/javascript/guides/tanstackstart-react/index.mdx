---
title: TanStack Start React
---

<Alert>
  Este SDK es compatible con TanStack Start 1.0 RC y actualmente se encuentra en **ALFA**. Las funciones alfa aún están en desarrollo, pueden tener errores y podrían incluir cambios incompatibles.
  Comunícate por [GitHub](https://github.com/getsentry/sentry-javascript/issues/new/choose) si tienes comentarios o inquietudes.
</Alert>

Esta guía te explica cómo configurar Sentry en una app de [TanStack Start (React)](https://tanstack.com/start/latest/docs/framework/react/overview).
Para [TanStack Router (React)](https://tanstack.com/router/latest/docs/framework/react/overview), consulta nuestra [guía de TanStack Router para React](/es/platforms/javascript/guides/react/features/tanstack-router).

<PlatformContent includePath="getting-started-prerequisites" />

<div id="step-1-install">
  ## Paso 1: Instalar
</div>

Elige las funciones que quieres configurar y esta guía te mostrará cómo:

<OnboardingOptionButtons
  options={[
  "error-monitoring",
  "performance",
  "session-replay",
  "user-feedback",
  "logs",
]}
/>

<PlatformContent includePath="getting-started-features-expandable" />

<div id="install-the-sentry-sdk">
  ### Instala el SDK de Sentry
</div>

Ejecuta el comando correspondiente a tu gestor de paquetes preferido para añadir el paquete del SDK a tu aplicación:

```bash {tabTitle:npm}
npm install @sentry/tanstackstart-react --save
```

```bash {tabTitle:yarn}
yarn add @sentry/tanstackstart-react
```

```bash {tabTitle:pnpm}
pnpm add @sentry/tanstackstart-react
```

<div id="step-2-configure">
  ## Paso 2: Configuración
</div>

<div id="configure-client-side-sentry">
  ### Configurar Sentry en el cliente
</div>

Inicializa Sentry en tu archivo `src/router.tsx`:

```tsx {diff} {filename:src/router.tsx}
+import * as Sentry from "@sentry/tanstackstart-react";
 import { createRouter } from '@tanstack/react-router'

// Crea una nueva instancia del enrutador
export const getRouter = () => {
  const router = createRouter();

+ if (!router.isServer) {
+   Sentry.init({
+     dsn: "___PUBLIC_DSN___",
+
+     // Agrega encabezados de solicitud e IP de los usuarios; para más información, visita:
+     // https://docs.sentry.io/platforms/javascript/guides/tanstackstart-react/configuration/options/#sendDefaultPii
+     sendDefaultPii: true,
+
+     integrations: [
+       // ___PRODUCT_OPTION_START___ rendimiento
+       Sentry.tanstackRouterBrowserTracingIntegration(router),
+       // ___PRODUCT_OPTION_END___ rendimiento
+       // ___PRODUCT_OPTION_START___ reproducción de sesiones
+       Sentry.replayIntegration(),
+       // ___PRODUCT_OPTION_END___ reproducción de sesiones
+       // ___PRODUCT_OPTION_START___ comentarios de los usuarios
+       Sentry.feedbackIntegration({
+         // La configuración adicional del SDK va aquí; por ejemplo:
+         colorScheme: "system",
+       }),
+       // ___PRODUCT_OPTION_END___ comentarios de los usuarios
+     ],
+     // ___PRODUCT_OPTION_START___ registros
+
+     // Habilita el envío de registros a Sentry
+     enableLogs: true,
+     // ___PRODUCT_OPTION_END___ registros
+
+     // ___PRODUCT_OPTION_START___ rendimiento
+     // Establece tracesSampleRate en 1.0 para capturar el 100 %
+     // de las transacciones para el rastreo.
+     // Recomendamos ajustar este valor en producción.
+     // Más información en https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
+     tracesSampleRate: 1.0,
+     // ___PRODUCT_OPTION_END___ rendimiento
+     // ___PRODUCT_OPTION_START___ reproducción de sesiones
+
+     // Captura Replay para el 10 % de todas las sesiones,
+     // además del 100 % de las sesiones con un error.
+     // Más información en https://docs.sentry.io/platforms/javascript/session-replay/configuration/#general-integration-configuration
+     replaysSessionSampleRate: 0.1,
+     replaysOnErrorSampleRate: 1.0,
+     // ___PRODUCT_OPTION_END___ reproducción de sesiones
+   });
  }
}
```

<div id="configure-server-side-sentry">
  ### Configurar Sentry en el servidor
</div>

Crea un archivo de instrumentación `instrument.server.mjs` en la raíz de tu proyecto. En este archivo, inicializa el SDK de Sentry para tu servidor:

```tsx {filename:instrument.server.mjs}
import * as Sentry from "@sentry/tanstackstart-react";

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Agrega encabezados de la solicitud y la IP de los usuarios. Para más información, visita:
  // https://docs.sentry.io/platforms/javascript/guides/tanstackstart-react/configuration/options/#sendDefaultPii
  sendDefaultPii: true,
  // ___PRODUCT_OPTION_START___ logs

  // Habilita el envío de logs a Sentry
  enableLogs: true,
  // ___PRODUCT_OPTION_END___ logs

  // ___PRODUCT_OPTION_START___ performance
  // Establece tracesSampleRate en 1.0 para capturar el 100 %
  // de las transacciones para el trazado.
  // Recomendamos ajustar este valor en producción.
  // Más información en
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
});
```

<div id="moving-the-sentry-server-config-file-for-production-usage">
  #### Mover el archivo de configuración del servidor de Sentry para su uso en producción
</div>

Para el monitoreo en producción, debes mover el archivo de configuración del servidor de Sentry a la salida de tu compilación. Dado que [TanStack Start está diseñado para funcionar con cualquier proveedor de hosting](https://tanstack.com/start/latest/docs/framework/react/guide/hosting), la ubicación exacta dependerá de dónde se desplieguen tus artefactos de compilación (por ejemplo, `"/dist"`, `".output/server"` o un directorio específico de la plataforma).

Por ejemplo, al usar [Nitro](https://nitro.build/), copia el archivo de instrumentación en `".output/server"`:

```json {diff}  {filename:package.json}
{
  "scripts": {
-     "build": "vite build",
+     "build": "vite build && cp instrument.server.mjs .output/server",
  }
}
```

<div id="load-instrumentation-on-startup">
  #### Cargar la instrumentación al inicio
</div>

Añade la marca `--import` directamente o a la variable de entorno `NODE_OPTIONS` donde ejecutes tu aplicación para importar `instrument.server.mjs`.

```json {diff} {filename:package.json}
{
  "scripts": {
     "build": "vite build && cp instrument.server.mjs .output/server",
-       "dev": "vite dev --port 3000",
-       "start": "node .output/server/index.mjs",
+       "dev": "NODE_OPTIONS='--import ./instrument.server.mjs' vite dev --port 3000",
+       "start": "node --import ./.output/server/instrument.server.mjs .output/server/index.mjs",
  }
}
```

<div id="step-3-capture-tanstack-start-react-errors">
  ## Paso 3: Captura los errores de TanStack Start React
</div>

<div id="instrument-server-requests-and-server-functions">
  ### Instrumentar solicitudes y funciones del servidor
</div>

<Alert level="info">
  El monitoreo automático de errores aún no está disponible en el lado del servidor de TanStack
  Start. Usa `captureException` para capturar errores manualmente en tu código del
  servidor.
</Alert>

<div id="capturing-errors-in-error-boundaries-and-components-optional">
  ### Captura de errores en límites de error y componentes (opcional)
</div>

Sentry captura automáticamente los errores no controlados del lado del cliente. Los errores interceptados por tus propios límites de error no se registran a menos que los informes manualmente:

<div id="custom-error-boundary">
  #### Límite de error personalizado
</div>

Envuelve tu componente `ErrorBoundary` personalizado con [`withErrorBoundary`](/es/platforms/javascript/guides/react/features/error-boundary/):

```tsx
import React from "react";
import * as Sentry from "@sentry/tanstackstart-react";

class MyErrorBoundary extends React.Component {
  // ...
}

export const MySentryWrappedErrorBoundary = Sentry.withErrorBoundary(
  MyErrorBoundary,
  {
    // ... opciones del wrapper de errores de Sentry
  }
);
```

<div id="tanstack-router-errorcomponent">
  #### `errorComponent` de TanStack Router
</div>

Usa la función `captureException` de Sentry dentro de un hook `useEffect` en tu `errorComponent`:

```tsx {2,6-8}
import { createRoute } from "@tanstack/react-router";
import * as Sentry from "@sentry/tanstackstart-react";

const route = createRoute({
  errorComponent: ({ error }) => {
    useEffect(() => {
      Sentry.captureException(error)
    }, [error])

    return (
      // ...
    )
  }
})
```

<div id="step-4-avoid-ad-blockers-with-tunneling-optional">
  ## Paso 4: Evita los bloqueadores de anuncios con túneles (opcional)
</div>

<PlatformContent includePath="getting-started-tunneling" />

<div id="step-5-verify">
  ## Paso 5: Verificar
</div>

Probemos tu configuración y confirmemos que Sentry funciona correctamente y está enviando datos a tu proyecto de Sentry.

<div id="issues">
  ### Incidencias
</div>

Para comprobar que Sentry captura errores y crea incidencias en tu proyecto de Sentry, agrega un botón de prueba a una de tus páginas; al hacer clic, se provocará un error que Sentry capturará:

```tsx
<button
  type="button"
  onClick={() => {
    throw new Error("Error de prueba de Sentry");
  }}
>
  Rompe el mundo
</button>
```

<OnboardingOption optionId="performance" hideForThisOption>
  Abre la página en un navegador y haz clic en el botón para provocar un error en el frontend.
</OnboardingOption>

<PlatformContent includePath="getting-started-browser-sandbox-warning" />

<OnboardingOption optionId="performance">
  ### Trazas

  Para probar las trazas, crea un archivo nuevo como `src/routes/api/sentry-example.ts` para añadir una ruta de prueba `/sentry-example`:

  ```typescript {filename:src/routes/api/sentry-example.ts}
  import { createFileRoute } from "@tanstack/react-router";
  import { json } from "@tanstack/react-start";

  export const Route = createFileRoute('/api/sentry-example')({
    server: {
      handlers: {
        GET: () => {
          throw new Error("Sentry Example Route Error");
          return new Response(JSON.stringify({ message: "Testing Sentry Error..." }), {
            headers: {
              'Content-Type': 'application/json',
            },
          })
        },
      },
    },
  })
  ```

  A continuación, actualiza el botón de prueba para llamar a esta ruta y lanzar un error si la respuesta no es `ok`:

  ```tsx
  <button
    type="button"
    onClick={async () => {
      await Sentry.startSpan(
        {
          name: "Example Frontend Span",
          op: "test",
        },
        async () => {
          const res = await fetch("/api/sentry-example");
          if (!res.ok) {
            throw new Error("Sentry Example Frontend Error");
          }
        }
      );
    }}
  >
    Romper el mundo
  </button>
  ```

  Abre la página en un navegador y haz clic en el botón para provocar dos errores:

  * un error en el frontend
  * un error dentro de la ruta de la API

  Además, esto inicia una traza de rendimiento para medir el tiempo que tarda en completarse la solicitud a la API.
</OnboardingOption>

<div id="view-captured-data-in-sentry">
  ### Ver los datos capturados en Sentry
</div>

Ahora, ve a tu proyecto en [Sentry.io](https://sentry.io) para ver los datos recopilados (puede tardar unos momentos en aparecer).

<PlatformContent includePath="getting-started-verify-locate-data" />

<div id="next-steps">
  ## Próximos pasos
</div>

A estas alturas, ya deberías haber integrado Sentry en tu aplicación TanStack Start React y estar enviando datos a tu proyecto de Sentry.

Es un buen momento para personalizar tu configuración y explorar temas más avanzados.
Te recomendamos:

* Aprende a [capturar errores manualmente](/es/platforms/javascript/guides/tanstackstart-react/usage/)
* Sigue [personalizando tu configuración](/es/platforms/javascript/guides/tanstackstart-react/configuration/)
* Familiarízate con [las funcionalidades de Sentry](/es/product/), como el tracing, los insights y las alertas

<Expandable permalink={false} title="¿Tienes problemas para configurar el SDK?">
  - Encuentra varios temas en <PlatformLink to="/troubleshooting">Solución de problemas</PlatformLink>
  - [Obtén ayuda](https://sentry.zendesk.com/hc/en-us/)
</Expandable>