---
title: Configuración manual
sidebar_order: 1
description: "Aprende a configurar Sentry manualmente en tu app de SvelteKit y a capturar tus primeros errores."
---

<Alert type="info">
  Para la configuración más rápida, te recomendamos usar el [asistente
  de instalación](/es/platforms/javascript/guides/sveltekit).
</Alert>

<div id="prerequisites">
  ## Requisitos previos
</div>

Necesitas:

* Una [cuenta](https://sentry.io/signup/) de Sentry y un [proyecto](/es/product/projects/)
* Tu aplicación en ejecución
* SvelteKit versión `2.0.0`+
* Vite versión `4.2`+

<Expandable title="Notas sobre la compatibilidad de los adaptadores de SvelteKit">
  El SDK de Sentry para SvelteKit está diseñado para funcionar de inmediato con varios adaptadores de SvelteKit y sus entornos de ejecución de servidor subyacentes.
  Aquí tienes una descripción general de la compatibilidad actual:

  * **Entornos de ejecución de Node.js totalmente compatibles**
    * [Adapter-auto](https://kit.svelte.dev/docs/adapter-auto) para Vercel; otras plataformas basadas en Node.js podrían funcionar, pero no garantizamos la compatibilidad por el momento
    * [Adapter-vercel](https://kit.svelte.dev/docs/adapter-vercel) cuando se usa con el runtime Node.js Lambda de Vercel
    * [Adapter-node](https://kit.svelte.dev/docs/adapter-node)
  * **Entornos de ejecución no basados en Node.js compatibles**
    * [Adapter-cloudflare](https://kit.svelte.dev/docs/adapter-cloudflare) requiere [configuración adicional](/es/platforms/javascript/guides/cloudflare/frameworks/sveltekit/)
  * **Actualmente no compatibles**
    * Los entornos de servidor que no son de Node.js, como el runtime edge de Vercel, aún no son compatibles.
  * **Otros adaptadores**
    * Otros adaptadores de SvelteKit podrían funcionar, pero actualmente no cuentan con soporte oficial. Estamos considerando ampliar el soporte de primera clase a más adaptadores en el futuro.
</Expandable>

<div id="step-1-install">
  ## Paso 1: Instalación
</div>

Elige las funciones que deseas configurar y esta guía te mostrará cómo hacerlo:

<OnboardingOptionButtons
  options={[
  "error-monitoring",
  "performance",
  "session-replay",
  "user-feedback",
  "logs",
]}
/>

<PlatformContent includePath="getting-started-features-expandable" />

<div id="install-the-sentry-sdk">
  ### Instala el SDK de Sentry
</div>

Ejecuta el comando del gestor de paquetes que prefieras para añadir el SDK de Sentry a tu aplicación:

```bash {tabTitle:npm}
npm install @sentry/sveltekit --save
```

```bash {tabTitle:yarn}
yarn add @sentry/sveltekit
```

```bash {tabTitle:pnpm}
pnpm add @sentry/sveltekit
```

Si actualizas tu SDK de Sentry a la versión más reciente, consulta nuestra [guía de migración](https://github.com/getsentry/sentry-javascript/blob/master/MIGRATION.md) para obtener más información sobre los cambios incompatibles.

<div id="step-2-configure">
  ## Paso 2: Configurar
</div>

Debes inicializar y configurar el SDK de Sentry en tres lugares: en el cliente, en el servidor y en la configuración de Vite.

<div id="configure-client-side-sentry">
  ### Configura Sentry en el lado del cliente
</div>

Crea un archivo de hooks de cliente `src/hooks.client.(js|ts)` en la carpeta `src` de tu proyecto si aún no tienes uno. En este archivo, importa e inicializa el SDK de Sentry y añade la función `handleErrorWithSentry` al [hook `handleError`](https://svelte.dev/docs/kit/hooks#Shared-hooks-handleError).

```javascript {filename:hooks.client.(js|ts)} {1, 3-43, 49}
import * as Sentry from "@sentry/sveltekit";

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Agrega encabezados de solicitud e IP para usuarios, para más información visita:
  // https://docs.sentry.io/platforms/javascript/guides/sveltekit/configuration/options/#sendDefaultPii
  sendDefaultPii: true,
  // ___PRODUCT_OPTION_START___ performance

  // Establece tracesSampleRate en 1.0 para capturar el 100%
  // de las transacciones para el rastreo.
  // Recomendamos ajustar este valor en producción
  // Más información en
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
  integrations: [
    // ___PRODUCT_OPTION_START___ session-replay
    Sentry.replayIntegration(),
    // ___PRODUCT_OPTION_END___ session-replay
    // ___PRODUCT_OPTION_START___ user-feedback
    Sentry.feedbackIntegration({
      // La configuración adicional del SDK va aquí, por ejemplo:
      colorScheme: "system",
    }),
    // ___PRODUCT_OPTION_END___ user-feedback
  ],

  // ___PRODUCT_OPTION_START___ session-replay
  // Captura Replay para el 10% de todas las sesiones,
  // más el 100% de las sesiones con error
  // Más información en
  // https://docs.sentry.io/platforms/javascript/session-replay/configuration/#general-integration-configuration
  replaysSessionSampleRate: 0.1,
  replaysOnErrorSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ session-replay
  // ___PRODUCT_OPTION_START___ logs

  // Habilita el envío de logs a Sentry
  enableLogs: true,
  // ___PRODUCT_OPTION_END___ logs
});

const myErrorHandler = ({ error, event }) => {
  console.error("Ocurrió un error del lado del cliente:", error, event);
};

export const handleError = Sentry.handleErrorWithSentry(myErrorHandler);

// o alternativamente, si no tienes un manejador de errores personalizado:
// export const handleError = handleErrorWithSentry();
```

<div id="configure-server-side-sentry">
  ### Configurar Sentry en el lado del servidor
</div>

Crea un archivo de hooks de servidor `src/hooks.server.(js|ts)` en la carpeta `src` de tu proyecto si aún no tienes uno. En este archivo, importa e inicializa el SDK de Sentry y añade la función `handleErrorWithSentry` al [hook `handleError`](https://svelte.dev/docs/kit/hooks#Shared-hooks-handleError), y el manejador de solicitudes de Sentry al [hook `handle`](https://kit.svelte.dev/docs/hooks#server-hooks-handle).

```javascript {filename:hooks.server.(js|ts)} {1, 3-23, 29, 33}
import * as Sentry from "@sentry/sveltekit";

Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Agrega encabezados de la solicitud y la IP de los usuarios; para más información, visita:
  // https://docs.sentry.io/platforms/javascript/guides/sveltekit/configuration/options/#sendDefaultPii
  sendDefaultPii: true,
  // ___PRODUCT_OPTION_START___ performance

  // Establece tracesSampleRate en 1.0 para capturar el 100%
  // de las transacciones para el trazado.
  // Recomendamos ajustar este valor en producción.
  // Más información en
  // https://docs.sentry.io/platforms/javascript/configuration/options/#traces-sample-rate
  tracesSampleRate: 1.0,
  // ___PRODUCT_OPTION_END___ performance
  // ___PRODUCT_OPTION_START___ logs

  // Habilita el envío de logs a Sentry
  enableLogs: true,
  // ___PRODUCT_OPTION_END___ logs
});

const myErrorHandler = ({ error, event }) => {
  console.error("Se produjo un error en el lado del servidor:", error, event);
};

export const handleError = Sentry.handleErrorWithSentry(myErrorHandler);
// o, si no tienes un controlador de errores personalizado:
// export const handleError = handleErrorWithSentry();

export const handle = Sentry.sentryHandle();
// O usa `sequence` si estás usando tus propios controladores:
// export const handle = sequence(Sentry.sentryHandle(), yourHandler());
```

<Expandable title="¿Tienes problemas de CSP con la instrumentación de `fetch` en versiones anteriores de SvelteKit?">
  Si usas versiones de SvelteKit anteriores a `2.16.0` y te encuentras con errores de Content Security Policy (CSP) relacionados con la instrumentación de `fetch` de Sentry, puedes encontrar ayuda en nuestra [guía de solución de problemas](/es/platforms/javascript/guides/sveltekit/troubleshooting/#configure-csp-for-client-side-fetch-instrumentation).
</Expandable>

<div id="configure-vite">
  ### Configurar Vite
</div>

Añade el plugin `sentrySvelteKit` **antes** de `sveltekit` en tu archivo `vite.config.(js|ts)` para subir automáticamente los mapas de código a Sentry e instrumentar las funciones `load` para el tracing si está configurado.

```javascript {filename:vite.config.(js|ts)} {2,6}
import { sveltekit } from "@sveltejs/kit/vite";
import { sentrySvelteKit } from "@sentry/sveltekit";
import { defineConfig } from "vite";

export default defineConfig({
  plugins: [sentrySvelteKit(), sveltekit()],
  // ... el resto de tu configuración de Vite
});
```

<div id="step-3-add-readable-stack-traces-with-source-maps-optional">
  ## Paso 3: Añadir trazas de pila legibles con mapas de origen (opcional)
</div>

Para cargar mapas de origen y obtener trazas de error claras, añade tu token de autenticación de Sentry, la organización y el slug del proyecto en tu archivo `vite.config.(js|ts)`:

```javascript {filename:vite.config.(js|ts)} {7-11}
import { sveltekit } from "@sveltejs/kit/vite";
import { sentrySvelteKit } from "@sentry/sveltekit";

export default {
  plugins: [
    sentrySvelteKit({
      sourceMapsUploadOptions: {
        org: "___ORG_SLUG___",
        project: "___PROJECT_SLUG___",
        // guarda tu token de autenticación en una variable de entorno
        authToken: process.env.SENTRY_AUTH_TOKEN,
      },
    }),
    sveltekit(),
  ],
  // ... el resto de la configuración de Vite
};
```

Para mantener seguro tu token de autenticación, guárdalo siempre en una variable de entorno en lugar de guardarlo directamente en tus archivos:

<OrgAuthTokenNote />

```bash {filename:.env}
SENTRY_AUTH_TOKEN=___ORG_AUTH_TOKEN___
```

<div id="override-adapter-detection">
  ### Anular la detección del adaptador
</div>

`sentrySvelteKit` intenta detectar automáticamente tu adaptador de SvelteKit para configurar correctamente la subida de mapas de origen. Si usas un adaptador no compatible o se detecta el incorrecto, establécelo con la opción `adapter`:

```javascript {filename:vite.config.(js|ts)} {7}
import { sveltekit } from "@sveltejs/kit/vite";
import { sentrySvelteKit } from "@sentry/sveltekit";

export default {
  plugins: [
    sentrySvelteKit({
      adapter: "vercel",
    }),
    sveltekit(),
  ],
  // ... resto de tu configuración de Vite
};
```

<div id="step-4-avoid-ad-blockers-with-tunneling-optional">
  ## Paso 4: Evita los bloqueadores de anuncios con túnel (opcional)
</div>

<PlatformContent includePath="getting-started-tunneling" />

<div id="step-5-verify-your-setup">
  ## Paso 5: Verifica tu configuración
</div>

Probemos tu configuración y confirmemos que Sentry funciona correctamente y está enviando datos a tu proyecto de Sentry.

<div id="issues">
  ### Incidencias
</div>

Para comprobar que Sentry captura errores y crea incidencias en tu proyecto de Sentry, crea una página de prueba, por ejemplo, en `src/routes/sentry-example/+page.svelte`, con un Button que lance un error al hacer clic:

```html {filename:+page.svelte}
<script>
  function throwTestError() {
    throw new Error("Sentry Example Frontend Error");
  }
</script>

<button type="button" onclick="{throwTestError}">Lanzar error</button>
```

<OnboardingOption optionId="performance" hideForThisOption>
  Abre la página `sentry-example` en un navegador y haz clic en el botón para generar un
  error de frontend.
</OnboardingOption>

<PlatformContent includePath="getting-started-browser-sandbox-warning" />

<OnboardingOption optionId="performance">
  ### Trazado

  Para probar el trazado, crea una ruta de API de prueba como `src/routes/sentry-example/+server.(js|ts)`:

  ```javascript {filename:+server.(js|ts)}
  export const GET = async () => {
    throw new Error("Sentry Example API Route Error");
  };
  ```

  Luego, actualiza tu botón de prueba para llamar a esta ruta y lanzar un error si la respuesta no es `ok`:

  ```html {filename:+page.svelte}
  <script>
    import * as Sentry from "@sentry/sveltekit";

    function throwTestError() {
      Sentry.startSpan(
        {
          name: "Example Frontend Span",
          op: "test",
        },
        async () => {
          const res = await fetch("/sentry-example");
          if (!res.ok) {
            throw new Error("Sentry Example Frontend Error");
          }
        }
      );
    }
  </script>

  <button type="button" onclick="{throwTestError}">Generar error con traza</button>
  ```

  Abre la página `sentry-example` en un navegador y haz clic en el botón para generar dos errores:

  * un error de frontend
  * un error dentro de la ruta de la API

  Además, esto inicia una traza para medir el tiempo que tarda en completarse la solicitud a la API.
</OnboardingOption>

<div id="view-captured-data-in-sentry">
  ### Ver los datos capturados en Sentry
</div>

Ahora, dirígete a tu proyecto en [Sentry.io](https://sentry.io) para ver los datos recopilados (puede tardar unos momentos en aparecer).

<PlatformContent includePath="getting-started-verify-locate-data" />

<div id="next-steps">
  ## Próximos pasos
</div>

A estas alturas, ya deberías haber integrado Sentry en tu aplicación SvelteKit y estar enviando datos a tu proyecto de Sentry.

Es un buen momento para personalizar tu configuración y explorar temas más avanzados.
Te recomendamos los siguientes pasos:

* Aprende a [capturar errores manualmente](/es/platforms/javascript/guides/sveltekit/usage/)
* Sigue [personalizando tu configuración](/es/platforms/javascript/guides/sveltekit/configuration/)
* Aprende a [instrumentar manualmente](/es/platforms/javascript/guides/sveltekit/apis#load-function-instrumentation) funcionalidades específicas de SvelteKit
* Descubre más sobre cómo [desplegar aplicaciones de SvelteKit en Cloudflare Pages](/es/platforms/javascript/guides/cloudflare/frameworks/sveltekit/)
* Familiarízate con [las funciones del producto de Sentry](/es/product/) como trazabilidad, insights y alertas

<Expandable permalink={false} title="¿Tienes problemas para configurar el SDK?">
  - Si tuviste problemas al configurar Sentry manualmente, [prueba nuestro asistente de instalación](/es/platforms/javascript/guides/sveltekit/)
  - Encuentra diversos temas en [Solución de problemas](/es/platforms/javascript/guides/sveltekit/troubleshooting/)
  - [Obtén soporte](https://sentry.zendesk.com/hc/en-us/)
</Expandable>