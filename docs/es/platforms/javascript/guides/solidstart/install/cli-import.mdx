---
title: --import (predeterminado) de la CLI
sidebar_order: 1
description: "Aprende a usar la opción --import de la CLI de Node."
---

<div id="understanding-the-import-cli-flag">
  ## Comprender la bandera de CLI `--import`
</div>

La [bandera de CLI `--import`](https://nodejs.org/api/cli.html#--importmodule) en Node es la forma predeterminada en ESM de precargar un módulo específico al inicio.
Configurar esta bandera de CLI es crucial para garantizar una correcta inicialización del lado del servidor, ya que Sentry debe inicializarse antes de que la aplicación se ejecute.
Esto registrará el [hook de carga](https://nodejs.org/api/module.html#customization-hooks) de Sentry y, por lo tanto, habilitará la instrumentación adecuada de los módulos ESM.

<div id="scenarios-where-import-does-not-work">
  ## Escenarios en los que `--import` no funciona
</div>

- No puedes agregar flags de la CLI de Node ni variables de entorno con alcance solo al runtime de la función; es decir, esas variables no se aplican en otros ámbitos, como el tiempo de compilación (build).
- No conoces la ruta a la carpeta del servidor de SolidStart en la salida de build.
- En este momento no es posible configurar correctamente `--import` en **Netlify**.
- En este momento no es posible configurar correctamente `--import` en **Vercel**.

Si cualquiera de esos puntos aplica en tu caso, no puedes usar la flag `--import` para inicializar Sentry en el lado del servidor.
Consulta la guía para usar <PlatformLink to="/install/limited-server-tracing">trazado de servidor limitado</PlatformLink> en su lugar.

<div id="initializing-sentry-with-import">
  ## Inicializar Sentry con `--import`
</div>

De forma predeterminada, el SDK agregará el archivo de instrumentación del servidor de Sentry al resultado de la compilación (por lo general, `.output/server/instrument.server.mjs`).

<div id="1-adding-import-to-node-command">
  ### 1. Añadir `--import` al comando `node`
</div>

Después de compilar tu app de SolidStart con `vinxi build`, añade la opción `--import` seguida de la ruta al archivo de instrumentación del servidor de Sentry al comando `node`.
Con el preset predeterminado de Vinxi para Node, normalmente se ve así:

```bash
node --import ./.output/server/instrument.server.mjs .output/server/index.mjs
```

Revisa el log al final de la salida de la consola después de compilar la aplicación.
Ahí verás el comando de Node con la ruta de entrada del servidor para tu aplicación (`node .output/server/index.mjs` con el preset de Node).
Asegúrate de actualizar las rutas en consecuencia, especialmente si usas un preset de Vinxi distinto.

Para facilitarlo, agrega un script en el `package.json`:

```json {filename:package.json}
{
  "scripts": {
    "start": "node --import ./.output/server/instrument.server.mjs .output/server/index.mjs"
  }
}
```


<div id="2-adding-import-flag-in-production">
  ### 2. Agregar la opción `--import` en producción
</div>

Para configurar Sentry en producción, debes agregar la opción `--import` en cualquier lugar donde ejecutes el build de producción de tu aplicación.
Consulta la documentación de tu proveedor de hosting para conocer los detalles específicos de implementación.
La mayoría de las plataformas de despliegue lo admiten de dos formas principales:

<div id="option-1-direct-cli-flag">
  #### Opción 1: Indicador directo en la CLI
</div>

```bash
node --import ./.output/server/instrument.server.mjs your-server-entry.mjs
```


<div id="option-2-environment-variable">
  #### Opción 2: Variable de entorno
</div>

```bash
NODE_OPTIONS='--import ./.output/server/instrument.server.mjs'
```
