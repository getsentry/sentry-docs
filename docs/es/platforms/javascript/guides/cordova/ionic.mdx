---
title: Ionic
sidebar_order: 201
noindex: true
draft: true
description: "Aprende a usar Sentry con Ionic."
---

<Alert level="warning" title="Warning">
  Recomendamos encarecidamente usar Ionic con Capacitor. Consulta nuestra [documentación de Ionic con Sentry Capacitor](/es/platforms/javascript/guides/capacitor/).
</Alert>

Para usar Sentry con [Ionic](https://ionicframework.com/), tienes que agregar *sentry-cordova* como dependencia en tu package.json.

Primero ejecuta `npm i --save sentry-cordova` y asegúrate de haber agregado previamente las plataformas que quieres admitir con `ionic cordova platform add ios` y/o `ionic cordova platform add android`.

Después de eso, es importante ejecutar `cordova plugin add sentry-cordova` sin el wrapper de Ionic.

<Alert level="warning" title="Warning">
  No ejecutes `ionic cordova plugin add sentry-cordova`. El wrapper de la CLI de Ionic consume toda la entrada y sentry-wizard no podrá configurar tu proyecto.
</Alert>

Al compilar tu app con Ionic para producción, asegúrate de tener activados los source maps. Debes agregar esto a tu `package.json`:

```javascript
"config": {
    "ionic_generate_source_map": "true"
}
```

Activar los mapas de origen en Ionic v4:

```
ionic build --prod --source-map
```

De lo contrario, no podremos cargar los mapas de origen (source maps) a Sentry.

<Alert level="warning" title="Advertencia">
  Si quieres omitir la versión automática de la release y definirla completamente por tu cuenta, debes agregar esta variable de entorno para desactivarla, por ejemplo: `SENTRY_SKIP_AUTO_RELEASE=true ionic cordova emulate ios --prod`
</Alert>

Para configurar Sentry en tu código, agrega lo siguiente a tu `app.module.ts`:

```javascript
import * as Sentry from "sentry-cordova";

Sentry.init({ dsn: "___PUBLIC_DSN___" });
```

Para usar también el `IonicErrorHandler` que proporciona Ionic, debemos agregar `SentryIonicErrorHandler`:

```javascript
import { IonicErrorHandler } from "ionic-angular";

import * as Sentry from "sentry-cordova";

export class SentryIonicErrorHandler extends IonicErrorHandler {
  handleError(error) {
    super.handleError(error);
    try {
      Sentry.captureException(error.originalError || error);
    } catch (e) {
      console.error(e);
    }
  }
}
```

O `ErrorHandler` para Ionic v4:

```javascript
import { ErrorHandler } from "@angular/core";

import * as Sentry from "sentry-cordova";

export class SentryIonicErrorHandler extends ErrorHandler {
  handleError(error) {
    super.handleError(error);
    try {
      Sentry.captureException(error.originalError || error);
    } catch (e) {
      console.error(e);
    }
  }
}
```

Luego cambia `@NgModule{providers:[]}` en `app.module.ts` por:

```javascript
@NgModule({
    ...
    providers: [
        StatusBar,
        SplashScreen,
        // {provide: ErrorHandler, useClass: IonicErrorHandler} elimina esto y agrega la siguiente línea (en Ionic 4, esta línea no existe por defecto)
        {provide: ErrorHandler, useClass: SentryIonicErrorHandler}
    ]
})
```
