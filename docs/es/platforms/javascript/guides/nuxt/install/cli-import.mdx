---
title: Indicador de CLI --import (predeterminado)
sidebar_order: 1
description: "Aprende a usar el indicador de CLI de Node --import."
---

<div id="understanding-the-import-cli-flag">
  ## Comprender la opción de CLI `--import`
</div>

La [opción de CLI `--import`](https://nodejs.org/api/cli.html#--importmodule) en Node es la forma predeterminada en ESM para precargar un módulo específico al inicio.
Configurar esta opción de CLI es crucial para garantizar una correcta inicialización en el servidor, ya que Sentry debe inicializarse antes de que se ejecute la aplicación.
Esto registrará el [hook de carga](https://nodejs.org/api/module.html#customization-hooks) de Sentry y, por lo tanto, habilitará la instrumentación adecuada de los módulos ESM.

<div id="scenarios-where-import-does-not-work">
  ## Escenarios en los que `--import` no funciona
</div>

- No puedes agregar flags de la CLI de Node ni variables de entorno limitadas al runtime de la función, lo que significa que estas variables no se aplican en otros ámbitos, como en tiempo de compilación (build).
- No conoces la ruta a la carpeta del servidor de Nuxt en el artefacto de build.
- Por el momento, no es posible configurar correctamente `--import` en **Netlify**.
- Por el momento, no es posible configurar correctamente `--import` en **Vercel**.

Si alguno de esos puntos aplica a tu caso, no puedes usar el flag `--import` para inicializar Sentry del lado del servidor.
Consulta la guía para usar <PlatformLink to="/install/limited-server-tracing">trazado limitado del servidor</PlatformLink> en su lugar.

<div id="initializing-sentry-with-import">
  ## Inicializar Sentry con `--import`
</div>

De forma predeterminada, el SDK añadirá la configuración del servidor de Sentry al resultado de la compilación (normalmente, `.output/server/sentry.server.config.mjs` o `./.nuxt/dev/sentry.server.config.mjs` durante el desarrollo).

<Alert>
  Para encontrar la ruta exacta al archivo de configuración del servidor de Sentry generado, habilita el modo `debug` en tu configuración de Sentry dentro de `nuxt.config.ts`. Sentry mostrará entonces la ruta exacta durante el proceso de compilación.
</Alert>

<div id="1-adding-import-to-node-command">
  ### 1. Añadir `--import` al comando `node`
</div>

Después de compilar tu app de Nuxt con `nuxi build`, añade la opción `--import` seguida de la ruta a la configuración del servidor de Sentry al comando `node`.
Con el preset predeterminado de Nitro para Node, normalmente se ve así:

```bash
node --import ./.output/server/sentry.server.config.mjs .output/server/index.mjs
```

Revisa el registro al final de la salida de la consola después de compilar la aplicación.
Ahí verás el comando de Node con la ruta de entrada del servidor de tu aplicación (`node .output/server/index.mjs` con el preset de Node).
Asegúrate de actualizar las rutas en consecuencia, especialmente si usas un preset de Nitro diferente.

Para simplificarlo, agrega un script en el `package.json`:

```json {filename:package.json}
{
  "scripts": {
    "start": "node --import ./.output/server/sentry.server.config.mjs .output/server/index.mjs"
  }
}
```


<div id="2-adding-import-flag-in-production">
  ### 2. Agregar el indicador `--import` en producción
</div>

Para poder configurar Sentry en producción, es necesario agregar el indicador `--import` en cualquier lugar donde ejecutes el artefacto de compilación de producción de tu aplicación.
Consulta la documentación de tu proveedor de alojamiento para obtener detalles específicos de implementación.
La mayoría de las plataformas de despliegue lo admiten mediante dos métodos principales:

<div id="option-1-direct-cli-flag">
  #### Opción 1: Indicador de CLI directo
</div>

```bash
node --import ./.output/server/sentry.server.config.mjs your-server-entry.mjs
```


<div id="option-2-environment-variable">
  #### Opción 2: Variable de entorno
</div>

```bash
NODE_OPTIONS='--import .output/server/sentry.server.config.mjs'
```
