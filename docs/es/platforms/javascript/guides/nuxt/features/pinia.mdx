---
title: Pinia
description: "Aprende a habilitar el plugin de Pinia de Sentry en Nuxt."
---

Para capturar los datos de estado de [Pinia](https://pinia.vuejs.org/), agrega `piniaIntegration` con `usePinia()` al array de integraciones de tu configuración de Sentry en el lado del cliente:

```javascript {3} {filename:sentry.client.config.ts}
Sentry.init({
  dsn: "___PUBLIC_DSN___",
  integrations: [Sentry.piniaIntegration(usePinia())],
});
```


<div id="normalization-depth">
  ## Profundidad de normalización
</div>

De forma predeterminada, los SDK de Sentry normalizan cualquier contexto con una profundidad de 3. Puede que quieras aumentarla al enviar estados de Pinia pasando `normalizeDepth` a la llamada de `Sentry.init`:

```javascript {4} {filename:sentry.client.config.ts}
Sentry.init({
  dsn: "___PUBLIC_DSN___",
  integrations: [Sentry.piniaIntegration(usePinia())],
  normalizeDepth: 10, // O qué tan profundo quieres el contexto de tu estado.
});
```


<div id="options">
  ## Opciones
</div>

Si no proporcionas un segundo argumento a `piniaIntegration`, se aplicarán automáticamente todas las opciones predeterminadas. Para configurar manualmente el plugin de Pinia, pasa un objeto de opciones como segundo argumento a `piniaIntegration`.

<Alert level="warning" title="Nota">

Aunque hacemos todo lo posible por filtrar la información de identificación personal (PII), como las contraseñas de los usuarios, te recomendamos no enviar información sensible a Sentry.

</Alert>

<div id="attachpiniastate-boolean">
  ### `attachPiniaState` (Boolean)
</div>

Se utiliza para adjuntar el estado de Pinia a los eventos de Sentry. De forma predeterminada, está establecido en `true`. Si no quieres adjuntar el estado de Pinia a los eventos que se envían a Sentry, configúralo en `false`:

```javascript {2} {filename:sentry.client.config.ts}
Sentry.piniaIntegration(usePinia(), {
  attachPiniaState: false
})
```


<div id="addbreadcrumbs-boolean">
  ### `addBreadcrumbs` (Boolean)
</div>

Se usa para añadir breadcrumbs a los eventos de Sentry. De forma predeterminada, está en `true`. Si no quieres añadir breadcrumbs a los eventos enviados a Sentry, ponlo en `false`:

```javascript {2} {filename:sentry.client.config.ts}
Sentry.piniaIntegration(usePinia(), {
  addBreadcrumbs: false
})
```


<div id="actiontransformer-function">
  ### `actionTransformer` (Función)
</div>

Se puede usar para eliminar información sensible de las acciones de Pinia. El primer parámetro que se pasa a la función es el nombre de la acción de Pinia. Enviamos todas las acciones de forma predeterminada; si no quieres que se envíe un nombre de acción a Sentry, usa `return null`:

```javascript {2-9} {filename:sentry.client.config.ts}
Sentry.piniaIntegration(usePinia(), {
  actionTransformer: (action) => {
    if (action === "GOVERNMENT_SECRETS") {
      // Devuelve null para no registrar la acción en Sentry
      return null;
    }

    return action;
  },
})
```


<div id="statetransformer-function">
  ### `stateTransformer` (Function)
</div>

Se utiliza para eliminar información confidencial del estado de Pinia. El primer parámetro que recibe la función es el estado de Pinia. Adjuntamos todos los cambios de estado de forma predeterminada. Si no quieres adjuntar los cambios de estado a los eventos que se envían a Sentry, usa `return null`. Ten en cuenta que, si decides no enviar el estado a Sentry, es posible que tus errores no incluyan la versión más reciente:

```javascript {2-23} {filename:sentry.client.config.ts}
Sentry.piniaIntegration(usePinia(), {
  stateTransformer: (state) => {
    if (state.topSecret.doNotSend) {
      // Devuelve null para no enviar esta versión del estado.
      return null;
    }

    // Transforma el estado para eliminar información sensible
    const transformedState = {
      ...state,
      topSecret: {
        ...state.topSecret,
        // Reemplaza la información sensible con otra cosa
        nuclearLaunchCodes: "I love pizza",
        // o simplemente elimínala por completo
        hiddenTreasureLocation: null,
      },
      // También deberías eliminar datos grandes irrelevantes para la depuración y evitar saturar tus issues de Sentry
      giganticState: null,
    };

    return transformedState;
  },
})
```
