---
title: Seguimiento de componentes de Angular
description: "Aprende cómo el SDK de Angular de Sentry te permite supervisar el rendimiento de renderizado de tu aplicación y sus componentes."
---

El SDK de Angular de Sentry ofrece una función de seguimiento de componentes para supervisar el rendimiento de tus componentes de Angular. Al habilitar esta función, se inician spans que muestran los ciclos de inicialización y actualización de tus componentes de Angular. Esto te permite profundizar en el comportamiento de tus componentes para identificar inicializaciones lentas o actualizaciones frecuentes que podrían estar afectando el rendimiento de tu aplicación.

<Alert>
  Para configurar el seguimiento de componentes, primero debes activar el tracing. Para obtener más detalles sobre cómo hacerlo, consulta nuestra [documentación de tracing](/es/platforms/javascript/guides/angular/tracing/).
</Alert>

Para hacer seguimiento de tus componentes como parte de tus transacciones, usa cualquiera (o una combinación) de las siguientes opciones.

<div id="using-the-trace-directive">
  ## Uso de la directiva `trace`
</div>

Nuestra `TraceDirective` mide el tiempo transcurrido entre los hooks del ciclo de vida `OnInit` y `AfterViewInit` en la plantilla de tu componente. Añade spans llamados `ui.angular.init` a la transacción activa, lo que te permite hacer seguimiento de instancias individuales específicas de tus componentes. Para rastrear todas las instancias, usa [`TraceClass`](#using-traceclass).

Tanto para componentes standalone como para configuraciones de apps basadas en NGModule, registra `TraceModule` en el array `imports` del componente standalone o del módulo donde quieras usarlo:

```typescript {tabTitle:Standalone Component} {filename:app.component.ts} {3,8}
import { Component } from "@angular/core";
import { RouterOutlet } from "@angular/router";
import * as Sentry from "@sentry/angular";

@Component({
  selector: "app-root",
  standalone: true,
  imports: [Sentry.TraceModule],
  // ...
})
export class AppComponent {}
```

```typescript {tabTitle:NGModule Config} {filename:app.module.ts} {1,4}
import * as Sentry from "@sentry/angular";

@NgModule({
  imports: [Sentry.TraceModule],
  // ...
})
export class AppModule {}
```

Luego, en la plantilla de tu componente, añade la directiva `trace` a todos los componentes que quieras rastrear. Recuerda asignarle un nombre al atributo `trace`, que se mostrará en la descripción del span:

```html {filename:app.component.(ts|html)}
<app-header trace="header"></app-header>
<articles-list trace="articles-list"></articles-list>
<app-footer trace="footer"></app-footer>
```

<div id="using-traceclass">
  ## Uso de `TraceClass`
</div>

El decorador `TraceClass` mide el tiempo transcurrido entre los hooks de ciclo de vida `OnInit` y `AfterViewInit` en los componentes. Agrega spans llamados **`ui.angular.init`** a la transacción activa. A diferencia de la [directiva `trace`](#using-the-trace-directive), `TraceClassDecorator` rastrea todas las instancias de los componentes a los que se lo agregues, creando spans para cada instancia del componente.

Solo tienes que agregar el decorador `TraceClass` con un nombre de componente a los componentes que quieras rastrear:

```typescript {filename:header.component.ts} {2,8}
import { Component } from "@angular/core";
import * as Sentry from "@sentry/angular";

@Component({
  selector: "app-header",
  templateUrl: "./header.component.html",
})
@Sentry.TraceClass({ name: "Header" })
export class HeaderComponent {
  // ...
}
```

Nota: Debido a la minificación del código en compilaciones de producción, debes pasar una propiedad `name` al decorador `TraceClass`. De lo contrario, los spans harán referencia al componente como `<unnamed>`.

<div id="using-tracemethod">
  ## Uso de `TraceMethod`
</div>

El decorador `TraceMethod` registra hooks específicos del ciclo de vida del componente como spans puntuales. Los spans añadidos se llaman **`ui.angular.[methodname]`** (por ejemplo, `ui.angular.ngOnChanges`). Por ejemplo, puedes usar este decorador para registrar con qué frecuencia se detectan cambios en el componente:

```typescript {filename:login.component.ts} {2,9}
import { Component, OnInit } from "@angular/core";
import * as Sentry from "@sentry/angular";

@Component({
  selector: "app-login",
  templateUrl: "./login.component.html",
})
export class LoginComponent implements OnChanges {
  @Sentry.TraceMethod({ name: "Login.ngOnChanges" })
  ngOnChanges(changes: SimpleChanges) {
    // ...
  }
}
```

Nota: Debido a la minificación del código en las compilaciones de producción, debes pasar una propiedad `name` al decorador `TraceMethod`. De lo contrario, los spans creados se referirán al componente como `<unnamed>`.

<div id="advanced-usage">
  ## Uso avanzado
</div>

Puedes combinar nuestras utilidades de seguimiento de componentes y medir el tiempo de arranque de tu app.

<div id="combining-component-tracking-utilities">
  ### Combinación de utilidades de seguimiento de componentes
</div>

Para obtener las mejores ideas sobre el rendimiento de tus componentes, puedes combinar `TraceDirective`, `TraceClassDecorator` y `TraceMethodDecorator`. Esto te permite rastrear los tiempos de inicialización del componente, así como eventos arbitrarios del ciclo de vida, como los eventos de cambio y destrucción:

```typescript {filename:user-card.component.ts} {2,8,10,13}
import { Component, OnInit } from "@angular/core";
import * as Sentry from "@sentry/angular";

@Component({
  selector: "app-user-card",
  templateUrl: "./user-card.component.html",
})
@Sentry.TraceClass()
export class UserCardComponent implements OnChanges, OnDestroy {
  @Sentry.TraceMethod()
  ngOnChanges(changes: SimpleChanges) {}

  @Sentry.TraceMethod()
  ngOnDestroy() {}
}
```

Usa la directiva `trace` si solo quieres hacer seguimiento de componentes en determinadas instancias o ubicaciones:

```html {filename: user-card.component.html} {2,5}
<div>
  <app-icon trace="user-icon">user</app-icon>
  <label>{{ user.name }}</label>
  <!--...-->
  <app-button trace="save-user">Guardar</app-button>
</div>
```

<div id="track-angular-bootstrapping">
  ### Seguimiento del arranque de Angular
</div>

Puedes añadir spans personalizados con `startSpan()`. Por ejemplo, puedes medir la duración del proceso de arranque de Angular para saber cuánto tarda tu app en iniciarse en los dispositivos de tus usuarios:

```typescript {filename:main.ts} {3,9-20}
import { enableProdMode } from "@angular/core";
import { platformBrowserDynamic } from "@angular/platform-browser-dynamic";
import * as Sentry from "@sentry/angular";

import { AppModule } from "./app/app.module";

// ...

Sentry.startSpan(
  {
    name: "bootstrap-angular-application",
    op: "ui.angular.bootstrap",
  },
  async () => {
    await platformBrowserDynamic()
      .bootstrapModule(AppModule)
      .catch((err) => console.error(err));
  }
);
```

Obtén más información sobre la [instrumentación personalizada](../../tracing/instrumentation/custom-instrumentation/).
