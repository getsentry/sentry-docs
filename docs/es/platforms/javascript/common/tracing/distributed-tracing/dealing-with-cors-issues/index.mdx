---
title: Cómo resolver problemas de CORS
sidebar_order: 80
notSupported:
  - javascript.cordova
  - javascript.node
  - javascript.aws-lambda
  - javascript.azure-functions
  - javascript.connect
  - javascript.express
  - javascript.fastify
  - javascript.gcp-functions
  - javascript.hapi
  - javascript.hono
  - javascript.koa
  - javascript.nestjs
---

Si el frontend y el backend están en dominios distintos (por ejemplo, el frontend en `https://example.com` y el backend en `https://api.example.com`), debes configurar en el backend los encabezados [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Headers) para evitar que el navegador bloquee las solicitudes.

<div id="understanding-trace-propagation">
  ## Comprender la propagación de trazas
</div>

Sentry no incluye los encabezados `sentry-trace` y `baggage` (y opcionalmente `traceparent`) en todas las solicitudes salientes. En su lugar, solo añade estos encabezados a las solicitudes cuyas URL coinciden con los patrones especificados en la opción de configuración `tracePropagationTargets`.

De forma predeterminada, `tracePropagationTargets` está configurado como `['localhost', /^\//]`, lo que significa que los encabezados de trazas solo se añaden a:

- Solicitudes que contienen `localhost` en su URL (por ejemplo, `http://localhost:3000/api`)
- Solicitudes cuya URL comienza con `/` (por ejemplo, `/api/users`, `/graphql`)

Este comportamiento predeterminado ayuda a evitar enviar datos de trazas a servicios de terceros y a prevenir posibles problemas de CORS.

<div id="configuring-trace-propagation">
  ## Configuración de la propagación de trazas
</div>

Para habilitar el rastreo distribuido entre distintos dominios, debes configurar `tracePropagationTargets` para incluir las URL de tus servicios de backend:

```javascript
Sentry.init({
  dsn: "___PUBLIC_DSN___",
  integrations: [Sentry.browserTracingIntegration()],
  tracePropagationTargets: [
    "localhost",           // Para desarrollo local
    /^\/api\//,           // Para llamadas a la API del mismo origen
    "https://api.example.com", // Para el dominio de tu backend
    "https://auth.example.com" // Para servicios adicionales
  ],
});
```


<div id="configuring-cors-headers">
  ## Configuración de encabezados CORS
</div>

Una vez que hayas configurado `tracePropagationTargets` para incluir tus dominios de backend, debes configurar tu backend para permitir los encabezados de trazas:

```
Access-Control-Allow-Headers: sentry-trace, baggage
```

La configuración exacta de tu servidor dependerá de tu implementación, pero lo importante es permitir los encabezados `sentry-trace` y `baggage`.


<div id="w3c-traceparent-header">
  ### Encabezado traceparent de W3C
</div>

Si estableces la opción <PlatformLink to="/configuration/options#propagateTraceparent">`propagateTraceparent`</PlatformLink> en `true`, también debes permitir el encabezado `traceparent`:

```
Access-Control-Allow-Headers: sentry-trace, baggage, traceparent
```


<div id="disabling-trace-propagation">
  ## Desactivar la propagación de trazas
</div>

Si quieres desactivar por completo el rastreo distribuido y asegurarte de que no se envíen encabezados de traza:

```javascript
Sentry.init({
  dsn: "___PUBLIC_DSN___",
  // Un array vacío evita toda propagación de encabezados de rastreo
  tracePropagationTargets: [],
});
```
