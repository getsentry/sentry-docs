---
title: Instrumentar solicitudes HTTP
sidebar_order: 2000
description: "Aprende a instrumentar manualmente tu código para usar el módulo Requests de Sentry."
---

Como requisito previo para configurar [Requests](/es/product/insights/requests/), primero debes <PlatformLink to="/tracing/">configurar el trazado</PlatformLink>. Una vez hecho esto, el SDK de JavaScript instrumentará automáticamente las solicitudes HTTP salientes. Si eso no se ajusta a tu caso de uso, sigue esta guía para instrumentar tus solicitudes manualmente.

Para obtener información detallada sobre qué datos se pueden definir, consulta las [especificaciones del módulo Requests para desarrolladores](https://develop.sentry.dev/sdk/performance/modules/requests/).

<div id="wrap-http-requests-in-a-span">
  ## Envuelve las solicitudes HTTP en un span
</div>

<Alert>
  Consulta las [convenciones de datos de span para HTTP](https://develop.sentry.dev/sdk/performance/span-data-conventions/#http) para ver la lista completa de atributos de datos del span.
</Alert>

Aquí tienes un ejemplo de una función instrumentada que realiza solicitudes HTTP:

```javascript {filename: my-request.js}
async function makeRequest(method, url) {
  return await Sentry.startSpan(
    { op: "http.client", name: `${method} ${url}` },
    async (span) => {
      const parsedURL = new URL(url, location.origin);

      span.setAttribute("http.request.method", method);

      span.setAttribute("server.address", parsedURL.hostname);
      span.setAttribute("server.port", parsedURL.port || undefined);

      const response = await fetch(url, {
        method,
      });

      span.setAttribute("http.response.status_code", response.status);
      span.setAttribute(
        "http.response_content_length",
        Number(response.headers.get("content-length"))
      );

      // Un buen lugar para definir otros atributos del span

      return response;
    }
  );
}
```
