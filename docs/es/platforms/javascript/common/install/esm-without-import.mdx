---
title: ESM sin flag de CLI
sidebar_order: 11
description: "Aprende a ejecutar Sentry en una aplicación ESM sin el flag --import."
supported:
  - javascript.node
  - javascript.connect
  - javascript.express
  - javascript.fastify
  - javascript.hapi
  - javascript.hono
  - javascript.koa
---

<Alert>
  ¿No estás seguro de si debes usar este método de instalación? Revisa nuestros
  [métodos de instalación](../).
</Alert>

Cuando ejecutes tu aplicación en modo ESM, lo más probable es que quieras <PlatformLink to="/install/esm">seguir las instrucciones de ESM</PlatformLink>. Sin embargo, si quieres evitar usar la opción de línea de comandos `--import`, por ejemplo, si no tienes forma de configurar un flag de CLI, también puedes usar una configuración alternativa que consiste en importar el archivo `instrument.mjs` directamente en tu aplicación.

<Alert level="warning" title="Restricciones de este método de instalación">
  Este método de instalación tiene la restricción fundamental de que solo se pueden instrumentar las API nativas de Node.js (como `fetch` y el módulo `http`).

  Como resultado, el SDK de Sentry no capturará datos de llamadas a bases de datos, colas, ORMs, bibliotecas de terceros u otros datos específicos de un framework.

  Recomendamos usar esto solo si el flag `--import` no es una opción para ti.
</Alert>

Debes crear un archivo llamado `instrument.mjs` que importe e inicialice Sentry:

```javascript {tabTitle:ESM} {filename: instrument.mjs}
import * as Sentry from "@sentry/node";

// ¡Asegúrate de llamar a esto antes de importar cualquier otro módulo!
Sentry.init({
  dsn: "___PUBLIC_DSN___",

  // Añade trazabilidad configurando tracesSampleRate
  // Recomendamos ajustar este valor en producción
  tracesSampleRate: 1.0,
});
```

Debes importar el archivo `instrument.mjs` antes que cualquier otro módulo en tu aplicación. Esto es necesario para asegurarte de que Sentry pueda instrumentar automáticamente todos los módulos de tu aplicación:

```javascript {filename: app.mjs}
// ¡Importa esto primero!
import "./instrument";

// Ahora importa otros módulos
import http from "http";

// El código de tu aplicación va aquí
```
