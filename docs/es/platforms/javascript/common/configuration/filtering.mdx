---
title: Filtrado
sidebar_order: 60
description: "Obtén más información sobre cómo configurar tu SDK de JavaScript para establecer el filtrado de eventos enviados a Sentry."
---

Cuando incorporas Sentry a tu aplicación, obtienes mucha información valiosa sobre errores y rendimiento. Y mucha información es buena, siempre y cuando sea la adecuada y en un volumen razonable.

Sentry ofrece [Inbound Filters](/es/concepts/data-management/filtering/) que puedes habilitar por proyecto para filtrar varios tipos de eventos en sentry.io. Puedes usar nuestros filtros de entrada predefinidos (por ejemplo, para filtrar extensiones de navegador conocidas) y también agregar tus propios filtros basados en mensajes.

Aun así, recomendamos filtrar en el cliente, porque elimina la sobrecarga de enviar eventos que en realidad no quieres. Los [SDK de Sentry](/es/platforms/) tienen varias opciones de configuración, que se describen en este documento, para ayudarte a filtrar eventos. Para obtener más información sobre los campos de los eventos que puedes usar para filtrar, consulta [Event Payloads](https://develop.sentry.dev/sdk/data-model/event-payloads/).

<div id="filtering-error-events">
  ## Filtrado de eventos de error
</div>

Configura tu SDK para filtrar eventos de error mediante el callback <PlatformIdentifier name="before-send" /> y configurando, habilitando o deshabilitando integraciones.

### Uso de <PlatformIdentifier name="ignore-errors" />

Puedes usar la opción <PlatformIdentifier name="ignore-errors" /> para filtrar errores que coincidan con un patrón determinado. Esta opción recibe una lista de cadenas y expresiones regulares que se comparan con el mensaje de error. Al usar cadenas, se filtrarán las coincidencias parciales. Si necesitas filtrar por coincidencia exacta, usa patrones de regex.

<PlatformContent includePath="configuration/ignore-errors" />

Consulta <PlatformLink to="/configuration/options/#ignoreErrors">ignoreErrors</PlatformLink> para más detalles.

### Uso de <PlatformIdentifier name="before-send" />

Puedes configurar un callback <PlatformIdentifier name="before-send" /> para filtrar eventos de error. Como se invoca justo antes de enviar el evento al servidor, es tu última oportunidad para decidir no enviar datos o editarlos. <PlatformIdentifier name="before-send" /> recibe el objeto del evento como parámetro y, según tu lógica y los datos disponibles en el evento, puedes modificar los datos o descartarlo por completo devolviendo `null`. Este hook se ejecuta tanto para eventos de error como de mensaje.

<PlatformContent includePath="configuration/before-send/" />

Consulta <PlatformLink to="/configuration/options/#beforeSend">beforeSend</PlatformLink> para más detalles y [Uso de hints](#using-hints) para obtener información sobre el objeto `hint`.

<div id="using-allowurls-and-denyurls">
  ### Uso de `allowUrls` y `denyUrls`
</div>

Puedes configurar el SDK para evitar enviar errores que se originan en scripts de determinados dominios.
Por ejemplo, si tus scripts se cargan desde `cdn.example.com` y tu sitio es `example.com`, puedes configurar `allowUrls` de la siguiente manera para evitar capturar errores de otros dominios:

```javascript
Sentry.init({
  allowUrls: [/https?:\/\/((cdn|www)\.)?example\.com/],
});
```

Ten en cuenta que esto filtra los errores según sus frames de la pila, no la URL de la página donde ocurrió el error.

También puedes usar `denyUrls` si quieres bloquear que los errores creados en URL específicas se envíen a Sentry.

* Consulta los detalles de <PlatformLink to="/configuration/options/#allowUrls">allowUrls</PlatformLink>
* Consulta los detalles de <PlatformLink to="/configuration/options/#denyUrls">denyUrls</PlatformLink>

<div id="using-thirdpartyerrorfilterintegration">
  ### Uso de `thirdPartyErrorFilterIntegration`
</div>

*Disponible en SDKs para navegadores desde la versión 8.10.0*

La `thirdPartyErrorFilterIntegration` te permite filtrar errores que se originan en terceros, como extensiones del navegador, navegadores que inyectan código o widgets de servicios de terceros que también usan Sentry.
Esta integración puede ser muy útil para reducir el ruido no relacionado con el código de tu aplicación.

<Alert>
  **Requisito previo**: Para usar `thirdPartyErrorFilterIntegration`, asegúrate de usar un bundler y uno de los [plugins de bundler de Sentry](https://github.com/getsentry/sentry-javascript-bundler-plugins).
</Alert>

Esta integración funciona “marcando” tus archivos JavaScript con una “clave de aplicación” durante el proceso de compilación.
En tiempo de ejecución, si ocurre un error, esta integración comprueba las claves de aplicación de cada frame de la pila en el stack trace.
Esto te permite filtrar errores con frames de pila “no marcados”, lo que indicaría código de terceros.

Para configurar esta integración y marcar tus archivos JavaScript con una clave de aplicación, primero pasa la opción `applicationKey` a tu plugin de bundler de Sentry.
Puede ser cualquier cadena que identifique el código de tu aplicación:

<PlatformContent includePath="configuration/filter-application-key" />

A continuación, agrega `thirdPartyErrorFilterIntegration` a la inicialización de Sentry:

```javascript {3-14}
Sentry.init({
  integrations: [
    Sentry.thirdPartyErrorFilterIntegration({
      // Especifica las claves de aplicación que definiste en el plugin bundler de Sentry
      filterKeys: ["tu-clave-de-aplicacion-personalizada"],

      // Define cómo manejar los errores que contienen stack frames de terceros.
      // Los valores posibles son:
      // - 'drop-error-if-contains-third-party-frames'
      // - 'drop-error-if-exclusively-contains-third-party-frames'
      // - 'apply-tag-if-contains-third-party-frames'
      // - 'apply-tag-if-exclusively-contains-third-party-frames'
      behaviour: "drop-error-if-contains-third-party-frames",
    }),
  ],
});
```

La opción `filterKeys` recibe un array de cadenas que deben coincidir con el valor de `applicationKey` configurado en las opciones del plugin del bundler.
A menos que tu sitio web sirva archivos de más de uno de tus procesos de compilación, este array debería contener solo un elemento.

La opción `behaviour` define qué debe suceder con los errores que incluyen frames de la pila provenientes de código de terceros.
Hay cuatro modos entre los que puedes elegir:

* `"drop-error-if-contains-third-party-frames"`: Descarta eventos de error que contengan al menos un frame de la pila de terceros.
* `"drop-error-if-exclusively-contains-third-party-frames"`: Descarta eventos de error que contengan exclusivamente frames de la pila de terceros.
* `"apply-tag-if-contains-third-party-frames"`: Conserva todos los eventos de error, pero aplica la etiqueta `third_party_code: true` si el error contiene al menos un frame de la pila de terceros.
* `"apply-tag-if-exclusively-contains-third-party-frames"`: Conserva todos los eventos de error, pero aplica la etiqueta `third_party_code: true` si el error contiene exclusivamente frames de la pila de terceros.

Si eliges un modo que solo aplique etiquetas, luego podrás usarlas en Sentry para filtrar tu flujo de incidencias con la etiqueta `third_party_code` en la barra de búsqueda de incidencias.

<Alert>
  La `thirdPartyErrorFilterIntegration` no funcionará con el [Sentry Loader Script o los CDN Bundles](/es/platforms/javascript/install/loader/).
  Esto se debe a que el Sentry Loader Script y los CDN Bundles son detectados como “terceros” por la integración. Esto hace que aplique el comportamiento elegido a casi todos los eventos, ya que el SDK de Sentry envuelve muchas API nativas del navegador.
</Alert>

<div id="filtering-transaction-events">
  ## Filtrado de eventos de transacción
</div>

Para evitar que ciertas transacciones se envíen a Sentry, usa la opción de configuración <PlatformIdentifier name="traces-sampler" /> o <PlatformIdentifier name="before-send-transaction" />, que te permite proporcionar una función para evaluar la transacción actual y descartarla si no quieres conservarla.

### Uso de <PlatformIdentifier name="ignore-transactions" />

Puedes usar la opción <PlatformIdentifier name="ignore-transactions" /> para filtrar transacciones que coincidan con un determinado patrón. Esta opción recibe una lista de cadenas y expresiones regulares para comparar con el nombre de la transacción. Al usar cadenas, también se filtrarán las coincidencias parciales. Si necesitas filtrar por coincidencia exacta, utiliza patrones de regex.

<PlatformContent includePath="configuration/ignore-transactions" />

Consulta <PlatformLink to="/configuration/options/#ignoreTransactions">ignoreTransactions</PlatformLink> para más detalles.

### Uso de <PlatformIdentifier name="traces-sampler" />

También puedes usar la opción <PlatformLink to="/configuration/options/#tracesSampler">tracesSampler</PlatformLink> para evitar que se informen ciertas transacciones a Sentry.

Consulta <PlatformLink to="/configuration/sampling/#setting-a-sampling-function">Muestreo</PlatformLink> para obtener información sobre cómo usarlo.

<div id="using-beforesendtransaction">
  ### Uso de `beforeSendTransaction`
</div>

<PlatformContent includePath="configuration/before-send-transaction" />

Consulta <PlatformLink to="/configuration/options/#beforeSendTransaction">beforeSendTransaction</PlatformLink> para más detalles y [Uso de sugerencias](#using-hints) para obtener información sobre el objeto `hint`.

<div id="filtering-spans">
  ## Filtrado de spans
</div>

Usa la opción de configuración <PlatformIdentifier name="before-send-span" /> que te permite proporcionar una función para modificar un span.
Esta función se ejecuta para el span raíz y todos los spans hijos. Si quieres descartar el span raíz, incluidos sus spans hijos, usa [`beforeSendTransaction`](#using-beforesendtransaction) en su lugar.
Ten en cuenta que no puedes usar `beforeSendSpan` para descartar un span; solo puedes modificarlo y filtrar sus datos.

<PlatformContent includePath="configuration/before-send-span" />

Consulta <PlatformLink to="/configuration/options/#beforeSendSpan">beforeSendSpan</PlatformLink> para más detalles.

<div id="filtering-breadcrumbs">
  ## Filtrado de breadcrumbs
</div>

Puedes filtrar los breadcrumbs usando la opción de configuración `beforeBreadcrumb`:

<PlatformContent includePath="enriching-events/breadcrumbs/before-breadcrumb" />

Consulta <PlatformLink to="/configuration/options/#beforeBreadcrumb">beforeBreadcrumb</PlatformLink> para más detalles.

<div id="using-hints">
  ## Uso de hints
</div>

Los hints están disponibles en dos lugares:

1. <PlatformIdentifier name="before-send" /> / <PlatformIdentifier name="before-breadcrumb" />
2. Procesadores de eventos añadidos mediante `Sentry.addEventProcessor()`

Los hints de eventos y breadcrumbs son objetos que contienen distintos tipos de información usada para construir un evento o un breadcrumb. Normalmente, los hints incluyen la excepción original para poder extraer datos adicionales o influir en la agrupación.

Para los eventos, los hints contienen propiedades como `event_id`, `originalException`, `syntheticException` (usada internamente para generar un stack trace más limpio) y cualquier otro `data` arbitrario que adjuntes.

Para los breadcrumbs, el uso de los hints depende de la implementación. En solicitudes XHR, el hint contiene el propio objeto xhr; en interacciones del usuario, el hint contiene el elemento del DOM y el nombre del evento, y así sucesivamente.

<PlatformContent includePath="configuration/before-send-fingerprint">
  En este ejemplo, la huella digital se fuerza a un valor común si se captura una excepción de cierto tipo:
</PlatformContent>

<div id="hints-for-events">
  ### Sugerencias para eventos
</div>

`originalException`

La excepción original que hizo que el SDK de Sentry creara el evento. Esto es útil para cambiar cómo el SDK de Sentry agrupa los eventos o para extraer información adicional.

`syntheticException`

Cuando se lanza una cadena o un objeto que no es un error, Sentry crea una excepción sintética para que puedas obtener un seguimiento de pila básico. Esta excepción se almacena aquí para una extracción posterior de datos.

<div id="hints-for-breadcrumbs">
  ### Sugerencias para migas de pan
</div>

<PlatformContent includePath="configuration/breadcrumb-hints" />