---
title: Privacidad
sidebar_order: 4200
notSupported:
  - javascript.cordova
  - javascript.wasm
  - javascript.bun
  - javascript.deno
  - javascript.node
  - javascript.aws-lambda
  - javascript.azure-functions
  - javascript.connect
  - javascript.express
  - javascript.fastify
  - javascript.gcp-functions
  - javascript.hapi
  - javascript.hono
  - javascript.koa
  - javascript.nestjs
  - javascript.cloudflare
description: Configurar Session Replay para mantener la privacidad de usuarios y datos.
customCanonicalTag: /platforms/javascript/session-replay/privacy/
og_image: /og-images/platforms-javascript-common-session-replay-privacy.png
---

<Include name="session-replay-web-report-bug.mdx" />

<Alert level="warning">
  Antes de habilitar Session Replay en producción, verifica tu configuración de enmascaramiento para asegurarte de que no se capture información sensible. Nuestra configuración predeterminada enmascara de forma agresiva los datos potencialmente sensibles, pero si modificas estos ajustes o actualizas frameworks de UI o SDK del sistema, debes probar tu aplicación a fondo. Si detectas problemas de enmascaramiento o datos sensibles que deberían enmascararse pero no lo están, [crea un issue en GitHub](https://github.com/getsentry/sentry-javascript/issues/new/choose) y evita desplegar en producción con Session Replay habilitado hasta que el problema se resuelva.
</Alert>

Hay varias formas de gestionar la información de identificación personal (PII). De forma predeterminada, el SDK de Session Replay enmascara todo el contenido de texto con `*` y bloquea todos los elementos multimedia (`img`, `svg`, `video`, `object`, `picture`, `embed`, `map`, `audio`) en el cliente, antes de enviarlos al servidor. Esto se puede desactivar estableciendo `maskAllText` en `false`. También es posible añadir las siguientes clases CSS a elementos específicos del DOM para evitar registrar su contenido: `sentry-block`, `sentry-ignore` y `sentry-mask`. Las siguientes secciones mostrarán ejemplos de cómo se maneja el contenido con los distintos métodos.

<div id="masking">
  ## Enmascaramiento
</div>

El enmascaramiento sustituye el contenido del texto por otra cosa. El comportamiento predeterminado es reemplazar cada carácter por un `*`. Se bloquearán los elementos con la clase `sentry-mask` o el atributo `data-sentry-mask`. En este ejemplo, el HTML relevante es: `<table class="sentry-mask">...</table>`:

![Ejemplo de depuración de PII en Replay](./img/masking.png)

Puedes configurar qué enmascarar o des-enmascarar mediante la siguiente [configuración](#privacy-configuration):

```javascript
replayIntegration({
  mask: [".mask-me"],
  unmask: [".unmask-me"],
});
```

<div id="blocking">
  ## Bloqueo
</div>

El bloqueo sustituye el elemento por un marcador de posición con las mismas dimensiones. La grabación mostrará un espacio vacío en lugar del contenido. Se bloquearán los elementos con la clase `sentry-block` o el atributo `data-sentry-block`. En este ejemplo, el código HTML relevante es: `<table data-sentry-block>...</table>`:

![Ejemplo de bloqueo](./img/blocking.png)

Puedes configurar qué bloquear o desbloquear mediante la siguiente [configuración](#privacy-configuration):

```javascript
replayIntegration({
  block: [".block-me"],
  unblock: [".unblock-me"],
});
```

<div id="ignoring">
  ## Ignorar
</div>

Ignorar solo aplica a los campos de formulario. Se omitirán los eventos en el elemento de entrada para que la reproducción no muestre lo que ocurre dentro del campo. Cualquier evento en un elemento de entrada con la clase `sentry-ignore` o el atributo `data-sentry-ignore` se ignorará. Observa cómo los resultados en la tabla de abajo muestran cambios en el campo, pero no texto visible:

![Ejemplo de ignorar](./img/ignoring.gif)

Puedes configurar qué ignorar mediante la siguiente [configuración](#privacy-configuration):

```javascript
replayIntegration({
  ignore: [".ignore-me"],
});
```

<div id="privacy-configuration">
  ## Configuración de privacidad
</div>

<PlatformContent includePath="replay/privacy-configuration" />

<div id="network-request-and-response-bodies-and-headers">
  ## Cuerpos y encabezados de solicitudes y respuestas de red
</div>

La recopilación de los cuerpos de las solicitudes y respuestas es una función opcional. Esto se debe a que la mejor manera de evitar que PII llegue a Sentry es no agregar URL de endpoints que puedan contener PII.
Además, Sentry intenta [depurar](/es/security-legal-pii/scrubbing/server-side-scrubbing/) ciertos tipos de datos sensibles de los cuerpos de solicitud y respuesta si, por accidente, habilitas una URL que incluya este tipo de datos. Este mecanismo se aplica en nuestro servicio de ingesta, antes de que los datos lleguen a nuestros discos. Es un enfoque de “mejor esfuerzo” que utiliza coincidencia de patrones con contenidos como información de tarjetas de crédito, números de seguridad social y [contraseñas](https://github.com/search?q=repo%3Agetsentry%2Frelay%20PASSWORD_KEY_REGEX\&type=code).

Puedes encontrar más detalles sobre esta función en la [página de configuración](/es/platforms/javascript/session-replay/configuration/#network-details).

<div id="custom-scrubbing">
  ## Limpieza personalizada
</div>

La opción `beforeAddRecordingEvent` se incorporó a partir de la versión 7.53.0 del SDK. Te permite modificar o depurar las grabaciones para eliminar datos personales (PII), o ignorar eventos de grabación antes de que salgan del navegador. Estos eventos incluyen los registros de la consola, las solicitudes de red y los datos de respuesta.

```javascript
Sentry.replayIntegration({
  beforeAddRecordingEvent: (event) => {
    // Filtrar eventos específicos
    if (event.data.tag === "foo") {
      return null;
    }

    // ¡Recuerda devolver el evento si quieres mantenerlo!
    return event;
  },
});
```

<div id="example-capturing-500-status-codes-only">
  ### Ejemplo: Capturar solo códigos de estado 500
</div>

Este es un ejemplo que muestra cómo capturar únicamente las solicitudes `fetch` que devuelvan un código de estado 500. (Las solicitudes que no sean `fetch` seguirán capturándose normalmente.)

```javascript
Sentry.replayIntegration({
  beforeAddRecordingEvent: (event) => {
    // No capturar solicitudes fetch/xhr, a menos que el código de respuesta sea 500
    if (
      event.data.tag === "performanceSpan" &&
      (event.data.payload.op === "resource.fetch" ||
        event.data.payload.op === "resource.xhr") &&
      event.data.payload.data.statusCode !== 500
    ) {
      return null;
    }

    return event;
  },
});
```

También contamos con [limpieza de PII del lado del servidor](/es/security-legal-pii/scrubbing/server-side-scrubbing/) para estos datos. Detecta ciertos patrones, como números de seguro social de Estados Unidos, tarjetas de crédito y claves privadas.

<div id="example-scrubbing-urls">
  ### Ejemplo: depuración de URL
</div>

De forma predeterminada, las URL se almacenan tanto en eventos de grabación como de reproducción.

Para depurar la URL en un evento de grabación, usa el `beforeAddRecordingEvent` mencionado arriba.

Para depurar la URL en un evento de reproducción, usa `addEventProcessor`:

```javascript
Sentry.addEventProcessor((event) => {
  // Asegúrate de que estamos revisando específicamente eventos de replay
  if (event.type !== "replay_event") {
    // Devuelve el evento, de lo contrario será descartado
    return event;
  }

  // Tu función de sanitización de URL
  function urlScrubber(url) {
    return url.replace(/([a-z0-9]{3}\.[a-z]{5}\.[a-z]{7})/, "[Filtered]");
  }

  // Sanitiza todas las URLs con tu función de sanitización
  event.urls = event.urls && event.urls.map(urlScrubber);

  return event;
});
```

<div id="deprecated-options">
  ### Opciones obsoletas
</div>

Ten en cuenta que la API de privacidad anterior a la versión 7.35.0 está obsoleta y se ha reemplazado por las opciones de arriba. Consulta la [guía de migración de Replay](https://github.com/getsentry/sentry-javascript/blob/master/packages/replay/MIGRATION.md#upgrading-replay-from-7340-to-7350---6645) para obtener más información.