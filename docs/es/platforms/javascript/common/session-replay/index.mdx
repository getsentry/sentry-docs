---
title: Configurar Session Replay
sidebar_title: Session Replay
sidebar_order: 5500
notSupported:
  - javascript.cordova
  - javascript.wasm
  - javascript.bun
  - javascript.deno
  - javascript.node
  - javascript.aws-lambda
  - javascript.azure-functions
  - javascript.connect
  - javascript.express
  - javascript.fastify
  - javascript.gcp-functions
  - javascript.hapi
  - javascript.hono
  - javascript.koa
  - javascript.nestjs
  - javascript.cloudflare
description: "Aprende a habilitar Session Replay en tu app si aún no está configurado."
---

<Include name="session-replay-web-report-bug.mdx" />

[Session Replay](/es/product/explore/session-replay/) te ayuda a llegar más rápido a la causa raíz de un error o un problema de latencia al ofrecerte una reproducción tipo video de lo que ocurría en el navegador del usuario antes, durante y después del problema. Puedes rebobinar y reproducir el estado del DOM de tu aplicación y ver interacciones clave del usuario, como clics, desplazamientos, solicitudes de red y entradas de la consola, en una interfaz unificada inspirada en las DevTools de tu navegador.

De forma predeterminada, nuestro SDK de Session Replay oculta todo el contenido de texto del DOM, las imágenes y la entrada del usuario, dándote mayor tranquilidad de que ningún dato sensible saldrá del navegador. Para obtener más información, consulta <PlatformLink to="/session-replay/privacy">Privacidad de Session Replay</PlatformLink>.

<PlatformSection supported={["javascript.angular"]}>
  <Alert level="warning">
    La estrategia{" "}

    <a target="_blank" rel="noopener noreferrer" href="https://angular.dev/api/core/ChangeDetectionStrategy#Default">
      predeterminada de &quot;Change Detection&quot;
    </a>

    {" "}

    de Angular aplica monkeypatches a los globales del navegador y puede provocar fallos o degradaciones de rendimiento
    en tu aplicación al usar Session Replay. Para evitarlo, te recomendamos
    usar la estrategia `OnPush` cuando trabajes con Angular.
  </Alert>
</PlatformSection>

<div id="pre-requisites">
  ## Requisitos previos
</div>

<PlatformContent includePath="session-replay/pre-requisites" />

<div id="install">
  ## Instalación
</div>

<PlatformContent includePath="session-replay/install" />

<div id="set-up">
  ## Configuración
</div>

Para configurar la integración, agrega lo siguiente a la inicialización de Sentry. Hay varias opciones que puedes pasar al constructor de la integración. Consulta la [documentación de configuración](/es/platforms/javascript/session-replay/configuration/) para más detalles.

<PlatformContent includePath="session-replay/setup" fallbackPlatform="javascript" />

<PlatformSection notSupported={["javascript.deno", "javascript.bun", "javascript.wasm", "javascript.capacitor", "javascript.electron", "javascript.cloudflare"]}>
  ### Grabación de canvas

  <Alert level="warning">
    ¡Actualmente no se depura PII en las grabaciones de canvas!
  </Alert>

  Si quieres grabar elementos canvas de HTML, deberás agregar una integración adicional en tu configuración de Sentry. La integración de canvas se exporta desde el SDK del navegador, por lo que no se requiere ningún paquete adicional. La grabación de canvas es opcional y se eliminará de tu bundle mediante tree-shaking si no se está utilizando:

  <PlatformContent includePath="session-replay/setup-canvas" />

  #### Canvas 3D y WebGL

  La integración de grabación de canvas funciona exportando el canvas como una imagen (a una tasa de 2 fotogramas por segundo). Sin embargo, para exportar imágenes de canvas 3D y WebGL, la integración necesita habilitar `preserveDrawingBuffer`, lo cual puede afectar negativamente el rendimiento del canvas. Si tu aplicación de canvas se ve afectada al habilitar `preserveDrawingBuffer`, deberás habilitar las capturas manuales y llamar a un método `snapshot()` dentro de tu bucle de repintado. Hay dos pasos para usar las capturas manuales:

  **Paso 1.**
  Habilita las capturas manuales al inicializar la integración `ReplayCanvas`.

  ```javascript
  Sentry.replayCanvasIntegration({
    // Habilitar lo siguiente evitará que tus elementos canvas
    // se vean forzados a usar `preserveDrawingBuffer`.
    enableManualSnapshot: true,
  });
  ```

  **Paso 2**
  Llama al siguiente método `snapshot()` dentro del bucle de pintado de tu aplicación. `snapshot()` debe llamarse en el mismo ciclo de ejecución que los comandos de dibujo del canvas; de lo contrario, podrías capturar buffers de canvas vacíos. Esto se debe a cómo funciona WebGL cuando `preserveDrawingBuffer` es `false`.

  ```javascript
  function paint() {
    const canvasRef = document.querySelector("#my-canvas");
    Sentry.getClient().getIntegrationByName("ReplayCanvas").snapshot(canvasRef);
  }
  ```
</PlatformSection>

<div id="content-security-policy-csp">
  ### Política de seguridad de contenido (CSP)
</div>

Session Replay utiliza un Web Worker para realizar tareas (por ejemplo, compresión) fuera del hilo principal de la interfaz de usuario y así no degradar el rendimiento de tu aplicación. Agrega la siguiente entrada para asegurarte de que se puedan cargar los workers:

```
worker-src 'self' blob:
```

<PlatformSection notSupported={["javascript.electron"]}>
  [Las versiones de Safari &lt;= 15.4](https://caniuse.com/?search=worker-src) no son compatibles con `worker-src`; además, deberás agregar una entrada para `child-src`:

  ```
  child-src 'self' blob:
  ```
</PlatformSection>

Si no puedes actualizar tu política de CSP para permitir web workers inline, también puedes [usar un worker de compresión personalizado](./configuration#using-a-custom-compression-worker).

<PlatformSection supported={["javascript.react"]}>
  ### Nombres de componentes de React Si quieres capturar nombres de componentes de React en

  Sentry, tendrás que configurar la [captura de nombres de componentes de React](/es/platforms/javascript/guides/react/features/component-names). Esto te permitirá identificar elementos por el nombre del componente en lugar del selector. Los nombres de los componentes se pueden buscar y aparecerán en breadcrumbs, rage clicks y dead clicks.
</PlatformSection>

<div id="user-session">
  ## Sesión de usuario
</div>

Una sesión de usuario comienza cuando el SDK de Session Replay se carga e inicializa por primera vez.
La sesión capturará cualquier carga de página, actualización o navegación siempre que el SDK se vuelva a inicializar en el mismo dominio y en la misma pestaña del navegador cada vez. Las sesiones siguen capturando datos hasta que transcurren 5 minutos sin interacciones del usuario **o** hasta que se alcanza un máximo de 60 minutos. Cerrar la pestaña del navegador finalizará la sesión de inmediato, de acuerdo con las reglas de [SessionStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage).

<Alert>
  Por *interacción* se entiende un clic del ratón o un evento de navegación del navegador.
</Alert>

<div id="replay-captures-on-errors-only">
  ### Capturas de reproducción solo cuando haya errores
</div>

Si prefieres no grabar toda la sesión, puedes elegir capturar una reproducción únicamente si se produce un error. En ese caso, la integración almacenará hasta un minuto de eventos anteriores al momento en que se genera el error. Luego seguirá grabando la sesión, respetando las reglas indicadas arriba sobre duración y actividad de la sesión. Consulta la sección de [muestreo](#sampling) para ver las opciones de configuración.

<div id="sampling">
  ## Muestreo
</div>

El muestreo te permite controlar qué porcentaje del tráfico de tu sitio web generará una reproducción de sesión. Hay dos tasas de muestreo que puedes ajustar para obtener las reproducciones más relevantes para ti:

1. <PlatformIdentifier name="replays-session-sample-rate" /> - La tasa de muestreo
   de las reproducciones que empiezan a grabar de inmediato y abarcan toda la
   sesión del usuario.
2. <PlatformIdentifier name="replays-on-error-sample-rate" /> - La tasa de muestreo
   de las reproducciones que se registran cuando ocurre un error. Este tipo de reproducción
   grabará hasta un minuto de eventos previos al error y seguirá grabando
   hasta que termine la sesión.

```javascript {5-6} {filename:instrumentation-client.ts}
Sentry.init({
  // ... otras configuraciones
  
  // Tasas de muestreo de Session Replay
  replaysSessionSampleRate: 0.1, // Captura el 10% de todas las sesiones
  replaysOnErrorSampleRate: 1.0,  // Captura el 100% de las sesiones con errores
  
  // Para desarrollo/pruebas, puedes establecer replaysSessionSampleRate en 1.0
  // para capturar todas las sesiones y obtener visibilidad completa
});
```

<div id="recommended-production-sample-rates">
  ### Tasas de muestreo recomendadas para producción
</div>

Elige tu `replaysSessionSampleRate` según tu volumen de tráfico:

| Volumen de tráfico | Tasa de muestreo de sesiones | Tasa de muestreo de errores | Descripción |
|---|---|---|---|
| **Alto** (100k+ sesiones/día) | `0.01` (1%) | `1.0` (100%) | Captura mínima de sesiones; todos los errores |
| **Medio** (10k–100k sesiones/día) | `0.1` (10%) | `1.0` (100%) | Enfoque equilibrado |
| **Bajo** (menos de 10k sesiones/día) | `0.25` (25%) | `1.0` (100%) | Mayor captura de sesiones para obtener mejores insights |

**¿Por qué mantener `replaysOnErrorSampleRate` en 1.0?** Las sesiones con errores ofrecen el contexto de depuración más valioso, por lo que se recomienda capturarlas todas, sin importar el volumen de tráfico.

<div id="how-sampling-works">
  ### Cómo funciona el muestreo
</div>

El muestreo comienza en cuanto inicia una sesión. Primero se evalúa <PlatformIdentifier name="replays-session-sample-rate" />. Si entra en la muestra, comenzará la grabación de la repetición. De lo contrario, se evalúa <PlatformIdentifier name="replays-on-error-sample-rate" /> y, si entra en la muestra, la integración comenzará a almacenar en búfer la repetición y solo la subirá a Sentry si ocurre un error. El resto de la repetición se comportará de manera similar a una repetición de sesión completa.

<div id="error-linking">
  ## Vinculación de errores
</div>

Los errores que ocurren en la página mientras se reproduce una sesión se vincularán a esa reproducción, lo que permite alternar entre problemas y reproducciones relacionadas. Sin embargo, es **posible** que en algunos casos el recuento de errores mostrado en la página de **Detalles de reproducciones** no coincida con los errores realmente capturados. Esto se debe a que algunos errores pueden perderse y, aunque es poco común, hay varias razones por las que puede ocurrir:

* La reproducción estuvo sujeta a limitación de tasa y no pudo aceptarse.
* Un miembro de tu organización eliminó la reproducción.
* Hubo errores de red y la reproducción no se guardó.

<div id="verify">
  ## Verifica
</div>

Mientras realizas pruebas, te recomendamos configurar <PlatformIdentifier name="replays-session-sample-rate" /> en `1.0`. Esto garantiza que cada sesión de usuario se envíe a Sentry.

Una vez que completes las pruebas, **recomendamos reducir este valor en producción**. Aun así, recomendamos mantener <PlatformIdentifier name="replays-on-error-sample-rate" /> configurado en `1.0`.

<div id="next-steps">
  ## Siguientes pasos
</div>

<PageGrid />