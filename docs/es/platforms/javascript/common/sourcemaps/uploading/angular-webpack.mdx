---
title: Angular CLI
description: "Sube tus mapas de código fuente usando Angular CLI, un «builder» personalizado de Angular y el plugin de webpack de Sentry."
sidebar_order: 0
supported:
  - javascript.angular
---

Puedes usar Angular CLI junto con nuestro plugin de webpack de Sentry para crear lanzamientos automáticamente y subir mapas de código fuente a Sentry al compilar tu aplicación (con `ng build`, por ejemplo).
Debido al sistema de compilación cerrado de Angular, para registrar el plugin de webpack primero tendrás que configurar un «builder» personalizado.
Al final, podrás subir automáticamente mapas de código fuente cada vez que generes una compilación de producción de tu aplicación.

<Alert level="warning">

Antes de empezar a configurar la carga de mapas de código fuente, asegúrate de que estás [generando mapas de código fuente](../../.#generating-source-maps) en tu proyecto de Angular.

  </Alert>

<div id="install">
  ## Instalación
</div>

Instala el generador personalizado de webpack para Angular y el complemento (plugin) de webpack de Sentry:

```shell {tabTitle:npm}
npm install @angular-builders/custom-webpack @sentry/webpack-plugin --save-dev
```

```shell {tabTitle:yarn}
yarn add @angular-builders/custom-webpack @sentry/webpack-plugin --dev
```

```shell {tabTitle:pnpm}
pnpm add @angular-builders/custom-webpack @sentry/webpack-plugin --save-dev
```


<div id="configure">
  ## Configuración
</div>

Con estos paquetes instalados, configura tu aplicación para cargar los mapas de origen en tres pasos:

<div id="1-set-up-custom-angular-builder">
  ### 1. Configura un builder personalizado de Angular
</div>

En tu `angular.json`, sustituye el builder predeterminado (`@angular-devkit/build-angular`) por `@angular-builders/custom-webpack`:

```javascript {filename:angular.json}
{
  "projects": {
    "my-project": {
      "architect": {
        "build": {
          "builder": "@angular-builders/custom-webpack:browser",
          "options": {
            "customWebpackConfig": {
              "path": "./webpack.config.js"
            },
            // ... otras opciones
          },
          // ... otras opciones
        },
        // ... otras opciones
      },
      // ... otras opciones
    }
  }
}
```

<Alert>
  Esta configuración no tiene efecto en tu servidor de desarrollo si estás ejecutando `ng serve`.
  Solo `ng build` está configurado para usar el generador personalizado y el complemento de Webpack.
  Si usas una versión de Angular anterior a la 13, solo `ng build --prod` utilizará el generador personalizado.
</Alert>


<div id="2-register-the-sentry-webpack-plugin">
  ### 2. Registra el plugin de Sentry para Webpack
</div>

<Alert>
  Esta guía asume que estás usando un SDK de Sentry en la versión `7.47.0` o superior.

  Si usas una versión anterior y quieres cargar mapas de origen (source maps), te recomendamos actualizar tu SDK a la versión más reciente.
</Alert>

Para cargar mapas de origen, debes configurar un [Organization Token](https://sentry.io/orgredirect/organizations/:orgslug/settings/auth-tokens/).

Como alternativa, también puedes usar un [Personal Token](https://sentry.io/orgredirect/organizations/:orgslug/settings/account/api/auth-tokens/), con los permisos “Project: Read &amp; Write” y “Release: Admin”.

Los tokens de autenticación se pueden pasar al plugin explícitamente con la opción `authToken`, mediante la variable de entorno `SENTRY_AUTH_TOKEN`, o con un archivo `.env.sentry-build-plugin` (no olvides añadirlo a tu `.gitignore`, ya que es información sensible) en el directorio de trabajo al compilar tu proyecto.
Recomendamos añadir el token de autenticación a tu entorno de CI/CD como variable de entorno.

<OrgAuthTokenNote />

```bash {filename:.env.sentry-build-plugin}
SENTRY_AUTH_TOKEN=___ORG_AUTH_TOKEN___
```

Registra el complemento de Sentry para Webpack en tu `webpack.config.js`:

```javascript {filename:webpack.config.js}
const { sentryWebpackPlugin } = require("@sentry/webpack-plugin");

module.exports = {
  // ... otras configuraciones arriba ...

  devtool: "source-map", // La generación de mapas de origen debe estar activada
  plugins: [
    sentryWebpackPlugin({
      org: "___ORG_SLUG___",
      project: "___PROJECT_SLUG___",
      authToken: process.env.SENTRY_AUTH_TOKEN,
    }),
  ],
};
```

Obtén más información sobre cómo configurar el complemento en nuestra [documentación del complemento Sentry para webpack](https://www.npmjs.com/package/@sentry/webpack-plugin).


<div id="3-upload">
  ### 3. Subir
</div>

Para subir los mapas de origen, compila tu aplicación de Angular:

```bash
ng build # agrega --prod para versiones de Angular anteriores a la 13
```

<Alert>
  El plugin de Webpack de Sentry no sube los mapas de código (source maps) en modo watch o desarrollo.
  Recomendamos ejecutar una build de producción para probar tu implementación.
</Alert>

<Alert>
  Generar source maps puede exponerlos al público y provocar la filtración de tu código fuente.
  Puedes evitarlo configurando tu servidor para denegar el acceso a archivos `.js.map`, o usando la opción [`sourcemaps.filesToDeleteAfterUpload` del Sentry Webpack Plugin](https://www.npmjs.com/package/@sentry/webpack-plugin#sourcemapsfilestodeleteafterupload)
  para borrar los source maps después de subirlos a Sentry.
</Alert>
