---
draft: true
categories: []
toc: true
title: Configuración
sidebar_order: 1
noindex: true
tags: []
---

Para empezar, debes configurar Raven.js para usar tu DSN de Sentry:

```javascript
Raven.config("___PUBLIC_DSN___").install();
```

En este punto, Raven está listo para capturar cualquier excepción no controlada.

<div id="optional-settings">
  ## Configuración opcional
</div>

`Raven.config()` puede aceptar de forma opcional un argumento adicional para configuración extra:

```javascript
Raven.config("___PUBLIC_DSN___", {
  release: "myapp@1.3.0",
}).install();
```

Estas opciones de configuración se documentan a continuación:

`logger`

El nombre del registrador usado por Sentry. Valor predeterminado: `javascript`

```javascript
{
  logger: "javascript";
}
```

`release`

Haz un seguimiento de la versión de tu aplicación en Sentry.

```javascript
{
  release: "721e41770371db95eee98ca2707686226b993eda";
}
```

También se puede definir con `Raven.setRelease('721e41770371db95eee98ca2707686226b993eda')`. Para obtener más información sobre cómo configurar versiones y despliegues, haz clic [aquí](/es/product/releases/).

`environment`

Registra el nombre del entorno en Sentry.

```javascript
{
  environment: "production";
}
```

`serverName`

*(Nuevo en la versión 1.3.0.)*

Normalmente sería el nombre del servidor, pero no existe en todas las plataformas. En su lugar, puedes usar algo como el ID del dispositivo, ya que indica el host en el que se ejecuta el cliente.

```javascript
{
  serverName: device.uuid;
}
```

`tags`

[Etiquetas](/es/platforms/javascript/enriching-events/context/) adicionales para asignar a cada evento.

```javascript
{
  tags: {
    git_commit: "c0deb10c4";
  }
}
```

<a name="config-whitelist-urls" />

`whitelistUrls`

El inverso de `ignoreUrls`. Solo informa errores de URL completas que coincidan con un patrón de regex o con una cadena exacta. `whitelistUrls` debe coincidir con la URL de tus archivos JavaScript reales. Debe coincidir con la URL de tu sitio solo si estás incrustando código dentro de etiquetas `&lt;script&gt;`. No definir este valor equivale a un comodín y no filtrará ningún valor.

```javascript
{
  whitelistUrls: [/getsentry\.com/];
}
```

`ignoreErrors`

Con mucha frecuencia te encontrarás con errores específicos que no se deben a tu aplicación o con errores que simplemente no te interesan. *ignoreErrors* es una lista de estos mensajes para filtrarlos antes de enviarlos a Sentry, ya sea como expresiones regulares o como cadenas. Si usas cadenas, coincidirán parcialmente con los mensajes; si necesitas una coincidencia exacta, utiliza patrones de RegExp.

```javascript
{
  ignoreErrors: ["fb_xd_fragment", /^Mensaje de coincidencia exacta$/];
}
```

`ignoreUrls`

La inversa de `whitelistUrls` y similar a `ignoreErrors`, pero omitirá los errores de URLs completas que coincidan con un patrón de expresión regular o con una cadena exacta.

```javascript
{
  ignoreUrls: [/graph\.facebook\.com/, "http://example.com/script2.js"];
}
```

`includePaths`

Una matriz de patrones de expresiones regulares que indica qué URL forman parte de tu app en el seguimiento de la pila (stack trace). Todos los demás frames aparecerán contraídos en Sentry para que sea más fácil distinguir entre los frames que ocurrieron en tu código y los de código externo. Se recomienda agregar la URL de la página actual y el host de tu CDN.

```javascript
{
  includePaths: [/https?:\/\/getsentry\.com/, /https?:\/\/cdn\.getsentry\.com/];
}
```

`sampleRate`

Una frecuencia de muestreo que se aplica a los eventos. Un valor de 0.0 no enviará ningún evento y un valor de 1.0 enviará todos los eventos (valor predeterminado).

```javascript
{
  sampleRate: 0.5; // enviar el 50% de los eventos y descartar la otra mitad
}
```

`sanitizeKeys`

Una matriz de cadenas o expresiones regulares que representan las claves que deben eliminarse del payload enviado a Sentry. Recorremos cada campo del payload y ocultamos los valores con la cadena **********. Esto hace coincidir *solo* las claves del objeto, no los valores. Sentry también desensibiliza todos los eventos que recibe en el lado del servidor, pero esto te permite limpiar el payload antes de que llegue al servidor.

```javascript
{
  sanitizeKeys: [/_token$/, /password/i, "unaClaveHorrenda"];
}
```

`dataCallback`

Una función que permite modificar la carga de datos justo antes de enviarla a Sentry.

```javascript
{
    dataCallback: function(data) {
      // hacer algo con los datos
      return data;
    }
}
```

`breadcrumbCallback`

Una función que permite filtrar o modificar los breadcrumbs. Devuelve false para descartar el breadcrumb.

```javascript
{
    breadcrumbCallback: function(crumb) {
        return crumb;
        return crumb;
      }

      return false;
    }
}
```

`shouldSendCallback`

Una función de devolución de llamada que te permite aplicar tus propios filtros para determinar si el mensaje debe enviarse a Sentry.

```javascript
{
    shouldSendCallback: function(datos) {
      return false;
    }
}
```

`maxMessageLength`

De forma predeterminada, Raven no trunca los mensajes. Si necesitas truncarlos por cualquier motivo, puedes establecer este valor para limitar su longitud.

`maxUrlLength`

De forma predeterminada, Raven truncará las URL tal como aparecen en los breadcrumbs y otras interfaces de metadatos a 250 caracteres para reducir los bytes transmitidos. Esto no afecta a las URL en los stack traces.

`autoBreadcrumbs`

Activa o desactiva la recopilación automática de breadcrumbs. Los valores posibles son:

* *true* (predeterminado)
* *false* - se desactiva toda la recopilación de breadcrumbs
* Un diccionario con tipos individuales de breadcrumb que pueden activarse/desactivarse:

```javascript
autoBreadcrumbs: {
    'xhr': false,      // XMLHttpRequest
    'console': false,  // registro en consola
    'dom': true,       // interacciones DOM, p. ej. clics/escritura
    'location': false, // cambios de URL, incluyendo pushState/popState
    'sentry': true     // eventos de Sentry
}
```

`maxBreadcrumbs`

De forma predeterminada, Raven captura hasta 100 entradas de breadcrumbs. Si te resulta demasiado, puedes reducir este número configurando *maxBreadcrumbs*. Ten en cuenta que no puede establecerse por encima del valor predeterminado de 100.

`captureUnhandledRejections`

De forma predeterminada, Raven captura todos los rechazos de promesas no controlados mediante el evento estándar `unhandledrejection`. Si quieres desactivar este comportamiento, establece esta opción en `false`.

`transport`

Sobrescribe el controlador de transporte de datos HTTP predeterminado.

Como alternativa, puede especificarse con `Raven.setTransport(myTransportFunction)`.

```javascript
{
    transport: function (options) {
        // enviar los datos
    }
}
```

La función proporcionada recibe un único argumento, `options`, con las siguientes propiedades:

url

La URL de destino a la que se envían los datos.

data

Los datos de la excepción saliente.

Para solicitudes POST, esto debe codificarse en JSON y establecerse como el cuerpo de la petición HTTP (y enviarse con Content-Type: application/json).

Para solicitudes GET, esto debe codificarse en JSON y pasarse en la cadena de consulta con la clave `sentry_data`.

auth

Un objeto que representa los datos de autenticación. Debe convertirse a pares clave/valor codificados en URL y pasarse como parte de la cadena de consulta, tanto para solicitudes GET como POST.

El objeto auth tiene las siguientes propiedades:

sentry&#95;version

: La versión de la API del servidor de Sentry.

sentry&#95;client

: El nombre y la versión del cliente de Sentry con el formato `client/version`. En este caso, `raven-js/${Raven.VERSION}`.

sentry&#95;key

: Tu clave pública de cliente (DSN).

options

Incluye todas las opciones de nivel superior descritas.

onSuccess

Callback que se invoca cuando la solicitud se completa correctamente.

onError

Callback que se invoca cuando la solicitud falla.

`headers`

Pasa encabezados personalizados en las solicitudes al servidor para `fetch` o `XMLHttpRequest`.

```javascript
{
    headers: {
        'CSRF-TOKEN': '12345'
    }
}
```

El valor de Headers puede ser una función para calcularlo en el momento de una solicitud:

```javascript
{
    headers: {
        'CSRF-TOKEN': function() {
            // lógica personalizada que se calculará en cada solicitud
            return new Date();
        }
    }
}
```

`fetchParameters`

Parámetros de inicialización de `fetch()` ([https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters)).

Establecer el parámetro `keepalive: true` permitirá que el SDK envíe eventos en los controladores `unload` y `beforeunload`.
Sin embargo, también limitará el tamaño de un único evento a 64 kB, según la [especificación de fetch](https://fetch.spec.whatwg.org/#http-network-or-cache-fetch) (punto 8.5).

Valores predeterminados:

```javascript
{
    method: 'POST',
    referrerPolicy: 'origin'
}
```

`allowDuplicates`

De forma predeterminada, Raven.js intenta suprimir los errores y mensajes duplicados capturados que ocurren de forma consecutiva. Estos eventos a menudo son provocados por código fuera de control (p. ej., desde un callback de *setInterval* en una extensión del navegador), no son accionables y consumen tu cuota de eventos.

Para desactivar este comportamiento (por ejemplo, durante las pruebas), establece `allowDuplicates: true` en la configuración.

`allowSecretKey`

De forma predeterminada, Raven.js generará un error si se configura con un DSN de Sentry que contiene una clave secreta. Cuando uses Raven.js con una aplicación web a la que se accede mediante un navegador, deberías usar únicamente tu DSN público. Pero si estás usando Raven.js en un entorno como React Native o Electron, donde tu aplicación se ejecuta de forma “nativa” en un dispositivo y no se accede a través de una dirección web, es posible que necesites usar tu DSN secreto. Para ello, establece `allowSecretKey: true` durante la configuración.

`debug`

Si se establece en *true*, Raven.js muestra información de depuración ligera en la consola.

`instrument`

Habilita o deshabilita la instrumentación de objetos globales. Los valores posibles son:

* *true* (predeterminado)
* *false* - toda la instrumentación deshabilitada
* Un diccionario con tipos de instrumentación individuales que se pueden habilitar o deshabilitar:

```javascript
instrument: {
    'tryCatch': true, // Instrumenta temporizadores y destinos de eventos
}
```

<div id="putting-it-all-together">
  ## Integrándolo todo
</div>

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Están pasando cosas increíbles aquí</title>
  </head>
  <body>
    ...
    <script src="jquery.min.js"></script>
    <script
      src="https://cdn.ravenjs.com/3.26.4/raven.min.js"
      crossorigin="anonymous"
    ></script>
    <script>
      Raven.config("___PUBLIC_DSN___", {
        logger: "my-logger",
        whitelistUrls: [/disqus\.com/, /getsentry\.com/],
        ignoreErrors: ["fb_xd_fragment", /ReferenceError:.*/],
        includePaths: [/https?:\/\/(www\.)?getsentry\.com/],
      }).install();
    </script>
    <script src="myapp.js"></script>
  </body>
</html>
```
