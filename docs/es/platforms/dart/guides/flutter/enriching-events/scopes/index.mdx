---
title: Scopes y Hubs
description: "Los SDK suelen gestionar automáticamente los scopes por ti en las integraciones con frameworks. Descubre qué es un scope y cómo puedes aprovecharlo."
---

Cuando se captura y envía un evento a Sentry, los SDK combinan esos datos con información adicional del scope actual. Por lo general, los SDK gestionan automáticamente los scopes por ti en las integraciones con frameworks y no necesitas preocuparte por ellos. Aun así, conviene saber qué es un scope y cómo sacarle partido.

<div id="whats-a-scope-whats-a-hub">
  ## Qué es un Scope, Qué es un Hub
</div>

Puedes pensar en el hub como el punto central que nuestros SDK usan para
enrutar un evento a Sentry. Cuando llamas a `init()` se crea un hub y en él se
crean un cliente y un scope en blanco. Ese hub luego se asocia con el hilo
actual y mantendrá internamente una pila de scopes.

El scope contendrá información útil que debería enviarse junto con el
evento. Por ejemplo, [contexts](../context/) o
[breadcrumbs](../breadcrumbs/) se almacenan en
el scope. Cuando se hace push de un scope, hereda todos los datos del scope
principal y, cuando se hace pop, se revierten todas las modificaciones.

Las integraciones predeterminadas del SDK harán push y pop de scopes de forma inteligente. Por
ejemplo, las integraciones de frameworks web crearán y destruirán scopes alrededor de tus
rutas o controladores.

<div id="how-the-scope-and-hub-work">
  ## Cómo funcionan Scope y Hub
</div>

Al empezar a usar un SDK, se crean automáticamente un scope y un hub para ti, listos para usar. Es poco probable que interactúes directamente con el hub a menos que estés escribiendo una integración o quieras crear o destruir scopes. Los scopes, por otro lado, están más orientados al usuario. Puedes llamar a <PlatformIdentifier name="configure-scope" /> en cualquier momento para modificar los datos almacenados en el scope. Esto es útil para hacer cosas como [modificar el contexto](../context/).

Cuando llamas a una función global como <PlatformIdentifier name="capture-event" />, Sentry, internamente, detecta el hub actual y le pide que capture un evento. Luego, el hub combinará el evento con los datos del scope más alto.

<div id="configuring-the-scope">
  ## Configuración del scope
</div>

La operación más útil al trabajar con scopes es la función <PlatformIdentifier name="configure-scope" />. Puede usarse para reconfigurar el scope actual.

Por ejemplo, puedes añadir etiquetas personalizadas o informar a Sentry sobre el usuario que está autenticado actualmente.

<PlatformContent includePath="enriching-events/scopes/configure-scope" />

También puedes aplicar esta configuración al desasociar a un usuario al cerrar sesión:

<PlatformContent includePath="enriching-events/unset-user" />

<PlatformContent includePath="enriching-events/scopes/scope-synchronization" />

Para conocer qué información útil puede asociarse a los scopes, consulta
[la documentación de contexto](../context/).

<div id="local-scopes">
  ## Ámbitos locales
</div>

También es posible establecer y configurar un ámbito en una sola llamada. Esto suele
llamarse <PlatformIdentifier name="with-scope" />, <PlatformIdentifier name="push-scope" /> o implementarse como un parámetro de función en los métodos de captura, según el SDK. Es muy útil si
solo quieres enviar datos para un evento específico.

<div id="using-scope-callback-parameter">
  ### Uso del parámetro de devolución de llamada de Scope
</div>

En el siguiente ejemplo usamos el parámetro de devolución de llamada de scope, disponible para todos los métodos `capture`, para adjuntar un `level` y una `tag` a un único error específico:

<PlatformContent includePath="enriching-events/scopes/scope-callback-param" />

Antes de invocar la devolución de llamada, el SDK crea un clon del scope actual, y los cambios
realizados permanecerán aislados dentro de la función de devolución de llamada. Esto te permite
aislar más fácilmente partes de la información de contexto en ubicaciones específicas de tu código o
incluso llamar a `clear` para eliminar temporalmente toda la información de contexto.

<Alert title="Importante">

Cualquier excepción que ocurra dentro de la función de devolución de llamada al configurar un scope local no será
capturada, y todos los errores que ocurran se ignorarán silenciosamente y **no** se informarán.

</Alert>