---
title: Sobrecarga de rendimiento
sidebar_order: 4300
notSupported:
description: "Conoce cómo habilitar Session Replay afecta el rendimiento de tu app de Flutter."
---

Si estás considerando habilitar Session Replay, es importante comprender el posible impacto en el rendimiento de tu app. Obtén más información sobre las optimizaciones del Replay SDK en la documentación [Sobrecarga de rendimiento de Replay](/es/product/explore/session-replay/mobile/performance-overhead/).

Las métricas útiles requieren pruebas realistas en las que apliques patrones de uso típicos y correlaciones los resultados con tus métricas empresariales. Para ofrecer una línea base, medimos la sobrecarga de Replay usando esta [app de Open Food Facts](https://github.com/openfoodfacts/smooth-app/).
Elegimos Open Food Facts porque es una app de código abierto activamente mantenida que presenta varias listas desplazables e interactivas de texto e imágenes durante la incorporación. La app también incluye funcionalidad nativa, como una vista de cámara predeterminada para escanear códigos de barras, lo que permite un escenario de prueba más completo.

<div id="benchmarking-setup">
  ## Configuración del benchmarking
</div>

Así se realizaron las pruebas de rendimiento:

* **Configuración:** Se habilitó el enmascaramiento predeterminado (completo) y se utilizaron compilaciones de lanzamiento optimizadas.
* **Flujo de usuario:** El mismo flujo se ejecutó 10 veces para garantizar la consistencia.
* **Representación del mundo real:** Este enfoque refleja de cerca el rendimiento en escenarios reales.

Las pruebas se ejecutaron en:

* **iOS**: iPhone X con iOS 16.7.10 - El rendimiento se midió con [py-ios-device](https://github.com/YueChen-C/py-ios-device) durante flujos de incorporación manual.
* **Android**: Pixel Fold (2023) con Android 15

Ten en cuenta que una grabación activa de Session Replay puede provocar fotogramas lentos en dispositivos antiguos o de gama baja.

<div id="ios">
  ### iOS
</div>

A continuación se muestran los resultados de las pruebas de rendimiento, presentados como valores promedio en 10 ejecuciones.

| Métrica                          | Solo Sentry SDK | Sentry + Replay SDK |
| -------------------------------- | --------------- | ------------------- |
| Uso de CPU                       | 30.04%          | 31.92% (+6.26%)     |
| Memoria                          | 193 MiB         | 193 MiB             |

<div id="android">
  ### Android
</div>

A continuación se muestran los resultados de las pruebas de rendimiento, presentados como valores promedio de todas las ejecuciones.

| Métrica                          | Solo Sentry SDK | Sentry + Replay SDK |
| -------------------------------- | --------------- | ------------------- |
| FPS                              | 42.6 fps        | 42.6 fps            |
| Uso total de CPU                 | 93.2%           | 105.5% (+13%)       |
| Uso de CPU del hilo de la UI     | 30.7%           | 30.7%               |
| Memoria                          | 372.5 MB        | 391.6 MB (+5%)      |

{/* | Tiempo de arranque de la app (frío) | 1533.35 ms      | 1539.55 ms          | */}

{/* | Ancho de banda de la red         | n/d             | 7 KB/s de grabación | */}

<div id="reducing-performance-overhead">
  ## Cómo reducir la carga de rendimiento
</div>

Para minimizar el impacto en el rendimiento del Replay SDK, considera lo siguiente:

<div id="change-replay-quality">
  ### Cambiar la calidad de la reproducción
</div>

Reducir la calidad de las capturas de pantalla y los videos puede disminuir significativamente el uso de CPU, memoria y ancho de banda de red. Así es como puedes hacerlo:

```dart
await SentryFlutter.init(
  (options) {
    ...
    options.replay.quality = SentryReplayQuality.low; // el valor predeterminado es medium
  },
  ...
);
```

<div id="disable-replay-for-low-end-devices">
  ### Desactivar Replay en dispositivos de gama baja
</div>

Si el SDK de Replay provoca problemas de rendimiento en dispositivos de gama baja, puedes desactivarlo específicamente para esos dispositivos (por ejemplo, consultando [cómo Sentry determina la clase de dispositivo](https://github.com/getsentry/relay/blob/695b459e03481f7d799f07b2b901b140e5d5753d/relay-event-schema/src/protocol/device_class.rs#L21-L37) o usando un [plugin de Flutter](https://pub.dev/packages/device_info_plus)):

```dart
Future<bool> isLowEndDevice() {
  // Puedes usar device_info_plus para obtener la información del dispositivo
  ...
}

await SentryFlutter.init(
  (options) {
    ...
    // Habilitar la reproducción de sesión solo para dispositivos que no sean de gama baja
    final isLowEnd = await isLowEndDevice();
    options.replay.sessionSampleRate = isLowEnd ? 0 : 1.0;
    options.replay.onErrorSampleRate = isLowEnd ? 0 : 0.1;
  },
  ...
);
```
