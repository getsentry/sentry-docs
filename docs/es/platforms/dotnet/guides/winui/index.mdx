---
title: WinUI
description: "Aprende a usar el SDK de .NET de Sentry con Windows UI Library"
---

El SDK de .NET de Sentry funciona con aplicaciones de Windows UI Library mediante el [paquete NuGet de Sentry](https://www.nuget.org/packages/Sentry).

<div id="features">
  ## Funcionalidades
</div>

Además de capturar errores, puedes supervisar las interacciones entre varios servicios o aplicaciones [habilitando el tracing](/es/concepts/key-terms/tracing/).

Selecciona qué funcionalidades de Sentry te gustaría instalar además de Error Monitoring para obtener a continuación las instrucciones correspondientes de instalación y configuración.

<div id="install">
  ## Instalación
</div>

<OnboardingOptionButtons options={['error-monitoring', 'performance']} />

<PlatformContent includePath="getting-started-install" />

<div id="configure-without-trimming">
  ## Configurar (sin recorte)
</div>

Si no tienes [Trimming](https://learn.microsoft.com/en-us/dotnet/core/deploying/trimming/trimming-options?pivots=dotnet-8-0) habilitado al publicar tu aplicación, lo único que debes hacer es [inicializar el SDK con `SentrySdk.Init`](/es/platforms/dotnet/) en el constructor de la clase de tu aplicación (normalmente `App.xaml.cs`). La integración de Sentry para WinUI capturará automáticamente cualquier excepción no controlada en tu aplicación y las enviará a Sentry.

<Alert>
  No inicialices el SDK en el evento `OnLaunched` de la aplicación o el `Hub` no se inicializará correctamente.
</Alert>

Además de capturar errores, puedes supervisar las interacciones entre varios servicios o aplicaciones [habilitando el tracing](/es/concepts/key-terms/tracing/).

Elige qué funciones de Sentry quieres instalar, además del monitoreo de errores, para obtener a continuación las instrucciones de instalación y configuración correspondientes.

```csharp
using Sentry.Protocol;

sealed partial class App : Application
{
    public App()
    {
        // Inicializa Sentry en el constructor de App antes que cualquier otro código, para asegurar que captures todas las excepciones posibles.
        SentrySdk.Init(options =>
        {
            // Indica a qué proyecto de Sentry enviar los eventos:
            options.Dsn = "___PUBLIC_DSN___";

            // Al configurar por primera vez, para ver qué está haciendo el SDK:
            options.Debug = true;

            // Agrega URL de solicitud y encabezados, IP y nombre de usuarios, etc.
            options.SendDefaultPii = true;
            // ___PRODUCT_OPTION_START___ performance

            // Establece TracesSampleRate en 1.0 para capturar el 100% de las transacciones para rastreo.
            // Recomendamos ajustar este valor en producción.
            options.TracesSampleRate = 1.0;
            // ___PRODUCT_OPTION_END___ performance

            // Habilita el Modo Global ya que esta es una aplicación cliente.
            options.IsGlobalModeEnabled = true;

            // TODO: Cualquier otra opción de Sentry que necesites va aquí.
        });

        // Inicializa el componente de la aplicación y conecta el evento Suspending.
        this.InitializeComponent();

        // Agrega cualquier otro código que necesites al final.
    }
}
```

<div id="configure-with-trimming">
  ## Configuración (con trimming)
</div>

Si tienes el [trimming](https://learn.microsoft.com/en-us/dotnet/core/deploying/trimming/trimming-options?pivots=dotnet-8-0) habilitado al publicar tu aplicación, además de [inicializar el SDK con `SentrySdk.Init`](/es/platforms/dotnet/), debes configurar también un controlador de UnhandledException en el constructor de la clase de tu aplicación (normalmente `App.xaml.cs`).

<Alert>
  No inicialices el SDK en el evento `OnLaunched` de la aplicación o el `Hub` no se inicializará correctamente.
</Alert>

```csharp
// Agrega estos a tus declaraciones using existentes.
using Sentry.Protocol;
using UnhandledExceptionEventArgs = Microsoft.UI.Xaml.UnhandledExceptionEventArgs;

sealed partial class App : Application
{
    public App()
    {
        // Inicializa Sentry en el constructor de App antes que cualquier otro código, para asegurar que captures todas las excepciones posibles.
        SentrySdk.Init(o =>
        {
            // Indica a qué proyecto en Sentry enviar los eventos:
            o.Dsn = "___PUBLIC_DSN___";

            // Al configurar por primera vez, para ver qué está haciendo el SDK:
            o.Debug = true;

            // Agrega URL de solicitud y encabezados, IP y nombre de usuarios, etc.
            o.SendDefaultPii = true;
            // ___PRODUCT_OPTION_START___ performance

            // Establece TracesSampleRate en 1.0 para capturar el 100% de las transacciones para el rastreo.
            // Recomendamos ajustar este valor en producción.
            o.TracesSampleRate = 1.0;
            // ___PRODUCT_OPTION_END___ performance

            // Habilita el Modo Global ya que esta es una aplicación cliente.
            o.IsGlobalModeEnabled = true;

            // Deshabilita el manejador UnhandledException integrado de Sentry ya que no funcionará con la compilación AOT
            o.DisableWinUiUnhandledExceptionIntegration();

            // TODO: Cualquier otra opción de Sentry que necesites va aquí.
        });

        // Conecta el evento UnhandledException de WinUI antes de inicializar el componente de la aplicación.
        this.UnhandledException += OnUnhandledException;

        // Inicializa el componente de la aplicación y conecta el evento Suspending.
        this.InitializeComponent();

        // Agrega cualquier otro código que necesites al final.
    }

    // Agrega este manejador OnUnhandledException.

    // Usa este atributo para asegurar que todos los tipos de excepciones sean manejados.
    [SecurityCritical]
    private void OnUnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        // Obtén una referencia a la excepción, porque la propiedad Exception se limpia cuando se accede.
        var exception = e.Exception;
        if (exception != null)
        {
            // Indica a Sentry que esta fue una excepción no manejada
            exception.Data[Mechanism.HandledKey] = false;
            exception.Data[Mechanism.MechanismKey] = "Application.UnhandledException";

            // Captura la excepción
            SentrySdk.CaptureException(exception);

            // Envía el evento inmediatamente
            SentrySdk.FlushAsync(TimeSpan.FromSeconds(2)).GetAwaiter().GetResult();
        }
    }
}
```

<div id="verify">
  ## Verificación
</div>

Este fragmento incluye un error intencional para que puedas comprobar que todo funciona en cuanto lo configures.

<PlatformContent includePath="getting-started-verify" />