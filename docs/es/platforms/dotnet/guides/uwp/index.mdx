---
title: UWP
description: "Obtén más información sobre cómo funciona el SDK de .NET de Sentry con aplicaciones de la Plataforma Universal de Windows (UWP)."
---

El SDK de .NET de Sentry funciona con aplicaciones de la Plataforma Universal de Windows a través del [paquete Sentry en NuGet](https://www.nuget.org/packages/Sentry).

<div id="features">
  ## Funciones
</div>

Además de capturar errores, puedes supervisar las interacciones entre varios servicios o aplicaciones si [habilitas el tracing](/es/concepts/key-terms/tracing/).

Selecciona qué funciones de Sentry quieres instalar, además del monitoreo de errores, para obtener abajo las instrucciones correspondientes de instalación y configuración.

<div id="install">
  ## Instalación
</div>

<OnboardingOptionButtons options={['error-monitoring', 'performance']} />

<PlatformContent includePath="getting-started-install" />

<div id="configure">
  ## Configurar
</div>

Además de [inicializar el SDK con `SentrySdk.Init`](/es/platforms/dotnet/), debes configurar los eventos específicos de UWP `Application.UnhandledException` y `Application.Suspending`.

<Alert>
  El SDK debe inicializarse en el constructor de la clase de tu aplicación (por lo general, `App.xaml.cs`). No inicialices el SDK en el evento `OnLaunched` de la aplicación, o el `Hub` no se inicializará correctamente.
</Alert>

```csharp
using Sentry.Protocol;
using UnhandledExceptionEventArgs = Windows.UI.Xaml.UnhandledExceptionEventArgs;

sealed partial class App : Application
{
    public App()
    {
        // Inicializa Sentry en el constructor de App antes de cualquier otro código para asegurarte de capturar todas las excepciones posibles.
        SentrySdk.Init(options =>
        {
            // Indica a qué proyecto de Sentry enviar los eventos:
            options.Dsn = "___PUBLIC_DSN___";

            // Al configurarlo por primera vez, para ver qué hace el SDK:
            options.Debug = true;

            // Agrega la URL y los encabezados de la solicitud, la IP y el nombre de los usuarios, etc.
            options.SendDefaultPii = true;

            // ___PRODUCT_OPTION_START___ performance
            // Establece traces_sample_rate en 1.0 para capturar el 100% de las transacciones con fines de trazado.
            // Recomendamos ajustar este valor en producción.
            options.TracesSampleRate = 1.0;

            // ___PRODUCT_OPTION_END___ performance
            // Habilita el modo global ya que esta es una aplicación cliente.
            options.IsGlobalModeEnabled = true;

            // TODO: Cualquier otra opción de Sentry que necesites va aquí.
        });

        // Suscribe el evento UnhandledException de UWP antes de inicializar el componente de la aplicación.
        this.UnhandledException += OnUnhandledException;

        // Inicializa el componente de la aplicación y suscribe el evento Suspending.
        this.InitializeComponent();
        this.Suspending += OnSuspending;

        // Agrega al final cualquier otro código que necesites.
    }

    // Actualiza tu controlador OnSuspending como se muestra

    private async void OnSuspending(object sender, SuspendingEventArgs e)
    {
        var deferral = e.SuspendingOperation.GetDeferral();

        // Vacía los eventos de Sentry al suspender
        await SentrySdk.FlushAsync(TimeSpan.FromSeconds(2));

        // TODO: Guarda cualquier otro estado de la aplicación y detén cualquier actividad en segundo plano.

        deferral.Complete();
    }

    // Agrega este controlador OnUnhandledException.

    // Usa estos atributos para garantizar que se controlen todos los tipos de excepciones.
    [SecurityCritical]
    [HandleProcessCorruptedStateExceptions]
    private void OnUnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        // Obtén una referencia a la excepción, porque la propiedad Exception se borra al acceder a ella.
        var exception = e.Exception;
        if (exception != null)
        {
            // Indica a Sentry que se trata de una excepción no controlada
            exception.Data[Mechanism.HandledKey] = false;
            exception.Data[Mechanism.MechanismKey] = "Application.UnhandledException";

            // Captura la excepción
            SentrySdk.CaptureException(exception);

            // Vacía el evento inmediatamente
            SentrySdk.FlushAsync(TimeSpan.FromSeconds(2)).GetAwaiter().GetResult();
        }
    }
}
```

<div id="verify">
  ## Verificar
</div>

Este fragmento incluye un error intencional para que puedas comprobar que todo funciona en cuanto lo configures.

<PlatformContent includePath="getting-started-verify" />