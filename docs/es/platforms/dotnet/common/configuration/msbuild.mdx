---
title: Configuración de MSBuild
description: "Configura propiedades de MSBuild en tu proyecto .NET para usar automáticamente la Sentry CLI."
sidebar_order: 10
---

La [Sentry CLI](/es/cli) ofrece muchas funciones útiles que pueden mejorar tu experiencia con Sentry.
En .NET, puedes usarla para cargar [archivos de información de depuración](/es/cli/dif), como archivos de símbolos `PDB` de .NET.
Esto permite que Sentry muestre un seguimiento de pila más completo, incluidos los nombres de archivo y los números de línea.
También puedes usarla para cargar *código fuente*, lo que permite que Sentry muestre [contexto del código](../../data-management/debug-files/source-context/)
al ver seguimientos de pila.

Si bien siempre puedes ejecutar `sentry-cli` manualmente desde la línea de comandos, lo hemos hecho más fácil al incluirla en el paquete
NuGet `Sentry` y al proporcionar propiedades para habilitarla desde tu compilación.

<div id="authentication">
  ## Autenticación
</div>

Para que esta función funcione, debes autenticarte en Sentry en la máquina que realiza tus compilaciones de lanzamiento.

<Alert title="Importante">
  El token de autenticación de Sentry (o la clave de API heredada) siempre debe tratarse como secreto. Procura no confirmar información de autenticación al control de versiones
  ni usarla de forma que pueda terminar en archivos de registro.
</Alert>

Puedes utilizar cualquiera de los métodos de autenticación aceptados por Sentry CLI. Consulta [Configuration and Authentication](/es/cli/configuration/).
Sin embargo, en general recomendamos lo siguiente:

* Si generas tus lanzamientos en la estación de trabajo del desarrollador, [instala Sentry CLI](/es/cli/installation/) y luego
  ejecuta `sentry-cli login` para usar la opción de [configuración automática](/es/cli/configuration/#to-use-the-automatic-option).
  Esto te ayudará a crear un token de autenticación y guardarlo en el archivo `~/.sentryclirc` de la estación de trabajo.

* Si compilas desde un servidor de CI/CD, usa la funcionalidad de secretos de tu plataforma de CI/CD para establecer la variable de entorno `SENTRY_AUTH_TOKEN`.

  Por ejemplo, si usas GitHub Actions, primero configura un [encrypted secret](https://docs.github.com/actions/security-guides/encrypted-secrets)
  y luego pasa el secreto mediante la variable de entorno `SENTRY_AUTH_TOKEN` al paso que ejecuta la acción de compilación.

  ```yaml
  steps:
    - name: Build
      run: dotnet build -c Release
      env:
        SENTRY_AUTH_TOKEN: ${{ secrets.SENTRY_AUTH_TOKEN }}
  ```

  No necesitas instalar Sentry CLI por separado en tu servidor de compilación, ya que lo proporciona el paquete Sentry NuGet.

<div id="configuration">
  ## Configuración
</div>

Además de la autenticación, debes configurar los slugs de tu organización y de tu proyecto en Sentry.
También quizá quieras configurar otras [propiedades opcionales](#optional-msbuild-properties).

Los slugs se pueden encontrar en varios lugares de la interfaz de Sentry, como en la URL después de seleccionar un proyecto.
Por ejemplo, el slug de la organización es `example-org` y el del proyecto es `example-project` en las siguientes URL:

* `https://example-org.sentry.io/projects/example-project/?project=1234567`
* `https://sentry.io/organizations/example-org/projects/example-project/?project=1234567`

Si alojas Sentry por tu cuenta (en lugar de usar sentry.io), también tendrás que proporcionar la URL de tu servidor de Sentry.

<Alert title="Consejo">
  Cualquiera de los [valores de configuración de Sentry CLI](/es/cli/configuration/#configuration-values) puede establecerse mediante variables de entorno
  o en archivos de configuración, como se muestra en los pasos de autenticación anteriores.

  Sin embargo, aparte de la autenticación, deberías considerar establecer los valores de configuración mediante las propiedades de MSBuild descritas a continuación,
  de modo que formen parte de tu código versionado en control de código fuente. Esto permite que sean consistentes entre entornos
  y también que la configuración varíe por cada proyecto de tu solución, si así lo deseas.

  Si se proporcionan *tanto* propiedades de MSBuild como variables de entorno, las propiedades de MSBuild tendrán prioridad.
</Alert>

<div id="setting-msbuild-properties">
  ### Configuración de propiedades de MSBuild
</div>

Las propiedades de MSBuild de Sentry se pueden establecer en cualquier archivo de proyecto de MSBuild, como los que crea Visual Studio
o la CLI de `dotnet` (`YourProject.csproj`, `YourProject.vbproj`, `Directory.Build.props`, etc.).
Recomendamos usar un grupo de propiedades dedicado para poder controlar cuándo se usan estas funcionalidades.

En el siguiente ejemplo, `Condition="'$(Configuration)' == 'Release'"` asegura que estas funcionalidades estén habilitadas
solo para compilaciones de Release. Esta es la recomendación habitual, porque enviar datos a Sentry durante compilaciones de depuración
puede ralentizar tu flujo de trabajo de desarrollo.

Como alternativa, puedes controlar esto con cualquier propiedad de MSBuild o variable de entorno que prefieras. Por ejemplo,
si solo quieres estas funcionalidades habilitadas en un flujo de trabajo de CI de GitHub Actions, puedes usar `Condition="'$(GITHUB_ACTIONS)' == 'true'"`.

```xml
<!-- Recomendamos usar estas funciones solo para compilaciones de lanzamiento. -->
<PropertyGroup Condition="'$(Configuration)' == 'Release'">

  <!-- Configura la organización y el proyecto de Sentry -->
  <SentryOrg>___ORG_SLUG___</SentryOrg>
  <SentryProject>___PROJECT_SLUG___</SentryProject>

  <!--
    Cada una de las funciones a continuación es opcional.
    Habilita las funciones que desees usar.
  -->

  <!-- Crea automáticamente una versión al compilar tu aplicación. -->
  <SentryCreateRelease>true</SentryCreateRelease>

  <!-- Asocia automáticamente los commits con la versión. -->
  <SentrySetCommits>true</SentrySetCommits>

  <!-- Opcionalmente proporciona flags explícitos al comando set-commits -->
  <SentrySetCommitOptions>--local</SentrySetCommitOptions>

  <!-- Envía símbolos a Sentry, habilitando la simbolización de stack traces. -->
  <SentryUploadSymbols>true</SentryUploadSymbols>

  <!-- Envía código fuente a Sentry, habilitando la visualización del contexto del código. -->
  <SentryUploadSources>true</SentryUploadSources>

  <!-- Si tu objetivo es Android, envía el archivo de mapeo de ProGuard a Sentry. -->
  <SentryUploadAndroidProGuardMapping>true</SentryUploadAndroidProGuardMapping>

</PropertyGroup>

```

Como alternativa, puedes pasarlos como parámetros al compilar tu proyecto. Por ejemplo:

```shell
dotnet build TuProyecto.csproj -c Release -p:SentryOrg=___ORG_SLUG___ -p:SentryProject=___PROJECT_SLUG___ -p:SentryUploadSymbols=true -p:SentryUploadSources=true
```

<Alert title="Consejo">
  Es posible que tengas propiedades idénticas en varios proyectos de tu solución.
  Considera colocar estas propiedades en un archivo [`Directory.Build.props`](https://learn.microsoft.com/visualstudio/msbuild/customize-your-build)
  para que se compartan automáticamente con todos los proyectos.
</Alert>

<div id="required-msbuild-properties">
  ### Propiedades obligatorias de MSBuild
</div>

Las siguientes propiedades de MSBuild transmitirán la información necesaria al Sentry CLI:

<SdkOption name="SentryOrg" type="string">
  El identificador (slug) de la organización de tu cuenta de Sentry.
</SdkOption>

<SdkOption name="SentryProject" type="string">
  El identificador (slug) del proyecto del proyecto de Sentry que estás utilizando.
</SdkOption>

<SdkOption name="SentryUrl" type="string">
  La URL de tu servidor de Sentry. Solo es necesario si alojas Sentry por tu cuenta. (No usar con sentry.io).
</SdkOption>

<div id="optional-msbuild-properties">
  ### Propiedades opcionales de MSBuild
</div>

Hay algunas propiedades adicionales disponibles para controlar Sentry CLI:

<SdkOption name="SentryCreateRelease" type="bool" defaultValue="false">
  Habilita la creación automática de una versión al compilar tu aplicación. El valor predeterminado es `false` (deshabilitado).

  Sentry intentará determinar la versión de la release automáticamente comprobando las siguientes fuentes en este orden:

  1. La variable de entorno `SENTRY_RELEASE`, si está establecida
  2. El atributo `AssemblyInformationalVersionAttribute`, si está definido
  3. La versión del ensamblado de entrada del proyecto
  4. La versión sugerida al ejecutar `sentry-cli releases propose-version`
</SdkOption>

<PlatformSection supported={["dotnet.maui"]}>
  <SdkOption name="SentryProGuardUUID" type="string">
    Define el UUID usado para vincular un APK con su archivo de mapeo de ProGuard.

    Si no se define, Sentry [generará un UUID](#SentryUploadAndroidProGuardMapping) por ti.
  </SdkOption>
</PlatformSection>

<SdkOption name="SentrySetCommits" type="bool">
  Habilita `SentrySetCommits` para [asociar automáticamente confirmaciones (commits) con la release](/es/cli/releases/#commit-integration).
</SdkOption>

<SdkOption name="SentrySetCommitOptions" type="string">
  De forma predeterminada, cuando `SentrySetCommits` está habilitado, el SDK establecerá las confirmaciones con la opción `--auto`. La propiedad opcional `SentrySetCommitOptions` te permite sobrescribir esto para proporcionar las opciones (flags) que quieras al comando CLI `set-commits`.
</SdkOption>

<PlatformSection supported={["dotnet.maui"]}>
  <SdkOption name="SentryUploadAndroidProGuardMapping" type="bool" defaultValue="false">
    Controla si se carga un archivo de mapeo de ProGuard en Sentry.

    El valor predeterminado es `false` (deshabilitado).

    Cuando se establece en `true`:

    * Se genera automáticamente un UUID de ProGuard, a menos que configures el tuyo mediante [SentryProGuardUUID](#SentryProGuardUUID).
    * Este UUID se inyecta en el APK como metadatos del manifiesto bajo la clave `io.sentry.proguard-uuid`.
    * El mismo UUID se usa para asociar el archivo de mapeo de ProGuard cargado con la compilación en Sentry.

    Esto garantiza que los stack traces ofuscados de tu app de Android puedan desofuscarse correctamente en Sentry.

    <Alert>
      No sobrescribas directamente los metadatos `io.sentry.proguard-uuid`. Usa [SentryProGuardUUID](#SentryProGuardUUID) si necesitas proporcionar un UUID personalizado.
    </Alert>
  </SdkOption>
</PlatformSection>

<SdkOption name="SentryUploadSymbols" type="bool" defaultValue="false">
  Controla la carga de símbolos en Sentry durante la compilación. El valor predeterminado es `false` (deshabilitado).

  Establece esta propiedad en `true` para enviar símbolos a Sentry como [archivos de información de depuración](../../data-management/debug-files/),
  que se usan para realizar la simbolización de los stack traces. Esto te permitirá ver nombres de archivo y números de línea dentro
  de un stack trace, en lugar de solo un nombre de función.
</SdkOption>

<SdkOption name="SentryUploadSources" type="bool" defaultValue="false">
  Controla si los archivos de código fuente se cargan en Sentry durante la compilación. El valor predeterminado es `false` (deshabilitado).

  Establece esta propiedad en `true` para enviar código fuente a Sentry.
  Esto habilita la visualización del [contexto de código fuente](../../data-management/debug-files/source-context/) al ver los stack traces.

  <Alert>
    Si ya estás incrustando el código fuente en tus archivos de símbolos usando [`EmbedAllSources`](https://github.com/dotnet/sourcelink/blob/main/docs/README.md#embedallsources),
    no necesitas subirlos a Sentry por separado. En otras palabras, usa o bien `SentryUploadSources` o `EmbedAllSources`, pero no ambos.
  </Alert>
</SdkOption>

<SdkOption name="UseSentryCLI" type="bool" defaultValue="true">
  Controla si Sentry CLI está habilitado en tu compilación.
  El valor predeterminado es `true` si cualquiera de las funciones individuales está habilitada.
  Configúralo en `false` para deshabilitar Sentry CLI por completo, ignorando la configuración de cada función.
</SdkOption>

<Alert title="Importante">
  Hay dos propiedades más, `SentryAuthToken` y `SentryApiKey`, disponibles para la autenticación.
  Sin embargo, recomendamos usarlas solo para pruebas simples y no en producción. Si decides usarlas,
  ten mucho cuidado de que sus valores no se suban al control de versiones ni aparezcan en los registros de compilación.
  Un enfoque más seguro es configurar la autenticación mediante una variable de entorno o el archivo `~/.sentryclirc`.
</Alert>