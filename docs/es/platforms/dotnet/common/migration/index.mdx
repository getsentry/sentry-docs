---
title: Guía de migración
description: "Migrar entre versiones del SDK de Sentry para .NET."
sidebar_order: 8000
---

La actualización incluye cambios incompatibles y nuevas funciones.

<div id="migrating-to-4x">
  ## Migración a la versión 4.x
</div>

<div id="net-target-framework-changes">
  ### Cambios en los target frameworks de .NET
</div>

Vamos a dejar de admitir algunos de los target frameworks antiguos. Consulta este [debate en GitHub](https://github.com/getsentry/sentry-dotnet/discussions/2776) para conocer los motivos.

- La compatibilidad con .NET Framework 4.6.1 se ha reemplazado por 4.6.2 porque 4.6.1 quedó sin soporte en 2022.
- Se ha dejado de admitir .NET Core 3.1 y .NET 5.
- Se ha dejado de admitir netstandard2.0 para Sentry.AspNetCore.
- La compatibilidad con .NET 6 en móviles (p. ej., `net6.0-android`) se ha reemplazado por .NET 7.
<br/>Debido a cambios en .NET 8, ya no es posible mantener la compatibilidad con los targets específicos para móviles de .NET 6. Como resultado, estamos migrando los TFM específicos para móviles de `net6.0-platform` a `net7.0-platform`. Esto significa que las aplicaciones móviles creadas con .NET 6 ahora usarán el paquete `Sentry` para .NET 6, que ofrece funciones solo de .NET sin enlaces nativos/específicos de plataforma ni SDK. Para obtener más información, consulta [este ticket](https://github.com/getsentry/sentry-dotnet/issues/2623).

- Se ha dejado de admitir MAUI Tizen

<div id="sentry-self-hosted-compatibility">
  ### Compatibilidad con Sentry Self-Hosted
</div>

Si usas `sentry.io`, este cambio no te afecta.
Esta versión del SDK es compatible con Sentry Self-Hosted `22.12.0` o posterior. Si usas una versión anterior de [Sentry Self-Hosted](https://develop.sentry.dev/self-hosted/) (también llamado on‑premise), tendrás que [actualizar](https://develop.sentry.dev/self-hosted/releases/).

<div id="significant-changes-in-behavior">
  ### Cambios significativos en el comportamiento
</div>

- Los nombres de transacción para ASP.NET Core ahora siguen consistentemente el formato `HTTP-VERB /path` (p. ej., `GET /home`). Antes, faltaba la barra inicial en algunos endpoints.
- Establecer `SentryOptions.Dsn` en `null` ahora produce `ArgumentNullException` durante la inicialización.
- `CaptureFailedRequests` ahora está habilitado de forma predeterminada.
- Cuando `ImplicitUsings` está habilitado, el espacio de nombres `Sentry` se agrega automáticamente a los usings globales. Si tienes conflictos, puedes excluirlo agregando lo siguiente a tu `csproj`:
    ```
    <PropertyGroup>
      <SentryImplicitUsings>false</SentryImplicitUsings>
    </PropertyGroup>
    ```
- Los spans de las transacciones ya no se finalizan automáticamente con el estado `deadline_exceeded` por la transacción. Esto ahora lo gestiona [Relay](https://github.com/getsentry/relay).
  - Los clientes que hospedan Sentry por su cuenta deben usar la versión `22.12.0` o posterior
- `User.IpAddress` ahora se establece en `{{auto}}` de forma predeterminada, incluso cuando `sendDefaultPII` está deshabilitado.
  - Para evitar enviar direcciones IP, usa la opción "Prevent Storing of IP Addresses" en la configuración del proyecto "Security & Privacy" en sentry.io.
- La firma de `DiagnosticLogger` para `LogWarning` ahora recibe `exception` como primer parámetro. De este modo, ya no se confunde con `TArgs`.

<div id="breaking-changes">
  ### Cambios incompatibles
</div>

<div id="changed-apis">
  #### APIs modificadas
</div>

- Clase renombrada de `Sentry.User` a `Sentry.SentryUser`.
- Clase renombrada de `Sentry.Runtime` a `Sentry.SentryRuntime`.
- Clase renombrada de `Sentry.Span` a `Sentry.SentrySpan`.
- Clase renombrada de `Sentry.Transaction` a `Sentry.SentryTransaction`.
- Clase renombrada de `Sentry.Constants` a `Sentry.SentryConstants`.
- Clase renombrada de `Sentry.Context` a `Sentry.SentryContext`.
- Clase renombrada de `Sentry.Package` a `Sentry.SentryPackage`.
- Clase renombrada de `Sentry.Request` a `Sentry.SentryRequest`.
- Clase renombrada de `Sentry.` a `Sentry.SentryTransaction`.
- Clase renombrada de `Sentry.Session` a `Sentry.SentrySession`.
- Clase renombrada de `Sentry.Attachment` a `Sentry.SentryAttachment`.
- Clase renombrada de `Sentry.Hint` a `Sentry.SentryHint`.
- Interfaz renombrada de `Sentry.ISession` a `Sentry.SentryISession`.
- Interfaz renombrada de `Sentry.IJsonSerializable` a `Sentry.SentryIJsonSerializable`.
- Interfaz renombrada de `Sentry.ITransaction` a `Sentry.ITransactionTracer`.
- Opciones específicas de plataforma para iOS y MacCatalyst renombradas de `Cocoa` a `Native`.
- Opciones específicas de plataforma para iOS y MacCatalyst renombradas de `iOS` a `Cocoa`.
- Opciones específicas de plataforma para iOS renombradas de `EnableCocoaSdkTracing` a `EnableTracing`.
- Opciones específicas de plataforma para Android renombradas de `Android` a `Native`.
- Opciones específicas de plataforma para Android renombradas de `EnableAndroidSdkTracing` y `EnableAndroidSdkBeforeSend` a `EnableTracing` y `EnableBeforeSend`, respectivamente.
- `DebugImage` y `DebugMeta` se trasladaron al espacio de nombres `Sentry.Protocol`.
- `SentryClient.Dispose` ya no es obsoleto.
- Las sobrecargas de `ISentryClient.CaptureEvent` se reemplazaron por un único método que acepta parámetros opcionales `Hint` y `Scope`. Deberás pasar `hint` como parámetro con nombre desde el código que llama a `CaptureEvent` sin pasar un argumento `scope`.
- Los constructores de `TransactionContext` y `SpanContext` se actualizaron y unificaron. Si estás creando instancias de estas clases, deberás ajustar el orden en que pasas los parámetros.
    ```csharp
    public TransactionContext(
        string name,
        string operation,
        SpanId? spanId = null,
        SpanId? parentSpanId = null,
        SentryId? traceId = null,
        string? description = "",
        SpanStatus? status = null,
        bool? isSampled = null,
        bool? isParentSampled = null,
        TransactionNameSource nameSource = TransactionNameSource.Custom
    )
    ```
- La firma de `DiagnosticLogger` para `LogError` y `LogFatal` ahora toma la `exception` como primer parámetro. De este modo, ya no se confunde con `TArgs`. `DiagnosticLogger` ahora también incorpora una sobrecarga para `LogError` y `LogFatal` que acepta solo un mensaje.
- Se agregó `Distribution` a `IEventLike`.
- `ImageAddress`, `InstructionAddress` y `FunctionId` de `StackFrame` cambiaron a `long?`.
- `DebugImage.ImageAddress` cambió a `long?`.
- Los Contexts ahora heredan de `IDictionary` en lugar de `ConcurrentDictionary`. El diccionario específico que se utilice es un detalle de implementación.
- El método para configurar un Sink de Sentry para Serilog ahora tiene una sobrecarga adicional. Llamar a `WriteTo.Sentry()` sin argumentos ya no intentará inicializar el SDK (tiene argumentos opcionales para configurar solo el comportamiento del Sink). Si deseas inicializar Sentry al mismo tiempo que configuras el Sink de Sentry, deberás usar la sobrecarga de este método que acepta un DSN como primer parámetro (por ejemplo, `WriteTo.Sentry("https://d4d82fc1c2c4032a83f3a29aa3a3aff@fake-sentry.io:65535/2147483647")`).

<div id="removed-apis">
  #### APIs eliminadas
</div>

- `SentrySinkExtensions.ConfigureSentrySerilogOptions` ahora es de uso interno únicamente. Si usabas este método, utiliza en su lugar uno de los métodos de extensión `SentrySinkExtensions.Sentry`.
- Se han eliminado varias opciones marcadas como `[Obsolete]`:
  - `BeforeSend` - usa `SetBeforeSend` en su lugar.
  - `BeforeSendTransaction` - usa `SetBeforeSendTransaction` en su lugar.
  - `BeforeBreadcrumb` - usa `SetBeforeBreadcrumb` en su lugar.
  - `CreateHttpClientHandler` - usa `CreateHttpMessageHandler` en su lugar.
  - `ReportAssemblies` - usa `ReportAssembliesMode` en su lugar.
  - `KeepAggregateException` - esta propiedad ya no se usa y no tiene reemplazo.
  - `DisableTaskUnobservedTaskExceptionCapture` - usa `DisableUnobservedTaskExceptionCapture` en su lugar.
  - `DebugDiagnosticLogger` - usa `TraceDiagnosticLogger` en su lugar.
- Se han eliminado varias opciones `[Obsolete]` específicas de iOS/Android:
  - `Distribution` - usa `SentryOptions.Distribution` en su lugar.
  - `EnableAutoPerformanceTracking` - usa `SetBeforeSendTransaction` en su lugar.
  - `EnableCoreDataTracking` - usa `EnableCoreDataTracing` en su lugar.
  - `EnableFileIOTracking` - usa `EnableFileIOTracing` en su lugar.
  - `EnableOutOfMemoryTracking` - usa `EnableWatchdogTerminationTracking` en su lugar.
  - `EnableUIViewControllerTracking` - usa `EnableUIViewControllerTracing` en su lugar.
  - `StitchAsyncCode` - ya no está disponible.
  - `ProfilingTracesInterval` - ya no está disponible.
  - `ProfilingEnabled` - usa `ProfilesSampleRate` en su lugar.
- Se han eliminado varios tipos obsoletos:
  - `SystemClock` - usa `SystemClock.Clock` en su lugar.
  - `Scope.GetSpan()` - usa la propiedad `Span` en su lugar.
  - `IUserFactory` - usa `ISentryUserFactory` en su lugar.
  - `SentryException.Data` - usa `SentryException.Mechanism.Data` en su lugar.
  - `Runtime.Clone()` - no debería haber sido público y no tiene reemplazo.
  - `AssemblyExtensions` - no debería haber sido público y no tiene reemplazo.
  - `SentryDatabaseLogging.UseBreadcrumbs()` - se invoca automáticamente y no tiene reemplazo.
- Se han eliminado varias interfaces:
  - `IHasMeasurements` - usa `ISpanData` en su lugar.
  - `IHasBreadcrumbs` - usa `IEventLike` en su lugar.
  - `ISpanContext` - usa `ITraceContext` en su lugar.
  - `IHasTransactionNameSource` - usa `ITransactionContext` en su lugar.
- Se ha eliminado el `StackFrame.InstructionOffset` sin uso.
- Se ha eliminado la propiedad `Scope.Platform` sin uso.
- Se ha eliminado el setter obsoleto `Sentry.PlatformAbstractions.Runtime.Identifier`.
- `Sentry.Values<T>` ahora es interna, ya que nunca se expone en la API pública.
- Se ha eliminado la clase `TracePropagationTarget`. Usa la clase `SubstringOrRegexPattern` en su lugar.
- Se han eliminado los métodos `WithScope` y `WithScopeAsync`. Descubrimos que estos métodos no funcionaban correctamente en ciertos contextos de escritorio, especialmente al usar un ámbito global.
<br/>Sustituye tu uso de `WithScope` por las sobrecargas de los métodos `Capture*`:
  - `SentrySdk.CaptureEvent(SentryEvent @event, Action<Scope> scopeCallback)`
  - `SentrySdk.CaptureMessage(string message, Action<Scope> scopeCallback)`
  - `SentrySdk.CaptureException(Exception exception, Action<Scope> scopeCallback)`

  ```csharp
  // Before
  SentrySdk.WithScope(scope =>
  {
    scope.SetTag("key", "value");
    SentrySdk.CaptureEvent(new SentryEvent());
  });

  // After
  SentrySdk.CaptureEvent(new SentryEvent(), scope =>
  {
    // Configure your scope here
    scope.SetTag("key", "value");
  });
  ```

<div id="migrating-to-3120">
  ## Migrar a la 3.12.0
</div>

<div id="nuget-changes">
  ### Cambios en NuGet
</div>

Si estás usando el paquete NuGet `Sentry.EntityFramework`, debes actualizar a la versión 6.2 o superior del paquete NuGet `EntityFramework`.

<div id="migrating-from-2x-to-3x">
  ## Migrar de la 2.x a la 3.x
</div>

<div id="breaking-changes">
  ### Cambios incompatibles
</div>

Lee **todos** los cambios incompatibles antes de actualizar.

<div id="grouping-changes">
  #### Agrupación de cambios
</div>

El formato de las trazas de pila se mejoró significativamente gracias a la icónica biblioteca de Ben Adams, `Ben.Demystifier`. Ahora los marcos incluyen detalles como `async`, `static`, el tipo de retorno real, los parámetros del método, las tuplas y sus nombres, entre otros.

Sin embargo, esto **afectará la agrupación**. Si prefieres conservar el formato original de la traza de pila, puedes desactivar esta función con:

```csharp
options.StackTraceMode = StackTraceMode.Original;
```


<div id="serialization">
  #### Serialización
</div>

En la versión 3.0.0, el SDK de Sentry para .NET cambió de `Newtonsoft.Json` a `System.Text.Json`.
Usar la nueva biblioteca tiene muchas ventajas. Entre ellas, la eliminación de una dependencia adicional (al dirigirse a .NET Core 3, .NET 5 y versiones posteriores) y un rendimiento mucho más rápido.

Un cambio con ruptura que afecta a los objetos establecidos como [Context](../enriching-events/context/) y `Extra` es que `Newtonsoft.Json` antes podía serializar algunos tipos, lo cual no es posible con `System.Text.Json`.

Configurar una instancia de `Exception` capturada en un bloque `catch` podría no serializarse y Sentry descartaría el evento. Esto no romperá tu aplicación, pero el error no llegaría a Sentry:

```
 ---> System.NotSupportedException: La serialización y deserialización de instancias de 'System.Type' no son compatibles y deben evitarse, ya que pueden provocar problemas de seguridad.
   en System.Text.Json.Serialization.Converters.TypeConverter.Write(Utf8JsonWriter writer, Type value, JsonSerializerOptions options)
   en System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   en System.Text.Json.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   en System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   en System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   en System.Text.Json.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   en System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   en System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   en System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
```

Para evitar este problema, pasa un objeto serializable a Sentry. Por ejemplo, asigna la instancia de `Exception` a un objeto anónimo:

```csharp
try
{
    throw new ArgumentNullException("test");
}
catch (Exception e)
{
    SentrySdk.ConfigureScope(s =>
    {
        s.Contexts["Exception"] = new
        {
            e.Message,
            e.StackTrace,
            e.Data
        };
    });
    SentrySdk.CaptureMessage("Excepción en Contexts");
}
```


<div id="namespace-change">
  ### Cambio de espacio de nombres
</div>

Las clases bajo `Sentry.Protocol` se trasladaron al espacio de nombres raíz `Sentry`, todas excepto las clases de `Context` como `App`, `Device`, etc.

<div id="aspnet">
  ### ASP.NET
</div>

Los usuarios de ASP.NET (**no Core**) deben instalar un paquete adicional, `Sentry.AspNet`. Sin este paquete, no se añadirá a los eventos la información relacionada con HTTP.

Puedes integrar el paquete en `Init` de la siguiente manera:

```csharp
options.AddAspNet();
```

La motivación fue eliminar la referencia a `System.Web` y desacoplar el núcleo del paquete de cualquier espacio de nombres específico del .NET Framework. Este cambio mejora la experiencia en otros entornos, como los motores de juego Unity y [Godot](https://gatomalo.dev/blog/2020/03/21/error-monitoring-godot-sentry/#android).


<div id="aspnet-core">
  ### ASP.NET Core
</div>

<div id="environment-casing">
  #### Uso de mayúsculas y minúsculas del entorno
</div>

Para ajustarse a la convención de nombres de entorno predeterminada de Sentry, salvo que se indique explícitamente lo contrario, el entorno de Sentry se reportará en minúsculas. Esto significa que si `ASPNET_ENVIRONMENT` es igual a `Production`, el SDK de Sentry lo reportará como `production`.

<div id="removal-of-includerequestpayload">
  #### Eliminación de `IncludeRequestPayload`
</div>

La opción `IncludeRequestPayload`, que se marcó como obsoleta en Sentry SDK 2.0, ha sido eliminada.
Su reemplazo es la opción `MaxRequestBodySize`.

<div id="new-methods-on-ihub-and-isentryclient">
  #### Nuevos métodos en `IHub` e `ISentryClient`
</div>

Las capacidades de trazabilidad de Sentry requieren cambios incrementales en la API de interfaces como `IHub` e `ISentryClient`. Si implementas tu propio `IHub`, tendrás que implementar dos métodos nuevos:

`ISentryClient` incorporó: `CaptureTransaction`.
`IHub` incorporó: `StartTransaction` y `GetTraceHeader`.

<div id="rename-of-diagnosticslogger-to-diagnosticlogger">
  #### Cambio de nombre de `DiagnosticsLogger` a `DiagnosticLogger`
</div>

Para alinearlo con otros SDK, la opción ahora se llama `DiagnosticLogger`.
[PR de la documentación](https://github.com/getsentry/sentry-docs/pull/2945).

<div id="dsn-as-a-string">
  #### `Dsn` como cadena
</div>

`SentryOptions` ahora acepta una cadena para `Dsn`:

Antes: `options.Dsn = new Dsn("..");`  
Después: `options.Dsn = "..";`

<div id="logentry-became-message">
  #### `LogEntry` ahora es `Message`
</div>

Para alinearse con el protocolo y otros SDK, la propiedad de `SentryEvent` que admite una entrada de registro estructurada pasó a llamarse `Message`.

<div id="self-hosted-support">
  ### Compatibilidad con instalaciones autogestionadas
</div>

Esta versión utiliza el [endpoint de envelopes](https://develop.sentry.dev/sdk/data-model/envelopes/). Si usas una instalación on‑premise, requiere Sentry versión >= v20.6.0 para funcionar. Si usas sentry.io, no cambiará nada y no necesitas hacer nada.

<div id="new-features-and-improvements">
  ### Novedades y mejoras
</div>

<div id="offline-caching">
  #### Caché sin conexión
</div>

Opcionalmente, puedes hacer que los eventos se almacenen en caché en el disco. Para ello, especifica qué directorio puede usar el SDK para escribir archivos de fallos:

`options.CacheDirectoryPath = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData))`

<div id="attachments">
  #### Archivos adjuntos
</div>

Puedes agregar archivos adjuntos a los eventos. Consulta nuestra [documentación sobre archivos adjuntos](../enriching-events/attachments/).

<div id="user-feedback">
  #### Comentarios de usuarios
</div>

Puedes añadir comentarios de usuarios a los eventos mediante la API de .NET. Consulta la [documentación sobre comentarios de usuarios](../user-feedback/).

<div id="aspnet-core-grpc-support">
  #### Compatibilidad con gRPC en ASP.NET Core
</div>

Se agregó un nuevo paquete para ASP.NET Core con compatibilidad con gRPC, que permite registrar la carga útil de la solicitud en caso de errores.

<div id="release-notes">
  #### Notas de la versión
</div>

Consulta [GitHub para ver las notas de la versión completas](https://github.com/getsentry/sentry-dotnet/releases/tag/3.0.0).

<div id="migrating-from-sharpraven-to-sentry-sdk">
  ## Migración de SharpRaven a Sentry SDK
</div>

A continuación, se presentan las principales diferencias entre SharpRaven y Sentry SDK, incluida una lista de funcionalidades disponibles en Sentry SDK que no están presentes en SharpRaven.

<div id="sentry-package">
  ### Paquete de Sentry
</div>

- Captura automática de excepciones globales no controladas (AppDomain)
- Gestión de ámbito
- Eventos duplicados descartados automáticamente
- Eventos de la misma excepción descartados automáticamente
- Compatibilidad con proxy web
- Callback de configuración de HttpClient/HttpClientHandler
- Comprimir el cuerpo de la solicitud
- Muestreo de eventos opcional
- Protección contra inundación de eventos (429 retry-after y cola interna limitada)
- Versión (release) configurada automáticamente (`AssemblyInformationalVersionAttribute`, `AssemblyVersion` o variable de entorno)
- DSN detectado mediante variable de entorno
- Versión (release) reportada automáticamente
- Compatible con CLS
- Firmado con nombre seguro (strong-named)
- Callbacks BeforeSend y BeforeBreadcrumb
- Procesadores de eventos y de excepciones
- SourceLink (incluye PDB en el paquete NuGet)
- Información del SO del dispositivo enviada
- Información del runtime del dispositivo enviada
- Habilitar el modo de depuración del SDK (opcional)
- Adjuntar traza de pila para mensajes capturados (opcional)

<div id="sentryextensionslogging">
  ### Sentry.Extensions.Logging
</div>

- Incluye todas las funcionalidades del paquete Sentry.
- Los datos de BeginScope se agregan al scope de Sentry y se envían con los eventos.
- LogInformation o superior se agrega como breadcrumb y se enviará con los siguientes eventos.
- LogError o superior captura un evento automáticamente.
- Los niveles mínimos son configurables.

<div id="sentryaspnetcore">
  ### Sentry.AspNetCore
</div>

- Incluye todas las funcionalidades del paquete Sentry.
- Incluye todas las funcionalidades del paquete Sentry.Extensions.Logging.
- Integración sencilla con ASP.NET Core, en una sola línea: UseSentry.
- Captura excepciones no controladas en la canalización de middleware.
- Captura excepciones controladas por el framework con UseExceptionHandler y la visualización de la página de error.
- Cualquier evento enviado incluirá mensajes de registro relevantes de la aplicación.
- RequestId como etiqueta.
- URL como etiqueta.
- El entorno se establece automáticamente (IHostingEnvironment).
- Se puede capturar el contenido de la solicitud si se habilita.
- Compatibilidad con EventProcessors registrados mediante DI.
- Compatibilidad con ExceptionProcessors registrados mediante DI.
- Captura registros de la solicitud (usando Microsoft.Extensions.Logging).
- Compatible con el sistema de configuración (p. ej., appsettings.json).
- Se envía información del SO del servidor.
- Se envía información del runtime del servidor.
- Se envían los encabezados de la solicitud.
- Se comprime el cuerpo de la solicitud.

Todos los paquetes son:

- Con nombre seguro (strong-named)
- Probados en Windows, Linux y macOS
- Probados en .NET Core, .NET Framework y Mono

También es muy configurable, por ejemplo:

- Proxy HTTP
- Muestreo de eventos
- Habilitar la extracción del cuerpo de la solicitud
- Enviar datos PII (información de identificación personal; requiere habilitación)
- Leer datos de actividad de diagnósticos
- BeforeSend: callback para modificar o rechazar el evento antes de enviarlo
- BeforeBreadcrumb: callback para modificar o rechazar un breadcrumb
- LogEventFilter: filtrar eventos inspeccionando los datos de registro
- Número máximo de breadcrumbs a almacenar
- Profundidad de la cola de eventos
- Tiempo de espera de apagado: si hay eventos por enviar, cuánto esperar antes de apagarse
- Aceptar respuesta comprimida
- Comprimir el cuerpo de la solicitud
- Nivel de breadcrumb: nivel mínimo de registro para almacenar como breadcrumb
- Nivel de evento: nivel mínimo de registro para enviar un evento a Sentry
- Deshabilitar la detección de eventos duplicados
- Deshabilitar la captura de excepciones globales no controladas
- Agregar procesador de eventos
- Agregar procesador de excepciones
- Habilitar el modo de depuración del SDK
- Adjuntar la traza de pila para mensajes capturados (opcional)

### Cambios importantes

Actualizar de SharpRaven al SDK de Sentry incluye los siguientes cambios importantes.

<div id="net-framework-support-reduced">
  #### Compatibilidad reducida con .NET Framework
</div>

Si tu proyecto tiene como destino .NET Framework, deberá usar al menos la v4.6.1 para utilizar Sentry (SharpRaven admitía .NET Framework v3.5 y versiones superiores).

<div id="initialization">
  #### Inicialización
</div>

Se cambió la forma de inicializar Sentry:

```csharp
// Inicializa con DSN
SentrySdk.Init("___PUBLIC_DSN___");

// Inicializa con opciones
SentrySdk.Init(options =>
{
    options.Dsn = "___PUBLIC_DSN___";
});
```

Para la integración con ASP.NET (clásico), añade el paquete `Sentry.AspNet` e inicialízalo llamando a `options.AddAspNet()`:

```csharp
using Sentry.AspNet;

SentrySdk.Init(options =>
{
    options.Dsn = "___PUBLIC_DSN___";

    options.AddAspNet();
});
```


<div id="event-queue">
  #### Cola de eventos
</div>

A diferencia de SharpRaven, los eventos con el SDK de Sentry se envían en segundo plano sin bloquear el código que se está ejecutando. Llamar a `SentrySdk.CaptureException(...)` no envía un evento de inmediato, sino que lo agrega a la cola en un subproceso en segundo plano.

Cambios en el uso:

```csharp
// Antes
ravenClient.Capture(...);
await ravenClient.CaptureAsync(...);

// Después
SentrySdk.CaptureEvent(...);
```

Si necesitas detener la ejecución hasta que los eventos capturados se envíen a Sentry, también puedes vaciar la cola:

```csharp
SentrySdk.CaptureException(...);
// Solo continúa una vez que se haya capturado la excepción. Espera hasta 2 segundos para ello.
await SentrySdk.FlushAsync(TimeSpan.FromSeconds(2));
```

Puedes cerrar el SDK—lo que también vaciará la cola de eventos—invocando el `IDisposable` que devuelve `SentrySdk.Init(...)`:

```csharp
var sentryInitialization = SentrySdk.Init("___PUBLIC_DSN___");

// Capturar un mensaje que no es un error
SentrySdk.CaptureMessage("hola mundo");

// Finalizar Sentry y vaciar los eventos en cola
sentryInitialization.Dispose();
```


<div id="event-processors">
  #### Procesadores de eventos
</div>

Cambios en el uso:

```csharp
// Antes
ravenClient.BeforeSend = requester =>
{
    // Aquí puedes registrar datos del solicitante
    // o reemplazarlo por completo si quieres.
    return requester;
};

// Después
SentrySdk.Init(options =>
{
    options.BeforeSend = e =>
    {
        // Modifica el evento o devuelve null para descartarlo por completo
        return e;
    };
}
});
```


<div id="providing-user-information">
  #### Proporcionar información del usuario
</div>

SharpRaven utilizaba la interfaz `IUserFactory` para extraer la información del usuario. En el SDK de Sentry, en cambio, puedes proporcionar la información del usuario directamente:

```csharp
SentrySdk.ConfigureScope(scope =>
{
    scope.User = new User
    {
        Id = "42",
        Email = "juan.perez@ejemplo.com"
    };
})
```

En las aplicaciones de ASP.NET Core, esto se realiza automáticamente. La información del usuario se extrae del contexto de la solicitud que se está ejecutando en ese momento.
