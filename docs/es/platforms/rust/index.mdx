---
title: Rust
sdk: sentry.rust
caseStyle: snake_case
supportLevel: production
categories:
  - server
---

En esta página te ayudamos a comenzar con el SDK de Rust de Sentry.

<Alert>

Si aún no tienes una cuenta y un proyecto de Sentry configurados, ve a [sentry.io](https://sentry.io/signup/) y luego regresa a esta página.

</Alert>

¿Usas algún framework? Consulta los otros SDK que ofrecemos en el menú desplegable de la izquierda.

<GuideGrid platform="rust" />

<div id="install">
  ## Instalación
</div>

Para añadir Sentry a tu proyecto de Rust, agrega una nueva dependencia en tu `Cargo.toml`:

```toml {filename:Cargo.toml}
[dependencies]
sentry = "{{@inject packages.version('sentry.rust') }}"
```


<div id="configure">
  ## Configurar
</div>

La forma más conveniente de usar esta biblioteca es la función `sentry::init`, que inicia un cliente de Sentry con un conjunto predeterminado de integraciones y lo vincula al Hub actual.

La función `sentry::init` devuelve un guard que, al destruirse, vaciará los eventos que aún no se hayan enviado a Sentry. Tiene un límite de dos segundos, por lo que el cierre de la aplicación puede retrasarse ligeramente como resultado. Asegúrate de conservar el guard o no podrás enviar eventos.

```rust {filename:main.rs}
let _guard = sentry::init(("___PUBLIC_DSN___", sentry::ClientOptions {
    release: sentry::release_name!(),
    // Captura las IP de los usuarios y encabezados potencialmente sensibles al usar integraciones de servidor HTTP
    // consulta https://docs.sentry.io/platforms/rust/data-management/data-collected para más información
    send_default_pii: true,
    ..Default::default()
}));
```

**Importante:** Recuerda tu DSN. El DSN (Data Source Name) le indica al SDK a dónde enviar los eventos. Si lo olvidas, puedes encontrarlo en: Settings -&gt; Projects -&gt; Client Keys (DSN) en sentry.io.


<div id="async-main-function">
  ### Función principal asíncrona
</div>

En una aplicación multihilo, los hilos que se creen deberían heredar el Hub del hilo principal. Para que eso suceda, el cliente de Sentry debe inicializarse antes de iniciar un runtime asíncrono o de crear hilos. Esto significa que tendrás que evitar usar macros como `#[tokio::main]` o `#[actix_web::main]`, porque inician primero el runtime. Así que, en lugar de hacer esto:

```rust {filename:main.rs}
// INCORRECTO
#[tokio::main]
async fn main() {
let _guard = sentry::init(("___PUBLIC_DSN___", sentry::ClientOptions {
    release: sentry::release_name!(),
    // Captura las IPs de usuarios y encabezados potencialmente sensibles al usar integraciones de servidor HTTP
    // consulta https://docs.sentry.io/platforms/rust/data-management/data-collected para más información
    send_default_pii: true,
    ..Default::default()
}));

// implementación de main
}
```

Haz esto mejor:

```rust {filename:main.rs}
// CORRECTO
fn main() {
let _guard = sentry::init(("___PUBLIC_DSN___", sentry::ClientOptions {
    release: sentry::release_name!(),
    // Captura IPs de usuarios y encabezados potencialmente sensibles al usar integraciones de servidor HTTP
    // consulta https://docs.sentry.io/platforms/rust/data-management/data-collected para más información
    send_default_pii: true,
    ..Default::default()
}));

tokio::runtime::Builder::new_multi_thread()
        .enable_all()
        .build()
        .unwrap()
        .block_on(async {
            // implementación de main
        });
}
```


<div id="verify-setup">
  ## Verificar la configuración
</div>

La forma más rápida de comprobar Sentry en tu aplicación Rust es provocar un pánico:

```rust {filename:main.rs}
fn main() {
    let _guard = sentry::init(("___PUBLIC_DSN___", sentry::ClientOptions {
        release: sentry::release_name!(),
        // Captura las IPs de usuarios y encabezados potencialmente sensibles al usar integraciones de servidor HTTP
        // consulta https://docs.sentry.io/platforms/rust/data-management/data-collected para más información
        send_default_pii: true,
        ..Default::default()
    }));

    // Sentry capturará esto
    panic!("¡Todo está en llamas!");
}
```


<div id="integrations">
  ## Integraciones
</div>

Las integraciones amplían la funcionalidad del SDK para algunos frameworks
y bibliotecas comunes.

Puedes encontrar una lista de integraciones y sus flags de funcionalidad
[en la documentación de la API de integraciones](https://docs.rs/sentry/0/sentry/integrations/index.html).

<Alert>

Si mantienes los archivos de información de depuración en el binario generado, en lugar de reducirlos o dividirlos,
no agregues la integración `debug_images` ni el flag correspondiente `debug-images`,
ya que entrará en conflicto con el procesamiento integrado de archivos de depuración.

Estos conflictos pueden generar mensajes de advertencia en la interfaz de Sentry, ya que puede interpretarse como un problema con los archivos de depuración y el procesamiento de tu error. Consulta este [comentario](https://github.com/getsentry/sentry-rust/issues/574#issuecomment-1534316787) y el issue relacionado para más información.

</Alert>

<div id="more-information">
  ## Más información
</div>

- [Documentación de la API](https://docs.rs/sentry)
- [Página en Crates.io](https://crates.io/crates/sentry)
- [Registro de errores](https://github.com/getsentry/sentry-rust/issues)
- [Proyecto en GitHub](https://github.com/getsentry/sentry-rust)