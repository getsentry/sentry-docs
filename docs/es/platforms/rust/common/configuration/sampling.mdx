---
title: Muestreo
sidebar_title: Muestreo
sidebar_order: 50
description: "Aprende a configurar el volumen de eventos de errores y transacciones enviados a Sentry."
---

Agregar Sentry a tu app te aporta mucha información muy valiosa sobre errores y rendimiento que de otra forma no tendrías. Y mucha información es buena, siempre que sea la adecuada y en un volumen razonable.

<div id="sampling-error-events">
  ## Muestreo de eventos de error
</div>

Para enviar una muestra representativa de tus errores a Sentry, establece la opción <PlatformIdentifier name="sample-rate" /> en la configuración de tu SDK a un número entre `0` (0% de errores enviados) y `1` (100% de errores enviados). Es una tasa estática que se aplicará por igual a todos los errores. Por ejemplo, para muestrear el 25% de tus errores:

<PlatformContent includePath="configuration/sample-rate" />

De forma predeterminada, la tasa de muestreo de errores es `1`, lo que significa que todos los errores se envían a Sentry.

<Alert>

Cambiar la tasa de muestreo de errores requiere volver a implementar. Además, establecer una tasa de muestreo en el SDK limita la visibilidad del origen de los eventos. Configurar un límite de tasa para tu proyecto (que solo descarta eventos cuando el volumen es alto) podría ajustarse mejor a tus necesidades.

</Alert>

<div id="sampling-transaction-events">
  ## Muestreo de eventos de transacción
</div>

Recomendamos muestrear tus transacciones por dos razones:

1. Capturar una sola traza conlleva una sobrecarga mínima, pero capturar trazas en _cada_ carga de página o _cada_ solicitud de API puede añadir una carga indeseada a tu sistema.
2. Habilitar el muestreo te permite gestionar mejor la cantidad de eventos enviados a Sentry, para ajustar el volumen a las necesidades de tu organización.

Elige una tasa de muestreo buscando el equilibrio entre rendimiento, volumen y precisión de los datos. No quieres recopilar _demasiados_ datos, pero sí los suficientes para extraer conclusiones significativas. Si no estás seguro de qué tasa elegir, empieza con un valor bajo y ve aumentándola gradualmente a medida que conozcas mejor tus patrones de tráfico y volumen.

<div id="configuring-the-transaction-sample-rate">
  ## Configuración de la tasa de muestreo de transacciones
</div>

Los SDK de Sentry tienen dos opciones de configuración para controlar el volumen de transacciones enviadas a Sentry, lo que te permite obtener una muestra representativa:

1. Tasa de muestreo uniforme (<PlatformIdentifier name="traces-sample-rate" />):

   - Ofrece una selección uniforme de transacciones, sin importar dónde ocurran en tu app ni bajo qué circunstancias.
   - Usa el comportamiento predeterminado de [herencia](#inheritance) y [precedencia](#precedence)

2. Función de muestreo (<PlatformIdentifier name="traces-sampler" />) que:
   - Muestra distintas transacciones a diferentes tasas
   - <PlatformLink to="/configuration/filtering/">Filtra</PlatformLink> por completo algunas
     transacciones
   - Modifica el comportamiento predeterminado de [precedencia](#precedence) y [herencia](#inheritance)

De forma predeterminada, ninguna de estas opciones está configurada, por lo que no se enviarán transacciones a Sentry. Debes configurar una de las opciones para empezar a enviar transacciones.

<Alert>

Las funciones de muestreo (<PlatformIdentifier name="traces-sampler" />) no son compatibles actualmente con esta plataforma.

</Alert>

<div id="setting-a-uniform-sample-rate">
  ### Configurar una frecuencia de muestreo uniforme
</div>

<PlatformContent includePath="performance/uniform-sample-rate" />

<div id="inheritance">
  ## Herencia
</div>

Sea cual sea la decisión de muestreo de una transacción, esa decisión se propagará a sus spans secundarios y, desde allí, a cualquier transacción que estas generen posteriormente en otros servicios.

(Consulta <PlatformLink to="/tracing/trace-propagation/">Distributed Tracing</PlatformLink> para obtener más información sobre cómo se realiza esa propagación).

Si la transacción que se está creando actualmente es una de esas transacciones posteriores (es decir, si tiene una transacción padre), la decisión de muestreo upstream (del padre) se incluirá en los datos del contexto de muestreo. Tu <PlatformIdentifier name="traces-sampler" /> puede usar esta información para decidir si heredar esa decisión. En la mayoría de los casos, heredar es la opción correcta para evitar romper trazas distribuidas. Una traza rota no incluirá todos tus servicios.

<PlatformContent includePath="performance/always-inherit-sampling-decision">

En algunos SDK, por conveniencia, la función <PlatformIdentifier name="traces-sampler" /> puede devolver un valor booleano, de modo que la decisión del padre pueda retornarse directamente si ese es el comportamiento deseado.

</PlatformContent>

Si estás usando un <PlatformIdentifier name="traces-sample-rate" /> en lugar de un <PlatformIdentifier name="traces-sampler" />, la decisión siempre se heredará.

<div id="precedence">
  ## Precedencia
</div>

Hay varias formas en que una transacción puede terminar con una decisión de muestreo.

- Muestreo aleatorio según una tasa de muestreo estática definida en <PlatformIdentifier name="traces-sample-rate" />
- Muestreo aleatorio según una tasa definida por una función de muestreo devuelta por <PlatformIdentifier name="traces-sampler" />
- Decisión absoluta (100% o 0% de probabilidad) devuelta por <PlatformIdentifier name="traces-sampler" />
- Si la transacción tiene un padre, heredar la decisión de muestreo del padre
- Decisión absoluta pasada a <PlatformIdentifier name="start-transaction" />

Cuando existe la posibilidad de que más de una de estas entren en juego, se aplican las siguientes reglas de precedencia:

1. Si se pasa una decisión de muestreo a <PlatformIdentifier name="start-transaction" />, se usará esa decisión, reemplazando todo lo demás.
1. Si <PlatformIdentifier name="traces-sampler" /> está definido, se usará su decisión. Puede optar por mantener o ignorar cualquier decisión de muestreo del padre, usar los datos del contexto de muestreo para tomar su propia decisión o elegir una tasa de muestreo para la transacción. Desaconsejamos reemplazar la decisión de muestreo del padre porque romperá los rastreos distribuidos.
1. Si <PlatformIdentifier name="traces-sampler" /> no está definido, pero hay una decisión de muestreo del padre, se usará la decisión del padre.
1. Si <PlatformIdentifier name="traces-sampler" /> no está definido y no hay una decisión de muestreo del padre, se usará <PlatformIdentifier name="traces-sample-rate" />.

<Alert>

Forzar una decisión de muestreo pasándola a <PlatformIdentifier name="start-transaction" /> actualmente no es compatible con esta plataforma.

</Alert>