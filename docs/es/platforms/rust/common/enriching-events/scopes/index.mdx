---
title: Ámbitos y hubs
description: "En la mayoría de los casos, el SDK administrará automáticamente los ámbitos por ti en las integraciones del framework. Aprende qué es un ámbito y cómo puedes usarlo a tu favor."
---

Cuando se captura y envía un evento a Sentry, los SDK combinan esos datos del evento con información adicional del ámbito actual. En la mayoría de los casos, el SDK administrará automáticamente los ámbitos por ti en las integraciones del framework y no necesitas preocuparte por ellos. Sin embargo, conviene que sepas qué es un ámbito y cómo puedes usarlo a tu favor.

<div id="whats-a-scope-whats-a-hub">
  ## Qué es un Scope, qué es un Hub
</div>

Puedes pensar en el hub como el punto central que nuestros SDK usan para enrutar un evento a Sentry. Cuando llamas a `init()`, se crea un hub y en él se crean un cliente y un scope en blanco. Ese hub se asocia con el hilo actual y, de forma interna, mantiene una pila de scopes.

El scope contiene información útil que debe enviarse junto con el evento. Por ejemplo, [contexts](../context/) o [breadcrumbs](../breadcrumbs/) se almacenan en el scope. Cuando se hace push de un scope, hereda todos los datos del scope padre y, cuando se hace pop, se revierten todas las modificaciones.

Las integraciones predeterminadas del SDK hacen push y pop de scopes de forma inteligente. Por ejemplo, las integraciones de frameworks web crearán y destruirán scopes alrededor de tus rutas o controladores.

<div id="how-the-scope-and-hub-work">
  ## Cómo funcionan el scope y el hub
</div>

Al empezar a usar un SDK, se crean automáticamente un scope y un hub para ti desde
el principio. Es poco probable que interactúes directamente con el hub a menos que estés
escribiendo una integración o quieras crear o destruir scopes. Los scopes, por
otro lado, están más orientados al usuario. Puedes llamar a <PlatformIdentifier name="configure-scope" /> en cualquier momento
para modificar los datos almacenados en el scope. Esto es útil para hacer cosas como
[modificar el contexto](../context/).

Cuando llamas a una función global como <PlatformIdentifier name="capture-event" />, internamente Sentry
detecta el hub actual y le pide que capture un evento. Luego, el hub
combinará el evento con los datos del scope más alto.

<div id="configuring-the-scope">
  ## Configuración del scope
</div>

La operación más útil al trabajar con scopes es la función <PlatformIdentifier name="configure-scope" />. Puede usarse para reconfigurar el scope actual.

Por ejemplo, puedes agregar etiquetas personalizadas o indicar a Sentry quién es el usuario autenticado actualmente.

<PlatformContent includePath="enriching-events/scopes/configure-scope" />

Para saber qué información útil se puede asociar a los scopes, consulta
[la documentación sobre contexto](../context/).

<div id="local-scopes">
  ## Alcances locales
</div>

También puedes insertar y configurar un alcance en una sola llamada. Según el SDK, esto suele
llamarse <PlatformIdentifier name="with-scope" />, <PlatformIdentifier name="push-scope" /> o implementarse como un parámetro de función en los métodos de captura. Es muy útil si
solo quieres enviar datos para un evento específico.

### Uso de <PlatformIdentifier name="with-scope" />

En el siguiente ejemplo usamos <PlatformIdentifier name="with-scope" /> para adjuntar un `level` y un `tag` a un único error específico:

<PlatformContent includePath="enriching-events/scopes/with-scope" />

Aunque este ejemplo parece similar a <PlatformIdentifier name="configure-scope" />, en realidad es muy diferente.
Las llamadas a <PlatformIdentifier name="configure-scope" /> cambian el ámbito activo actual; todas las llamadas posteriores a <PlatformIdentifier name="configure-scope" /> mantendrán los cambios establecidos previamente a menos que se anulen explícitamente.

Por otro lado, <PlatformIdentifier name="with-scope" /> crea un clon del ámbito actual y los cambios
realizados permanecerán aislados dentro de la función de callback de <PlatformIdentifier name="with-scope" />. Esto te permite
aislar más fácilmente partes de información contextual en ubicaciones específicas de tu código o
incluso llamar a <PlatformIdentifier name="clear" /> para eliminar temporalmente toda la información contextual.