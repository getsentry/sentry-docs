---
title: Instrumentación automática
sidebar_order: 20
description: "Descubre qué transacciones capturamos después de habilitar el rastreo."
---

<Alert>

Para capturar transacciones, primero debes <PlatformLink to="/tracing/">configurar el rastreo</PlatformLink> si aún no lo has hecho.

</Alert>

<div id="spring-mvc-integration">
  ### Integración con Spring MVC
</div>

La integración de Sentry para Spring, una vez habilitada, captura cada solicitud HTTP entrante de Spring MVC y la convierte en una transacción con `SentryTracingFilter`. Los nombres de las transacciones siguen el patrón `<método HTTP> <ruta de Spring MVC>`. Por ejemplo, para una solicitud al siguiente controlador:

```java {tabTitle:Java}
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;

@RestController
class HelloController {

  @GetMapping("/person/{id}")
  Person person(@PathVariable Long id) {
    ...
  }
}
```

```kotlin {tabTitle:Kotlin}
import org.springframework.web.bind.annotation.RestController
import org.springframework.web.bind.annotation.GetMapping
import org.springframework.web.bind.annotation.PathVariable

@RestController
class HelloController {

  @GetMapping("/person/{id}")
  fun person(@PathVariable id: Long) {
    ...
  }
}
```

Cada solicitud muestreada que ejecute este método del controlador se convertirá en una transacción `GET /person/{id}`.


<div id="resttemplate-instrumentation">
  ### Instrumentación de RestTemplate
</div>

La integración de Sentry para Spring proporciona `SentrySpanClientHttpRequestInterceptor`, que crea un span por cada solicitud HTTP saliente ejecutada con un `RestTemplate`. Para usar un `RestTemplate` instrumentado, asegúrate de configurar el interceptor en el bean de `RestTemplate`:

```java {tabTitle:Java (Spring 5)}
import io.sentry.IScopes;
import io.sentry.spring.tracing.SentrySpanClientHttpRequestInterceptor;
import java.util.Collections;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.client.RestTemplate;
import org.springframework.web.util.UriTemplateHandler;

@Configuration
class AppConfig {

  @Bean
  RestTemplate restTemplate(IScopes scopes) {
    RestTemplate restTemplate = new RestTemplate();
    SentrySpanClientHttpRequestInterceptor sentryRestTemplateInterceptor =
        new SentrySpanClientHttpRequestInterceptor(scopes);
    restTemplate.setInterceptors(Collections.singletonList(sentryRestTemplateInterceptor));
    return restTemplate;
  }
}
```

```java {tabTitle:Java (Spring 6)}
import io.sentry.IScopes;
import io.sentry.spring.jakarta.tracing.SentrySpanClientHttpRequestInterceptor;
import java.util.Collections;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.client.RestTemplate;
import org.springframework.web.util.UriTemplateHandler;

@Configuration
class AppConfig {

  @Bean
  RestTemplate restTemplate(IScopes scopes) {
    RestTemplate restTemplate = new RestTemplate();
    SentrySpanClientHttpRequestInterceptor sentryRestTemplateInterceptor =
        new SentrySpanClientHttpRequestInterceptor(scopes);
    restTemplate.setInterceptors(Collections.singletonList(sentryRestTemplateInterceptor));
    return restTemplate;
  }
}
```

```kotlin {tabTitle:Kotlin (Spring 5)}
import io.sentry.IScopes
import io.sentry.spring.tracing.SentrySpanClientHttpRequestInterceptor
import org.springframework.context.annotation.Bean
import org.springframework.context.annotation.Configuration
import org.springframework.web.client.RestTemplate
import org.springframework.web.util.UriTemplateHandler

@Configuration
class AppConfig {

  @Bean
  fun restTemplate(scopes: IScopes): RestTemplate {
    val sentryRestTemplateInterceptor = SentrySpanClientHttpRequestInterceptor(scopes)

    return RestTemplate().apply {
      interceptors = listOf(sentryRestTemplateInterceptor)
    }
  }
}
```

```kotlin {tabTitle:Kotlin (Spring 6)}
import io.sentry.IScopes
import io.sentry.spring.jakarta.tracing.SentrySpanClientHttpRequestInterceptor
import org.springframework.context.annotation.Bean
import org.springframework.context.annotation.Configuration
import org.springframework.web.client.RestTemplate
import org.springframework.web.util.UriTemplateHandler

@Configuration
class AppConfig {

  @Bean
  fun restTemplate(scopes: IScopes): RestTemplate {
    val sentryRestTemplateInterceptor = SentrySpanClientHttpRequestInterceptor(scopes)

    return RestTemplate().apply {
      interceptors = listOf(sentryRestTemplateInterceptor)
    }
  }
}
```
