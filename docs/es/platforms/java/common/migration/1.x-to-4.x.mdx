---
title: Migrar de la versión 1.x a la 4.x
sidebar_order: 1000
description: "Aprende a migrar de la versión 1.x a la 4.x"
---

<div id="migrating-from-iosentrysentry-1x-to-iosentrysentry-4x">
  ## Migración de `io.sentry:sentry` `1.x` a `io.sentry:sentry` `4.x`
</div>

Nuestra actualización de la API se alinea más estrechamente con la [API unificada](https://develop.sentry.dev/sdk/miscellaneous/unified-api/). Es una base de código completamente renovada, escrita para dar soporte a nuestro SDK de Android.

<div id="api-changes">
  ### Cambios de la API
</div>

<div id="set-tag">
  #### Configurar etiqueta
</div>

*Anterior*:

```java
Sentry.getContext().addTag("tagName", "tagValue");
```

```kotlin
Sentry.getContext().addTag("tagName", "tagValue")
```

*Actualizado:*

```java
Sentry.setTag("tagName", "tagValue");
```

```kotlin
Sentry.setTag("nombreDeEtiqueta", "valorDeEtiqueta")
```


<div id="capture-custom-exception">
  #### Capturar excepción personalizada
</div>

*Anterior*:

```java
try {
  int x = 1 / 0;
} catch (Exception e) {
  Sentry.capture(e);
}
```

```kotlin
try {
  val x = 1 / 0
} catch (e: Exception) {
  Sentry.capture(e)
}
```

*Novedades*:

```java
try {
  int x = 1 / 0;
} catch (Exception e) {
  Sentry.captureException(e);
}
```

```kotlin
try {
  val x = 1 / 0
} catch (e: Exception) {
  Sentry.captureException(e)
}
```


<div id="capture-a-message">
  #### Capturar un mensaje
</div>

*Anterior*:

```java
Sentry.capture("Esto es una prueba");
```

```kotlin
Sentry.capture("Esto es una prueba")
```

*Novedad*:

```java
Sentry.captureMessage("Esta es una prueba"); // SentryLevel.INFO de forma predeterminada
Sentry.captureMessage("Esta es una prueba", SentryLevel.WARNING); // o un nivel específico
```

```kotlin
Sentry.captureMessage("Esto es una prueba") // SentryLevel.INFO de forma predeterminada
Sentry.captureMessage("Esto es una prueba", SentryLevel.WARNING) // o un nivel específico
```


<div id="breadcrumbs">
  #### Ruta de navegación
</div>

*Anterior*:

```java
Sentry.getContext().recordBreadcrumb(
  new BreadcrumbBuilder().setMessage("El usuario realizó una acción").build()
);
```

```kotlin
Sentry.getContext().recordBreadcrumb(
  BreadcrumbBuilder().setMessage("El usuario realizó una acción").build()
)
```

*Nueva función*:

```java
Sentry.addBreadcrumb("El usuario realizó una acción");
```

```kotlin
Sentry.addBreadcrumb("El usuario realizó una acción")
```


<div id="user">
  #### Usuario
</div>

*Anterior*:

```java
Sentry.getContext().setUser(
  new UserBuilder().setEmail("hello@sentry.io").build()
);
```

```kotlin
Sentry.getContext().setUser(
  UserBuilder().setEmail("hello@sentry.io").build()
)
```

*Novedad*:

```java
User user = new User();
user.setEmail("hello@sentry.io");
Sentry.setUser(user);
```

```kotlin
val user = User().apply {
  email = "hello@sentry.io"
}
Sentry.setUser(user)
```


<div id="set-extra">
  #### Configurar extras
</div>

*Anterior*:

```java
Sentry.getContext().addExtra("extra", "thing");
```

```kotlin
Sentry.getContext().addExtra("extra", "thing")
```

*Novedad*:

```java
Sentry.setExtra("extra", "elemento");
```

```kotlin
Sentry.setExtra("extra", "elemento")
```


<div id="removed-properties">
  ### Propiedades eliminadas
</div>

Se han eliminado las siguientes propiedades de configuración:

- `buffer.dir` - se puede establecer con `SentryOptions#cacheDirPath`
- `buffer.size` - se puede establecer con `SentryOptions#cacheDirSize`
- `buffer.flushtime` - se puede establecer con `SentryOptions#flushTimeoutMillis`
- `buffer.shutdowntimeout`
- `buffer.gracefulshutdown`
- `async`
- `async.shutdowntimeout` - se puede establecer con `SentryOptions#shutdownTimeout`
- `async.gracefulshutdown`
- `async.queuesize` - se puede establecer con `SentryOptions#maxQueueSize`
- `async.threads`
- `async.priority`
- `compression`
- `maxmessagelength`
- `factory`
- `mdcTags`
- `extra` - se puede establecer en el alcance con `Scope#extra`

<div id="property-name-changes">
  ### Cambios en los nombres de propiedades
</div>

Las siguientes propiedades ya no se pueden definir mediante configuración externa y deben establecerse directamente en el objeto `SentryOptions` al inicializar Sentry:

- `sample.rate`: a través de `SentryOptions#sampleRate`
- `timeout`: a través de `SentryOptions#connectionTimeoutMillis` y `SentryOptions#readTimeoutMillis`

Consulta la página <PlatformLink to="/configuration/">Configuration</PlatformLink> para ver todas las propiedades de configuración disponibles.

<div id="tags">
  #### Etiquetas
</div>

*Anterior*:

```properties
tags=etiqueta1:valor1,etiqueta2:valor2
```

*Nueva*:

```properties
tags.tag1=valor1
tags.tag2=valor2
```


<div id="in-application-stack-frames">
  #### Marcos de pila “en la aplicación”
</div>

```java
stacktrace.app.packages=com.mycompany,com.other.name
```

*Nueva función*:

```properties
in-app-includes=com.mycompany,com.other.name
```

También puedes excluir determinados paquetes de los trazados de pila:

```properties
in-app-excludes=com.packages.to.exclude
```
