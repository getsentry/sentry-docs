---
title: Propagación de trazas
description: "Aprende a conectar eventos entre aplicaciones y servicios."
sidebar_order: 3000
---

Si el entorno de la aplicación que quieres observar con Sentry abarca más que un solo servicio o aplicación, el trazado distribuido puede aportar mucho valor.

<div id="what-is-distributed-tracing">
  ## ¿Qué es el trazado distribuido?
</div>

En el contexto de seguir eventos a través de un sistema distribuido, el trazado distribuido es una potente herramienta de depuración. Imagina tu aplicación como una extensa red de componentes interconectados. Por ejemplo, tu sistema podría estar desplegado en distintos servidores o tu aplicación podría dividirse en servicios de backend y frontend, cada uno con su propia pila tecnológica.

Cuando aparece un error o un problema de rendimiento, puede resultar difícil encontrar la causa raíz debido a la complejidad de un sistema de este tipo. El trazado distribuido te ayuda a seguir el recorrido de un evento mientras atraviesa esta red intrincada, registrando cada paso que da. Al examinar estas trazas, puedes reconstruir la secuencia de eventos que condujo al evento de interés, identificar los componentes específicos involucrados y comprender sus interacciones. Esta visibilidad detallada te permite diagnosticar y resolver problemas con mayor eficacia, mejorando en última instancia la fiabilidad y el rendimiento de tu sistema distribuido.

<div id="basic-example">
  ## Ejemplo básico
</div>

Aquí tienes un ejemplo que muestra un rastreo distribuido en Sentry:

<Include name="common-imgs/distributed-trace-in-sentry" />

Este rastreo distribuido muestra que el `pageload` de una app de Vue realiza una solicitud a un backend en Python, que luego llama al endpoint `/api` de un microservicio en Ruby.

En segundo plano, Sentry lee y sigue propagando dos encabezados HTTP entre tus aplicaciones:

* `sentry-trace`
* `baggage`

Si ejecutas aplicaciones JavaScript en tu sistema distribuido, asegúrate de agregar esos dos encabezados a tu lista de permitidos de CORS y de que no sean bloqueados ni eliminados por tus servidores proxy, gateways o firewalls.

<div id="how-to-use-distributed-tracing">
  ## ¿Cómo usar el seguimiento distribuido?
</div>

<PlatformContent includePath="distributed-tracing/how-to-use/" />

Recuerda que, para propagar la información de seguimiento en todo tu sistema distribuido, debes usar Sentry en todos los servicios y aplicaciones involucrados. Consulta la documentación del SDK correspondiente para saber cómo habilitar el seguimiento distribuido en cada plataforma.

<div id="tracepropagationtargets">
  ### tracePropagationTargets
</div>

El SDK de Java adjunta los encabezados `sentry-trace` y `baggage` a todas las solicitudes salientes de forma predeterminada. Para limitarlo solo a ciertas URL, agrega esas URL a la allowlist `tracePropagationTargets` (puedes usar tanto cadenas como expresiones regulares). El SDK entonces solo adjuntará los encabezados `sentry-trace` y `baggage` a las solicitudes salientes que coincidan con la allowlist.

<Alert>
  La opción `tracePropagationTargets` puede contener URL completas (p. ej., &quot;https://api.myproject.org/request/path&quot;), subcadenas (p. ej., &quot;api.myproject.org&quot;) o expresiones regulares (p. ej., &quot;https://[\w]*.myproject.org/.*&quot;).
</Alert>

Dado que el valor de `tracePropagationTargets` es `".*"` de forma predeterminada, los encabezados de trazado se adjuntan a todas las solicitudes, a menos que se especifique lo contrario.

```java {tabTitle:Java}
Sentry.init(context, options -> {
    final ArrayList<String> tracePropagationTargets = new ArrayList<>();
    tracePropagationTargets.add("https://api.myproject.org/");

    options.setDsn("___PUBLIC_DSN___");
    options.setTracePropagationTargets(tracePropagationTargets);
});
```

```kotlin {tabTitle:Kotlin}
Sentry.init(context, { options ->
    options.setDsn("___PUBLIC_DSN___")
    options.setTracePropagationTargets(listOf(
        "https://api.myproject.org/"
    ))
})
```

<div id="w3c-traceparent-header-support">
  ## Compatibilidad con el Header W3C Traceparent
</div>

A partir de la versión 8.22.0, el SDK de Java también admite el header HTTP `traceparent` para solicitudes salientes. Este header sigue la [especificación W3C Trace Context](https://develop.sentry.dev/sdk/telemetry/traces/distributed-tracing/#w3c-trace-context-header) y ofrece interoperabilidad con otros sistemas de trazado que admiten este estándar.

Para habilitar la propagación del header W3C `traceparent`, establece la opción [`propagateTraceparent`](/es/platforms/java/configuration/options/#propagateTraceparent) en `true`. Cuando está habilitado, el header `traceparent` se propagará junto con los headers `sentry-trace` y `baggage` en las solicitudes HTTP salientes. Al igual que los demás headers, se adjunta a todas las solicitudes de forma predeterminada, o solo a las solicitudes que coincidan con tu configuración de `tracePropagationTargets` si has especificado una.