---
title: Configurar comentarios de usuarios
sidebar_title: Comentarios de usuarios
description: "Obtén más información sobre cómo recopilar comentarios de los usuarios cuando ocurre un evento. Sentry asocia los comentarios con el evento original, brindándote información adicional sobre los problemas."
sidebar_order: 6000
---

Sentry permite recopilar comentarios de los usuarios y, opcionalmente, asociarlos con un evento de error.

<Alert level="info">

La función de comentarios de usuarios requiere la versión `1.1.0` o superior del SDK de Sentry para Godot.

</Alert>

<div id="using-user-feedback-ui">
  ## Uso de la interfaz de comentarios de usuario
</div>

El SDK de Sentry para Godot incluye una interfaz de comentarios de usuario de referencia, que puedes encontrar en `addons/sentry/user_feedback/`. Esta carpeta contiene:

- `user_feedback_gui.tscn` + script: Una escena completa de interfaz de comentarios de usuario, lista para usar, que se adapta automáticamente a distintas resoluciones de la ventana de visualización.
- `user_feedback_form.tscn` + script: Un formulario de comentarios de usuario minimalista, diseñado para integrarse en una interfaz existente.
- `sentry_theme.tres`: El archivo de tema de referencia utilizado para personalizar la apariencia de la interfaz de comentarios de usuario.

Para una implementación rápida, arrastra y suelta `user_feedback_gui.tscn` desde la carpeta del complemento a tu árbol de escenas bajo un nodo `CanvasLayer` y llama a `show()` para mostrar el formulario de comentarios. El formulario se adapta automáticamente a distintas resoluciones de la ventana de visualización y gestiona su propia visibilidad, ocultándose cuando el usuario hace clic en “Submit” (envía el comentario a Sentry) o “Cancel”.

![Formulario de comentarios](./img/user_feedback_form.png)

Puedes personalizar qué elementos se muestran activando o desactivando componentes opcionales como el logotipo, el campo de nombre y el campo de correo electrónico desde las propiedades del Inspector. La propiedad `minimum_words` controla el número mínimo de palabras requerido en el mensaje.

Para personalizar la apariencia del formulario, usa el archivo de tema de referencia proporcionado (`sentry_theme.tres`). Puedes duplicar este archivo y editarlo para crear un estilo personalizado, y luego asignar tu tema a la propiedad `theme` en el Inspector del nodo de la interfaz de comentarios. Se puede usar para personalizar fuentes, colores, espaciado, etc. Para personalizaciones más avanzadas que impliquen cambios de diseño, copia la carpeta completa `user_feedback/` en tu proyecto y modifica las escenas y scripts según sea necesario.

<Alert level="success" title="Consejo">

Agrega `user_feedback_form.tscn` como vista previa mientras editas el archivo de tema para ver tus cambios en tiempo real.

</Alert>

<div id="integrating-the-form-into-existing-ui">
  ### Integración del formulario en una interfaz existente
</div>

Para integrar una interfaz personalizada, usa `user_feedback_form.tscn`. Esta escena de componente proporciona un panel flexible que puede integrarse en otros controles de la interfaz. A diferencia de la GUI independiente, tendrás que gestionar su visibilidad manualmente. El formulario expone dos señales para manejar las interacciones del usuario: `feedback_submitted` (se activa cuando se envía el feedback) y `feedback_cancelled` (se activa cuando el usuario cancela la operación). Después de instanciar el formulario dentro de tu escena de interfaz, puedes usar las señales proporcionadas para ocultarlo cuando ya no sea necesario (o realizar alguna otra acción):

```GDScript
# Asumiendo que ya agregaste el formulario a tu escena con el nombre único "UserFeedbackForm".
@onready var user_feedback_form = %UserFeedbackForm

func _ready():
	user_feedback_form.feedback_submitted.connect(
		func(_feedback: SentryFeedback) -> void:
			user_feedback_form.hide()
			print("Comentarios del usuario enviados.")
	)
	user_feedback_form.feedback_cancelled.connect(
		func() -> void:
			user_feedback_form.hide()
			print("Comentarios del usuario cancelados.")
	)
```

Para personalizar la apariencia del formulario, usa el archivo de tema de referencia proporcionado (`sentry_theme.tres`), que puedes duplicar para crear un estilo de interfaz personalizado. Luego, asigna tu tema personalizado a la propiedad `theme` del formulario en el Inspector para aplicar los cambios de estilo.


<div id="user-feedback-api">
  ## API de comentarios de usuario
</div>

La API de comentarios de usuario te permite recopilar comentarios mientras utilizas tus propios controles de UI. Puedes enviar comentarios directamente creando una instancia de la clase `SentryFeedback`, estableciendo el campo obligatorio `message` y los opcionales, y enviándolos con `SentrySDK.capture_feedback(feedback)`.

```GDScript
var feedback := SentryFeedback.new()
feedback.message = "¡Estoy atascado en la pared!"
feedback.contact_email = "bob@example.com"
feedback.name = "Bob"

SentrySDK.capture_feedback(feedback)
```

Sentry puede, de forma opcional, vincular este feedback a un evento, brindándote información adicional sobre los problemas. Sentry necesita el `event_id` para poder asociar el feedback del usuario con el evento correspondiente. Por ejemplo, para obtener el `event_id`, puedes usar <PlatformLink to="/configuration/options/#before_send">before&#95;send</PlatformLink> o el valor de retorno del método que captura un evento.

```GDScript
var event_id = SentrySDK.capture_message("Un evento que recibirá comentarios del usuario.")
# ...
feedback.associated_event_id = event_id
```
