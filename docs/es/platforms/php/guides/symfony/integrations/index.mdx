---
title: Integraciones
description: "Conoce las integraciones automáticas que ofrece Sentry y cómo configurarlas."
sidebar_order: 500
---

<div id="default-integrations">
  ## Integraciones predeterminadas
</div>

Estas integraciones vienen habilitadas por defecto e se integran en la
biblioteca estándar o en el propio intérprete. Están documentadas para que sepas qué hacen y puedas desactivarlas si generan problemas.

Para desactivar las integraciones del sistema en Symfony, establece `options.default_integrations: false` en la configuración de tu bundle:

```yaml {filename:config/packages/sentry.yaml}
sentry:
    options:
        default_integrations: false
```

<div id="exceptionlistenerintegration">
  ### ExceptionListenerIntegration
</div>

Esta integración captura todas las excepciones globales no controladas y emite eventos cuando ocurre un error.

Lo hace garantizando que el `ErrorHandler` de Sentry esté registrado y añadiéndole un callback como listener de excepciones.

<div id="errorlistenerintegration">
  ### ErrorListenerIntegration
</div>

Esta integración se engancha al `error_handler` global de PHP y emite eventos cuando ocurre un error.

Lo hace asegurándose de que el `ErrorHandler` de Sentry esté registrado y añadiendo un callback como oyente de errores. De forma predeterminada, el `ErrorHandler` reserva 16 KiB de memoria para manejar errores fatales. Al gestionar errores por falta de memoria, el `ErrorHandler` además incrementa el [`memory_limit`](https://www.php.net/manual/en/ini.core.php#ini.memory-limit) en 5 MiB adicionales para disponer de espacio suficiente y enviar el evento de falta de memoria a Sentry. Este cambio se realiza solo una vez y solo afecta al manejo del error por falta de memoria.

Para cambiar la cantidad de memoria reservada para el manejo de errores fatales o el incremento de `memory_limit` al gestionar un error por falta de memoria, puedes registrar tú mismo el manejador de errores fatales antes de llamar a `\Sentry\init(...)`:

```php
// La cantidad de memoria reservada para cada solicitud (en bytes); debe ser un entero positivo. El valor predeterminado es 16 KiB
$errorHandler = \Sentry\ErrorHandler::registerOnceFatalErrorHandler(16 * 1024);
// La cantidad de memoria, en bytes, a la que aumentar `memory_limit` al manejar un error por falta de memoria. También se puede establecer en `null` para desactivar el aumento de `memory_limit`. El valor predeterminado es 5 MiB
$errorHandler->setMemoryLimitIncreaseOnOutOfMemoryErrorInBytes(5 * 1024 * 1024);
```

Para algunos frameworks o proyectos, existen integraciones específicas, tanto oficiales como de terceros, que registran automáticamente los manejadores de errores. Consulta su documentación.

De forma predeterminada, la opción error*types toma el valor devuelto por la función `error_reporting()`, que puede cambiar en tiempo de ejecución. Como alternativa, puedes fijar la opción a un valor concreto estableciéndola como una máscara de bits de las constantes de PHP `E*\*` en `\Sentry\init()`. En ese caso, Sentry registrará únicamente errores de esos tipos específicos, independientemente del nivel de informe actual.

<div id="fatalerrorlistenerintegration">
  ### FatalErrorListenerIntegration
</div>

Esta integración captura todos los errores fatales y emite los eventos correspondientes.

Lo hace asegurándose de que el `ErrorHandler` de Sentry esté registrado y añadiéndole una función de retorno (callback) como escucha de errores fatales.

<div id="requestintegration">
  ### RequestIntegration
</div>

Esta integración añade a los datos de la solicitud del evento:

* Método HTTP
* URL (incluida la cadena de consulta)
* Cuerpo (solo si el tamaño del cuerpo es de 10 KB o menos)

Si la <PlatformLink to="/configuration/options/#send_default_pii">opción send&#95;default&#95;pii</PlatformLink> está activada, también enviará la siguiente PII:

* Dirección IP
* Cookies
* Cabeceras

<div id="transactionintegration">
  ### TransactionIntegration
</div>

Esta integración establece el atributo `transaction` del evento al valor encontrado en la carga útil sin procesar del evento o, si está presente, al de la variable de servidor `PATH_INFO`.

<div id="framecontextifierintegration">
  ### FrameContextifierIntegration
</div>

Esta integración lee fragmentos de código alrededor de la línea donde se originó un error.

<div id="environmentintegration">
  ### EnvironmentIntegration
</div>

Esta integración enriquece los datos del evento con información del entorno de ejecución de PHP y del sistema operativo del servidor.

<div id="modulesintegration">
  ### ModulesIntegration
</div>

Esta integración registra todas las versiones de los paquetes instalados con Composer junto con los detalles del evento; también se incluye el proyecto principal.

<div id="custom-integrations">
  ## Integraciones personalizadas
</div>

Puedes personalizar la lista de integraciones sin desactivar las predeterminadas usando la opción `options.integrations` en Symfony. Proporciona IDs de servicio para las clases que implementen `\Sentry\Integration\IntegrationInterface`.

```yaml {filename:config/packages/sentry.yaml}
sentry:
    options:
        integrations:
            - "sentry.integration.mi_integracion_personalizada"
```

Registra tu integración como servicio:

```yaml {filename:config/services.yaml}
services:
    sentry.integration.my_custom_integration:
        class: App\Sentry\Integration\MyCustomIntegration
```

Si quieres eliminar una o más integraciones predeterminadas, establece `options.default_integrations: false` y luego enumera explícitamente las integraciones que deseas habilitar mediante `options.integrations`.

<div id="use-a-callback-to-customize-integrations">
  ### Usa un callback para personalizar integraciones
</div>

Para casos avanzados, puedes proporcionar un callback (servicio) en lugar de una lista fija para personalizar integraciones. Consulta cómo hacer referencia a invocables en la configuración de Symfony aquí: [Invocables en las opciones de Symfony](/es/platforms/php/guides/symfony/configuration/symfony-options/#callables).