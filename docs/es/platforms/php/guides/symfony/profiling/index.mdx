---
title: Configurar la generación de perfiles
sidebar_title: Generación de perfiles
description: "Obtén más información sobre cómo configurar nuestra integración de generación de perfiles y comienza a perfilar tu código."
sidebar_order: 5000
---

<Alert>
  La generación de perfiles para PHP es compatible con Sentry Symfony SDK a partir de la versión `4.7.0`.
</Alert>

Con [Profiling](/es/product/explore/profiling/), Sentry te permite recopilar y analizar perfiles de rendimiento de usuarios reales en producción para ofrecerte una visión completa de cómo se comporta tu aplicación en diversos entornos.

Detrás de escena, usamos el generador de perfiles por muestreo de Wikipedia, [Excimer](https://github.com/wikimedia/mediawiki-php-excimer).
La extensión de PHP Excimer es compatible con PHP 7.2 y versiones posteriores.

<Alert>
  Excimer requiere Linux o macOS y no es compatible con Windows.
</Alert>

<div id="installation">
  ## Instalación
</div>

Así puedes instalar Excimer con un gestor de paquetes de Linux, PECL o compilándolo desde el código fuente.

<div id="linux-package-manager">
  ### Administrador de paquetes de Linux
</div>

```bash
apt-get install php-excimer
```

Consulta https://www.mediawiki.org/wiki/Excimer para obtener distribuciones adicionales.

<div id="pecl">
  ### PECL
</div>

```bash
pecl install excimer
```

Consulta https://pecl.php.net/package/excimer para obtener más información.

<div id="build-from-source">
  ### Compilar desde el código fuente
</div>

```bash
git clone https://github.com/wikimedia/mediawiki-php-excimer.git

cd excimer/
phpize && ./configure && make && sudo make install
```

Según tu entorno, es posible que debas habilitar la extensión Excimer después.

```
phpenmod -s fpm excimer
# o
phpenmod -s apache2 excimer
```

<div id="enable-tracing">
  ## Habilitar el tracing
</div>

El producto de tracing de Sentry debe estar habilitado para que el perfilado funcione.
Consulta la documentación de <PlatformLink to="/tracing/">configuración de rendimiento</PlatformLink> para obtener más información.

{/* <!-- prettier-ignore --> */}

```yaml {filename:config/packages/sentry.yaml}
sentry:
    options:
        traces_sample_rate: 1.0
```

<div id="enable-profiling">
  ## Habilitar la creación de perfiles
</div>

{/* <!-- prettier-ignore --> */}

```yaml {filename:config/packages/sentry.yaml}
sentry:
    options:
        traces_sample_rate: 1.0
        # Establece una tasa de muestreo para el perfilado - esto es relativo a traces_sample_rate
        profiles_sample_rate: 1.0
```

<div id="improve-response-time">
  ## Mejorar el tiempo de respuesta
</div>

El tiempo de respuesta puede verse afectado cuando usas las funcionalidades de rendimiento en tu aplicación Symfony (según el `traces_sample_rate` que hayas configurado).
Si tu servidor web utiliza FastCGI, nuestro SDK usa el [evento `kernel.terminate`](https://symfony.com/doc/current/components/http_kernel.html#8-the-kernel-terminate-event), lo que significa que la respuesta se envía a la persona usuaria antes de que los datos de perfilado se envíen a Sentry.

Si tu servidor web no usa FastCGI, puedes ejecutar [Relay](/es/product/relay/getting-started/) localmente en la misma máquina o en una red local que actúe como proxy/agente. Al hacerlo, el proceso de PHP enviará solicitudes a tu Relay local, que luego las reenviará a Sentry, en lugar de enviarlas directamente a Sentry.

Para comenzar a usar Relay, consulta nuestra documentación para [empezar](/es/product/relay/getting-started/).
Recomendamos usar Relay en modo `managed` (que es el valor predeterminado).

Sigue las instrucciones en la documentación de Relay para enviar un evento de prueba a Sentry a través de Relay.
No olvides actualizar tu `DSN` para que apunte a tu instancia de Relay en ejecución.
Después de configurar Relay, deberías notar una mejora notable en el impacto sobre tu servidor.

<div id="troubleshooting">
  ## Solución de problemas
</div>

Si no ves datos de perfilado en [sentry.io](https://sentry.io), puedes probar lo siguiente:

* Asegúrate de que <PlatformLink to="/tracing/">Tracing esté habilitado</PlatformLink>.
* Verifica que la instrumentación automática esté enviando datos de rendimiento a Sentry desde la página **Performance** en [sentry.io](https://sentry.io).
* Si la instrumentación automática no está enviando datos de rendimiento, intenta usar <PlatformLink to="/tracing/instrumentation/custom-instrumentation/">instrumentación personalizada</PlatformLink>.