---
title: Configurar el perfilado
sidebar_title: Perfilado
description: "Más información sobre cómo configurar nuestra integración de perfilado y empezar a perfilar tu código."
sidebar_order: 5000
---

<Alert>
  El perfilado para PHP es compatible con Sentry Laravel SDK a partir de la versión `3.3.0`.
</Alert>

Con [Profiling](/es/product/explore/profiling/), Sentry te permite recopilar y analizar perfiles de rendimiento de usuarios reales en producción para ofrecerte una visión completa de cómo rinde tu aplicación en distintos entornos.

Internamente usamos el muestreador por muestreo de Wikipedia, [Excimer](https://github.com/wikimedia/mediawiki-php-excimer).
La extensión de PHP Excimer es compatible con PHP 7.2 y versiones posteriores.

<Alert>
  Excimer requiere Linux o macOS y no es compatible con Windows.
</Alert>

<div id="installation">
  ## Instalación
</div>

Así puedes instalar Excimer con un gestor de paquetes de Linux, PECL o compilándolo desde el código fuente.

<div id="linux-package-manager">
  ### Administrador de paquetes de Linux
</div>

```bash
apt-get install php-excimer
```

Consulta https://www.mediawiki.org/wiki/Excimer para ver distribuciones adicionales.

<div id="pecl">
  ### PECL
</div>

```bash
pecl install excimer
```

Consulta https://pecl.php.net/package/excimer para más información.

<div id="build-from-source">
  ### Compilar desde el código fuente
</div>

```bash
git clone https://github.com/wikimedia/mediawiki-php-excimer.git

cd excimer/
phpize && ./configure && make && sudo make install
```

Según tu entorno, es posible que tengas que habilitar la extensión Excimer después.

```
phpenmod -s fpm excimer
# o
phpenmod -s apache2 excimer
```

<div id="enable-tracing">
  ## Habilitar el rastreo
</div>

El producto de rastreo de Sentry debe estar habilitado para que el perfilado funcione.
Consulta la documentación de <PlatformLink to="/tracing/">configuración de rendimiento</PlatformLink> para obtener información más detallada.

```php {filename:config/sentry.php}
'traces_sample_rate' => 1.0,
```

<div id="enable-profiling">
  ## Habilitar la creación de perfiles
</div>

```php {filename:config/sentry.php}
'traces_sample_rate' => 1.0,
// Establece una frecuencia de muestreo para el perfilado; es relativa a traces_sample_rate
'profiles_sample_rate' => 1.0,
```

<div id="improve-response-time">
  ## Mejorar el tiempo de respuesta
</div>

El tiempo de respuesta puede verse algo afectado cuando usas las funciones de rendimiento en tu aplicación Laravel (según el `traces_sample_rate` que hayas configurado).
Si tu servidor web usa FastCGI, nuestro SDK emplea un [`middleware terminable`](https://laravel.com/docs/10.x/middleware#terminable-middleware), lo que significa que la respuesta se envía a la persona usuaria antes de enviar los datos de perfilado a Sentry.

Si tu servidor web no usa FastCGI, puedes ejecutar [Relay](/es/product/relay/getting-started/) localmente en la misma máquina o en una red local que actúe como proxy/agente. Al hacerlo, el proceso de PHP enviará las solicitudes a tu Relay local, que luego las reenviará a Sentry, en lugar de enviarlas directamente a Sentry.

Para empezar a usar Relay, consulta nuestra documentación de [primeros pasos](/es/product/relay/getting-started/).
Recomendamos usar Relay en modo `managed` (que es el valor predeterminado).

Sigue las instrucciones en la documentación de Relay para enviar un evento de prueba a Sentry a través de Relay.
No olvides actualizar tu `DSN` para que apunte a tu instancia de Relay en ejecución.
Después de configurar Relay, deberías notar una mejora considerable en el impacto sobre tu servidor.