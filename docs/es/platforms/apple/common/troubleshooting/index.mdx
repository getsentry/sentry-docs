---
title: Solución de problemas
description: "Diagnostica y resuelve problemas comunes del SDK de Cocoa."
sidebar_order: 9000
---

## &quot;Falta la declaración de API&quot; tras la revisión de la App Store

A partir del 1 de mayo de 2024, Apple exige que todas las apps enviadas a la App Store proporcionen una lista de las API relacionadas con la privacidad que usan, incluidos los motivos por los que las utilizan. Si recibiste un correo de Apple con el mensaje &quot;ITMS-91053: Missing API declaration&quot;, tu app no cumple los requisitos. Para solucionarlo, sigue nuestra guía [Apple Privacy Manifest](/es/platforms/apple/data-management/apple-privacy-manifest).

<div id="wrong-app-start-data">
  ## Datos de inicio de la app incorrectos
</div>

A partir de iOS 15, el sistema puede [precalentar](https://developer.apple.com/documentation/uikit/app_and_environment/responding_to_the_launch_of_your_app/about_the_app_launch_sequence#3894431) tu app creando el proceso antes de que el usuario la abra. En esos casos, no podemos medir de forma fiable el inicio de la app, así que lo descartamos desde [sentry-cocoa 7.18.0](https://github.com/getsentry/sentry-cocoa/releases/tag/7.18.0). Estamos trabajando en una solución. Sigue el [issue en GitHub](https://github.com/getsentry/sentry-cocoa/issues/1897) para más detalles.

<div id="high-slow-and-frozen-frames-rate">
  ## Alta tasa de fotogramas lentos y congelados
</div>

Recomendamos actualizar al menos a la versión [7.18.1](https://github.com/getsentry/sentry-cocoa/releases/tag/7.18.1); de lo contrario, el SDK podría reportar un porcentaje demasiado alto de fotogramas lentos.

<div id="falsely-reported-out-of-memory-crashes">
  ## Informes erróneos de bloqueos por falta de memoria
</div>

Recomendamos actualizar al menos a la [7.11.0](https://github.com/getsentry/sentry-cocoa/releases/tag/7.11.0), porque en versiones anteriores el SDK podía informar de forma errónea bloqueos por falta de memoria cuando una app se queda colgada y el usuario la cierra manualmente.

<div id="crashes-with-http-auto-performance-instrumentation">
  ## Fallos con la instrumentación automática de rendimiento HTTP
</div>

Recomendamos actualizar al menos a la versión [7.5.3](https://github.com/getsentry/sentry-cocoa/releases/tag/7.5.3), porque la instrumentación de HTTP puede provocar fallos. Como alternativa, también puedes <PlatformLink to="/tracing/instrumentation/automatic-instrumentation/#http-instrumentation">desactivar esta función</PlatformLink>.

<div id="duplicated-crashes-event-with-screenshots">
  ## Evento de bloqueos duplicados con capturas de pantalla
</div>

Desde que se introdujeron las capturas de pantalla para los bloqueos en la versión [7.20.0](https://github.com/getsentry/sentry-cocoa/releases/tag/7.20.0), los proyectos con &#39;enableCaptureScreenshot&#39; habilitado recibieron informes de bloqueos duplicados. Por lo tanto, recomendamos actualizar al menos a la versión [7.25.0](https://github.com/getsentry/sentry-cocoa/releases/tag/7.25.0) para solucionar este problema.

<div id="my-first-view-controller-has-no-performance-trace">
  ## Mi primer view controller no tiene traza de rendimiento
</div>

Si tu proyecto aún inicializa una UIWindow durante `application(_:didFinishLaunchingWithOptions:)` y planeas usar un rastreador automático de rendimiento para UIViewController, asegúrate de inicializar la ventana, establecer el view controller raíz y luego inicializar SentrySDK.

<div id="i-use-tuist-and-the-project-crashes-when-i-update-sentry">
  ## Uso Tuist y el proyecto se bloquea al actualizar Sentry
</div>

Si usas Tuist para gestionar tus dependencias de SPM, añade la siguiente configuración en tu `Dependencies.swift` dentro de `targetSettings`

```Swift
"Sentry": ["USE_HEADERMAP": "YES"]
```

<div id="sentryfilemanager-failed-to-write-data-to-path">
  ## SentryFileManager: No se pudieron escribir datos en la ruta
</div>

Sentry escribe y lee archivos en una ruta específica del directorio de caché de la app. Esta ruta se crea durante la inicialización del SDK.
Si ves un mensaje de registro como este: `[SentryFileManager:439] Failed to write data to path`, significa que la ruta de caché ya no existe.
Revisa tu app por cualquier proceso que limpie la caché durante la ejecución y evita eliminar el directorio `io.sentry`.

<div id="my-app-is-not-symbolicated-and-i-use-app-store-connect">
  ## Mi app no está simbolicada y uso App Store Connect
</div>

Desde Xcode 14, App Store Connect ya no ofrece los símbolos de depuración para descargar; consulta las [Xcode Release Notes](https://developer.apple.com/documentation/xcode-release-notes/xcode-14-release-notes#Deprecations). Utiliza otro método para subir los símbolos de depuración siguiendo la [documentación](/es/platforms/apple/dsym/).

<div id="crash-in-sentrysubclassfinderactonsubclassesofviewcontrollerinimage">
  ## Fallo en `SentrySubClassFinder.actOnSubclassesOfViewControllerInImage`
</div>

Supón que tu app se bloquea en `SentrySubClassFinder.actOnSubclassesOfViewControllerInImage` con un rastreo de pila similar al siguiente:

```
#0	0x0000000000000000 in 0x00000000 ()
#1	0x00000001043eb498 en type metadata accessor para CapturedStructure? ()
#2	0x00000001043eb3ac en type metadata completion function para RoomCaptureTools ()
#3	0x000000018f9c7930 in swift::MetadataCacheEntryBase<(anonymous namespace)::SingletonMetadataCacheEntry, int>::doInitialization(swift::MetadataWaitQueue::Worker&, swift::MetadataRequest) ()
#4	0x000000018f9b8cf8 in swift_getSingletonMetadata ()
#5	0x00000001043eb360 en type metadata accessor para RoomCaptureTools ()
#6	0x00000001043eb314 en ObjC metadata update function para RoomCaptureTools ()
#7	0x000000018017d938 en realizeClassMaybeSwiftMaybeRelock(objc_class*, mutex_tt<false>&, bool) ()
#8	0x0000000180183548 en look_up_class ()
#9	0x00000001807e7cb8 en NSClassFromString ()
#10	0x000000010514b4c0 en __69-[SentrySubClassFinder actOnSubclassesOfViewControllerInImage:block:]
```

Este fallo podría deberse a un [posible error en Swift](https://github.com/apple/swift/issues/72657)
que se desencadena al intentar obtener la definición de una clase que hace referencia a una clase de RoomPlan o
ActivityKit en una versión anterior de iOS que no admite RoomPlan ni ActivityKit.
Por ejemplo, ejecutar el siguiente código en iOS 15 con el Sentry Cocoa SDK habilitado
provoca el fallo mencionado:

```swift
import RoomPlan

@available(iOS 17.0, *)
class RoomPlanWrapper {
    private var finalResults: CapturedStructure?
}
```

Puedes solucionar esto excluyendo la clase mencionada del swizzling usando `swizzleClassNameExcludes`,
disponible a partir de la versión `8.23.0` del Sentry Cocoa SDK y posteriores:

```swift
SentrySDK.start { options in
    options.swizzleClassNameExcludes = ["RoomPlanWrapper"]
}
```

```objc {tabTitle:Objective-C}
[SentrySDK startWithConfigureOptions:^(SentryOptions *options) {
     options.swizzleClassNameExcludes = [NSSet setWithObjects:@"RoomPlanWrapper", nil];
}];
```

Si no puedes actualizar el SDK de Sentry para Cocoa a la versión `8.23.0`, también puedes desactivar el swizzling, como se muestra a continuación.
Sin embargo, esto también desactivará algunas funciones útiles, como el tracing automático y las breadcrumbs de red.

```swift {tabTitle:Swift}
import Sentry

SentrySDK.start { options in
    options.enableSwizzling = false
}
```

```objc {tabTitle:Objective-C}
@import Sentry;

[SentrySDK startWithConfigureOptions:^(SentryOptions *options) {
    options.enableSwizzling = NO;
}];
```

<div id="xcode-compiler-error-invalid-version">
  ## Error del compilador de Xcode: versión no válida
</div>

Los errores `error: invalid version number in '-target arm64-apple-ios9999'` e `invalid version number in '-target arm64-apple-ios10.15-macabi'` se deben a un error de Xcode. Para solucionarlo, actualiza el SDK de Cocoa a la versión 8.26.0 o posterior, o mantente en la versión 8.21.0.

También puedes probar a cambiar a Sentry-Dynamic al integrar el SDK de Cocoa mediante Swift Package Manager con estos pasos:

1. Abre tu `.xcproject` en Xcode.
2. Selecciona tu target en Xcode, en &quot;Targets&quot;.
3. Ve a &quot;Frameworks, Libraries, and Embedded Content&quot;.
4. Haz clic en el signo &quot;+&quot; para abrir el cuadro de diálogo y elegir frameworks y librerías para añadir.
5. Selecciona &quot;Sentry-Dynamic&quot; y haz clic en &quot;Add&quot;.
6. Elimina &quot;Sentry&quot; para asegurarte de que solo &quot;Sentry-Dynamic&quot; aparezca en &quot;Frameworks, Libraries, and Embedded Content&quot;.
7. Compila tu proyecto.

Si compilas tu proyecto con Xcode 15.4 y nada de lo anterior funciona, [personal de Apple en el foro de Apple](https://forums.developer.apple.com/forums/thread/751573)
indica que se debe a un error en Xcode 15.4. Recomiendan mantenerse en Xcode 15.3 hasta que Apple corrija este error en una versión futura de Xcode.

<div id="release-health-misses-unhandled-events-and-missing-mach-info">
  ## La salud de la versión omite eventos no gestionados e información de Mach faltante
</div>

Si la página de salud de la versión muestra menos eventos en la pestaña de no gestionados, a tus eventos les falta la propiedad unhandled o la información de Mach; actualiza el SDK de Cocoa a la versión 8.33.0 o superior, o mantente en la versión 8.30.0.

Introdujimos un error con una refactorización [#4101](https://github.com/getsentry/sentry-cocoa/pull/4101) publicada en la 8.30.1, que provocó que los eventos no gestionados/de bloqueo no tuvieran la propiedad unhandled ni la información de Mach, requerida para que la salud de la versión muestre eventos en la pestaña de no gestionados. Es importante mencionar que este error no afecta las estadísticas de salud de la versión, como las tasas de sesiones o usuarios sin bloqueos.

<div id="sandbox-error-using-cocoapods">
  ## Error de sandbox al usar CocoaPods
</div>

Después de configurar CocoaPods con un `Podfile` y ejecutar `pod install` para preparar el proyecto, es posible que veas el siguiente error al compilar el target:

```
error: Sandbox: rsync.samba(42924) deny(1) file-read-data <path/to/your/app>/Frameworks/Sentry.framework/Sentry.bundle (en el objetivo 'test' del proyecto 'test')
error: Sandbox: rsync.samba(42925) deny(1) file-read-data <path/to/your/app>/Frameworks/Sentry.framework/_CodeSignature/CodeResources (en el objetivo 'test' del proyecto 'test')
error: Sandbox: rsync.samba(42925) deny(1) file-write-create <path/to/your/app>/Frameworks/Sentry.framework/_CodeSignature/.CodeResources.a2sA9v (en el objetivo 'test' del proyecto 'test')
mkdir -p <path/to/your/app>/Frameworks
rsync --delete -av --filter P .*.?????? --links --filter "- CVS/" --filter "- .svn/" --filter "- .git/" --filter "- .hg/" --filter "- Headers" --filter "- PrivateHeaders" --filter "- Modules" "<path/to/derived/data>/Sentry/Sentry.framework" "<path/to/your/app>/Frameworks"
building file list ... done
rsync: opendir "<path/to/your/app>/Frameworks/Sentry.framework/Sentry.bundle" failed: Operation not permitted (1)
Error de E/S detectado; se omite la eliminación de archivos
Sentry.framework/_CodeSignature/CodeResources
rsync: mkstemp "<path/to/your/app>/Frameworks/Sentry.framework/_CodeSignature/.CodeResources.a2sA9v" failed: Operation not permitted (1)

sent 15034 bytes  received 42 bytes  30152.00 bytes/sec
total size is 4950281  speedup is 328.36
rsync error: some files could not be transferred (code 23) at /AppleInternal/Library/BuildRoots/5bb93434-bef0-11ef-bef2-d285688f7a47/Library/Caches/com.apple.xbs/Sources/rsync/rsync/main.c(996) [sender=2.6.9]
```

Aunque parece estar relacionado con Sentry, en realidad lo provoca la función de aislamiento (sandbox) para scripts de usuario introducida en [Xcode 14](https://developer.apple.com/documentation/xcode-release-notes/xcode-14-release-notes), que está habilitada de forma predeterminada. Para solucionarlo, ve a la configuración del target de tu proyecto y establece la opción &quot;Enable User Script Sandbox&quot; en `NO`.

## El inicializador required &quot;init(from:)&quot; debe ser proporcionado por la subclase

Desde la versión [8.45.0](https://github.com/getsentry/sentry-cocoa/blob/main/CHANGELOG.md#8450) del SDK de Cocoa y posteriores,
puedes encontrarte con un error de compilación: “el inicializador required ‘init(from:)’ debe ser proporcionado por la subclase…”, al crear una subclase de cualquiera de las siguientes clases:

* `SentryBreadcrumb`
* `SentryDebugMeta`
* `SentryEvent`
* `SentryException`
* `SentryFrame`
* `SentryGeo`
* `SentryId`
* `SentryMechanism`
* `SentryMechanismMeta`
* `SentryMessage`
* `SentryNSError`
* `SentryRequest`
* `SentryStacktrace`
* `SentryThread`
* `SentryUser`

Puedes solucionarlo evitando subclasificar las clases afectadas. Estrictamente hablando, es un cambio incompatible, pero estas clases no están pensadas para ser subclasificadas. Si tienes una razón de peso para hacerlo, abre un [issue en GitHub](https://github.com/getsentry/sentry-cocoa/issues/new/choose).

<div id="unsymbolicated-stacktraces-for-non-fatal-events">
  ## Trazas de pila sin simbolizar en eventos no fatales
</div>

Las versiones del SDK de Cocoa [8.51.1](https://github.com/getsentry/sentry-cocoa/releases/tag/8.51.1) y [8.52.0](https://github.com/getsentry/sentry-cocoa/releases/tag/8.52.0) tienen un error que provoca trazas de pila sin simbolizar en eventos no fatales, como `captureError`, `captureMessage` o `captureException`. Como resultado, Sentry marca todos o la mayoría de los frames de la traza como `redacted`. Este error no afecta a los eventos fatales ni a los bloqueos.

Actualiza el SDK de Cocoa a la versión [8.52.1](https://github.com/getsentry/sentry-cocoa/releases/tag/8.52.1) o posterior, o permanece en la versión [8.51.0](https://github.com/getsentry/sentry-cocoa/releases/tag/8.51.0) o anterior para solucionar este problema.

<div id="sentrysdk-api-members-not-available-after-updating-to-8540">
  ## Miembros de la API de SentrySDK no disponibles tras actualizar a la 8.54.0
</div>

Después de actualizar a la versión [8.54.0](https://github.com/getsentry/sentry-cocoa/releases/tag/8.54.0) del SDK de Cocoa, es posible que encuentres errores de compilación que indiquen que `SentrySDK` no tiene el miembro `capture` u otros métodos de la API que antes estaban disponibles, como:

```
'SentrySDK' no tiene el miembro 'capture'
```

Para resolver este problema, prueba lo siguiente:

1. Limpia tu compilación yendo a **Product &gt; Clean Build Folder** en Xcode
2. Cierra todos los proyectos y cierra Xcode
3. Elimina los datos derivados yendo a **Xcode &gt; Settings &gt; Locations &gt; Derived Data** y haciendo clic en la flecha junto a la ruta; luego elimina la carpeta de tu proyecto o, **ten mucho cuidado con el siguiente comando y verifica la ruta dos veces**, ejecuta `rm -rf ~/Library/Developer/Xcode/DerivedData`
4. Reinicia Xcode
5. Restablece la caché de paquetes si usas Swift Package Manager yendo a **File &gt; Packages &gt; Reset Package Caches**
6. Vuelve a compilar tu proyecto

<div id="troubleshooting-session-replay">
  ## Solución de problemas de Session Replay
</div>

Consulta [Session Replay: solución de problemas](/es/platforms/apple/guides/ios/session-replay/troubleshooting) para obtener más información.