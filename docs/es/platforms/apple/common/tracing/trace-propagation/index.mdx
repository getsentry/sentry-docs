---
title: Propagación de trazas
description: "Aprende a conectar eventos entre aplicaciones y servicios."
sidebar_order: 3000
---

Si el panorama general de tu aplicación que quieres observar con Sentry abarca más que un único servicio o aplicación, el trazado distribuido puede aportar mucho valor.

<div id="what-is-distributed-tracing">
  ## ¿Qué es el trazado distribuido?
</div>

En el contexto de seguir eventos en un sistema distribuido, el trazado distribuido es una potente herramienta de depuración. Imagina tu aplicación como una amplia red de partes interconectadas. Por ejemplo, tu sistema podría estar repartido en distintos servidores o tu aplicación podría dividirse en servicios de backend y frontend, cada uno con su propia pila tecnológica.

Cuando surge un error o un problema de rendimiento, puede resultar difícil identificar la causa raíz debido a la complejidad de este tipo de sistema. El trazado distribuido te ayuda a seguir el recorrido de un evento mientras atraviesa esta intrincada red, registrando cada paso que da. Al examinar estos trazos, puedes reconstruir la secuencia de eventos que conduce al evento de interés, identificar los componentes específicos implicados y comprender sus interacciones. Esta visibilidad detallada te permite diagnosticar y resolver problemas con mayor eficacia, mejorando en última instancia la confiabilidad y el rendimiento de tu sistema distribuido.

<div id="basic-example">
  ## Ejemplo básico
</div>

Aquí tienes un ejemplo que muestra un rastro distribuido en Sentry:

<Include name="common-imgs/distributed-trace-in-sentry" />

Este rastro distribuido muestra que el `pageload` de una app de Vue realiza una solicitud a un backend en Python, que luego llama al endpoint `/api` de un microservicio en Ruby.

En segundo plano, Sentry lee y sigue propagando dos encabezados HTTP entre tus aplicaciones:

- `sentry-trace`
- `baggage`

Si ejecutas aplicaciones JavaScript en tu sistema distribuido, asegúrate de que esos dos encabezados estén incluidos en tu lista de permitidos de CORS y que no sean bloqueados ni eliminados por tus servidores proxy, pasarelas o firewalls.

<div id="how-to-use-distributed-tracing">
  ## ¿Cómo usar el tracing distribuido?
</div>

<PlatformContent includePath="distributed-tracing/how-to-use/" />

Recuerda que, para propagar la información de trazas en todo tu sistema distribuido, debes usar Sentry en todos los servicios y aplicaciones involucrados. Consulta la documentación del SDK correspondiente para saber cómo habilitar el tracing distribuido en cada plataforma.

<div id="tracepropagationtargets">
  ### tracePropagationTargets
</div>

De forma predeterminada, el SDK de Cocoa añadirá los encabezados `sentry-trace` y `baggage` a todas las solicitudes salientes. Para limitar esto solo a URL específicas, agrega esas URL a la allowlist `tracePropagationTargets` (puedes usar cadenas o expresiones regulares). El SDK entonces solo añadirá los encabezados `sentry-trace` y `baggage` a las solicitudes salientes cuyo destino contenga una de esas cadenas o coincida con una regex de tu allowlist.

<Alert>
  La opción `tracePropagationTargets` compara la URL completa de la solicitud, no solo el dominio. Usar regex más estrictas para hacer coincidir determinadas partes de la URL garantiza que las solicitudes no lleven encabezados adicionales innecesariamente.
</Alert>

Dado que el valor de `tracePropagationTargets` es `['.*']` de forma predeterminada, los encabezados de trazabilidad se añaden a todas las solicitudes salvo que se especifique lo contrario.

```swift {tabTitle:Swift}
import Sentry

SentrySDK.start { options in
    options.dsn = "___PUBLIC_DSN___"
    options.tracePropagationTargets = [
        "https://myproject.org",
        "https://api.otherservice.org/",
    ]
}
```

```objc {tabTitle:Objective-C}
@import Sentry;

[SentrySDK startWithConfigureOptions:^(SentryOptions *options) {
    options.dsn = @"___PUBLIC_DSN___";
    options.tracePropagationTargets = @[
        @"https://myproject.org",
        @"https://api.otherservice.org/"
    ];
}];
```
