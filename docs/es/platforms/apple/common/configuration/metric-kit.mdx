---
title: MetricKit
sidebar_order: 20
description: "Esta función, una vez habilitada, se suscribe a los datos MXDiagnosticPayload de MetricKit y los envía a Sentry."
---

La integración de [MetricKit](https://developer.apple.com/documentation/metrickit) se suscribe a [MXHangDiagnostic](https://developer.apple.com/documentation/metrickit/mxhangdiagnostic), [MXDiskWriteExceptionDiagnostic](https://developer.apple.com/documentation/metrickit/mxdiskwriteexceptiondiagnostic) y [MXCPUExceptionDiagnostic](https://developer.apple.com/documentation/metrickit/mxcpuexceptiondiagnostic), que convierte en eventos de Sentry.

Esta función está disponible a partir de Cocoa 8.14.0. El SDK admite esta función desde iOS 15 y macOS 12 en adelante porque, en estas versiones, MetricKit entrega informes de diagnóstico de forma inmediata, lo que permite que el SDK de Sentry aplique datos actuales del scope.

Ten en cuenta que el SDK de Cocoa no tiene control sobre los stack traces proporcionados por MetricKit. Algunos solo ofrecen un par de frames. Si estos no te resultan útiles, puedes descartarlos en <PlatformLink to="/configuration/filtering/#filtering-error-events/">`beforeSend`</PlatformLink>.

Puedes identificar los eventos de MetricKit observando el `mechanism.type` `mx_hang_diagnostic`, `mx_cpu_exception` y `mx_disk_write_exception`.

Habilita esta función estableciendo la opción `enableMetricKit` en `true`:

```swift {tabTitle:Swift}
import Sentry

SentrySDK.start { options in
    options.dsn = "___PUBLIC_DSN___"
    options.enableMetricKit = true
}
```

```objc {tabTitle:Objective-C}
@import Sentry;

[SentrySDK startWithConfigureOptions:^(SentryOptions *options) {
    options.dsn = @"___PUBLIC_DSN___";
    options.enableMetricKit = YES;
}];
```

Puedes habilitar `enableMetricKitRawPayload` para ver la carga útil de diagnóstico sin procesar de MetricKit en formato JSON como un archivo adjunto en el evento convertido en Sentry. Esta función está disponible a partir de Cocoa 8.29.0.

```swift {tabTitle:Swift}
import Sentry

SentrySDK.start { options in
    options.dsn = "___PUBLIC_DSN___"
    options.enableMetricKit = true
    options.enableMetricKitRawPayload = true
}
```

```objc {tabTitle:Objective-C}
@import Sentry;

[SentrySDK startWithConfigureOptions:^(SentryOptions *options) {
    options.dsn = @"___PUBLIC_DSN___";
    options.enableMetricKit = YES;
    options.enableMetricKitRawPayload = YES;
}];
```
