---
title: Alcances y hubs
description: "Los SDK suelen gestionar automáticamente los alcances por ti en las integraciones del framework. Descubre qué es un alcance y cómo puedes usarlo a tu favor."
---

Cuando se captura y envía un evento a Sentry, los SDK combinan esos datos del evento con información adicional del alcance actual. Por lo general, los SDK gestionan automáticamente los alcances por ti en las integraciones del framework y no necesitas preocuparte por ellos. Sin embargo, conviene saber qué es un alcance y cómo puedes usarlo a tu favor.

<div id="whats-a-scope-whats-a-hub">
  ## Qué es un Scope, qué es un Hub
</div>

Puedes pensar en el hub como el punto central que nuestros SDK usan para dirigir un evento a Sentry. Cuando llamas a `init()` se crea un hub y, en él, se crean un cliente y un scope en blanco. Ese hub se asocia con el hilo actual y, de forma interna, mantiene una pila de scopes.

El scope contiene información útil que debe enviarse junto con el evento. Por ejemplo, [contexts](../context/) o [breadcrumbs](../breadcrumbs/) se almacenan en el scope. Cuando se hace push de un scope, hereda todos los datos del scope padre y, cuando se hace pop, se revierten todas las modificaciones.

Las integraciones predeterminadas del SDK gestionan el push y pop de scopes de forma inteligente. Por ejemplo, las integraciones de frameworks web crean y destruyen scopes alrededor de tus rutas o controladores.

<div id="how-the-scope-and-hub-work">
  ## Cómo funcionan el Scope y el Hub
</div>

Cuando empiezas a usar un SDK, se crean automáticamente un scope y un hub listos para usar. Es poco probable que interactúes directamente con el hub a menos que estés escribiendo una integración o quieras crear o destruir scopes. Los scopes, por otro lado, son más visibles para el usuario. Puedes llamar a <PlatformIdentifier name="configure-scope" /> en cualquier momento para modificar los datos almacenados en el scope. Esto es útil para hacer cosas como [modificar el contexto](../context/).

<Include name="platforms/configuration/options/thread-locality.mdx" />

Cuando llamas a una función global como <PlatformIdentifier name="capture-event" />, internamente Sentry detecta el hub actual y le pide que capture un evento. Internamente, el hub luego combinará el evento con los datos del scope superior.

<div id="configuring-the-scope">
  ## Configuración del alcance
</div>

La operación más útil al trabajar con alcances es la función <PlatformIdentifier name="configure-scope" />. Puede usarse para reconfigurar el alcance actual.

Por ejemplo, puedes añadir etiquetas personalizadas o informar a Sentry sobre el usuario actualmente autenticado.

<PlatformContent includePath="enriching-events/scopes/configure-scope" />

También puedes aplicar esta configuración al desasignar un usuario durante el cierre de sesión:

<PlatformContent includePath="enriching-events/unset-user" />

Para saber qué información útil se puede asociar a los alcances, consulta
[la documentación de contexto](../context/).

<div id="local-scopes">
  ## Ámbitos locales
</div>

También admitimos crear y configurar un ámbito en una sola llamada. Esto suele llamarse <PlatformIdentifier name="with-scope" />, <PlatformIdentifier name="push-scope" /> o implementarse como un parámetro de función en los métodos de captura, según el SDK. Es muy útil si solo quieres enviar datos para un evento específico.

<div id="using-scope-callback-parameter">
  ### Uso del parámetro de callback de Scope
</div>

En el siguiente ejemplo usamos el parámetro de callback de scope, disponible para todos los métodos `capture`, para adjuntar un `level` y un `tag` a un único error específico:

<PlatformContent includePath="enriching-events/scopes/scope-callback-param" />

Antes de invocar el callback, el SDK crea un clon del scope actual, y los cambios
realizados permanecerán aislados dentro de la función de callback. Esto te permite
aislar más fácilmente fragmentos de información de contexto en ubicaciones específicas de tu código o
incluso llamar a `clear` para eliminar temporalmente toda la información de contexto.

<Alert title="Importante">

Cualquier excepción que ocurra dentro de la función de callback para configurar un scope local no será
capturada, y todos los errores que ocurran se ignorarán silenciosamente y **no** se reportarán.

</Alert>