---
title: Scopes y Hubs
description: "En la mayoría de los casos, el SDK gestionará automáticamente los scopes por ti en las integraciones del framework. Descubre qué es un scope y cómo puedes usarlo a tu favor."
---

Cuando se captura un evento y se envía a Sentry, los SDK fusionan esos datos del evento con información adicional del scope actual. En la mayoría de los casos, el SDK gestionará automáticamente los scopes por ti en las integraciones del framework y no tendrás que preocuparte por ellos. Sin embargo, conviene saber qué es un scope y cómo puedes aprovecharlo.

<div id="whats-a-scope-whats-a-hub">
  ## Qué es un Scope, qué es un Hub
</div>

Puedes pensar en el hub como el punto central que nuestros SDK usan para enrutar un
evento a Sentry. Cuando llamas a `init()`, se crea un hub y en él se crean un cliente y un
scope en blanco. Ese hub luego se asocia con el hilo actual y mantendrá internamente una pila de scopes.

El scope almacenará información útil que debería enviarse junto con el
evento. Por ejemplo, [contexts](../context/) o
[breadcrumbs](../breadcrumbs/) se almacenan en
el scope. Cuando se hace push de un scope, hereda todos los datos del scope padre
y cuando se hace pop, todas las modificaciones se revierten.

Las integraciones predeterminadas del SDK harán push y pop de scopes de manera inteligente. Por
ejemplo, las integraciones de frameworks web crearán y destruirán scopes alrededor de tus
rutas o controladores.

<div id="how-the-scope-and-hub-work">
  ## Cómo funcionan el Scope y el Hub
</div>

Cuando empiezas a usar un SDK, se crean automáticamente un scope y un hub para ti
desde el primer momento. Es poco probable que interactúes directamente con el hub a menos que
estés desarrollando una integración o quieras crear o destruir scopes. Los scopes, por
otro lado, son más visibles para el usuario. Puedes llamar a <PlatformIdentifier name="configure-scope" /> en cualquier
momento para modificar los datos almacenados en el scope. Esto es útil para hacer cosas como
[modificar el contexto](../context/).

Cuando llamas a una función global como <PlatformIdentifier name="capture-event" />, Sentry, internamente,
detecta el hub actual y le pide que capture un evento. Internamente, el hub
luego combinará el evento con los datos del scope superior.

<div id="configuring-the-scope">
  ## Configuración del scope
</div>

La operación más útil al trabajar con scopes es la función <PlatformIdentifier name="configure-scope" />. Puede usarse para reconfigurar el scope actual.

Por ejemplo, puedes agregar etiquetas personalizadas o informar a Sentry sobre el usuario que está autenticado en este momento.

<PlatformContent includePath="enriching-events/scopes/configure-scope" />

También puedes aplicar esta configuración al borrar el usuario al cerrar sesión:

<PlatformContent includePath="enriching-events/unset-user" />

Para conocer qué información útil se puede asociar a los scopes, consulta
[la documentación sobre contexto](../context/).

<div id="local-scopes">
  ## Alcances locales
</div>

También es posible enviar y configurar un alcance en una sola llamada. Esto suele
llamarse <PlatformIdentifier name="with-scope" />, <PlatformIdentifier name="push-scope" /> o implementarse como un parámetro de función en los métodos de captura, según el SDK. Es muy útil si
solo quieres enviar datos para un evento específico.

<div id="using-scope-callback-parameter">
  ### Uso del parámetro de callback de Scope
</div>

En el siguiente ejemplo usamos el parámetro de callback de scope, disponible en todos los métodos `capture`, para adjuntar un `level` y un `tag` a un único error específico:

<PlatformContent includePath="enriching-events/scopes/scope-callback-param" />

Antes de invocar el callback, el SDK crea un clon del scope actual, y los cambios
realizados permanecerán aislados dentro de la función de callback. Esto te permite
aislar con mayor facilidad partes de información de contexto en ubicaciones específicas de tu código o
incluso llamar a `clear` para eliminar temporalmente toda la información de contexto.

<Alert title="Importante">

Cualquier excepción que ocurra dentro de la función de callback al configurar un scope local no se
capturará, y todos los errores que se produzcan se ignorarán silenciosamente y **no** se informarán.

</Alert>