---
title: Expo (Avanzado)
description: "Cargar manualmente los mapas fuente para lanzamientos nativos de Expo."
---

El SDK de React Native de Sentry funciona de forma predeterminada con aplicaciones de Expo. Para ver trazas de pila legibles en el producto, debes cargar los mapas fuente en Sentry. Esta guía explica cómo cargar manualmente los mapas fuente para lanzamientos de aplicaciones de Expo.

Para una guía sobre cómo cargar automáticamente los mapas fuente para lanzamientos o actualizaciones de aplicaciones de Expo, consulta la documentación de mapas fuente de [Expo](/es/platforms/react-native/sourcemaps/uploading/expo/).

<div id="prerequisities">
  ## Requisitos previos
</div>

* [Crea una cuenta](https://sentry.io/signup/)
* [Migra de `sentry-expo` a `@sentry/react-native`](/es/platforms/react-native/migration/sentry-expo/)
* [Configura el SDK de Sentry para React Native](/es/platforms/react-native/manual-setup/expo/) versión 5.16.0-alpha.4 o posterior

<OrgAuthTokenNote />

<Include name="react-native-sourcemaps-expo-common-instructions.mdx" />

<div id="manual-upload-for-hermes-release">
  ## Carga manual para el lanzamiento de Hermes
</div>

Después de añadir el complemento Sentry Expo y el complemento Sentry Metro a la configuración de la aplicación, genera y carga los mapas fuente de Hermes.

<div id="generate-bundle">
  ### Generar paquete
</div>

Para generar un paquete y los mapas de origen para la versión de la aplicación nativa, utiliza el siguiente comando:

```bash {tabTitle:Android}
# --entry-file node_modules/expo-router/entry.js \
npx expo export:embed \
  --entry-file node_modules/expo/AppEntry.js \
  --platform android \
  --dev false \
  --reset-cache \
  --bundle-output index.android.bundle \
  --sourcemap-output index.android.bundle.packager.map \
  --minify false
```

```bash {tabTitle:iOS}
# --entry-file node_modules/expo-router/entry.js \
npx expo export:embed \
  --entry-file node_modules/expo/AppEntry.js \
  --platform ios \
  --dev false \
  --reset-cache \
  --bundle-output main.jsbundle \
  --sourcemap-output main.jsbundle.map \
  --minify false
```

<div id="notes">
  #### Notas
</div>

* El comando exacto puede variar según la configuración de tu aplicación. Los comandos anteriores son los predeterminados que utiliza Expo.
* Los nombres del bundle y de los mapas de origen pueden cambiar el ID de depuración generado.
* Para rutas personalizadas del archivo de entrada, es necesario ajustar el parámetro `--entry-file`.

<div id="compile-bytecode">
  ### Compilar bytecode
</div>

Compila el paquete de bytecode de Hermes y los mapas de origen:

```bash {tabTitle:Android}
node_modules/react-native/sdks/hermesc/osx-bin/hermesc \
  -O -emit-binary \
  -output-source-map \
  -out=index.android.bundle.hbc \
  index.android.bundle
rm -f index.android.bundle
mv index.android.bundle.hbc index.android.bundle
```

```bash {tabTitle:iOS}
ios/Pods/hermes-engine/destroot/bin/hermesc \
  -O -emit-binary \
  -output-source-map \
  -out=main.jsbundle.hbc \
  main.jsbundle
rm -f main.jsbundle
mv main.jsbundle.hbc main.jsbundle
```

```bash {tabTitle:Android on Linux}
node_modules/react-native/sdks/hermesc/linux64-bin/hermesc \
  -O -emit-binary \
  -output-source-map \
  -out=index.android.bundle.hbc \
  index.android.bundle
rm -f index.android.bundle
mv index.android.bundle.hbc index.android.bundle
```

```bash {tabTitle:Android on Windows}
node_modules/react-native/sdks/hermesc/win64-bin/hermesc \
  -O -emit-binary \
  -output-source-map \
  -out=index.android.bundle.hbc \
  index.android.bundle
rm -f index.android.bundle
mv index.android.bundle.hbc index.android.bundle
```

Compila los mapas de origen del bytecode de Hermes y de Metro (React Native Packager):

```bash {tabTitle:Android}
node \
  node_modules/react-native/scripts/compose-source-maps.js \
  index.android.bundle.packager.map \
  index.android.bundle.hbc.map \
  -o index.android.bundle.map
node \
  node_modules/@sentry/react-native/scripts/copy-debugid.js \
  index.android.bundle.packager.map index.android.bundle.map
rm -f index.android.bundle.packager.map
```

```bash {tabTitle:iOS}
mv main.jsbundle.map main.jsbundle.packager.map
node \
  node_modules/react-native/scripts/compose-source-maps.js \
  main.jsbundle.packager.map \
  main.jsbundle.hbc.map \
  -o main.jsbundle.map
node \
  node_modules/@sentry/react-native/scripts/copy-debugid.js \
  main.jsbundle.packager.map main.jsbundle.map
rm -f main.jsbundle.packager.map
```

<div id="upload-source-maps">
  ### Cargar mapas de origen
</div>

Asegúrate de que `sentry-cli` esté configurado para tu proyecto y define tus variables de entorno:

```bash {filename:.env}
SENTRY_ORG=___ORG_SLUG___
SENTRY_PROJECT=___PROJECT_SLUG___
SENTRY_AUTH_TOKEN=___ORG_AUTH_TOKEN___
```

Sube el bundle y los mapas de origen a Sentry:

```bash {tabTitle:Android}
npx sentry-cli sourcemaps upload \
  --debug-id-reference \
  --strip-prefix /ruta/a/la/raíz/del/proyecto \
  index.android.bundle index.android.bundle.map
```

```bash {tabTitle:iOS}
npx sentry-cli sourcemaps upload \
  --debug-id-reference \
  --strip-prefix /path/to/project/root \
  main.jsbundle main.jsbundle.map
```

<div id="manual-upload-for-jsc-release">
  ## Carga manual para la versión de JSC
</div>

Después de añadir el plugin Sentry Expo y el plugin Sentry Metro a la configuración de la aplicación, genera y sube los mapas de origen de JavaScript Core.

<div id="generate-bundle">
  ### Generar paquete
</div>

Para generar un paquete y mapas de origen para la versión de lanzamiento de la aplicación nativa, usa el siguiente comando:

```bash {tabTitle:Android}
# --entry-file node_modules/expo-router/entry.js \
npx expo export:embed \
  --entry-file node_modules/expo/AppEntry.js \
  --platform android \
  --dev false \
  --reset-cache \
  --bundle-output index.android.bundle \
  --sourcemap-output index.android.bundle.map \
  --minify true
```

```bash {tabTitle:iOS}
# --entry-file node_modules/expo-router/entry.js \
npx expo export:embed \
  --entry-file node_modules/expo/AppEntry.js \
  --platform ios \
  --dev false \
  --reset-cache \
  --bundle-output main.jsbundle \
  --sourcemap-output main.jsbundle.map \
  --minify true
```

<div id="notes">
  #### Notas
</div>

* El comando real puede variar según la configuración de tu aplicación. Los comandos anteriores son los predeterminados que usa Expo.
* Los nombres del bundle y de los mapas de origen pueden cambiar el ID de depuración generado.
* Para rutas personalizadas del archivo de entrada, es necesario ajustar el parámetro `--entry-file`.

### Subir mapas de origen

Asegúrate de que `sentry-cli` esté configurado para tu proyecto y de establecer tus variables de entorno:

```bash {filename:.env}
SENTRY_ORG=___ORG_SLUG___
SENTRY_PROJECT=___PROJECT_SLUG___
SENTRY_AUTH_TOKEN=___ORG_AUTH_TOKEN___
```

Sube el paquete y el mapa de origen a Sentry:

```bash {tabTitle:Android}
npx sentry-cli sourcemaps upload \
  --strip-prefix /path/to/project/root \
  index.android.bundle index.android.bundle.map
```

```bash {tabTitle:iOS}
npx sentry-cli sourcemaps upload \
  --strip-prefix /path/to/project/root \
  main.jsbundle main.jsbundle.map
```
