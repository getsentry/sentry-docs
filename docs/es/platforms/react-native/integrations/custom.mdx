---
title: Integraciones personalizadas
sidebar_order: 200
description: "Aprende a habilitar una integración personalizada."
---

Además de las integraciones que vienen con el SDK, también puedes escribir integraciones personalizadas.

Una integración personalizada debe cumplir con la [interfaz Integration](https://github.com/getsentry/sentry-javascript/blob/master/packages/core/src/types-hoist/integration.ts).

Puedes crear una integración personalizada y agregarla al SDK de la siguiente manera:

```javascript
function myAwesomeIntegration() {
  return {
    name: "MyAwesomeIntegration",
    setup(client) {
      // Hacer algo cuando se inicializa el SDK
      // El cliente que se está configurando se pasa al gancho
    },
  };
}

Sentry.init({
  // ...
  integrations: [myAwesomeIntegration()],
});
```

Todos los hooks de una integración son opcionales. El único campo obligatorio es `name`. Puedes usar uno o varios de los siguientes hooks en una integración personalizada:


<div id="setup">
  ### `setup`
</div>

El hook `setup` se invoca cuando se inicializa el SDK. Recibe la instancia del cliente como argumento.
Úsalo si quieres ejecutar código durante la inicialización.

```javascript
const integration = {
  name: "MyAwesomeIntegration",
  setup(client) {
    setupCustomSentryListener(client);
  },
};
```


<div id="processevent">
  ### `processEvent`
</div>

Este hook se puede usar para modificar eventos antes de enviarlos a Sentry. Recibe el evento como argumento y debe devolver el evento modificado. El hook también recibe un objeto hint que puede contener metadatos adicionales del evento, así como el cliente que está enviando el evento. También puedes devolver `null` para descartar el envío del evento.

```javascript
const integration = {
  name: "MyAwesomeIntegration",
  processEvent(event, hint, client) {
    event.extra = {
      ...event.extra,
      myCustomTag: "value",
    };
    // Devuelve el evento modificado,
    // o devuelve `null` para eliminar el evento
    return event;
  },
};
```

También puedes devolver una promesa que se resuelva con un evento o con `null`. Sin embargo, no se recomienda y debería evitarse siempre que sea posible, ya que puede retrasar el envío de eventos.


<div id="preprocessevent">
  ### `preprocessEvent`
</div>

Este hook es similar a `processEvent`, pero se invoca antes de que el evento se pase a cualquier otro `processEvent`. Puede usarse en situaciones donde el orden del procesamiento es importante.

Puedes usar `processEvent` en la mayoría de los casos, pero si necesitas asegurarte de que tu hook se ejecute antes que cualquier otro `processEvent`, usa `preprocessEvent`.

Al igual que `processEvent`, este hook recibe el evento, el hint y el client como argumentos. Sin embargo, este hook no permite devolver un evento modificado ni `null` para descartar el evento. Solo puedes mutar el evento pasado en este hook:

```javascript
const integration = {
  name: "MyAwesomeIntegration",
  preprocessEvent(event, hint, client) {
    event.extra = {
      ...event.extra,
      myCustomTag: "value",
    };
    // No hay nada que devolver, solo modifica el evento
  },
};
```


<div id="setuponce">
  ### `setupOnce`
</div>

Este hook es similar a `setup`, pero solo se ejecuta una vez, incluso si el SDK se vuelve a inicializar. No recibe argumentos. Recomendamos usar `setup` en su lugar. La única razón para usar `setupOnce` es cuando podrías llamar a `Sentry.init()` varias veces y quieres asegurarte de que cierto fragmento de código se ejecute solo una vez.

```javascript
const integration = {
  name: "MiIntegraciónGenial",
  setupOnce() {
    wrapLibrary();
  },
};
```


<div id="afterallsetup">
  ### `afterAllSetup`
</div>

Aunque recomendamos usar el hook `setup` en la mayoría de los casos, `afterAllSetup` puede utilizarse para asegurarse de que todas las demás integraciones se hayan ejecutado. Este hook recibe como primer argumento el `client` que se está configurando y se dispara después de que se hayan llamado `setupOnce()` y `setup()` para todas las integraciones.

```javascript
const integration = {
  name: "MyAwesomeIntegration",
  afterAllSetup(client) {
    // Podemos estar seguros de que todas las demás integraciones
    // ya han ejecutado sus hooks `setup` y `setupOnce`
    startSomeThing(client);
  },
};
```
