---
title: Solución de problemas
description: "Diagnostica y resuelve problemas comunes con el SDK de React Native."
sidebar_order: 9000
---

<div id="support-16-kb-page-sizes-on-android">
  ## Compatibilidad con tamaños de página de 16 KB en Android
</div>

A partir de Android 15, AOSP admite dispositivos con un tamaño de página de 16 KB. Si tu app usa bibliotecas del NDK (directamente o mediante un SDK), tendrás que volver a compilarla para que sea compatible con estos dispositivos.

Actualiza al Sentry React Native SDK versión `6.3.0` o superior para admitir tamaños de página de 16 KB en dispositivos Android.

Consulta la [documentación para desarrolladores de Android](https://developer.android.com/guide/practices/page-sizes) para actualizar y probar tu app con compatibilidad con tamaños de página de 16 KB.

## &quot;Declaración de API faltante&quot; tras la revisión de App Store

A partir del 1 de mayo de 2024, Apple exige que todas las apps enviadas a la App Store proporcionen una lista de las API relacionadas con la privacidad que utilizan, incluidos los motivos por los que las usan. Si recibiste un correo de Apple con el mensaje &quot;ITMS-91053: Missing API declaration&quot;, tu app no cumple los requisitos. Para solucionarlo, sigue nuestra guía [Apple Privacy Manifest](/es/platforms/react-native/data-management/apple-privacy-manifest).

<div id="app-start-numbers-are-too-high-to-be-accurate">
  ## Los números de inicio de la app son demasiado altos para ser fiables
</div>

iOS 15 introdujo una función llamada pre-warm que afectó a los cálculos que realiza el Sentry SDK.
Este problema se solucionó en la versión [4.1.1](https://github.com/getsentry/sentry-react-native/releases/tag/4.1.1) del SDK. Actualiza a esta versión o a una posterior.

Para más detalles, [consulta la página de solución de problemas del SDK de iOS](/es/platforms/apple/troubleshooting/#wrong-app-start-data).

<div id="unhandled-promise-rejections">
  ## Rechazos de promesas no controlados
</div>

Debido a un problema con las dependencias de React Native, Sentry podría no capturar correctamente los rechazos de promesas no controlados. Si el manejador de rechazos de promesas no se adjuntó correctamente, nuestro SDK podría emitir una advertencia:

> WARN: Es posible que Sentry no capture los rechazos de promesas no controlados. Lee cómo solucionarlo en nuestra documentación de solución de problemas.

De lo contrario, te informaremos que el manejador está adjunto:

> [Sentry] Sentry capturará los rechazos de promesas no controlados.

Puedes obtener más información sobre cómo configurar el manejo de rechazos de promesas no controlados en la [guía de Rechazos de promesas no controlados](/es/platforms/react-native/integrations/unhandled-rejections/).

<div id="source-maps">
  ## Mapas de origen
</div>

Cuando hay un problema con los mapas de origen en tu evento, normalmente aparece un cuadro de error en la parte superior de la página de detalles del issue en [sentry.io](https://sentry.io):

> Hubo 1 problema al procesar este evento: no se encontró el código fuente

Entre las soluciones comunes a este problema están:

* Verificar que tanto `release` como `dist` estén configurados en el evento [estableciéndolos en la llamada a `init`](/es/platforms/react-native/configuration/releases/#bind-the-version).
* Comprobar que los mapas de origen se hayan subido correctamente con exactamente los mismos valores de `release` y `dist` que el evento. Deben coincidir para que los mapas de origen se procesen correctamente.
* Si configuraste `release` y `dist` personalizados, confirmar que subiste manualmente los sourcemaps, ya que nuestro script automático de subida de mapas de origen no detectará los valores personalizados.
* Asegúrate de que el nombre del bundle en el stack trace coincida exactamente con el nombre en el mapa de origen. Por ejemplo, si tus frames de la pila dicen `app:///index.bundle`, los artefactos deben llamarse `index.bundle` e `index.bundle.map`, respectivamente.
* Verificar que no estés deshabilitando la integración predeterminada [`RewriteFrames`](/es/platforms/javascript/configuration/integrations/rewriteframes) al sobrescribirla, filtrarla o establecer `defaultIntegrations: false`.

[Para más detalles, lee la guía sobre mapas de origen en React Native.](/es/platforms/react-native/sourcemaps)

<div id="source-maps-with-hermes">
  ### Mapas de código fuente con Hermes
</div>

Aunque el script de compilación suele encargarse de esto por ti, puede que necesites realizar algunos pasos adicionales al usar los mapas de código fuente con el motor Hermes. [Puedes seguir la guía aquí.](/es/platforms/react-native/manual-setup/hermes/#custom-source-maps).

<div id="different-bundles-for-different-platforms">
  ### Paquetes distintos para plataformas distintas
</div>

Tu app puede tener paquetes diferentes para cada plataforma que soporte, como iOS y Android. Para asociar el paquete y el sourcemap correctos a cada plataforma, necesitarás una combinación única de release/dist para cada una. Una forma sencilla de lograrlo es incluir el nombre de la plataforma en el valor de `dist`.

<div id="ios-build-script-failed">
  ## Error en el script de compilación de iOS
</div>

Si usas una versión anterior del SDK (versión `3.2.12` o inferior) o de `sentry-cli` (versión `1.71.0` o inferior), prueba a añadir `--force-foreground` al comando de Sentry CLI en el script de compilación:

```bash
# ...
../node_modules/@sentry/cli/bin/sentry-cli react-native xcode \
  ../node_modules/react-native/scripts/react-native-xcode.sh --force-foreground
```

<div id="release-health">
  ## Estado de la versión
</div>

Si las estadísticas de salud de tu versión se están atribuyendo a la versión incorrecta, confirma que [pasas `release` y `dist` a la llamada a `init`](/es/platforms/react-native/configuration/releases/#bind-the-version).

Si usas Code Push, verifica que no estés usando `setRelease` y `setDist`, ya que afectarán la salud de la versión. Puedes leer más en la [guía de CodePush](/es/platforms/react-native/manual-setup/codepush/).

<div id="minified-names-in-production">
  ## Nombres minificados en producción
</div>

Al generar el bundle para producción, React Native minificará los nombres de clases y funciones para reducir su tamaño. Esto significa que no obtendrás los nombres originales completos de los componentes en tus breadcrumbs de eventos táctiles (Touch Event) o en los spans del Profiler.

Una forma de evitar esto es establecer `displayName` en todos los componentes que quieras rastrear con eventos táctiles o pasar la prop `name` a los componentes de Profiler. Sin embargo, también puedes configurar el empacador Metro para que no minifique los nombres de las funciones estableciendo estas opciones en `metro.config.js`:

```javascript {filename:metro.config.js}
module.exports = {
  transformer: {
    minifierConfig: {
      keep_classnames: true, // Conservar nombres de clases
      keep_fnames: true, // Conservar nombres de funciones
      mangle: {
        keep_classnames: true, // Conservar nombres de clases
        keep_fnames: true, // Conservar nombres de funciones
      },
    },
  },
};
```

<Alert>
  Esta configuración se aplica a **todos** los nombres de clases y funciones —no solo a los componentes de React— y podría aumentar el tamaño de tu bundle de JS.
</Alert>

<div id="missing-context-on-android-ndk-events">
  ## Falta de contexto en eventos de Android NDK
</div>

Si falta el contexto —como breadcrumbs, usuario, etc.— en los eventos de Android NDK, debes habilitar la función de [sincronización del scope](/es/platforms/react-native/enriching-events/scopes/#scope-synchronization).

<div id="using-node-with-nvm-or-volta">
  ## Usar Node con nvm o Volta
</div>

Xcode tiene problemas para encontrar el binario predeterminado de Node si usas nvm o Volta. Para solucionarlo, añade la ruta del binario `node` a la fase de compilación *Bundle React Native code and images* así:

```bash
export NODE_BINARY=ruta/a/tu/node
# ... resto del script
```

O ejecuta este comando en tu terminal: `ln -s $(which node) /usr/local/bin/node`.

<div id="navigationcontainer-reset-the-ref-each-render">
  ## NavigationContainer restablece la ref en cada renderizado
</div>

Si usas `React Navigation 5` y has dejado de recibir transacciones, podría deberse a [este error](https://github.com/react-navigation/react-navigation/issues/9213). Actualizar a `React Navigation 6` debería resolverlo; si no, abre un issue en nuestro [repositorio](https://github.com/getsentry/sentry-react-native).

<div id="ram-bundles-mismatched-line-numbers">
  ## Números de línea no coinciden con RAM Bundles
</div>

Si ves que los números de línea no coinciden en [sentry.io](https://sentry.io) al usar RAM Bundles, se debe a un [error](https://github.com/facebook/metro/issues/399) en las herramientas de Metro.

<div id="uploading-source-maps-from-xcode-cloud">
  ## Carga de source maps desde Xcode Cloud
</div>

La integración de Xcode lee `dist` de `CFBundleVersion`, pero las compilaciones de Xcode Cloud usan la variable `CI_BUILD_NUMBER`. Agrega el siguiente código a la fase de compilación `Bundle React Native code and images` para habilitar la carga correcta de los source maps.

```
export SENTRY_DIST=$CI_BUILD_NUMBER
```

<div id="ios-sentry-user-feedback-ui-cannot-be-used-from-app-extensions">
  ## iOS: La interfaz de Sentry User Feedback no se puede usar desde extensiones de la app.
</div>

Si ves un error similar a `'SentryUserFeedbackIntegration' is unavailable: not available on iOS - Sentry User Feedback UI cannot be used from app extensions` durante el proceso de compilación de la aplicación, asegúrate de que `APPLICATION_EXTENSION_API_ONLY` esté establecido en `NO`. Puedes conseguirlo añadiendo lo siguiente en tu `Podfile`.

```ruby {filename:ios/Podfile}
installer.pods_project.targets.each do |target|
  target.build_configurations.each do |config|
    if target.name == 'Sentry'
      config.build_settings['APPLICATION_EXTENSION_API_ONLY'] = 'NO'
    end
  end
end
```

## Receptor desconocido &#39;&lt;SomeReceiver&gt;&#39;, uso de identificador no declarado &#39;&lt;SomeIdentifier&gt;&#39;

Si ves un error como `Unknown receiver 'SwiftDescriptor'` o `Use of undeclared identifier 'SentryLog'` durante el proceso de compilación de la aplicación (en versiones del SDK anteriores a `6.18.0`), existe un conflicto causado por `APPLICATION_EXTENSION_API_ONLY`. De forma predeterminada, el CocoaPod de Sentry está configurado con `APPLICATION_EXTENSION_API_ONLY=YES`, pero es probable que algún script de `post_install` lo haya modificado. Para solucionar este error, añade lo siguiente al `Podfile`.

```ruby {filename:ios/Podfile}
post_install do |installer|
  react_native_post_install(
    installer,
    config[:reactNativePath],
    :mac_catalyst_enabled => false,
  )

  installer.pods_project.targets.each do |target|
    target.build_configurations.each do |config|
      if target.name == 'Sentry'
        config.build_settings['APPLICATION_EXTENSION_API_ONLY'] = 'YES'
      else
        # configuración para otros objetivos
      end
    end
  end
end
```

<div id="using-gradle-configureondemand">
  ## Usar `configureondemand` de Gradle
</div>

Si tienes habilitada la opción `org.gradle.configureondemand` de Gradle, necesitarás hacer una compilación limpia o deshabilitar esta opción para poder subir el mapa de código (source map) en cada compilación.

Para deshabilitarla, establece `org.gradle.configureondemand=false` o elimínala, ya que su valor predeterminado es desactivado. Hazlo en el archivo `gradle.properties`.

<div id="set-up-sdk-v4-with-react-native-069-or-higher">
  ## Configurar el SDK v4 con React Native 0.69 o superior
</div>

Para instalar una versión anterior de `@sentry/react-native`, debes especificarla en el comando de instalación. Del mismo modo, debes usar un `@sentry/wizard` compatible, como se muestra en el script a continuación.

```bash
yarn add @sentry/react-native@4
npx @sentry/wizard@1 -i reactNative -p ios android
npx pod-install
```

Antes de compilar la app, verifica que `android/app/build.gradle` se haya actualizado con la siguiente integración de Gradle:

```groovy
apply from: "../../node_modules/@sentry/react-native/sentry.gradle"
```

Aunque esto debería funcionar en Android, seguirá fallando en la fase del paso de compilación `Bundle React Native code and images` en iOS. Para solucionarlo, revierte el `shellScript` modificado en el archivo `ios/$projectName.xcodeproj/project.pbxproj` (donde `$projectName` probablemente sea el nombre de tu proyecto). Luego busca la fase del paso de compilación `Bundle React Native code and images` y vuelve a modificar el `shellScript`.

*Anterior*:

```bash
shellScript = "set -e\n\nWITH_ENVIRONMENT=\"../node_modules/react-native/scripts/xcode/with-environment.sh\"\nREACT_NATIVE_XCODE=\"../node_modules/react-native/scripts/react-native-xcode.sh\"\n\n/bin/sh -c \"$WITH_ENVIRONMENT $REACT_NATIVE_XCODE\"\n";
```

*Novedad:*

```bash
shellScript = "set -e\nexport SENTRY_PROPERTIES=sentry.properties\nexport EXTRA_PACKAGER_ARGS=\"--sourcemap-output $DERIVED_FILE_DIR/main.jsbundle.map\"\nWITH_ENVIRONMENT=\"../node_modules/react-native/scripts/xcode/with-environment.sh\"\nREACT_NATIVE_XCODE=\"../node_modules/react-native/scripts/react-native-xcode.sh\"\nSENTRY_CLI_PATH=\"../node_modules/@sentry/cli/bin/sentry-cli\"\n/bin/sh -c \"$WITH_ENVIRONMENT \\\"$SENTRY_CLI_PATH react-native xcode $REACT_NATIVE_XCODE\\\"\"";
```

Si tu build falla debido a campos obsoletos en `react-native.config.js`, actualiza el archivo de configuración ubicado en `node_modules/@sentry/react-native/react-native.config.js`. Esto es obligatorio para React Native v0.69. Por ahora, las versiones más recientes solo muestran una advertencia.

*Versión anterior*:

```javascript
module.exports = {
  dependency: {
    platforms: {
      ios: {
        sharedLibraries: ["libz"],
      },
      android: {
        packageInstance: "new RNSentryPackage()",
      },
    },
    hooks: {
      postlink:
        "node node_modules/@sentry/wizard/dist/bin.js -i reactNative -p ios android",
      postunlink:
        "node node_modules/@sentry/wizard/dist/bin.js -i reactNative -p ios android --uninstall",
    },
  },
};
```

*Nuevo*:

```javascript
module.exports = {
  dependency: {
    platforms: {
      ios: {},
      android: {
        packageInstance: "new RNSentryPackage()",
      },
    },
  },
};
```

<div id="react-native-0603-failing-build">
  ## Error de compilación en React Native 0.60.3
</div>

Las herramientas de React Native 0.60.3 movían inesperadamente los archivos de mapas de origen (source maps), lo que provocaba que fallara el complemento Gradle de Sentry. Esto se corrigió en la versión 0.60.4. Para obtener más información, consulta el [issue](https://github.com/getsentry/sentry-react-native/issues/2442).

<div id="sdk-v5100-and-older-xcode-build-phases">
  ## Fases de compilación de Xcode para SDK v5.10.0 y anteriores
</div>

Si usas el SDK v5.10.0 o anterior, utiliza las siguientes fases de compilación en Xcode. Si usas el SDK v5.11.0 o posterior, consulta la [configuración manual](/es/platforms/react-native/manual-setup/manual-setup/) actual.

```bash {filename:Bundle React Native code and images}
export SENTRY_PROPERTIES=sentry.properties
export EXTRA_PACKAGER_ARGS="--sourcemap-output $DERIVED_FILE_DIR/main.jsbundle.map"
set -e

# RN 0.69+
WITH_ENVIRONMENT="../node_modules/react-native/scripts/xcode/with-environment.sh"
REACT_NATIVE_XCODE="../node_modules/react-native/scripts/react-native-xcode.sh"
SENTRY_CLI="../node_modules/@sentry/cli/bin/sentry-cli"

/bin/sh -c "$WITH_ENVIRONMENT \"$SENTRY_CLI react-native xcode $REACT_NATIVE_XCODE\""

# RN 0.46 – 0.68
# ../node_modules/@sentry/cli/bin/sentry-cli react-native xcode \
#  ../node_modules/react-native/scripts/react-native-xcode.sh

# Todas las versiones
/bin/sh ../node_modules/@sentry/react-native/scripts/collect-modules.sh
```

Y una fase de compilación para subir los símbolos de depuración nativos.

```bash {filename:Upload Debug Symbols to Sentry}
export SENTRY_PROPERTIES=sentry.properties

[[ $SENTRY_INCLUDE_NATIVE_SOURCES == "true" ]] && INCLUDE_SOURCES_FLAG="--include-sources" || INCLUDE_SOURCES_FLAG=""
SENTRY_CLI="../node_modules/@sentry/cli/bin/sentry-cli"
$SENTRY_CLI debug-files upload "$INCLUDE_SOURCES_FLAG" "$DWARF_DSYM_FOLDER_PATH"
```

<div id="missing-java-stack-trace-on-the-new-architecture">
  ## Falta el stack trace de Java en la nueva arquitectura
</div>

Si utilizas la nueva arquitectura de React Native, es posible que no veas el stack trace de Java. Sigue el [issue](https://github.com/facebook/react-native/issues/34923) para más información.

<div id="failing-build-due-to-sentry-cli">
  ## Compilación fallida debido a `sentry-cli`
</div>

Si la compilación falla por un error de Sentry CLI, porque no tienes conexión a Internet o porque [sentry.io](https://sentry.io) está caído, puedes permitir que el paso de `sentry-cli` falle agregando la variable de entorno `SENTRY_ALLOW_FAILURE` con el valor `true`. La CLI seguirá ejecutándose, pero no hará que la compilación falle:

```bash
# iOS
SENTRY_ALLOW_FAILURE=true npx react-native run-ios

# Android
SENTRY_ALLOW_FAILURE=true npx react-native run-android
```

Ten en cuenta que, si falla la carga de los mapas de origen, tendrás que hacerlo [manualmente](/es/platforms/react-native/sourcemaps) más tarde, cuando se restablezca la conexión.

Si quitas la variable de entorno antes de tu comando de compilación, la compilación funcionará como antes.

<div id="expo-transactions-never-finish">
  ## Las transacciones de Expo nunca finalizan
</div>

Si usas [expo-dev-client](https://docs.expo.dev/development/introduction/#what-is-an-expo-dev-client), podrías notar que las transacciones nunca finalizan en tus builds de desarrollo. Esto se debe a que el cliente de desarrollo envía continuamente logs al servidor de desarrollo. Para solucionarlo, puedes dejar de crear spans para las solicitudes HTTP al endpoint de logs en tus builds de desarrollo agregando lo siguiente a tu `Sentry.init()`:

```javascript
import * as Sentry from "sentry-expo";
import * as Network from "expo-network";

const devServerPort = 8081;
let devServerIpAddress: string | null = null;
Network.getIpAddressAsync().then((ip) => {
  devServerIpAddress = ip;
});

Sentry.init({
  tracesSampleRate: 1.0,
  integrations: [
    new Sentry.Native.ReactNativeTracing({
      shouldCreateSpanForRequest: (url) => {
        return (
          !__DEV__ ||
          !url.startsWith(`http://${devServerIpAddress}:${devServerPort}/logs`)
        );
      },
    }),
  ],
});
```

<div id="routing-transaction-data-contains-sensitive-information">
  ## Los datos de transacciones de enrutamiento contienen información confidencial
</div>

Si usas la instrumentación automática de enrutamiento para React Navigation, es posible que la información confidencial que incluyas en los parámetros de enrutamiento se envíe a Sentry. Puedes evitarlo actualizando el SDK a la versión [5.15.2](https://github.com/getsentry/sentry-react-native/releases/tag/5.15.2) o posterior, o descartando esos datos manualmente con `beforeSendTransaction`:

```javascript
Sentry.init({
  dsn: "...",
  beforeSendTransaction: (event) => {
    // eliminar params porque pueden contener PII
    delete event.contexts?.trace?.data?.route?.params;
    delete event.contexts?.trace?.data?.previousRoute?.params;

    return event;
  },
});
```

También puedes usar [Advanced Data Scrubbing](/es/security-legal-pii/scrubbing/advanced-datascrubbing/) para filtrar datos sensibles antes de que se almacenen del lado del servidor:

```
[Reemplazar] [Cualquier elemento] de [contexts.trace.data.route.params]
[Reemplazar] [Cualquier elemento] de [contexts.trace.data.previousRoute.params]
```

<div id="sentry-android-gradle-plugin-circular-dependency">
  ## Dependencia circular del complemento de Gradle de Sentry para Android
</div>

Si te aparece un error de dependencia circular al compilar tu app de Android con el complemento de Gradle de Sentry para Android, normalmente se debe a que estás usando una versión antigua del Android Gradle Plugin (AGP).

<div id="error-example">
  ### Ejemplo de error
</div>

Es posible que veas un error similar a:

```
Dependencia circular entre las siguientes tareas:
:app:compileReleaseJavaWithJavac
:app:generateSentryProguardUuidProductionRelease
```

<div id="solution">
  ### Solución
</div>

Actualiza el complemento de Gradle para Android a la versión **7.4** o superior. En tu archivo `android/build.gradle` (a nivel de proyecto):

```groovy {filename:android/build.gradle}
buildscript {
    dependencies {
        classpath("com.android.tools.build:gradle:7.4.0") // o posterior
    }
}
```

O, si usas el bloque plugins en tu `android/app/build.gradle`:

```groovy {filename:android/app/build.gradle}
plugins {
    id "com.android.application" version "7.4.0" // o posterior
}
```

AGP 7.4+ introdujo nuevas API para la inyección en los assets que utiliza el Sentry Android Gradle Plugin para evitar esta dependencia circular. Dado que AGP 7.4 se lanzó en 2023, recomendamos actualizar a la última versión estable.

Para obtener más información, consulta el [issue de GitHub #756](https://github.com/getsentry/sentry-android-gradle-plugin/issues/756).

<div id="uninstalling-the-sdk">
  ## Desinstalación del SDK
</div>

Para quitar el SDK de tu proyecto, ejecuta los siguientes comandos:

```bash
npx @sentry/wizard -i reactNative -p ios android --uninstall
yarn remove @sentry/react-native
cd ios && pod install
```

Una vez hecho esto, elimina los archivos `ios/sentry.properties` y `android/sentry.properties`. Por último, elimina de tu proyecto todo el código que use `@sentry/react-native`.
