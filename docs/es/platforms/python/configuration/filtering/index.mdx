---
title: Filtrado
description: "Obtén más información sobre cómo configurar tu SDK para filtrar los eventos que se reportan a Sentry."
sidebar_order: 70
---

Cuando agregas Sentry a tu app, obtienes mucha información valiosa sobre errores y rendimiento. Y mucha información es buena, siempre que sea la adecuada y en un volumen razonable.

Los SDK de Sentry ofrecen varias opciones de configuración para ayudarte a filtrar eventos.

También ofrecemos [filtros de entrada](/es/concepts/data-management/filtering/) para filtrar eventos en sentry.io. Aun así, recomendamos filtrar en el cliente porque evita la sobrecarga de enviar eventos que en realidad no quieres. Obtén más información sobre los [campos disponibles en un evento](https://develop.sentry.dev/sdk/data-model/event-payloads/).

<div id="filtering-error-events">
  ## Filtrado de eventos de error
</div>

Configura tu SDK para filtrar eventos de error usando el callback <PlatformIdentifier name="before-send" /> y activando, desactivando o configurando las integraciones.

### Uso de <PlatformIdentifier name="before-send" />

El callback `before_send` te permite modificar la carga del evento antes de que el SDK lo envíe a Sentry. También puedes impedir que se envíe devolviendo `None`.

El callback recibe dos argumentos: la carga del evento y una [pista](#event-hints). Los tipos correspondientes `Event` y `Hint` pueden importarse desde `sentry_sdk.types` para facilitar la inspección de los campos disponibles. El callback puede devolver la carga del evento para enviarla a Sentry o `None` si el evento debe descartarse.

Cualquier modificación de la carga del evento realizada en el callback, ya sea agregar datos al evento o modificar o eliminar campos existentes, se reflejará en Sentry.

<div id="example-before_send">
  #### Ejemplo de `before_send`
</div>

Supón que quieres evitar que todos los errores de tipo `ZeroDivisionError` se envíen a Sentry y, además, establecer un atributo de datos adicional llamado &quot;foo&quot; con el valor &quot;bar&quot; en todos los demás eventos. Puedes lograr este comportamiento con el siguiente callback de `before_send`.

```python
import sentry_sdk
from sentry_sdk.types import Event, Hint

def before_send(event: Event, hint: Hint) -> Event | None:
    # Filtra todos los eventos de ZeroDivisionError.
    # Ten en cuenta que el tipo de excepción está disponible en hint,
    # pero debemos contemplar el caso en que falte la información de la excepción.
    # falta.
    if hint.get("exc_info", [None])[0] == ZeroDivisionError:
        return None

    # Podemos añadir datos en el campo "extra" del evento.
    event["extra"]["foo"] = "bar"

    # Hemos modificado el evento como queremos, así que devuelve el evento.
    # El SDK enviará el evento devuelto a Sentry.
    return event

sentry_sdk.init(
    # ...

    before_send=before_send,
)
```

Ten en cuenta también que los breadcrumbs se pueden filtrar, como se explica en [nuestra documentación sobre Breadcrumbs](/es/product/error-monitoring/breadcrumbs/).

<div id="event-hints">
  #### Sugerencias de eventos
</div>

El callback <PlatformIdentifier name="before-send" /> recibe tanto el `event` como un segundo argumento, `hint`, que contiene una o más sugerencias.

Por lo general, un `hint` contiene la excepción original para poder extraer datos adicionales o influir en la agrupación. En este ejemplo, la huella (fingerprint) se fuerza a un valor común si se ha capturado una excepción de cierto tipo:

<PlatformContent includePath="configuration/before-send-hint" />

Cuando el SDK crea un evento o un breadcrumb para su envío, este suele generarse a partir de algún objeto de origen. Por ejemplo, un evento de error suele crearse a partir de un registro de log o de una instancia de excepción. Para una mejor personalización, el SDK envía estos objetos a ciertos callbacks (<PlatformIdentifier name="before-send" />, <PlatformIdentifier name="before-breadcrumb" /> y procesadores de eventos).

<div id="using-hints">
  ### Uso de hints
</div>

Los hints están disponibles en dos lugares:

1. <PlatformIdentifier name="before-send" /> / <PlatformIdentifier name="before-breadcrumb" />
2. `eventProcessors`

Los `hints` de eventos y breadcrumbs son objetos que contienen diversa información utilizada para componer un evento o un breadcrumb. Por lo general, los `hints` incluyen la excepción original para poder extraer datos adicionales o influir en la agrupación.

Para los eventos, los hints contienen propiedades como `event_id`, `originalException`, `syntheticException` (usada internamente para generar un stack trace más limpio) y cualquier otro `data` arbitrario que adjuntes.

En el caso de los breadcrumbs, el uso de los `hints` depende del tipo de breadcrumb. Para los logs, el hint contiene el registro de `logging` original.

<PlatformContent includePath="configuration/before-send-fingerprint">
  En este ejemplo, la huella digital se fuerza a un valor común si se ha capturado una excepción de cierto tipo:
</PlatformContent>

<div id="hints-for-events">
  #### Pistas para eventos
</div>

`originalException`

La excepción original que hizo que el SDK de Sentry creara el evento. Esto es útil para cambiar cómo el SDK de Sentry agrupa los eventos o para extraer información adicional.

`syntheticException`

Cuando se genera una cadena o un objeto que no es un error, Sentry crea una excepción sintética para que puedas obtener un seguimiento de pila básico. Esta excepción se guarda aquí para extraer más datos.

<div id="hints-for-breadcrumbs">
  #### Sugerencias para migas de pan
</div>

<PlatformContent includePath="configuration/breadcrumb-hints" />

<div id="decluttering-sentry">
  ### Ordenando Sentry
</div>

<PlatformContent includePath="configuration/decluttering" />

<div id="filtering-transaction-events">
  ## Filtrado de eventos de transacciones
</div>

Para evitar que ciertas transacciones se envíen a Sentry, usa las opciones de configuración <PlatformIdentifier name="traces-sampler" /> o <PlatformIdentifier name="before-send-transaction" />, que te permiten proporcionar una función para evaluar la transacción actual y descartarla si no te interesa.

### Uso de <PlatformIdentifier name="traces-sampler" />

**Nota:** Las opciones de configuración <PlatformIdentifier name="traces-sampler" /> y <PlatformIdentifier name="traces-sample-rate" /> se excluyen mutuamente. Si defines un <PlatformIdentifier name="traces-sampler" /> para filtrar ciertas transacciones, también debes manejar el caso de las transacciones no filtradas devolviendo la tasa a la que quieres muestrearlas.

En su forma más simple, usada solo para filtrar la transacción, se ve así:

<PlatformContent includePath="performance/traces-sampler-as-filter" />

También te permite muestrear distintas transacciones a diferentes tasas.

Si la transacción que se está procesando tiene una transacción principal (de un servicio upstream que llama a este servicio), la decisión de muestreo del padre (upstream) siempre se incluirá en los datos del contexto de muestreo, para que tu <PlatformIdentifier name="traces-sampler" /> pueda elegir si y cuándo heredar esa decisión. En la mayoría de los casos, heredar es lo más adecuado para no romper las trazas distribuidas. Una traza rota no incluirá todos tus servicios. Consulta <PlatformLink to="/configuration/sampling/#inheritance">Heredar la decisión de muestreo del padre</PlatformLink> para obtener más información.

Más información sobre <PlatformLink to="/configuration/sampling/">configurar la tasa de muestreo</PlatformLink>.

### Cómo usar <PlatformIdentifier name="before-send-transaction" />

<PlatformContent includePath="configuration/before-send-transaction" />