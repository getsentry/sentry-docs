---
draft: true
categories: []
toc: true
title: Referencia de API
noindex: true
tags: []
---

<Alert level="warning" title="Aviso de desaprobación">
  Un nuevo SDK de Python ha sustituido esta versión en desuso. Sentry conserva esta documentación para clientes que usan el cliente antiguo. Recomendamos usar el [SDK de Python actualizado](/es/platforms/python/) para proyectos nuevos.
</Alert>

Aquí encontrarás una descripción general de la API pública que expone raven-python.

<div id="client">
  ## Cliente
</div>

<a name="raven.Client" />

`class raven.Client(dsn=None, **kwargs)`

El cliente debe instanciarse una sola vez y luego puede usarse para enviar eventos al servidor de Sentry. Para obtener información sobre la configuración de ese cliente y qué parámetros se aceptan, consulta [Configuring the Client](/es/platforms/python/legacy-sdk/advanced/#python-client-config).

<a name="raven.Client.capture" />

`capture(event_type, data=None, date=None, time_spent=None, extra=None, stack=False, tags=None, **kwargs)`

Este es el método de bajo nivel para reportar eventos a Sentry. Captura y procesa un evento y lo envía a Sentry mediante el transporte configurado.

Ejemplo:

```python
capture('raven.events.Message', message='foo', data={
    'request': {
        'url': '...',
        'data': {},
        'query_string': '...',
        'method': 'POST',
    },
    'logger': 'logger.name',
}, extra={
    'key': 'value',
})
```

<table class="table">
  <tbody valign="top">
    <tr>
      <th>Parámetros:</th>

      <td>
        <ul>
          <li>
            <strong>event&#95;type</strong> – la ruta de módulo a la clase Event.
            Las clases integradas pueden usar una notación abreviada y omitir la ruta
            completa del módulo.
          </li>

          <li>
            <strong>data</strong> – la base de datos, útil para especificar
            interfaces de datos estructuradas. Cualquier clave que contenga un ‘.’ se
            asumirá como una interfaz de datos.
          </li>

          <li>
            <strong>date</strong> – la fecha y hora de este evento. Si no se proporciona,
            se usa la marca de tiempo actual.
          </li>

          <li>
            <strong>time&#95;spent</strong> – un valor entero que representa la
            duración del evento (en milisegundos).
          </li>

          <li>
            <strong>extra</strong> – un diccionario con metadatos estándar
            adicionales.
          </li>

          <li>
            <strong>stack</strong> – Si se establece en <cite>True</cite>, se registra
            un frame de la pila junto con el evento.
          </li>

          <li>
            <strong>tags</strong> – diccionario de etiquetas adicionales.
          </li>

          <li>
            <strong>sample&#95;rate</strong> – un número de coma flotante en el rango [0, 1] para muestrear
            este mensaje. Esto sobrescribe el sample&#95;rate del objeto Client.
          </li>

          <li>
            <strong>kwargs</strong> – argumentos de palabra clave adicionales que se manejan
            según el tipo de evento reportado.
          </li>
        </ul>
      </td>
    </tr>

    <tr>
      <th>Devuelve:</th>
      <td>una tupla con una cadena de longitud 32 que identifica este evento</td>
    </tr>
  </tbody>
</table>

<a name="raven.Client.captureMessage" />

`captureMessage(message, **kwargs)`

Es una forma abreviada de reportar un mensaje mediante [`capture()`](#raven.Client.capture "raven.Client.capture"). Pasa `'raven.events.Message'` como `event_type` junto con el mensaje. Todos los demás argumentos de palabra clave se reenvían normalmente.

Ejemplo:

```python
client.captureMessage('¡Esto acaba de suceder!')
```

<a name="raven.Client.captureException" />

`captureException(exc_info=None, **kwargs)`

Esta es una forma abreviada de reportar una excepción mediante [`capture()`](#raven.Client.capture "raven.Client.capture"). Envía `'raven.events.Exception'` como `event_type` junto con el traceback. Todos los demás argumentos con nombre se reenvían sin cambios.

Si no se proporciona `exc_info`, o se establece en True, este método ejecutará `exc_info = sys.exc_info()` y realizará la limpieza necesaria por ti.

Ejemplo:

```python
try:
    1 / 0
except Exception:
    client.captureException()
```

<a name="raven.Client.captureBreadcrumb" />

`captureBreadcrumb(message=None, timestamp=None,`
`level=None, category=None, data=None,`
`type=None, processor=None)`

Captura manualmente una breadcrumb en el búfer interno del contexto del cliente actual. En lugar de usar este método, se recomienda usar la función [`raven.breadcrumbs.record()`](/es/platforms/python/legacy-sdk/breadcrumbs/#raven.breadcrumbs.record), que registra automáticamente en el cliente correcto.

<a name="raven.Client.send" />

`send(data)`

Acepta todos los parámetros de datos, los serializa y luego los envía a Sentry a través del transporte. Puede utilizarse para enviar datos de protocolo de bajo nivel al servidor.

<a name="raven.Client.context" />

`context`

Devuelve una referencia al objeto de contexto local del hilo. Consulta [`raven.context.Context`](#raven.context.Context "raven.context.Context") para obtener más información.

<a name="raven.Client.user_context" />

`user_context(data)`

Actualiza el contexto de usuario para eventos futuros.

Equivalente a lo siguiente:

```python
client.context.merge({'user': data})
```

<a name="raven.Client.http_context" />

`http_context(data)`

Actualiza el contexto HTTP para eventos futuros.

Equivale a lo siguiente:

```python
client.context.merge({'request': data})
```

<a name="raven.client.extra_context" />

`extra_context(data)`

Actualiza el contexto adicional para eventos futuros.

Equivalente a:

```python
    client.context.merge({'extra': data})
```

<a name="raven.Client.tags_context" />

`tags_context(data)`

Actualiza el contexto de etiquetas para eventos futuros.

Equivalente a:

```python
    client.context.merge({'tags': data})
```

<div id="context">
  ## Contexto
</div>

<a name="raven.context.Context" />

`class raven.context.Context`

El objeto de contexto funciona de forma similar a un diccionario y se usa para registrar información que debe enviarse automáticamente con los eventos. Está disponible a través de [`raven.Client.context`](#raven.Client.context "raven.Client.context") y es local al hilo. Esto significa que puedes ir modificando este objeto con el tiempo para añadirle información más pertinente.

<a name="raven.context.Context.activate" />

`activate()`

Vincula el contexto al hilo actual. Normalmente esto sucede automáticamente en el primer uso, pero si el contexto se desactivó, se debe llamar de nuevo para volver a vincularlo. Solo si un contexto está vinculado al hilo se registrarán los breadcrumbs.

<a name="raven.context.Context.deactivate" />

`deactivate()`

Desactiva la vinculación del contexto al hilo. En particular, significa que los breadcrumbs del hilo actual ya no se registrarán en este contexto.

<a name="raven.context.Context.merge" />

`merge(data, activate=True)`

Realiza una combinación entre los datos actuales del contexto y los nuevos datos proporcionados. Esto también activa automáticamente el contexto de forma predeterminada.

<a name="raven.context.Context.clear" />

`clear(deactivate=None)`

Limpia el contexto. Es importante asegurarte de llamar a esto cuando reutilices el hilo para otra cosa. Por ejemplo, en frameworks web generalmente es buena idea llamarlo al final de la solicitud HTTP.

De lo contrario, corres el riesgo de ver información incorrecta tras el primer uso del hilo.

Opcionalmente, el parámetro *deactivate* controla si el contexto debe desactivarse automáticamente. El comportamiento predeterminado es desactivarlo si el contexto no se creó para el hilo principal.

El contexto también se puede usar como un administrador de contexto. En ese caso, [`activate()`](#raven.context.Context.activate "raven.context.Context.activate") se llama al entrar y [`deactivate()`](#raven.context.Context.deactivate "raven.context.Context.deactivate") se llama al salir.