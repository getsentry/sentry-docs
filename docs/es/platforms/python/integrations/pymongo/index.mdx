---
title: PyMongo
description: >-
  Descubre la integración de PyMongo y cómo incorpora soporte para conexiones a
  bases de datos MongoDB.
og_image: /og-images/platforms-python-integrations-pymongo.png
---

La integración de PyMongo incorpora soporte para [PyMongo](https://www.mongodb.com/docs/drivers/pymongo/), el controlador oficial de MongoDB.

<div id="install">
  ## Instalar
</div>

Instala `sentry-sdk` desde PyPI con el extra `pymongo`:

```bash {tabTitle:pip}
pip install "sentry-sdk[pymongo]"
```

```bash {tabTitle:uv}
uv add "sentry-sdk[pymongo]"
```


<div id="configure">
  ## Configurar
</div>

Si tienes el paquete `pymongo` en tus dependencias, la integración de PyMongo se habilitará automáticamente al inicializar el SDK de Sentry.

<PlatformContent includePath="getting-started-config" />

<div id="verify">
  ## Verifica
</div>

```python
import pymongo

def main():
    sentry_sdk.init(...)  # mismo que arriba
    client = pymongo.MongoClient(DATABASE_HOST, DATABASE_PORT)

    db = client["sentry_test_db"]
    collection = db["sentry_test"]

    with sentry_sdk.start_transaction(name="testing_sentry"):
        collection.insert_one({"test": "sentry"})
        collection.find_one({"test": "sentry"})

main()
```

Esto creará una transacción llamada `testing_sentry` en la sección Performance de [sentry.io](https://sentry.io) y generará spans para las operaciones de base de datos.

Los datos tardarán unos momentos en aparecer en [sentry.io](https://sentry.io).


<div id="behavior">
  ## Comportamiento
</div>

La siguiente información sobre tus consultas de MongoDB estará disponible en Sentry.io:

- Trazas de rendimiento de todas las consultas de MongoDB
- Breadcrumbs de todas las consultas de MongoDB
- La información de identificación personal (PII) se eliminará de todas las consultas de MongoDB si `send_default_pii` está deshabilitado en el SDK. (Esto se probó con PyMongo 4.2 y versiones anteriores, y “debería” seguir siendo compatible en el futuro)

![Los detalles de la consulta de MongoDB se muestran como un diagrama de cascada](./img/pymongo-query-performance-details.png)

<div id="other-mongodb-libraries">
  ### Otras bibliotecas de MongoDB
</div>

PyMongo es un controlador oficial síncrono para MongoDB. Esto significa que muchas otras bibliotecas de Python que interactúan con
MongoDB lo utilizan por debajo, como, por ejemplo, `mongoengine` (siempre) o `umongo` (si se elige entre varios
controladores disponibles). El controlador oficial asíncrono de MongoDB, llamado `Motor`, también utiliza PyMongo internamente.
Las consultas generadas por esas bibliotecas también se supervisarán.

Si usas un controlador diferente (por ejemplo, `TxMongo`), esta integración no funcionará.

<div id="mongomock">
  ### Mongomock
</div>

Aunque `mongomock` puede usarse para sustituir `PyMongo` en pruebas, no implementa todas las funcionalidades disponibles en el controlador oficial. Esta integración no generará breadcrumbs ni spans a partir de los clientes de `mongomock`.

<div id="supported-versions">
  ## Versiones compatibles
</div>

- PyMongo: 3.1+
- Python: Python 3.6+

<Include name="python-use-older-sdk-for-legacy-support.mdx" />