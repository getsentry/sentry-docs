---
title: Redis
description: "Obtén información sobre cómo importar la integración de Redis."
---

La integración de [Redis](https://redis.io/) se conecta con el [cliente de Redis para Python](https://pypi.org/project/redis/) y registra todos los comandos de Redis como <PlatformLink to="/enriching-events/breadcrumbs/">breadcrumbs</PlatformLink>.

<div id="install">
  ## Instalación
</div>

```bash {tabTitle:pip}
pip install "sentry-sdk"
```

```bash {tabTitle:uv}
uv add "sentry-sdk"
```


<div id="configure">
  ## Configurar
</div>

Si tienes el paquete de Python `redis` entre tus dependencias, la integración de Redis se habilitará automáticamente.

<PlatformContent includePath="getting-started-config" />

<div id="verify">
  ## Verifica
</div>

<div id="standard-redis">
  ### Redis estándar
</div>

```python
import redis

def main():
    sentry_sdk.init(...)  # mismo que arriba
    r = redis.Redis(host='localhost', port=6379, decode_responses=True)

    with sentry_sdk.start_transaction(name="testing_sentry"):
        r.set("foo", "bar")
        r.get("foo")

main()
```


<div id="redis-cluster">
  ### Clúster de Redis
</div>

```python
from redis.cluster import RedisCluster

def main():
    sentry_sdk.init(...)  # igual que arriba
    rc = RedisCluster(host='localhost', port=16379)

    with sentry_sdk.start_transaction(name="testing_sentry"):
        rc.set("foo", "bar")
        rc.get("foo")

main()
```


<div id="async-redis-client">
  ### Cliente asíncrono de Redis
</div>

```python
import asyncio
import redis.asyncio as redis

async def main():
    sentry_sdk.init(...)  # igual que antes
    r = redis.Redis(host='localhost', port=6379)

    with sentry_sdk.start_transaction(name="prueba_sentry"):
        await r.set("foo", "bar")
        await r.get("foo")

asyncio.run(main())
```

Estos ejemplos crearán una transacción llamada `testing_sentry` en la sección Performance de [sentry.io](https://sentry.io) y generarán spans para los comandos de Redis.

Los datos pueden tardar unos instantes en aparecer en [sentry.io](https://sentry.io).


<div id="behavior">
  ## Comportamiento
</div>

Con la integración de Redis, tendrás disponible la siguiente información en Sentry.io:

- La información de rendimiento sobre las solicitudes a Redis aparecerá en el diagrama en cascada de la sección Performance de Sentry.io.
- Se añadirán los comandos de Redis como breadcrumbs.
- Si `send_default_pii` está configurado en `True`, también verás los datos utilizados en tus comandos de Redis.
- Nunca se recopilarán los datos del comando `AUTH`.

<div id="options">
  ## Opciones
</div>

Al añadir explícitamente `RedisIntegration` a tu llamada a `sentry_sdk.init()`, puedes establecer opciones para `RedisIntegration` y modificar su comportamiento:

```python
import sentry_sdk
from sentry_sdk.integrations.redis import RedisIntegration

sentry_sdk.init(
    # ...
    integrations=[
        RedisIntegration(
            max_data_size=None,
            cache_prefixes=["mycache", "template.cache"],
        ),
    ],
)
```

Puedes pasar los siguientes argumentos con nombre a `RedisIntegration()`:

* `max_data_size`

De forma predeterminada, `RedisIntegration()` recortará los datos recopilados después de `1024` caracteres. Puedes cambiar este comportamiento con el parámetro `max_data_size`:

Puedes establecer `max_data_size` en un entero para controlar cuántos caracteres se deben recopilar.

Si estableces `max_data_size` en un valor que se evalúe como `False` (como `0` o `None`), no se realizará ningún recorte. Se registrará el comando de Redis completo.

* `cache_prefixes`

Puedes especificar una lista de prefijos de claves de Redis para definir un espacio de claves que se deba considerar como caché. Las claves de caché aparecerán en el panel de monitorización de caché, ofreciéndote más información sobre tu estrategia de caché.

Por ejemplo, si estableces `cache_prefixes` en `["template.cache", "middleware.cache"]`, entonces el acceso a todas las claves de Redis que comiencen con `template.cache` o `middleware.cache` aparecerá en tu panel de monitorización de caché.


<div id="supported-versions">
  ## Versiones compatibles
</div>

- Python: 3.6+

<Include name="python-use-older-sdk-for-legacy-support.mdx" />