---
title: Bottle
description: "Aprende a usar Sentry con Bottle."
---

La integración de Bottle añade compatibilidad con el [framework web Bottle](https://bottlepy.org/).
Actualmente funciona bien con la versión estable de Bottle (0.12).
Sin embargo, la integración con la versión de desarrollo (0.13) no funciona correctamente.

<div id="install">
  ## Instalación
</div>

Instala `sentry-sdk` desde PyPI con el extra `bottle`:

```bash {tabTitle:pip}
pip install "sentry-sdk[bottle]"
```

```bash {tabTitle:uv}
uv add "sentry-sdk[bottle]"
```


<div id="configure">
  ## Configuración
</div>

Si tienes el paquete `bottle` en tus dependencias, la integración de Bottle se habilitará automáticamente al inicializar el SDK de Sentry.

<PlatformContent includePath="getting-started-config" />

<div id="verify">
  ## Verifica
</div>

```python
from bottle import Bottle, run

sentry_sdk.init(...)  # same as above

app = Bottle()

@app.route('/')
def hello():
    1 / 0
    return "¡Hola Mundo!"

run(app, host='localhost', port=8000)
```

Cuando abras [http://localhost:8000/](http://localhost:8000/) en tu navegador, se creará una transacción en la sección Performance de [sentry.io](https://sentry.io). Además, se enviará un evento de error a [sentry.io](https://sentry.io) y quedará asociado a la transacción.

Los datos pueden tardar unos momentos en aparecer en [sentry.io](https://sentry.io).


<div id="behavior">
  ## Comportamiento
</div>

<Include name="python-uwsgi-warning.mdx" />

- El SDK de Sentry para Python instalará la integración de Bottle en todas tus aplicaciones. La integración se engancha a la clase base de Bottle.

- Se notifican todas las excepciones que provocan un error interno del servidor.

- Los datos de la solicitud se adjuntan a todos los eventos: **método HTTP, URL, encabezados, datos de formulario, cargas JSON**. Sentry excluye los cuerpos sin procesar y las cargas de archivos multiparte. Sentry también excluye la información de identificación personal (como ID de usuario, nombres de usuario, cookies, encabezados de autorización, direcciones IP), a menos que establezcas `send_default_pii` en `True`.

- Cada solicitud tiene un ámbito independiente. Los cambios en el ámbito dentro de una vista, por ejemplo, establecer una etiqueta, solo se aplicarán a los eventos enviados como parte de la solicitud que se está procesando.

<div id="options">
  ## Opciones
</div>

Si agregas `BottleIntegration` explícitamente a tu llamada a `sentry_sdk.init()`, puedes establecer opciones para `BottleIntegration` y así modificar su comportamiento:

```python
import sentry_sdk
from sentry_sdk.integrations.bottle import BottleIntegration

sentry_sdk.init(
    # mismo que arriba
    integrations=[
        BottleIntegration(
            transaction_style="endpoint",
            failed_request_status_codes={*range(500, 600)},
        ),
    ],
)

```

Cada una de las siguientes opciones se admite como argumento con nombre en `BottleIntegration()`.


<div id="transaction_style">
  ### `transaction_style`
</div>

La opción `transaction_style` especifica cómo se genera el nombre de la transacción. Puedes establecerla en &quot;endpoint&quot; (valor predeterminado) o &quot;url&quot;.

Por ejemplo, dada la siguiente ruta:

```python
@app.route("/myurl/<foo>")
def myendpoint():
    return "ok"
```

* Si configuras `transaction_style="endpoint"`, el nombre de la transacción será `"myendpoint"`, ya que ese es el nombre de la función manejadora de la ruta.
* Si configuras `transaction_style="url"`, el nombre de la transacción será `"/myurl/<foo>"`, ya que esa es la ruta URL.


<div id="failed_request_status_codes">
  ### `failed_request_status_codes`
</div>

Un conjunto (`set`) de enteros que determina cuándo un [`HTTPResponse`](https://bottlepy.org/docs/dev/api.html#bottle.HTTPResponse), generado o devuelto por el controlador de la solicitud, debe informarse a Sentry. El `HTTPResponse` se informa a Sentry si su código de estado está incluido en el conjunto `failed_request_status_codes`.

Ejemplos de valores válidos para `failed_request_status_codes`:

- `{500}` solo informará `HTTPResponse` con estado 500.
- `{400, *range(500, 600)}` informará `HTTPResponse` con estado 400, así como aquellos en el rango 5xx.
- `set()` (el conjunto vacío) no informará ningún `HTTPResponse` a Sentry.

El valor predeterminado es `{*range(500, 600)}`, lo que significa que cualquier `HTTPResponse` con un estado en el rango 5xx se informa a Sentry.

Independientemente de cómo se configure `failed_request_status_codes`, cualquier excepción distinta de `HTTPResponse` que lance el controlador se informa a Sentry. Por ejemplo, si tu controlador de solicitudes lanza un `AttributeError` no controlado, el `AttributeError` se informa a Sentry, incluso si has establecido `failed_request_status_codes=set()`.

<div id="supported-versions">
  ## Versiones compatibles
</div>

- Bottle: 0.12.13+
- Python: 3.6+

<Include name="python-use-older-sdk-for-legacy-support.mdx" />