---
title: gRPC
description: "Conoce la integración de gRPC y cómo añade compatibilidad para el cliente y el servidor gRPC de grpcio."
---

La integración de [gRPC](https://grpc.io/) instrumenta solicitudes gRPC entrantes unary-unary y solicitudes gRPC salientes unary-unary y unary-stream usando canales de grpcio.

Usa esta integración para iniciar o continuar transacciones de solicitudes gRPC entrantes, crear spans para las solicitudes salientes
y asegurar que las trazas se propaguen correctamente a los servicios descendentes.

<div id="install">
  ## Instalación
</div>

Instala `sentry-sdk` desde PyPI con el extra `grpcio`.

```bash {tabTitle:pip}
pip install "sentry-sdk[grpcio]"
```

```bash {tabTitle:uv}
uv add "sentry-sdk[grpcio]"
```

<div id="configure">
  ## Configurar
</div>

Agrega `GRPCIntegration()` a tu lista de `integrations` y habilita el tracing.

Esto añadirá los interceptores adecuados a tu servidor o cliente para capturar errores y datos de rendimiento.

Además de capturar errores, puedes supervisar las interacciones entre varios servicios o aplicaciones [habilitando el tracing](/es/concepts/key-terms/tracing/). También puedes recopilar y analizar perfiles de rendimiento de usuarios reales con [profiling](/es/product/explore/profiling/).

Selecciona qué funcionalidades de Sentry quieres instalar además de la supervisión de errores para obtener a continuación las instrucciones correspondientes de instalación y configuración.

<OnboardingOptionButtons
  options={[
  'error-monitoring',
  'performance',
  'profiling',
]}
/>

<div id="server">
  ### Servidor
</div>

```python
import grpc

import sentry_sdk
from sentry_sdk.integrations.grpc import GRPCIntegration

sentry_sdk.init(
    dsn="___PUBLIC_DSN___",
    # Agrega datos como encabezados de solicitud e IP de usuarios, si aplica;
    # consulta https://docs.sentry.io/platforms/python/data-management/data-collected/ para más información
    send_default_pii=True,
    # ___PRODUCT_OPTION_START___ performance
    # Establece traces_sample_rate en 1.0 para capturar el 100%
    # de las transacciones para el rastreo.
    traces_sample_rate=1.0,
    # ___PRODUCT_OPTION_END___ performance
    # ___PRODUCT_OPTION_START___ profiling
    # Para recopilar perfiles de todas las sesiones de perfilado,
    # establece `profile_session_sample_rate` en 1.0.
    profile_session_sample_rate=1.0,
    # Los perfiles se recopilarán automáticamente mientras
    # haya un span activo.
    profile_lifecycle="trace",
    # ___PRODUCT_OPTION_END___ profiling
    integrations=[
        GRPCIntegration(),
    ],
)

...

# esto funciona con servidores síncronos:
server = grpc.server(thread_pool=...)

# ... y servidores asíncronos:
server = grpc.aio.server()

```

<div id="client">
  ### Cliente
</div>

```python
import grpc

import sentry_sdk
from sentry_sdk.integrations.grpc import GRPCIntegration

sentry_sdk.init(
    dsn="___PUBLIC_DSN___",
    # Agrega datos como encabezados de solicitud e IP de usuarios, si aplica;
    # consulta https://docs.sentry.io/platforms/python/data-management/data-collected/ para más información
    send_default_pii=True,
    # ___PRODUCT_OPTION_START___ performance
    # Establece traces_sample_rate en 1.0 para capturar el 100%
    # de las transacciones para el rastreo.
    traces_sample_rate=1.0,
    # ___PRODUCT_OPTION_END___ performance
    # ___PRODUCT_OPTION_START___ profiling
    # Para recopilar perfiles de todas las sesiones de perfilado,
    # establece `profile_session_sample_rate` en 1.0.
    profile_session_sample_rate=1.0,
    # Los perfiles se recopilarán automáticamente mientras
    # haya un span activo.
    profile_lifecycle="trace",
    # ___PRODUCT_OPTION_END___ profiling
    integrations=[
        GRPCIntegration(),
    ],
)

...

# esto funciona con clientes síncronos:
with grpc.insecure_channel("example.com:12345") as channel:
    ...

# ... y clientes asíncronos:
async with grpc.aio.insecure_channel("example.com:12345") as channel:
    ...
```

<Alert>
  **Nota:**

  En versiones anteriores de esta integración, debías añadir los interceptores manualmente. Desde la versión 1.35.0 del SDK de Python, ya no es necesario; solo debes añadir GRPCIntegration como se describe arriba.
</Alert>

<div id="verify">
  ## Verifica
</div>

<div id="server">
  ### Servidor
</div>

Si añadiste `GRPCIntegration` como se describió arriba, el servidor creará una transacción por cada llamada a una función y la enviará a [sentry.io](https://sentry.io).

Los datos tardan unos momentos en aparecer en [sentry.io](https://sentry.io).

<div id="client">
  ### Cliente
</div>

```python
import grpc

sentry_sdk.init(...)  # mismo que arriba

...

with sentry_sdk.start_transaction(op="function", name="testing_sentry"):
    with grpc.insecure_channel("example.com:12345") as channel:
        stub = helloworld_pb2_grpc.GreeterStub(channel)
        response = stub.SayHello(helloworld_pb2.HelloRequest(name="you"))

```

Esto creará una transacción llamada `testing_sentry` en la sección de Performance de [sentry.io](https://sentry.io) y generará un span para la llamada al método `SayHello` en el servidor.

La transacción creada en el cliente también estará vinculada con la transacción en el servidor, ofreciéndote un trazado completo de tu solicitud.

Si usas un framework (como Django, Flask, FastAPI, etc.), la transacción se creará automáticamente por ti.

Los datos tardan unos instantes en aparecer en [sentry.io](https://sentry.io).

<div id="supported-versions">
  ## Versiones compatibles
</div>

* grpcio: 1.39 o superior
* Python: 3.7 o superior

<Include name="python-use-older-sdk-for-legacy-support.mdx" />