---
title: Hugging Face Hub
description: "Aprende a usar Sentry con Hugging Face Hub."
---

Esta integración conecta Sentry con [Hugging Face Hub](https://github.com/huggingface/huggingface_hub) en Python.

Una vez que instales este SDK, podrás usar Sentry AI Agents Monitoring, un panel de Sentry que te ayuda a entender qué ocurre con tus solicitudes de IA. Sentry AI Monitoring recopilará automáticamente información sobre prompts, herramientas, tokens y modelos. Obtén más información en el [AI Agents Dashboard](/es/product/insights/ai/agents).

<div id="install">
  ## Instalación
</div>

Instala `sentry-sdk` desde PyPI con el extra `huggingface_hub`:

```bash {tabTitle:pip}
pip install "sentry-sdk[huggingface_hub]"
```

```bash {tabTitle:uv}
uv add "sentry-sdk[huggingface_hub]"
```

<div id="configure">
  ## Configurar
</div>

Si tienes el paquete `huggingface_hub` entre tus dependencias, la integración con Hugging Face Hub se habilitará automáticamente al inicializar el SDK de Sentry.

```python
import sentry_sdk

sentry_sdk.init(
    dsn="___PUBLIC_DSN___",
    environment="local",
    traces_sample_rate=1.0,
    send_default_pii=True,
)
```

<div id="verify">
  ## Verificar
</div>

Comprueba que la integración funciona inicializando una transacción e invocando un agente. En estos ejemplos, proporcionamos una herramienta de función para tirar un dado.

```python
import random
import sentry_sdk
from huggingface_hub import InferenceClient

def roll_die(sides):
    """Lanza un dado con un número dado de caras"""
    return f"Salió un {random.randint(1, sides)} en un dado de {sides} caras."

HF_TOKEN = "..."
TOOLS = [{
    "type": "function",
    "function": {
        "name": "roll_die",
        "description": "Lanza un dado con un número dado de caras",
        "parameters": {
            "type": "object",
            "properties": {
                "sides": {
                    "type": "int",
                    "description": "El número de caras del dado"
                }
            },
            "required": ["sides"],
        },
    }
}]

def main():
    sentry_sdk.init(...)  # igual que arriba

    client = InferenceClient(token=HF_TOKEN)

    with sentry_sdk.start_transaction(name="testing_sentry"):
        response = client.chat_completion(
            model="Qwen/Qwen2.5-72B-Instruct",
            messages=[{
                "role": "user",
                "content": "Saluda al usuario y usa la herramienta de lanzamiento de dado para lanzar un dado de 6 caras."
            }],
            tools=TOOLS,
            tool_choice="auto",
        )

if __name__ == "__main__":
    main()
```

Después de ejecutar este script, los datos resultantes deberían aparecer en la pestaña &quot;AI Spans&quot; de la página &quot;Explore&quot; &gt; &quot;Traces&quot; en Sentry.io y en el [AI Agents Dashboard](/es/product/insights/ai/agents).

Es posible que los datos tarden unos instantes en aparecer en [sentry.io](https://sentry.io).

<div id="behavior">
  ## Comportamiento
</div>

* La integración con Hugging Face Hub conectará Sentry con todos los métodos compatibles de Hugging Face Hub automáticamente.

* Se registran todas las excepciones.

* Sentry considera las entradas y salidas de LLM y del tokenizador como PII (información de identificación personal) y no incluye datos de PII de forma predeterminada. Si quieres incluir los datos, establece `send_default_pii=True` en la llamada a `sentry_sdk.init()`. Para excluir explícitamente los prompts y las salidas aun con `send_default_pii=True`, configura la integración con `include_prompts=False` como se muestra en la [sección de opciones](#options) a continuación.

<div id="options">
  ## Opciones
</div>

Si añades explícitamente `HuggingfaceHubIntegration` a tu llamada a `sentry_sdk.init()`, puedes establecer opciones para `HuggingfaceHubIntegration` y ajustar su comportamiento:

```python
import sentry_sdk
from sentry_sdk.integrations.huggingface_hub import HuggingfaceHubIntegration

sentry_sdk.init(
    # ...
    # Agrega datos como entradas y respuestas;
    # consulta https://docs.sentry.io/platforms/python/data-management/data-collected/ para más información
    send_default_pii=True,
    integrations=[
        HuggingfaceHubIntegration(
            include_prompts=False,  # Las entradas/salidas del LLM no se enviarán a Sentry, a pesar de send_default_pii=True
        ),
    ],
)
```

Puedes pasar los siguientes argumentos con nombre a `HuggingfaceHubIntegration()`:

* `include_prompts`

  Indica si se deben enviar a Sentry las entradas y salidas del LLM y del tokenizer. Sentry considera estos datos como información de identificación personal (PII) de forma predeterminada. Si quieres incluirlos, establece `send_default_pii=True` en la llamada a `sentry_sdk.init()`. Para excluir explícitamente los prompts y salidas incluso con `send_default_pii=True`, configura la integración con `include_prompts=False`.

  El valor predeterminado es `True`.

<div id="supported-versions">
  ## Versiones compatibles
</div>

* Python: 3.8+
* huggingface&#95;hub: 0.22+