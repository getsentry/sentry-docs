---
title: Apache Beam
description: "Aprende a usar Sentry con Beam."
---

La integración de Beam actualmente analiza las funciones en [ParDo](https://github.com/apache/beam/blob/release-2.13.0/sdks/python/apache_beam/transforms/core.py#L991) para devolver excepciones en sus respectivas funciones `setup`, `start_bundle`, `process` y `finish_bundle`.

**Esta integración es experimental.** Puede retirarse en versiones menores. Al habilitar esta integración, es posible que veas valores incorrectos en `server_name` e `ip` debido a ciertas propiedades distribuidas dentro de Beam.

Se requiere Beam versión 2.12 o posterior.

Además de capturar errores, puedes supervisar las interacciones entre múltiples servicios o aplicaciones [habilitando el tracing](/es/concepts/key-terms/tracing/). También puedes recopilar y analizar perfiles de rendimiento de usuarios reales con [profiling](/es/product/explore/profiling/).

Selecciona qué funciones de Sentry te gustaría instalar, además de Error Monitoring, para obtener a continuación las instrucciones correspondientes de instalación y configuración.

Agrega `BeamIntegration()` a tu lista de `integrations`:

<OnboardingOptionButtons
  options={[
'error-monitoring',
'performance',
'profiling',
]}
/>

```python
import sentry_sdk
from sentry_sdk.integrations.beam import BeamIntegration

sentry_sdk.init(
    dsn="___PUBLIC_DSN___",
    # Agrega datos como encabezados de solicitud e IP de usuarios, si corresponde;
    # consulta https://docs.sentry.io/platforms/python/data-management/data-collected/ para más información
    send_default_pii=True,
    # ___PRODUCT_OPTION_START___ performance
    # Establece traces_sample_rate en 1.0 para capturar el 100%
    # de las transacciones para el rastreo.
    traces_sample_rate=1.0,
    # ___PRODUCT_OPTION_END___ performance
    # ___PRODUCT_OPTION_START___ profiling
    # Para recopilar perfiles de todas las sesiones de perfilado,
    # establece `profile_session_sample_rate` en 1.0.
    profile_session_sample_rate=1.0,
    # Los perfiles se recopilarán automáticamente mientras
    # haya un span activo.
    profile_lifecycle="trace",
    # ___PRODUCT_OPTION_END___ profiling
    integrations=[
        BeamIntegration(),
    ],
)
```

<div id="behavior">
  ## Comportamiento
</div>

* A las funciones se les inyecta una función inspect para corregir la obtención de la [firma de la función](https://github.com/apache/beam/blob/release-2.13.0/sdks/python/apache_beam/transforms/core.py#L288L298).
* La integración requiere que Sentry esté instalado en todas las máquinas de trabajo usando un `--requirements_file`.
* La máquina principal que invoca el pipeline requiere la misma versión de Sentry que los nodos de trabajo.