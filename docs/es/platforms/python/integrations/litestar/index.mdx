---
title: Litestar
description: "Aprende a usar Sentry con Litestar."
---

La integración de Litestar añade compatibilidad con el [framework Litestar](https://docs.litestar.dev/2/).

<div id="install">
  ## Instalación
</div>

Instala `sentry-sdk` desde PyPI con el extra `litestar`:

```bash {tabTitle:pip}
pip install "sentry-sdk[litestar]" "uvicorn"
```

```bash {tabTitle:uv}
uv add "sentry-sdk[litestar]" "uvicorn"
```

<div id="configure">
  ## Configurar
</div>

Si tienes el paquete `litestar` en tus dependencias, la integración con Litestar se habilitará automáticamente al inicializar el SDK de Sentry.

Además de capturar errores, puedes supervisar las interacciones entre varios servicios o aplicaciones [habilitando el trazo](/es/concepts/key-terms/tracing/). También puedes recopilar y analizar perfiles de rendimiento de usuarios reales con el [perfilado](/es/product/explore/profiling/).

Selecciona qué funciones de Sentry quieres instalar, además del monitoreo de errores, para obtener a continuación las instrucciones correspondientes de instalación y configuración.

<OnboardingOptionButtons
  options={[
'error-monitoring',
'performance',
'profiling',
]}
/>

```python
import sentry_sdk

sentry_sdk.init(
    dsn="___PUBLIC_DSN___",
    # Agrega datos como encabezados de solicitud e IP de los usuarios, si corresponde;
    # consulta https://docs.sentry.io/platforms/python/data-management/data-collected/ para obtener más información
    send_default_pii=True,
    # ___PRODUCT_OPTION_START___ performance
    # Establece traces_sample_rate en 1.0 para capturar el 100 %
    # de las transacciones para el seguimiento.
    traces_sample_rate=1.0,
    # ___PRODUCT_OPTION_END___ performance
    # ___PRODUCT_OPTION_START___ profiling
    # Para recopilar perfiles de todas las sesiones de perfil,
    # establece `profile_session_sample_rate` en 1.0.
    profile_session_sample_rate=1.0,
    # Los perfiles se recopilarán automáticamente mientras
    # haya un span activo.
    profile_lifecycle="trace",
    # ___PRODUCT_OPTION_END___ profiling
)
```

<div id="verify">
  ## Verificar
</div>

```python
from litestar import Litestar, get

sentry_sdk.init(...)  # igual que arriba

@get("/hello")
async def hello_world() -> str:
    1 / 0
    return "Hello!"

app = Litestar(route_handlers=[hello_world])
```

Guarda el archivo de arriba como `app.py` y arranca el servidor de desarrollo con:

```bash
uvicorn app:app
```

Cuando visites [http://localhost:8000/hello](http://localhost:8000/hello) en tu navegador, se creará una transacción en la sección Performance de [sentry.io](https://sentry.io). Además, el `ZeroDivisionError` que hemos incorporado en nuestro controlador `hello_world` se enviará a [sentry.io](https://sentry.io) y se asociará a la transacción.

Los datos pueden tardar unos instantes en aparecer en [sentry.io](https://sentry.io).

<div id="options">
  ## Opciones
</div>

Al agregar `LitestarIntegration` explícitamente a tu llamada a `sentry_sdk.init()`, puedes configurar opciones de `LitestarIntegration` para modificar su comportamiento:

```python
import sentry_sdk
from sentry_sdk.integrations.litestar import LitestarIntegration

sentry_sdk.init(
    # ...
    integrations=[
        LitestarIntegration(
            failed_request_status_codes={403, *range(500, 599)},
        ),
    ],
)
```

Puedes pasar los siguientes argumentos con nombre a `LitestarIntegration()`:

<div id="failed_request_status_codes">
  ### `failed_request_status_codes`
</div>

Un `set` de enteros que determina cuándo se debe informar una `HTTPException` a Sentry. La `HTTPException` se informa a Sentry si su código de estado está incluido en el `set` `failed_request_status_codes`.

Ejemplos de `failed_request_status_codes` válidos:

* `{500}` solo informará `HTTPException` con estado 500.
* `{400, *range(500, 600)}` informará `HTTPException` con estado 400, así como las del rango 5xx.
* `set()` (el conjunto vacío) no informará ninguna `HTTPException` a Sentry.

El valor predeterminado es `{*range(500, 600)}`, lo que significa que cualquier `HTTPException` con un estado en el rango 5xx se informa a Sentry.

Independientemente de cómo se configure `failed_request_status_codes`, cualquier excepción generada por el manejador que no sea de tipo `HTTPException` (o una subclase) se informa a Sentry. Por ejemplo, si tu manejador de solicitudes genera un `AttributeError` no controlado, el `AttributeError` se informa a Sentry, incluso si configuraste `failed_request_status_codes=set()`.

<div id="supported-versions">
  ## Versiones compatibles
</div>

<Alert level="warning" title="Nota">
  Litestar [cambió su nombre desde Starlite](https://litestar.dev/about/organization.html#litestar-and-starlite)
  con el lanzamiento de la versión 2.0. Ofrecemos distintas integraciones para cada uno. Esta guía corresponde a Litestar.
  Consulta la [integración de Starlite](/es/platforms/python/integrations/starlite) para la guía correspondiente a Starlite.
</Alert>

* Litestar: 2.0.0+
* Python: 3.8+