---
title: Serverless
description: "Aprende a usar el SDK de Python de Sentry en un entorno serverless."
---

La integración de Serverless añade compatibilidad con el [Serverless Framework](https://www.serverless.com/).

Se recomienda usar la integración específica para tu entorno serverless, si está disponible, ya que es más fácil de usar y captura información más útil:

* <Link to="/platforms/python/integrations/gcp-functions">Google Cloud Functions</Link>
* <Link to="/platforms/python/integrations/aws-lambda">AWS Lambda Functions</Link>

Si utilizas un proveedor serverless no admitido directamente por el SDK, puedes usar esta integración genérica.

<div id="install">
  ## Instalación
</div>

Instala `sentry-sdk` desde PyPI:

```bash {tabTitle:pip}
pip install "sentry-sdk"
```

```bash {tabTitle:uv}
uv add "sentry-sdk"
```

<div id="configure">
  ## Configurar
</div>

Aplica el decorador `serverless_function` a cada función que pueda generar errores:

Además de capturar errores, puedes supervisar las interacciones entre varios servicios o aplicaciones [habilitando el tracing](/es/concepts/key-terms/tracing/). También puedes recopilar y analizar perfiles de rendimiento de usuarios reales con [profiling](/es/product/explore/profiling/).

Selecciona qué funciones de Sentry quieres instalar, además de Error Monitoring, para obtener a continuación las instrucciones correspondientes de instalación y configuración.

<OnboardingOptionButtons
  options={[
'error-monitoring',
'performance',
'profiling',
]}
/>

```python
import sentry_sdk
from sentry_sdk.integrations.serverless import serverless_function

sentry_sdk.init(
    dsn="___PUBLIC_DSN___",
    # Agrega datos como encabezados de solicitud e IP de los usuarios, si corresponde;
    # consulta https://docs.sentry.io/platforms/python/data-management/data-collected/ para obtener más información
    send_default_pii=True,
    # ___PRODUCT_OPTION_START___ performance
    # Configura traces_sample_rate en 1.0 para capturar el 100 %
    # de las transacciones de rastreo.
    traces_sample_rate=1.0,
    # ___PRODUCT_OPTION_END___ performance
    # ___PRODUCT_OPTION_START___ profiling
    # Para recopilar perfiles de todas las sesiones de perfil,
    # configura `profile_session_sample_rate` en 1.0.
    profile_session_sample_rate=1.0,
    # Los perfiles se recopilarán automáticamente mientras
    # haya un span activo.
    profile_lifecycle="trace",
    # ___PRODUCT_OPTION_END___ profiling
)

@serverless_function
def my_function(...): ...
```

Usa la integración genérica llamando al decorador `serverless_function`.
Los decoradores encapsulan una función y modifican su comportamiento. Luego, despliega y prueba la función.

<div id="verify">
  ## Verificar
</div>

Envuelve una función con `serverless_function` que genere un error:

```python
@serverless_function
def my_function(...):
    1 / 0  # genera un error
```

Ahora despliega tu función. Cuando la ejecutes, se enviará un evento de error a [sentry.io](https://sentry.io).

<div id="behavior">
  ## Comportamiento
</div>

* Cada llamada a una función decorada se bloqueará y esperará a que se envíen los eventos actuales antes de devolver el control. Cuando no haya eventos que enviar, no se añadirá ningún retraso. Sin embargo, si hay errores, se retrasará la devolución de tu función serverless hasta que se envíen los eventos. Esto es necesario porque los entornos serverless suelen reservarse el derecho de terminar el runtime/VM cuando consideran que no se está usando.

* Puedes añadir más contexto como se describe <PlatformLink to="/enriching-events/context/">aquí</PlatformLink>.

* Los datos de la solicitud se adjuntan a todos los eventos: **método HTTP, URL, encabezados, datos de formulario, cargas JSON**. Sentry excluye los cuerpos sin procesar y las cargas de archivos multiparte. Sentry también excluye información de identificación personal (como IDs de usuario, nombres de usuario, cookies, encabezados de autorización, direcciones IP) a menos que configures `send_default_pii` en `True`.

* Cada solicitud tiene un ámbito independiente. Los cambios en el ámbito dentro de una vista, por ejemplo al establecer una etiqueta, solo se aplicarán a los eventos enviados como parte de la solicitud que se está procesando.

El tiempo máximo total de bloqueo está definido por la <PlatformLink to="/configuration/options/#shutdown-timeout">opción del cliente `shutdown_timeout`</PlatformLink>.

Puedes desactivar este comportamiento decorando con `@serverless_function(flush=False)` en su lugar.