---
title: Fragment
caseStyle: camelCase
supportLevel: producción
sdk: sentry.java.android.fragment
description: "Obtén más información sobre la integración de Fragment de Sentry para el SDK de Android."
categories:
  - móvil
---

La biblioteca `sentry-android-fragment` ofrece compatibilidad con [Fragment](https://developer.android.com/jetpack/androidx/releases/fragment) para Sentry mediante [FragmentLifecycleIntegration](https://github.com/getsentry/sentry-java/blob/a5f30b43b1dad2634ce020809f3b52e0d564a22a/sentry-android-fragment/src/main/java/io/sentry/android/fragment/FragmentLifecycleIntegration.kt). El código fuente está disponible [en GitHub](https://github.com/getsentry/sentry-java/tree/main/sentry-android-fragment/src/main/java/io/sentry/android/fragment).

En esta página, te ayudamos a configurar la integración de Fragment de Sentry para que agregue automáticamente una migaja (breadcrumb) por cada evento del ciclo de vida de un fragmento y cree un span a partir de una transacción activa vinculada al alcance de cada inicio de fragmento.

<div id="auto-installation-with-the-sentry-android-gradle-plugin">
  ## Instalación automática con el complemento de Gradle para Sentry Android
</div>

<div id="install">
  ### Instalación
</div>

A partir de la versión `3.1.0`, el complemento de Sentry para Android Gradle añadirá automáticamente la dependencia `sentry-android-fragment`. El complemento solo añadirá la dependencia `sentry-android-fragment` si se detecta una dependencia de `androidx.fragment` en el classpath.

Añade el complemento de Sentry para Android Gradle en `build.gradle`:

```groovy
plugins {
  id "io.sentry.android.gradle" version "{{@inject packages.version('sentry.java.android.gradle-plugin', '3.0.0') }}"
}
```

```kotlin
plugins {
  id("io.sentry.android.gradle") version "{{@inject packages.version('sentry.java.android.gradle-plugin', '3.0.0') }}"
}
```

Luego, inicializa el [Android SDK](/es/platforms/android/#configure).

El Android SDK agrega automáticamente `FragmentLifecycleIntegration` si la dependencia `sentry-android-fragment` está en el classpath. La integración se añade con `enableFragmentLifecycleBreadcrumbs` y `enableAutoFragmentLifecycleTracing` habilitados.

No obstante, puedes sobrescribir el comportamiento predeterminado agregando tu propia instancia de `FragmentLifecycleIntegration`. Para ello, consulta la sección de [instalación manual](/es/platforms/android/integrations/fragment/#configure) a continuación.

<div id="manual-installation">
  ## Instalación manual
</div>

<div id="install">
  ### Instalación
</div>

Para añadir la integración de Fragment, [inicializa manualmente](/es/platforms/android/configuration/manual-init/#manual-initialization) el SDK de Android y luego añade la dependencia `sentry-android-fragment`. Con Gradle:

```groovy
implementation 'io.sentry:sentry-android:{{@inject packages.version('sentry.java.android', '5.1.0') }}'
implementation 'io.sentry:sentry-android-fragment:{{@inject packages.version('sentry.java.android.fragment', '5.1.0') }}'
```

<div id="configure">
  ### Configurar
</div>

La configuración debe realizarse lo antes posible en el ciclo de vida de tu aplicación.

```kotlin
import android.app.Application
import io.sentry.android.core.SentryAndroid
import io.sentry.android.fragment.FragmentLifecycleIntegration

SentryAndroid.init(this) { options ->
    options.addIntegration(
        FragmentLifecycleIntegration(
            this,
            enableFragmentLifecycleBreadcrumbs = true, // habilitado por defecto
            enableAutoFragmentLifecycleTracing = true  // deshabilitado por defecto
            )
        )
}
```

También puedes configurar qué eventos del ciclo de vida de los fragmentos se añadirán como breadcrumbs.

```kotlin
import android.app.Application
import io.sentry.android.core.SentryAndroid
import io.sentry.android.fragment.FragmentLifecycleIntegration
import io.sentry.android.fragment.FragmentLifecycleState.CREATED
import io.sentry.android.fragment.FragmentLifecycleState.DESTROYED

SentryAndroid.init(this) { options ->
    options.addIntegration(
        FragmentLifecycleIntegration(
            this,
            filterFragmentLifecycleBreadcrumbs = setOf(FragmentLifecycleState.CREATED, FragmentLifecycleState.DESTROYED)
            )
        )
}
```

<div id="verify">
  ## Verificar
</div>

Crea una nueva vista `Fragment` y añade un Button.
Este snippet captura un mensaje deliberado, para que puedas comprobar que todo funciona en cuanto lo configures:

```kotlin
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment
import io.sentry.Sentry

class SampleFragment : Fragment() {

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        // databinding generado
        return FragmentSampleBinding.inflate(inflater).apply {
            this.sendMessage.setOnClickListener {
                Sentry.captureMessage("Un mensaje de los eventos del ciclo de vida del Fragment en breadcrumbs.")
            }
        }.root
    }

    companion object {
        @JvmStatic fun newInstance() = SampleFragment()
    }
}
```
