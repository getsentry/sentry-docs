---
title: Apollo 2
caseStyle: camelCase
supportLevel: production
sdk: sentry.java.apollo
description: "Obtén más información sobre la integración de Sentry Apollo 2 para el SDK de Android."
categories:
  - mobile
---

<Alert>

Para capturar transacciones, primero debes <PlatformLink to="/tracing/">configurar el tracing</PlatformLink> si aún no lo has hecho.

</Alert>

La integración de Sentry Apollo proporciona `SentryApolloInterceptor`, que crea un span para cada solicitud HTTP saliente ejecutada con un cliente GraphQL de [Apollo Android](https://github.com/apollographql/apollo-android).

<Alert>

Esta integración es compatible con Apollo 2.x. Para Apollo 3.x usa nuestra <PlatformLink to="/integrations/apollo3/">integración de Apollo 3</PlatformLink>. Para Apollo 4.x usa nuestra <PlatformLink to="/integrations/apollo4/">integración de Apollo 4</PlatformLink>.

</Alert>

<div id="install">
  ## Instalación
</div>

```groovy {tabTitle:Gradle}
implementation 'io.sentry:sentry-apollo:{{@inject packages.version('sentry.java.apollo', '5.2.0') }}'
```

Para otros administradores de dependencias, consulta el [repositorio central de Maven](https://search.maven.org/artifact/io.sentry/sentry-apollo).


<div id="configure">
  ## Configuración
</div>

Añade `SentryApolloInterceptor` al generador de Apollo:

```java
import com.apollographql.apollo.ApolloClient;
import io.sentry.apollo.SentryApolloInterceptor;

ApolloClient apollo = ApolloClient.builder()
    .serverUrl("https://tu-servidor-de-api/")
    .addApplicationInterceptor(new SentryApolloInterceptor())
    .build();
```

```kotlin
import com.apollographql.apollo.ApolloClient
import io.sentry.apollo.SentryApolloInterceptor

val apollo = ApolloClient.builder()
    .serverUrl("https://tu-servidor-de-api/")
    .addApplicationInterceptor(SentryApolloInterceptor())
    .build()
```


<div id="modify-or-drop-spans">
  ## Modificar o descartar spans
</div>

Los spans creados alrededor de las solicitudes pueden modificarse o descartarse usando `SentryApolloInterceptor.BeforeSpanCallback`, que se le pasa a `SentryApolloInterceptor`:

```java
import com.apollographql.apollo.ApolloClient;
import io.sentry.apollo.SentryApolloInterceptor;

ApolloClient apollo = ApolloClient.builder()
    .serverUrl("https://tu-servidor-de-api/")
    .addApplicationInterceptor(new SentryApolloInterceptor(
      (span, request, response) -> {
        if ("aQuery".equals(request.operation.name().name())) {
          span.setTag("nombre-de-la-etiqueta", "valor-de-la-etiqueta");
        }
        return span;
      }
    ))
    .build();
```

```kotlin
import com.apollographql.apollo.ApolloClient
import com.apollographql.apollo.interceptor.ApolloInterceptor.InterceptorRequest
import com.apollographql.apollo.interceptor.ApolloInterceptor.InterceptorResponse
import io.sentry.ISpan
import io.sentry.apollo.SentryApolloInterceptor
import io.sentry.apollo.SentryApolloInterceptor.BeforeSpanCallback

val apollo = ApolloClient.builder()
    .serverUrl("https://tu-servidor-de-api/")
    .addApplicationInterceptor(
        SentryApolloInterceptor(object : BeforeSpanCallback {
            override fun execute(span: ISpan, request: InterceptorRequest, response: InterceptorResponse?): ISpan {
                if ("aQuery" == request.operation.name().name()) {
                    span.setTag("clave-etiqueta", "valor-etiqueta")
                }
                return span
            }
        })
    )
    .build()
```
