---
title: Scopes y hubs
description: "Los SDK suelen gestionar automáticamente los scopes por ti en las integraciones con frameworks. Aprende qué es un scope y cómo puedes usarlo a tu favor."
notSupported:
  - native.breakpad
  - native.crashpad
  - native.minidumps
  - native.wasm
---

Cuando se captura y envía un evento a Sentry, los SDK combinan los datos de ese evento con información adicional del scope actual. Los SDK suelen gestionar automáticamente los scopes por ti en las integraciones con frameworks y no necesitas preocuparte por ellos. Sin embargo, conviene que sepas qué es un scope y cómo puedes usarlo a tu favor.

<div id="whats-a-scope-whats-a-hub">
  ## Qué es un Scope, qué es un Hub
</div>

Puedes pensar en el hub como el punto central que nuestros SDK usan para enrutar un evento a Sentry. Cuando llamas a `init()`, se crea un hub y, en él, un cliente y un scope en blanco. Ese hub se asocia luego con el hilo actual y mantiene internamente una pila de scopes.

El scope contiene información útil que debe enviarse junto con el evento. Por ejemplo, los [contexts](../context/) o los [breadcrumbs](../breadcrumbs/) se almacenan en el scope. Cuando se hace push de un scope, hereda todos los datos del scope padre y, cuando se hace pop, se revierten todas las modificaciones.

Las integraciones predeterminadas del SDK harán push y pop de scopes de forma inteligente. Por ejemplo, las integraciones de frameworks web crearán y destruirán scopes alrededor de tus rutas o controladores.

<div id="how-the-scope-and-hub-work">
  ## Cómo funcionan el Scope y el Hub
</div>

Cuando empiezas a usar un SDK, se crean automáticamente un scope y un hub listos para usar. Es poco probable que interactúes directamente con el hub a menos que estés escribiendo una integración o quieras crear o destruir scopes. Los scopes, por otro lado, están más orientados al usuario. Puedes llamar a varios setters en cualquier momento para modificar los datos almacenados en el scope. Esto es útil para hacer cosas como [modificar el contexto](../context/).

Cuando llamas a una función global como <PlatformIdentifier name="capture-event" />, Sentry descubre internamente el hub actual y le pide que capture un evento. Internamente, el hub luego combinará el evento con los datos del scope superior.

<Alert level="warning" title="La abstracción de Hub no está implementada">
  El SDK Native actualmente solo proporciona un único scope compartido por todos los hilos del programa y no mantiene estado local por hilo mediante un hub. Debido a esta limitación, debes asegurarte de que tus hilos no interfieran lógicamente entre sí con los cambios en el scope global, aunque desde la perspectiva de las condiciones de carrera de datos sea seguro hacerlo. Esto afecta a casos de uso donde, por ejemplo, quieres rastrear a muchos usuarios en programas tipo servidor mientras capturas eventos o cuando quieres trazar múltiples hilos en el tracing.

  Para obtener detalles sobre cómo esto afecta al tracing, consulta la sección [Connect Errors With Spans](/es/platforms/native/tracing/instrumentation/custom-instrumentation/#connect-errors-with-spans) de “Custom Instrumentation”.
</Alert>

<div id="configuring-the-scope">
  ## Configuración del scope
</div>

El SDK nativo mantiene la mayor parte de los datos en un scope global, pero permite crear scopes locales temporales para capturar eventos individuales.

Por ejemplo, puedes añadir tags personalizados o informar a Sentry sobre el usuario que está autenticado actualmente.

<PlatformContent includePath="enriching-events/scopes/configure-scope" />

También puedes aplicar esta configuración al desasignar un usuario al cerrar sesión:

<PlatformContent includePath="enriching-events/unset-user" />

Para saber qué información útil puede asociarse a los scopes, consulta
[la documentación de contexto](../context/).