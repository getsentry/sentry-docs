---
title: Google Breakpad
description: "Conoce la integración de Sentry con Google Breakpad."
---

[Breakpad](https://chromium.googlesource.com/breakpad/breakpad/) es un sistema multiplataforma de código abierto para informes de fallos, escrito en C++ por Google y precursor de Crashpad. Es compatible con macOS, Windows y Linux, y ofrece un cargador para enviar minidumps a una URL configurada en el momento en que el proceso se bloquea.

<Alert>
  Esta página describe el uso **independiente** de Breakpad con Sentry. A menos que ya hayas integrado Breakpad, te recomendamos encarecidamente usar nuestro [SDK nativo](/es/platforms/native/). Los eventos nativos de Breakpad tienen una funcionalidad muy limitada, y Breakpad usa informes de fallos en el mismo proceso, lo cual es menos robusto y tiene varias desventajas frente a los informes de fallos fuera de proceso.
</Alert>

<div id="integration">
  ## Integración
</div>

La compilación y la integración dependen de la plataforma de destino. Consulta la [Descripción general de la integración de Breakpad](https://chromium.googlesource.com/breakpad/breakpad/+/master/docs/getting_started_with_breakpad.md#integration-overview) para obtener instrucciones oficiales sobre cómo integrar Breakpad en tu programa. Por lo general, deberás añadir los headers de Breakpad a la ruta de includes y luego iniciar un `ExceptionHandler` específico de la plataforma.

Para la documentación oficial por plataforma, visita:

* [Guía de inicio para Linux](https://chromium.googlesource.com/breakpad/breakpad/+/master/docs/linux_starter_guide.md)
* [Guía de inicio para Mac](https://chromium.googlesource.com/breakpad/breakpad/+/master/docs/mac_breakpad_starter_guide.md)
* [Guía de inicio para Windows](https://chromium.googlesource.com/breakpad/breakpad/+/master/docs/windows_client_integration.md)

<div id="linux-example">
  ## Ejemplo en Linux
</div>

Primero, inicializa `ExceptionHandler` y pásale una función de retorno (callback) que se invoque cuando se genere un minidump. Esto puede usarse para moverlo a una ubicación conocida o registrarlo para su subida:

```cpp
#include "client/linux/handler/exception_handler.h"

using namespace google_breakpad;

namespace {

bool callback(const MinidumpDescriptor &descriptor,
              void *context,
              bool succeeded) {
    // si succeeded es true, descriptor.path() contiene una ruta
    // al archivo minidump. Context es el contexto pasado al
    // constructor del manejador de excepciones.
    return succeeded;
}

}

int main(int argc, char *argv[]) {
    MinidumpDescriptor descriptor("path/to/cache");
    ExceptionHandler eh(
      descriptor,
      /* filter */ nullptr,
      callback,
      /* context */ nullptr,
      /* install handler */ true,
      /* server FD */ -1
    );

    // ejecuta tu programa aquí
    return 0;
}
```

A continuación, implementa la carga de minidumps en Sentry. Dado que el callback del manejador de excepciones debe realizar la menor cantidad de trabajo posible, lo ideal es iniciar esta carga en el siguiente inicio de la aplicación. Puedes usar la clase `HttpUpload`, que se proporciona como parte del cliente de Breakpad:

```cpp
#include <string>
#include "common/linux/http_upload.h"

bool UploadMinidump(std::string &path) {
  // Agregar argumentos adicionales para Sentry
  std::map<string, string> parameters;

  std::map<string, string> files;
  files["upload_file_minidump"] = path;

  return HTTPUpload::SendRequest(
    "___MINIDUMP_URL___",
    parameters,
    files,
    /* proxy */ "",
    /* contraseña de proxy */ "",
    /* certificado */ "",
    /* cuerpo de la respuesta */ nullptr,
    /* código de respuesta */ nullptr,
    /* error */ nullptr
  );
}
```
