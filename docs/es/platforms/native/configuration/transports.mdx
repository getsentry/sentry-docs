---
title: Transports
sidebar_order: 90
description: Obtén más información sobre cómo personalizar la manera en que el SDK de Sentry envía datos a Sentry.
---

El SDK nativo utiliza *transports* para enviar cargas de eventos a Sentry. El transporte predeterminado depende de la plataforma de destino:

* **Windows**: WinHTTP
* **Linux**: Curl
* **macOS**: Curl

<div id="custom-transports">
  ## Transports personalizados
</div>

Para especificar un transporte personalizado, usa la función `sentry_options_set_transport`
y proporciona un transporte que implemente la interfaz `sentry_transport_t`.

```c
#include <sentry.h>

void custom_transport(sentry_envelope_t *envelope, void *state) {
  /*
   * Envía el evento aquí. Si el transporte requiere estado, como un objeto
   * de cliente HTTP o una cola de solicitudes, se puede especificar en el parámetro
   * `state` al configurar el transporte. Se pasará como segundo
   * argumento a esta función.
   * El transporte toma posesión del `envelope` y debe liberarlo cuando
   * termine.
   */
  sentry_envelope_free(envelope);
}

int main(void) {
  void *transport_state = 0;

  sentry_options_t *options = sentry_options_new();
  sentry_transport_t *transport = sentry_transport_new(custom_transport);
  sentry_transport_set_state(transport, transport_state);

  sentry_options_set_transport(options, transport);
  sentry_init(options);

  /* ... */
}
```

El transporte se invoca en el mismo hilo que la llamada a
`sentry_capture_event`. Considera trasladar la comunicación de red a un
hilo en segundo plano o a un pool de hilos para evitar bloquear la ejecución.

<div id="using-a-proxy">
  ## Uso de un proxy
</div>

El SDK nativo permite configurar un proxy `HTTP` (`CONNECT`) o `SOCKS5` a través del cual las solicitudes pueden canalizarse hacia nuestro backend. Puede configurarse manualmente mediante la siguiente interfaz de opciones:

```c
sentry_options_t *options = sentry_options_new();
sentry_options_set_proxy(options, "http://my.proxy:8080");
sentry_init(options);

/* ... */
```

La misma función también puede usarse para el proxy `SOCKS5`:

```c
sentry_options_t *options = sentry_options_new();
sentry_options_set_proxy(options, "socks5://my.proxy:1080");
sentry_init(options);

/* ... */
```

<div id="proxy-behavior">
  ### Comportamiento del proxy
</div>

Admitimos proxies `HTTP` en todas las plataformas y proxies `SOCKS5` en Linux y macOS. En Windows, los servidores proxy `https` no son compatibles con el transporte predeterminado (WinHTTP). El proxy también puede incluir autenticación (`"http://user:password@my.proxy:8080"`) o escribirse en formato IPv6 (`"http://[::1]:8080"`).

El SDK siempre configurará automáticamente el proxy HTTP si hay establecida una variable de entorno correspondiente. Según el protocolo del [DSN](/es/concepts/key-terms/dsn-explainer/), se lee la variable de entorno `http(s)_proxy` que corresponda. Por lo tanto, para un `DSN` alojado en Sentry, debes establecer la variable `https_proxy`.

Si no quieres que el SDK configure automáticamente el proxy HTTP a partir de las variables de entorno, puedes establecer la opción del proxy con una cadena vacía:

```c
sentry_options_t *options = sentry_options_new();
sentry_options_set_proxy(options, "");
sentry_init(options);

/* ... */
```
