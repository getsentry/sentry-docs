---
title: Opciones
description: "Obtén más información sobre cómo configurar el SDK mediante opciones. Estas se pasan a la función init y, por lo tanto, se establecen cuando el SDK se inicializa por primera vez."
sidebar_order: 1
---

<PlatformContent includePath="configuration/config-intro" />

<div id="available-options">
  ## Opciones disponibles
</div>

<TableOfContents ignoreIds={["available-options"]} />

<div id="core-options">
  ## Opciones principales
</div>

Las opciones que pueden leerse desde una variable de entorno (`SENTRY_DSN`, `SENTRY_ENVIRONMENT`, `SENTRY_RELEASE`) se cargarán automáticamente.

<SdkOption name="dsn" type="String">
  El DSN le indica al SDK dónde enviar los eventos. Si no se proporciona este valor, el SDK intentará leerlo de la variable de entorno `SENTRY_DSN`. Si esa variable no existe, el SDK no enviará ningún evento.

  Más información sobre [el uso del DSN](/es/product/sentry-basics/dsn-explainer/#dsn-utilization).
</SdkOption>

<SdkOption name="debug" type="Boolean" defaultValue="false">
  Activa o desactiva el modo de depuración. Cuando está habilitado, los errores del SDK se registran con el backtrace.
  Si quieres más salida, usa `config.sdk_logger.level`. `debug` solo sirve para adjuntar backtraces a los mensajes.
</SdkOption>

<SdkOption name="sdk_logger" type="Sentry::Logger">
  El logger que usa Sentry. El predeterminado para Rails es `Rails.logger`; de lo contrario, es `Sentry::Logger`. Asegúrate de cambiar el nivel del logger si necesitas salida de depuración. **No recomendamos hacerlo en producción a menos que sea absolutamente necesario.**

  ```ruby
  config.sdk_logger = Sentry::Logger.new(STDOUT)
  config.sdk_logger.level = ::Logger::DEBUG # defaults to INFO
  ```
</SdkOption>

<SdkOption name="release" type="String">
  Permite rastrear la versión de tu aplicación en Sentry.

  Determinamos la versión, en este orden de preferencia:

  * La variable de entorno `SENTRY_RELEASE`
  * El SHA del último commit (git)
  * Leyendo el archivo `REVISION` en la raíz de la app (usado por Capistrano)
  * Los metadatos del dyno de Heroku a través de la variable de entorno `HEROKU_SLUG_COMMIT` (debe haberse habilitado mediante Heroku Labs)

  <PlatformContent includePath="set-release" />
</SdkOption>

<SdkOption name="sample_rate" type="Float" defaultValue="1.0">
  Configura la tasa de muestreo de eventos de error, en el rango de `0.0` a `1.0`. El valor predeterminado es `1.0`, lo que significa que se enviará el 100% de los eventos de error. Si se establece en `0.1`, solo se enviará el 10% de los eventos de error.

  ```ruby
  # send 50% of events
  config.sample_rate = 0.5
  ```
</SdkOption>

<SdkOption name="send_client_reports" type="Boolean" defaultValue="true">
  Permite adjuntar informes de cliente de diagnóstico sobre eventos descartados a un sobre existente como máximo una vez cada 30 s. Si no quieres enviar estos datos, inhabilítalo configurando:

  ```ruby
  config.send_client_reports = false
  ```
</SdkOption>

<SdkOption name="send_default_pii" type="Boolean" defaultValue="false">
  Si esta opción está habilitada, se añade a los eventos de Sentry [cierta información de identificación personal (PII)](/es/platforms/ruby/data-management/data-collected/).

  Si habilitas esta opción, asegúrate de eliminar manualmente lo que no quieras enviar usando nuestras funciones para gestionar [*datos sensibles*](../../data-management/sensitive-data/).
</SdkOption>

<SdkOption name="send_modules" type="Boolean" defaultValue="true">
  Un valor booleano para decidir si se envía a Sentry la información de módulos (dependencias).

  ```ruby
  # if you don't want to send all the dependency info
  config.send_modules = false
  ```
</SdkOption>

<SdkOption name="include_local_variables" type="Boolean" defaultValue="false">
  Si se deben capturar variables locales del marco de la excepción generada.
</SdkOption>

<SdkOption name="auto_session_tracking" type="Boolean" defaultValue="true">
  Rastrea automáticamente las sesiones en ciclos de solicitud/respuesta.
</SdkOption>

<SdkOption name="max_breadcrumbs" type="Integer" defaultValue="100">
  La cantidad máxima de breadcrumbs que el SDK puede mantener.

  ```ruby
  config.max_breadcrumbs = 30
  ```
</SdkOption>

<SdkOption name="breadcrumbs_logger" type="Array">
  Sentry admite diferentes loggers de breadcrumbs en el SDK de Ruby:

  * `:sentry_logger` - Un logger general de breadcrumbs para todas las aplicaciones Ruby.
  * `:http_logger` - Captura solicitudes realizadas con la biblioteca estándar `net/http`.
  * `:redis_logger` - Captura breadcrumbs de operaciones de Redis.
  * `:active_support_logger` - Basado en [la instrumentación de ActiveSupport](https://guides.rubyonrails.org/active_support_instrumentation.html) y proporciona mucha información específica de Rails.

  Y puedes habilitarlos con la opción `breadcrumbs_logger`:

  ```ruby
  config.breadcrumbs_logger = [:active_support_logger]
  config.breadcrumbs_logger = [:active_support_logger, :http_logger]
  ```
</SdkOption>

<SdkOption name="exclude_loggers" type="Array<String>" defaultValue="[]">
  Nombres de loggers que se excluirán de las migas de pan (breadcrumbs).
</SdkOption>

<SdkOption name="context_lines" type="Integer" defaultValue="3">
  Cuántas líneas mostrar antes y después de la línea donde ocurre el problema.
</SdkOption>

<SdkOption name="linecache" type="Sentry::LineCache">
  Puedes proporcionar tu propio `LineCache` para hacer coincidir rutas con archivos fuente y completar `context_lines`. Esto puede ser útil si necesitas obtener código fuente de lugares distintos del disco.
</SdkOption>

<SdkOption name="environment" type="String" defaultValue="development">
  Establece el entorno. Esta cadena es libre y no está definida de forma predeterminada. Un release puede asociarse con más de un entorno para que puedas separarlos en la UI (piensa en `staging` vs `prod` o similar).

  Sentry establece automáticamente el entorno actual a partir de las variables de entorno, en este orden: `SENTRY_CURRENT_ENV`, `SENTRY_ENVIRONMENT`, `RAILS_ENV`, `RACK_ENV`, y por defecto usa `development`.

  <PlatformContent includePath="set_environment" />
</SdkOption>

<SdkOption name="enabled_environments" type="Array | nil" defaultValue="nil">
  De forma predeterminada, los eventos se enviarán a Sentry en todos los entornos. Si no quieres enviar eventos en un entorno específico, puedes desconfigurar la variable `SENTRY_DSN` en ese entorno.

  También puedes configurar Sentry para que solo se ejecute en ciertos entornos mediante la lista `enabled_environments`. Por ejemplo, para ejecutar Sentry solo en producción:

  ```ruby
  config.enabled_environments = %w[production]
  ```
</SdkOption>

<SdkOption name="excluded_exceptions" type="Array" defaultValue="Sentry::Configuration::IGNORE_DEFAULT">
  Puedes usar esta opción para dejar de recibir notificaciones sobre ciertas excepciones. En el siguiente ejemplo, se suprimirán las excepciones que Rails usa para generar respuestas 404.

  ```ruby
  config.excluded_exceptions += ['ActionController::RoutingError', 'ActiveRecord::RecordNotFound']
  ```

  Puedes encontrar la lista de excepciones excluidas por defecto en `Sentry::Configuration::IGNORE_DEFAULT`. Se sugiere que agregues a estos valores predeterminados en lugar de sobrescribirlos con `=`.
</SdkOption>

<SdkOption name="inspect_exception_causes_for_exclusion" type="Boolean" defaultValue="true">
  Inspecciona las causas de una excepción entrante al determinar si debe excluirse o no. Esta opción funciona junto con `excluded_exceptions`.

  ```ruby
  config.inspect_exception_causes_for_exclusion = true
  ```
</SdkOption>

<SdkOption name="enabled_patches" type="Array" defaultValue="[:http, :redis, :puma]">
  Algunas de nuestras integraciones funcionan mediante parches que deben habilitarse. Usa esta opción para controlar qué parches se cargan cuando se inicializa el SDK.

  La lista de todos los parches disponibles es: `[:http, :redis, :puma, :graphql, :faraday]`.

  ```ruby
  # habilitar el parche :faraday
  config.enabled_patches << :faraday

  # deshabilitar el parche :puma
  config.enabled_patches.delete(:puma)
  ```
</SdkOption>

<SdkOption name="project_root" type="String" defaultValue="Dir.pwd">
  Directorio raíz del proyecto para la detección de `in_app`. Establécelo en `Rails.root` para aplicaciones Rails.
</SdkOption>

<SdkOption name="app_dirs_pattern" type="Regexp" defaultValue="/(bin|exe|app|config|lib|test|spec)/">
  Directorios que se reconocerán como `in_app` en los frames de la traza (backtrace).
</SdkOption>

<SdkOption name="strip_backtrace_load_path" type="Boolean" defaultValue="true">
  Si se debe eliminar el load path al construir el nombre de archivo del frame de la traza.
</SdkOption>

<SdkOption name="skip_rake_integration" type="Boolean" defaultValue="false">
  Determina si se deben ignorar excepciones causadas por integraciones de rake.
</SdkOption>

<SdkOption name="rack_env_whitelist" type="Array<String>" defaultValue="[&#x22;REMOTE_ADDR&#x22;, &#x22;SERVER_NAME&#x22;, &#x22;SERVER_PORT&#x22;]">
  Array de parámetros de rack env que se incluirán en el evento enviado a Sentry.
</SdkOption>

<SdkOption name="server_name" type="String">
  Esta opción se puede usar para proporcionar un nombre de servidor que se enviará en el payload del evento.

  Si se ejecuta en Heroku, se establece en `ENV["DYNO"]`; de lo contrario, se establece en `Socket.gethostname`.
</SdkOption>

<SdkOption name="trusted_proxies" type="Array">
  Estos proxies de confianza se omitirán cuando el SDK calcule la dirección IP del usuario y `sentry-rails` inyectará automáticamente el valor de `Rails.application.config.action_dispatch.trusted_proxies` en esta opción.

  ```ruby
  config.trusted_proxies = ["2.2.2.2"]
  ```
</SdkOption>

<div id="tracing-options">
  ## Opciones de trazado
</div>

<SdkOption name="traces_sample_rate" type="Float" defaultValue="nil">
  Un número entre `0` y `1` que determina el porcentaje del total de transacciones que se enviarán a Sentry (donde 0 representa el 0% y 1, el 100%). Esto se aplicará por igual a todas las transacciones creadas en la app. Debes definir este parámetro o `traces_sampler` para habilitar el trazado.

  Si `traces_sample_rate` se establece en 0, no se crearán nuevos trazos. Sin embargo, si tienes otro servicio (por ejemplo, un frontend en JS) que hace solicitudes a tu servicio y contiene información de trazas, esas trazas se continuarán y las transacciones se enviarán a Sentry.

  Para deshabilitar por completo el trazado, debes establecer `traces_sample_rate = nil`. Una vez hecho esto, no se iniciarán nuevas trazas ni se continuarán las entrantes.

  <PlatformContent includePath="performance/traces-sample-rate" />
</SdkOption>

<SdkOption name="traces_sampler" type="lambda | proc">
  Una lambda o proc responsable de determinar la probabilidad de que una transacción dada se envíe a Sentry (del 0 al 100%). Recibirá automáticamente información sobre la transacción y el contexto en el que se está creando, y debe devolver un número entre `0` (0% de probabilidad de envío) y `1` (100% de probabilidad de envío).

  También puede usarse para filtrar transacciones devolviendo 0 para aquellas que no sean de interés. Debes definir este parámetro o `traces_sample_rate` para habilitar el trazado.

  <PlatformContent includePath="performance/traces-sampler-as-sampler" />
</SdkOption>

<SdkOption name="enable_backpressure_handling" type="Boolean" defaultValue="false">
  Un booleano que controla si se creará un nuevo hilo monitor para realizar comprobaciones de estado del SDK. Si el sistema está en mal estado, el SDK seguirá reduciendo a la mitad el `traces_sample_rate` que configuraste en intervalos de 10 segundos hasta la recuperación. Este submuestreo ayuda a mantener la estabilidad del sistema y reduce la sobrecarga del SDK bajo alta carga.
</SdkOption>

<SdkOption name="trace_propagation_targets" type="Array<String, Regexp>">
  Una propiedad opcional que controla qué servicios posteriores reciben datos de trazado, en forma de los headers `sentry-trace` y `baggage` adjuntos a cualquier solicitud HTTP saliente.

  La opción puede contener un arreglo de cadenas o expresiones regulares contra las que se comparan las URL de las solicitudes salientes.
  Si una de las entradas de la lista coincide con la URL de una solicitud saliente, se adjuntarán los headers de trazado a esa solicitud.
  Las entradas de tipo cadena no tienen que coincidir por completo (es decir, la URL de una solicitud coincide cuando *contiene* una cadena proporcionada mediante la opción).

  De forma predeterminada, los headers de trazado se adjuntan a cada solicitud saliente desde el cliente instrumentado.
</SdkOption>

<SdkOption name="propagate_traces" type="Boolean" defaultValue="true">
  De forma predeterminada, Sentry inyecta los headers `sentry-trace` y `baggage` en las solicitudes salientes realizadas con `Net::HTTP` para conectar trazas entre servicios. Puedes deshabilitar este comportamiento con:

  ```ruby
  config.propagate_traces = false
  ```
</SdkOption>

<SdkOption name="trace_ignore_status_codes" type="Array<Integer | Range>" defaultValue="[(301..303), (305..399), (401..404)]">
  Una propiedad opcional que deshabilita el trazado para solicitudes HTTP con ciertos códigos de estado.

  Las solicitudes no se trazan si el código de estado está incluido en la lista proporcionada.

  ```ruby
  config.trace_ignore_status_codes = [404, (502..511)]
  ```
</SdkOption>

<SdkOption name="instrumenter" type="Symbol" defaultValue=":sentry">
  El instrumentador a usar: `:sentry` o `:otel` para [usar con OpenTelemetry](../../tracing/instrumentation/opentelemetry).
</SdkOption>

<div id="hooks">
  ## Hooks
</div>

Las siguientes opciones se pueden usar para integrar el SDK de varias maneras y personalizar cómo se informan los eventos.

<SdkOption name="before_send" type="lambda | proc">
  Proporciona una lambda o un proc que se invoca con un objeto de evento de mensaje o error, y puede devolver un evento modificado, o `nil` para omitir el envío del evento. Esto puede usarse, por ejemplo, para eliminar manualmente PII antes de enviar.

  Para cuando se ejecuta `before_send`, todos los datos del scope ya se han aplicado al evento. Cualquier modificación posterior del scope no tendrá efecto.

  <PlatformContent includePath="configuration/before-send/" />
</SdkOption>

<SdkOption name="before_send_transaction" type="lambda | proc">
  Proporciona una lambda o un proc que se invoca con un objeto de evento de transacción, y puede devolver un evento de transacción modificado, o `nil` para omitir el envío del evento. Una forma de usarlo podría ser para eliminar manualmente PII antes de enviar.

  <PlatformContent includePath="configuration/before-send-transaction/" />
</SdkOption>

<SdkOption name="before_send_log" type="lambda | proc">
  Proporciona una lambda o un proc que se invoca con un objeto de log específico del SDK, y puede devolver un log modificado, o `nil` para omitir el envío del log. Esto puede usarse para filtrar logs antes de enviarlos a Sentry.

  <PlatformContent includePath="configuration/before-send-log/" />
</SdkOption>

<SdkOption name="before_send_check_in" type="lambda | proc">
  Proporciona una lambda o un proc que se invoca con un objeto de evento de check-in y puede devolver un evento de check-in modificado, o `nil` para omitir el envío del evento.

  <PlatformContent includePath="configuration/before-send-check-in/" />
</SdkOption>

<SdkOption name="backtrace_cleanup_callback" type="lambda">
  Si quieres limpiar el backtrace de una excepción antes de enviarla a Sentry, puedes especificar un callback con `backtrace_cleanup_callback`, por ejemplo:

  ```ruby
  config.backtrace_cleanup_callback = lambda do |backtrace|
    Rails.backtrace_cleaner.clean(backtrace)
  end
  ```

  <PlatformContent includePath="configuration/before-send-transaction/" />
</SdkOption>

<SdkOption name="before_breadcrumb" type="lambda | proc">
  Esta función se invoca con un objeto breadcrumb antes de añadirlo al scope. Cuando la función devuelve `nil`, el breadcrumb se descarta. Para dejar pasar el breadcrumb, devuelve el primer argumento, que contiene el objeto breadcrumb.
  El callback suele recibir un segundo argumento (llamado &quot;hint&quot;) que contiene el objeto original a partir del cual se creó el breadcrumb para personalizar mejor su aspecto.

  <PlatformContent includePath="enriching-events/breadcrumbs/before-breadcrumb/" />
</SdkOption>

<div id="transport-options">
  ## Opciones de transporte
</div>

<SdkOption name="background_worker_threads" type="Integer">
  Sentry enviará eventos de forma no bloqueante con su propio proceso en segundo plano. De forma predeterminada, este proceso mantiene un pool de hilos con [la cantidad de procesadores disponibles](https://ruby-concurrency.github.io/concurrent-ruby/master/Concurrent.html#available_processor_count-class_method). Puedes modificarlo de la siguiente manera:

  ```ruby
  config.background_worker_threads = 5
  ```

  O, si quieres enviar eventos de forma sincrónica, establece el valor en 0:

  ```ruby
  config.background_worker_threads = 0
  ```
</SdkOption>

<SdkOption name="background_worker_max_queue" type="Integer" defaultValue="30">
  El tamaño máximo de la cola para el proceso en segundo plano. Se rechazarán los trabajos que superen este límite.
</SdkOption>

<SdkOption name="transport_class" type="class" defaultValue="Sentry::HTTPTransport">
  De forma predeterminada, el SDK utiliza la clase `Sentry::HTTPTransport` para enviar eventos a Sentry, lo cual debería funcionar para la mayoría de los usuarios. Pero si quieres usar tu propia clase de transporte, puedes cambiarla con esta opción:

  ```ruby
  config.transport.transport_class = MyTransportClass
  ```

  En general, se recomienda derivar tu clase de transporte personalizada de `Sentry::HTTPTransport` y sobrescribir solo la lógica necesaria.
</SdkOption>

<SdkOption name="proxy" type="String | URI | Hash">
  Configura un proxy para conectarte a Sentry. Esta opción la respeta la clase predeterminada `Sentry::HTTPTransport`. Puedes establecer `config.transport.proxy` como una `String` que contenga un URI de proxy, como un objeto `URI`, o como un `Hash` que contenga las claves `uri`, `user` y `password`.

  ```ruby
  Sentry.init do |config|
    # ...

    # Proporcionar la configuración del proxy como String
    config.transport.proxy = "http://user:password@proxyhost.net:8080"

    # O como URI
    config.transport.proxy = URI("http://user:password@proxyhost.net:8080")

    # O como Hash
    config.transport.proxy = {
      uri: "http://proxyhost.net:8080",
      user: "user",
      password: "password"
    }
  end
  ```
</SdkOption>

<SdkOption name="spotlight" type="Boolean | String" defaultValue="false">
  Indica si también se deben capturar eventos y trazas en [Spotlight](https://spotlightjs.com/setup/other/).

  Si lo estableces en true, Sentry enviará eventos y trazas al proxy Sidecar local en `http://localhost:8969/stream`.

  Si quieres usar una dirección de proxy Sidecar diferente, establécelo como String con la URL del proxy.
</SdkOption>

<div id="cron-options">
  ## Opciones de Cron
</div>

<SdkOption name="default_checkin_margin" type="Integer" defaultValue="nil">
  Cuánto tiempo (en minutos) después de la hora de check‑in prevista esperaremos antes de considerar que el check‑in se perdió.

  ```ruby
  config.cron.default_checkin_margin = 5
  ```
</SdkOption>

<SdkOption name="default_max_runtime" type="Integer" defaultValue="nil">
  Cuánto tiempo (en minutos) puede estar el check‑in en estado `in_progress` antes de considerarse fallido.

  ```ruby
  config.cron.default_max_runtime = 30
  ```
</SdkOption>

<SdkOption name="default_timezone" type="String" defaultValue="nil">
  Cadena de zona horaria con formato de base de datos para los check‑ins.

  ```ruby
  config.cron.default_timezone = "America/New_York"
  ```
</SdkOption>

<div id="profiler-options">
  ## Opciones del perfilador
</div>

<SdkOption name="profiles_sample_rate" type="Float" defaultValue="nil">
  Un número entre `0` y `1` que controla el porcentaje de probabilidad de que una transacción muestreada sea perfilada. (`0` representa el 0% y `1` el 100%.) Se aplica por igual a todos los perfiles creados en la app. Es relativa a la tasa de muestreo de trazas; por ejemplo, `0.5` significa que se perfilará el 50% de las transacciones muestreadas.
</SdkOption>

<SdkOption name="profiles_sample_interval" type="Float" defaultValue="1e6 / 101">
  Intervalo, en microsegundos, al que el perfilador recopilará muestras.

  El valor predeterminado es 101 Hz. Ten en cuenta que 101 es intencional para evitar el **muestreo en sincronía**.
</SdkOption>

<SdkOption name="profiler_class" type="Class" defaultValue="Sentry::Profiler">
  El perfilador que se usará para recopilar perfiles.

  Configura `Sentry::Vernier::Profiler` cuando uses `vernier` y `Sentry::Profiler` cuando uses `stackprof`.

  Consulta [la documentación de Profiling](../../profiling) para ver las instrucciones de configuración.
</SdkOption>