---
title: Ámbitos y hubs
description: "En la mayoría de los casos, el SDK gestionará automáticamente los ámbitos por ti en las integraciones del framework. Descubre qué es un ámbito y cómo puedes sacarle partido."
---

Cuando se captura y envía un evento a Sentry, los SDK combinan esos datos del evento con información adicional del ámbito actual. En la mayoría de los casos, el SDK gestionará automáticamente los ámbitos por ti en las integraciones del framework y no tendrás que preocuparte por ello. Sin embargo, conviene que sepas qué es un ámbito y cómo puedes aprovecharlo.

<div id="whats-a-scope-whats-a-hub">
  ## Qué es un Scope, Qué es un Hub
</div>

Puedes pensar en el hub como el punto central que nuestros SDK usan para enrutar un
evento a Sentry. Cuando llamas a `init()` se crea un hub y en él se crean un cliente y un
scope en blanco. Ese hub luego se asocia con el hilo actual y, de forma interna, mantiene una pila de scopes.

El scope contiene información útil que debe enviarse junto con el
evento. Por ejemplo, los [contexts](../context/) o los
[breadcrumbs](../breadcrumbs/) se almacenan en
el scope. Cuando se hace push de un scope, hereda todos los datos del scope padre
y, cuando hace pop, se revierten todas las modificaciones.

Las integraciones predeterminadas del SDK harán push y pop de scopes de forma inteligente. Por
ejemplo, las integraciones de frameworks web crearán y destruirán scopes alrededor de tus
rutas o controladores.

<div id="how-the-scope-and-hub-work">
  ## Cómo funcionan el scope y el hub
</div>

Cuando empiezas a usar un SDK, se crean automáticamente un scope y un hub
listos para usar. Es poco probable que interactúes directamente con el hub a menos que estés
escribiendo una integración o quieras crear o destruir scopes. Los scopes, por otro lado,
son más visibles para el usuario. Puedes llamar a <PlatformIdentifier name="configure-scope" /> en cualquier momento
para modificar los datos almacenados en el scope. Esto es útil para hacer cosas como
[modificar el contexto](../context/).

Cuando llamas a una función global como <PlatformIdentifier name="capture-event" />, Sentry
detecta internamente el hub actual y le pide que capture un evento. Luego, el hub
combina el evento con los datos del scope superior.

<div id="configuring-the-scope">
  ## Configuración del ámbito
</div>

La operación más útil al trabajar con ámbitos es la función <PlatformIdentifier name="configure-scope" />. Puede usarse para volver a configurar el ámbito actual.

Por ejemplo, puedes añadir etiquetas personalizadas o informar a Sentry sobre el usuario que está autenticado actualmente.

<PlatformContent includePath="enriching-events/scopes/configure-scope" />

También puedes aplicar esta configuración al eliminar al usuario al cerrar sesión:

<PlatformContent includePath="enriching-events/unset-user" />

Para saber qué información útil se puede asociar a los ámbitos, consulta
[la documentación sobre contexto](../context/).

<div id="local-scopes">
  ## Ámbitos locales
</div>

También admitimos enviar y configurar un ámbito en una sola llamada. Esto suele
llamarse <PlatformIdentifier name="with-scope" />, <PlatformIdentifier name="push-scope" /> o implementarse como un parámetro de función en los métodos de captura, según el SDK. Es muy útil si
solo quieres enviar datos para un evento específico.

### Uso de <PlatformIdentifier name="with-scope" />

En el siguiente ejemplo usamos <PlatformIdentifier name="with-scope" /> para adjuntar un `level` y un `tag` a un único error en específico:

<PlatformContent includePath="enriching-events/scopes/with-scope" />

Aunque este ejemplo se parece a <PlatformIdentifier name="configure-scope" />, en realidad es muy diferente.
Las llamadas a <PlatformIdentifier name="configure-scope" /> cambian el ámbito activo actual; todas las llamadas posteriores a <PlatformIdentifier name="configure-scope" /> mantendrán los cambios establecidos previamente, a menos que se restablezcan explícitamente.

Por otro lado, <PlatformIdentifier name="with-scope" /> crea un clon del ámbito actual, y los cambios
realizados permanecerán aislados dentro de la función de callback de <PlatformIdentifier name="with-scope" />. Esto te permite
aislar con mayor facilidad partes de la información de contexto en ubicaciones específicas de tu código o
incluso llamar a <PlatformIdentifier name="clear" /> para eliminar temporalmente toda la información de contexto.