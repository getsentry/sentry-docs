---
title: Instrumentar solicitudes HTTP
sidebar_order: 2000
description: "Aprende a instrumentar manualmente tu código para usar el módulo Requests de Sentry."
---

Como requisito previo para configurar [Requests](/es/product/insights/backend/requests/), primero debes <PlatformLink to="/tracing/">configurar el monitoreo de rendimiento</PlatformLink>. Una vez hecho esto, el SDK de Ruby instrumentará automáticamente las solicitudes HTTP salientes realizadas con `Net::HTTP`. Si eso no se ajusta a tu caso de uso, puedes configurarlo con [instrumentación personalizada](#custom-instrumentation).

<div id="custom-instrumentation">
  ## Instrumentación personalizada
</div>

Para obtener información detallada sobre qué datos pueden configurarse, consulta las [especificaciones del módulo Requests para desarrolladores](https://develop.sentry.dev/sdk/performance/modules/requests/).

<div id="wrap-http-requests-in-a-span">
  ### Encapsular solicitudes HTTP en un span
</div>

NOTA: Consulta las [convenciones de datos de spans para HTTP](https://develop.sentry.dev/sdk/performance/span-data-conventions/#http) para ver la lista completa de atributos de datos de spans.

Aquí tienes un ejemplo de una función instrumentada que realiza solicitudes HTTP:

```ruby
require 'uri'

def make_request(method, url)
  Sentry.with_child_span(op: 'http.client', description: "#{method} #{url}") do |span|
    span.set_data('http.request.method', method)

    parsed_url = URI.parse(url)
    span.set_data('url', url)
    span.set_data('server.address', parsed_url.hostname)
    span.set_data('server.port', parsed_url.port)

    # realiza tu petición HTTP personalizada
    response = do_request(method: method, url: url)

    span.set_data('http.response.status_code', response.status_code)
    span.set_data('http.response_content_length', response.headers['content-length'])

    response
  end
end
```
