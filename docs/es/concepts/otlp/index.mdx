---
title: Protocolo de OpenTelemetry (OTLP)
sidebar_order: 400
description: "Aprende a enviar datos de trazas de OpenTelemetry directamente a Sentry desde los SDK de OpenTelemetry."
keywords: ["otlp", "otel", "opentelemetry"]
---

Sentry puede recibir trazas y registros de [OpenTelemetry](https://opentelemetry.io) directamente mediante el [Protocolo de OpenTelemetry](https://opentelemetry.io/docs/specs/otel/protocol/). Sentry no admite métricas OTLP.

<div id="opentelemetry-traces">
  ## Trazas de OpenTelemetry
</div>

<Include name="feature-available-open-beta-tracing.mdx" />

Si ya tienes instrumentación de trazas de OpenTelemetry, puedes configurar tu exportador de OpenTelemetry para enviar trazas directamente a Sentry. El endpoint de ingesta de trazas OTLP de Sentry está actualmente en desarrollo y tiene algunas limitaciones conocidas:

* Los eventos de span no son compatibles. Todos los eventos de span se descartan durante la ingesta.
* Los enlaces de span son parcialmente compatibles. Ingerimos y mostramos enlaces de span, pero no se pueden buscar, filtrar ni agregar. Los enlaces se muestran en la [Vista de traza](/es/concepts/key-terms/tracing/trace-view/).
* Los atributos de array son parcialmente compatibles. Ingerimos y mostramos atributos de array, pero no se pueden buscar, filtrar ni agregar. Los atributos de array se muestran en la [Vista de traza](/es/concepts/key-terms/tracing/trace-view/).

Puedes encontrar los valores del endpoint de trazas OTLP de Sentry y la clave pública en la configuración de tu proyecto en Sentry.

1. Ve a la página [Settings &gt; Projects](https://sentry.io/orgredirect/organizations/:orgslug/settings/projects/) en Sentry.
2. Selecciona un proyecto de la lista.
3. Ve a la subpágina &quot;Client Keys (DSN)&quot; de este proyecto, en el apartado &quot;SDK Setup&quot;.

La forma más sencilla de configurar un exportador de OpenTelemetry es con variables de entorno. Debes configurar la URL del endpoint de trazas, así como los encabezados de autenticación. Define estas variables en el servidor donde se ejecuta tu aplicación.

```bash {filename: .env}
export OTEL_EXPORTER_OTLP_TRACES_ENDPOINT="___OTLP_TRACES_URL___"
export OTEL_EXPORTER_OTLP_TRACES_HEADERS="x-sentry-auth=sentry sentry_key=___PUBLIC_KEY___"
```

Si prefieres configurar explícitamente un SDK de OpenTelemetry o una instancia del colector de OTEL, consulta lo siguiente:

<div id="using-the-otel-collector">
  ### Usar el colector de OTEL
</div>

Puedes configurar tu instancia del colector de OTEL para enviar trazas directamente a Sentry. Para ello, agrega un exportador `otlphttp` a tu instancia del colector. Los endpoints de OTLP en Sentry son específicos de cada proyecto, por lo que quizá también necesites agregar un [routing connector](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/routingconnector) para dirigir las trazas al proyecto correcto.

```yaml {filename: otel-collector.yaml}
exporters:
  otlphttp:
    traces_endpoint: ___OTLP_TRACES_URL___
    headers:
      x-sentry-auth: "sentry sentry_key=___PUBLIC_KEY___"
    compression: gzip
    encoding: proto
    timeout: 30s
```

<div id="using-an-opentelemetry-sdk">
  ### Uso de un SDK de OpenTelemetry
</div>

Puedes configurar el exportador de OpenTelemetry directamente en el código de tu aplicación. Aquí tienes un ejemplo con el SDK de OpenTelemetry para Node:

```typescript {filename: app.ts}
import { NodeSDK } from "@opentelemetry/sdk-node";
import { OTLPTraceExporter } from "@opentelemetry/exporter-trace-otlp-http";

const sdk = new NodeSDK({
  traceExporter: new OTLPTraceExporter({
    url: "___OTLP_TRACES_URL___",
    headers: {
      "x-sentry-auth": "sentry sentry_key=___PUBLIC_KEY___",
    },
  }),
});

sdk.start();
```

<div id="opentelemetry-logs">
  ## Registros de OpenTelemetry
</div>

<Include name="feature-available-open-beta-logs.mdx" />

Si ya tienes instrumentación de registros de OpenTelemetry, puedes configurar tu exportador de OpenTelemetry para enviar registros directamente a Sentry. El endpoint de ingesta de registros OTLP de Sentry tiene las siguientes limitaciones conocidas:

* Los atributos de tipo arreglo cuentan con soporte parcial. Ingerimos y mostramos atributos de arreglo, pero no se pueden buscar, filtrar ni agregar.

Puedes encontrar los valores del endpoint de registros OTLP de Sentry y la clave pública en la configuración de tu proyecto en Sentry.

1. Ve a la página [Settings &gt; Projects](https://sentry.io/orgredirect/organizations/:orgslug/settings/projects/) en Sentry.
2. Selecciona un proyecto de la lista.
3. Ve a la subpágina &quot;Client Keys (DSN)&quot; de este proyecto bajo el encabezado &quot;SDK Setup&quot;.

La forma más sencilla de configurar un exportador de OpenTelemetry es con variables de entorno. Necesitarás configurar la URL del endpoint de registros, así como los encabezados de autenticación. Establece estas variables en el servidor donde se ejecuta tu aplicación.

```bash {filename: .env}
export OTEL_EXPORTER_OTLP_LOGS_ENDPOINT="___OTLP_LOGS_URL___"
export OTEL_EXPORTER_OTLP_LOGS_HEADERS="x-sentry-auth=sentry sentry_key=___PUBLIC_KEY___"
```

Si prefieres configurar explícitamente una instancia del SDK de OpenTelemetry o del colector de OTEL, consulta lo siguiente:

### Uso de OTEL Collector

Puedes configurar tu instancia de OTEL Collector para enviar registros directamente a Sentry. Para ello, debes añadir un exportador `otlphttp` a tu instancia del collector. Los endpoints de OTLP en Sentry son específicos de cada proyecto, por lo que quizá también necesites añadir un [routing connector](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/routingconnector) para dirigir los registros al proyecto correcto.

```yaml {filename: otel-collector.yaml}
exporters:
  otlphttp:
    logs_endpoint: ___OTLP_LOGS_URL___
    headers:
      x-sentry-auth: "sentry sentry_key=___PUBLIC_KEY___"
    compression: gzip
    encoding: proto
    timeout: 30s
```

<div id="using-an-opentelemetry-sdk">
  ### Uso de un SDK de OpenTelemetry
</div>

También puedes configurar el Exporter de OpenTelemetry directamente en el código de tu aplicación. Aquí tienes un ejemplo con el SDK de OpenTelemetry para Node:

```typescript {filename: app.ts}
import {
  LoggerProvider,
  BatchLogRecordProcessor,
} from "@opentelemetry/sdk-logs";
import { OTLPLogExporter } from "@opentelemetry/exporter-logs-otlp-http";

const logExporter = new OTLPLogExporter({
  url: "___OTLP_LOGS_URL___",
  headers: {
    "x-sentry-auth": "sentry sentry_key=___PUBLIC_KEY___",
  },
});
const loggerProvider = new LoggerProvider({
  processors: [new BatchLogRecordProcessor(logExporter)],
});

const logger = loggerProvider.getLogger("default", "1.0.0");
```

<div id="distributed-tracing-between-sentry-instrumentation-and-opentelemetry-instrumentation">
  ## Rastreo distribuido entre la instrumentación de Sentry y la de OpenTelemetry
</div>

Si tienes un frontend o servicios instrumentados con el SDK de Sentry y también usas OpenTelemetry, puedes utilizar `propagateTraceparent`, expuesto por el SDK de Sentry, para propagar el encabezado `traceparent` del W3C Trace Context a la instrumentación de OpenTelemetry. Esto te permitirá continuar los rastreos desde servicios instrumentados con Sentry.

Los siguientes SDK admiten la opción `propagateTraceparent`:

<div id="javascript">
  ### JavaScript
</div>

* <LinkWithPlatformIcon platform="javascript.browser" label="JavaScript en el navegador" url="/platforms/javascript/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.angular" label="Angular" url="/platforms/javascript/guides/angular/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.astro" label="Astro" url="/platforms/javascript/guides/astro/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.ember" label="Ember" url="/platforms/javascript/guides/ember/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.gatsby" label="Gatsby" url="/platforms/javascript/guides/gatsby/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.nextjs" label="Next.js" url="/platforms/javascript/guides/nextjs/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.nuxt" label="Nuxt" url="/platforms/javascript/guides/nuxt/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.react" label="React" url="/platforms/javascript/guides/react/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.react-router" label="React Router" url="/platforms/javascript/guides/react-router/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.remix" label="Remix" url="/platforms/javascript/guides/remix/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.solid" label="Solid" url="/platforms/javascript/guides/solid/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.solidstart" label="SolidStart" url="/platforms/javascript/guides/solidstart/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.svelte" label="Svelte" url="/platforms/javascript/guides/svelte/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.sveltekit" label="SvelteKit" url="/platforms/javascript/guides/sveltekit/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.vue" label="Vue" url="/platforms/javascript/guides/vue/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="javascript.wasm" label="WASM" url="/platforms/javascript/guides/wasm/configuration/options/#propagateTraceparent" />

<div id="mobile">
  ### Dispositivos móviles
</div>

* <LinkWithPlatformIcon platform="android" label="Android" url="/platforms/android/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="dart.flutter" label="Flutter" url="/platforms/dart/guides/flutter/configuration/options/#propagateTraceparent" />
* <LinkWithPlatformIcon platform="native" label="Nativo" url="/platforms/native/configuration/options/#propagate_traceparent" />
* <LinkWithPlatformIcon platform="react-native" label="React Native" url="/platforms/react-native/configuration/options/#propagateTraceparent" />