---
title: Agrupación de incidencias
sidebar_order: 0
description: >-
  Conoce las huellas, los algoritmos predeterminados de agrupación de errores de Sentry y
  otras formas de personalizar cómo se agrupan los eventos en incidencias.
og_image: /og-images/concepts-data-management-event-grouping.png
---

Una huella es una forma de identificar de manera única un evento, y todos los eventos tienen una. Los eventos con la misma huella se agrupan en una incidencia.

De forma predeterminada, Sentry ejecutará uno de nuestros algoritmos de agrupación integrados para generar una huella del evento en función de la información disponible en el propio evento. La información disponible y los algoritmos de agrupación varían según el tipo de evento. Sentry asigna huellas a los eventos de error basándose en información como `stacktrace`, `exception` y `message`. Los eventos de transacción se agrupan según sus `spans`.

<div id="default-error-grouping-algorithms">
  ## Algoritmos predeterminados de agrupación de errores
</div>

Cada vez que se modifica el comportamiento predeterminado de agrupación de errores, Sentry lo publica como una nueva versión, que solo se aplica a los eventos nuevos en adelante. Como resultado, las modificaciones al comportamiento predeterminado no afectan la agrupación de los problemas existentes.

Cuando creas un proyecto en Sentry, se selecciona automáticamente la versión más reciente del algoritmo de agrupación de errores. Esto garantiza que el comportamiento de agrupación sea consistente dentro de un proyecto.

Todas las versiones consideran primero el `fingerprint`, luego el `stack trace`, después la `exception` y, por último, el `message`.

Para ver cómo se agrupó un problema, ve a su página de **Issue Details** y desplázate hasta &quot;Event Grouping Information&quot;. Allí verás si se agrupó por fingerprint, stack trace, exception o message.

<div id="grouping-by-built-in-fingerprinting-rules">
  ### Agrupación por reglas de huella digital integradas
</div>

Algunos tipos de errores, como los [errores de carga de chunk](https://sentry.io/answers/chunk-load-errors-javascript/) y los [errores de hidratación](https://sentry.io/answers/hydration-error-nextjs/), suelen presentar distintos tipos de error, valores o mensajes de transacción que pueden generar incidencias separadas pero similares. Para manejar mejor estos casos, Sentry mantiene un conjunto de reglas de huella digital integradas para agrupar mejor estos errores.

Las incidencias agrupadas por las reglas de huella digital integradas de Sentry mostrarán “Sentry Defined Fingerprint” en “Event Grouping Information” al final de la página de **Issue Details**.

![event grouping information for a sentry defined fingerprint](./sentry-defined-fingerprint.png)

Las reglas de huella digital integradas funcionan igual que las reglas de huella digital personalizadas y se aplican de forma predeterminada. Si una regla de huella digital personalizada definida por un usuario coincide con un evento, la regla personalizada siempre tendrá prioridad sobre las integradas.

<div id="grouping-by-stack-trace">
  ### Agrupación por traza de pila
</div>

Cuando Sentry detecta una traza de pila en los datos del evento (ya sea directamente o como parte de una excepción), la agrupación se basa efectivamente por completo en la traza de pila.

Lo primero y más importante es que Sentry solo agrupa según los frames de la traza de pila que el SDK informa y asocia con tu aplicación. No todos los SDK envían esta información, pero cuando está disponible se usa para la agrupación. Esto significa que, si dos trazas de pila solo difieren en partes de la pila no relacionadas con la aplicación, esas trazas seguirán agrupándose juntas.

Según la información disponible, para cada frame de la traza de pila se pueden usar los siguientes datos:

* Nombre del módulo
* Nombre de archivo normalizado (con hashes de revisión, etc., eliminados)
* Línea de contexto normalizada (básicamente una versión depurada del código fuente de la línea afectada, si se proporciona)

Esta agrupación normalmente funciona bien, pero hay dos situaciones específicas que pueden desvirtuarla:

1. El código fuente JavaScript minimizado puede arruinar la agrupación de forma perjudicial. Para evitarlo, asegúrate de que Sentry pueda acceder a tus [Source Maps](/es/platforms/javascript/sourcemaps/).
2. Modificar tu traza de pila introduciendo un nuevo nivel mediante decoradores cambia la traza, por lo que la agrupación también cambiará. Para manejar esto, muchos SDK permiten ocultar frames irrelevantes de la traza. Por ejemplo, el SDK de Python omitirá todos los frames de pila con una variable local llamada `__traceback_hide__` establecida en True.

<div id="grouping-by-exception">
  ### Agrupación por excepción
</div>

Si la traza de pila no está disponible pero sí la información de la excepción, la agrupación tendrá en cuenta el `type` y el `value` de la excepción si ambos datos están presentes en el evento. Esta agrupación es mucho menos fiable debido a que los mensajes de error pueden variar.

<div id="fallback-grouping">
  ### Agrupación de reserva
</div>

La agrupación recurre a los mensajes si la traza de pila, `type` y `value` no están disponibles. Cuando esto ocurre, el algoritmo de agrupación intentará usar el mensaje sin parámetros. Si eso no está disponible, el algoritmo utilizará el atributo de mensaje completo.

<div id="ai-enhanced-grouping">
  ### Agrupación mejorada con IA
</div>

Además de la agrupación basada en huellas, Sentry utiliza IA para mejorar aún más la precisión al agrupar incidencias. Este sistema ayuda a identificar errores semánticamente similares que podrían tener huellas distintas debido a variaciones menores en el código. El sistema de agrupación con IA funciona junto con el método de huellas tradicional: solo intenta agrupar incidencias nuevas y nunca separará incidencias que ya fueron agrupadas por huella.

Este sistema no se aplicará a eventos que tengan huellas totalmente personalizadas (ya sea definidas mediante el SDK o [reglas de huella](/es/product/issues/grouping-and-fingerprints/#fingerprint-rules)). Sin embargo, los eventos con huellas que contengan `{{ default }}` usarán la agrupación con IA para calcular la parte `{{ default }}` de la huella.

Cuando el algoritmo de huellas predeterminado de Sentry genera un nuevo hash, envía automáticamente los datos del error a [Seer](https://github.com/getsentry/seer), nuestro servicio de IA/ML. Esos datos incluyen el mensaje y los frames in-app de la traza de pila (incluidos los configurados con reglas de trazas), o todos los frames cuando no hay frames in-app.

Seer realiza los siguientes pasos:

1. Genera una representación vectorial de la traza de pila del error mediante un modelo de incrustaciones de texto basado en transformadores
2. Compara esa incrustación con las incrustaciones de errores existentes para ese proyecto en la base de datos
3. Si se encuentra un error semánticamente similar dentro del umbral configurado, Sentry fusiona el nuevo error con la incidencia existente

![Sentry Seer PostgreSQL.](./img/sentry-seer-postgresql.png)

Este algoritmo es especialmente eficaz para manejar casos en los que:

* Se producen errores similares en diferentes partes del código base
* Cambios en el código o despliegues introducen ligeras variaciones en las trazas de pila
* Diferentes tipos de errores representan el mismo problema subyacente

Puedes ver las incidencias que se han fusionado mediante este sistema en la sección “Merged Issues” de la interfaz de detalles de la incidencia. Siempre puedes desfusionar cualquier huella que no quieras ver agrupada y nuestro sistema evitará agruparla en el futuro.

![Merged issues.](./img/merged-issues.png)

<div id="ways-to-customize-error-grouping">
  ## Formas de personalizar la agrupación de errores
</div>

Si la forma en que Sentry agrupa los issues de tu organización ya es ideal, no necesitas hacer ningún cambio. Sin embargo, puede que notes que Sentry crea demasiados grupos similares o agrupa eventos dispares en conjuntos que deberían estar separados. Si es así, para **issues de error** puedes ampliar y cambiar el comportamiento de agrupación predeterminado. La agrupación de errores se puede ampliar y modificar por completo según tus necesidades. La agrupación de transacciones actualmente no se puede personalizar.

Puedes personalizar la agrupación de errores con una combinación de las siguientes opciones, ordenadas de menor a mayor complejidad:

1. En tu proyecto, mediante [Merging Issues](/es/concepts/data-management/event-grouping/merging-issues/)
   > Fusiona issues similares que ya se han creado. No requiere ajustes ni cambios de configuración.
2. En tu proyecto, usando [Fingerprint Rules](./fingerprint-rules/)
   > Define una nueva huella para los eventos entrantes en función de coincidencias (matchers). No afecta a los issues ya existentes.
3. En tu proyecto, usando [Stack Trace Rules](./stack-trace-rules/)
   > Define reglas sobre cómo tratar los eventos entrantes en función de coincidencias (matchers). No afecta a los issues ya existentes.
4. En tu SDK, usando [SDK Fingerprinting](/es/platform-redirect/?next=/usage/sdk-fingerprinting/)
   > Define una nueva huella para los eventos entrantes basada en coincidencias (matchers) en el SDK. No afecta a los issues ya existentes. Ten en cuenta que no es compatible con WebAssembly.

<Alert>
  Las reglas de stack trace pueden funcionar como una combinación de configuraciones del SDK y del proyecto. Por ello, mantenemos la documentación en un único lugar.
</Alert>

<div id="how-to-view-the-fingerprint">
  ## Cómo ver la huella
</div>

Puedes ver la huella abriendo un issue, haciendo clic en &quot;{} View JSON&quot; y buscando la propiedad *fingerprint* en ese archivo. Si se usó la agrupación predeterminada, verás &quot;default&quot; ahí. Si se usó una agrupación diferente, verás el valor concreto de la huella.

<Arcade src="https://demo.arcade.software/8vE2p1OF0WRxjg7XN8HH?embed" />

<div id="transaction-grouping-algorithms">
  ## Algoritmos de agrupación de transacciones
</div>

Sentry agrupa las transacciones con problemas de rendimiento en [problemas de rendimiento](/es/product/issues/issue-details/performance-issues/) utilizando los `spans` de la transacción. Generamos la huella a partir de la evidencia del `span` relacionada con el problema de rendimiento detectado en el evento. Esto incluye los `spans` implicados directamente en el problema, así como aquellos que podrían haberlo causado o que están estrechamente relacionados. Actualmente, este algoritmo no es personalizable ni extensible.

<div id="learn-more">
  ## Más información
</div>

<PageGrid />