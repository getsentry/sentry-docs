---
title: Crons (CLI)
sidebar_order: 200
description: "Sigue esta guía para configurar y administrar monitores con Sentry CLI."
---

<Alert title="Aviso de obsolescencia">
  A partir de la versión v2.16.1 de Sentry CLI, se ha dejado de admitir la posibilidad de monitorear check-ins usando un token de autenticación para la autorización. Sigue leyendo para saber cómo actualizar tu CLI y usar en su lugar el DSN de tu proyecto.
</Alert>

Sentry Crons te permite supervisar la disponibilidad y el rendimiento de cualquier tarea programada y recurrente. Una vez implementado, podrás recibir alertas y métricas que te ayudarán a resolver errores, detectar tiempos de espera y evitar interrupciones en tu servicio.

<div id="requirements">
  ## Requisitos
</div>

Para empezar a monitorizar tu tarea recurrente programada:

* [Instala](/es/cli/installation) Sentry CLI (mín. v2.16.1).
* Crea y configura tu primer monitor en [Sentry](https://sentry.io/issues/alerts/new/crons/) o [desde la CLI](#creating-or-updating-a-monitor-through-a-check-in-optional).

<div id="configuration">
  ## Configuración
</div>

La CLI de Sentry utiliza el DSN del proyecto de tu Monitor para autorizar los check-ins. Para configurarlo, exporta la variable de entorno `SENTRY_DSN`:

```bash
export SENTRY_DSN=___PUBLIC_DSN___
```

También puedes agregarlo a tu configuración de `~/.sentryclirc`:

```ini {filename:~/.sentryclirc}
[auth]
dsn = ___PUBLIC_DSN___
```

Obtén más información sobre el [archivo de configuración](/es/cli/configuration#configuration-file) de la CLI.

<div id="job-monitoring">
  ## Monitoreo de trabajos
</div>

Usa Sentry CLI para ejecutar tu job y recibir avisos si no se inicia cuando debería (pendiente) o si supera el tiempo máximo de ejecución (error).

```bash {tabTitle: CLI}
sentry-cli monitors run <monitor_slug> -- <command> <args>
```

Ejemplos de uso:

```bash {tabTitle: Python}
sentry-cli monitors run my-monitor-slug -- python ruta/a/archivo.py
```

```bash {tabTitle: Node.JS}
sentry-cli monitors run my-monitor-slug -- node ruta/al/archivo.js
```

<div id="creating-or-updating-a-monitor-through-a-check-in-optional">
  ### Crear o actualizar un monitor mediante un check-in (opcional)
</div>

También puedes usar la CLI de Sentry para crear o actualizar tu monitor cron cuando ejecutes tu tarea. Así evitas tener que configurar primero el monitor desde la interfaz web de Sentry.

Configura el monitor cron proporcionando la expresión de cron en formato crontab con el argumento `--schedule` o su equivalente `-s` al ejecutar el comando `sentry cli monitors run`. Asegúrate de poner la programación entre comillas para que tu shell interprete el argumento correctamente, así:

```bash
sentry-cli monitors run --schedule "<programación esperada>" <monitor-slug> -- <command> <args>
```

Al proporcionar el argumento `--schedule`, también se admiten los siguientes argumentos opcionales para ofrecer configuración adicional:

* `--check-in-margin`: El margen permitido, en minutos, después de la hora prevista de check‑in durante el cual no se considerará que el monitor se ha omitido.
* `--max-runtime`: La duración permitida, en minutos, que el monitor puede estar en ejecución antes de considerarse fallido por tiempo de espera.
* `--timezone`: Una [cadena de identificador de la base de datos tz](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones#List) válida (p. ej., &quot;Europe/Vienna&quot;) que representa la zona horaria de la programación de ejecución del monitor.

A continuación se muestran algunos ejemplos de uso:

```bash {tabTitle: Every Minute}
sentry-cli monitors run -s "* * * * *" -- mi-comando
```

```bash {tabTitle: Every Hour (+ Optional Arguments)}
sentry-cli monitors run -s "0 * * * *" --check-in-margin 10 --max-runtime 5 --timezone "Europe/Vienna" -- mi-comando
```

<div id="specifying-monitor-environments-optional">
  ### Especificar entornos del monitor (opcional)
</div>

Si tu monitor de cron se ejecuta en varios entornos, puedes usar la opción `-e` para especificar a qué [entorno del monitor](/es/product/crons/job-monitoring/#multiple-environments) enviar los check-ins.

```bash {tabTitle: Node.JS}
sentry-cli monitors run -e dev mi-slug-de-monitor -- node ruta/al/archivo.js
```
