---
title: "Envío de eventos"
sidebar_order: 4
description: "Aprende cómo usar la interfaz de línea de comandos de Sentry para enviar eventos."
---

La herramienta `sentry-cli` también se puede usar para enviar eventos. Si quieres usarla, debes exportar la variable de entorno `SENTRY_DSN` y configurarla con el DSN de uno de tus proyectos:

```bash
export SENTRY_DSN='___PUBLIC_DSN___'
```

Una vez hecho, puedes empezar a usar el comando `sentry-cli send-event`.

<div id="basic-events">
  ## Eventos básicos
</div>

Para eventos de mensajes básicos, solo necesitas proporcionar el parámetro `--message` o `-m` para enviar un mensaje:

```bash
sentry-cli send-event -m "Hola desde Sentry"
```

Esto enviará un único mensaje a Sentry y lo registrará como un evento. Junto con ese evento, enviará información básica sobre la máquina en la que estás ejecutando `sentry-cli`. Puedes usar `-m` varias veces para enviar varias líneas:

```bash
sentry-cli send-event -m "Hola desde Sentry" -m "Más texto"
```

<div id="events-with-parameters">
  ## Eventos con parámetros
</div>

Además, puedes usar `%s` como marcador de posición en un mensaje y rellenarlo con el parámetro `-a`. Esto facilita su revisión, ya que todos los mensajes se agruparán automáticamente:

```bash
sentry-cli send-event -m "¡Hola, %s!" -a "Joe"
sentry-cli send-event -m "¡Hola, %s!" -a "Peter"
```

<div id="sending-breadcrumbs">
  ## Envío de breadcrumbs
</div>

También puedes pasar un archivo de registro al comando `send-event`, que se procesará y enviará como breadcrumbs. Se enviarán los últimos 100 elementos:

```bash
sentry-cli send-event -m "falló la tarea" --logfile error.log
```

El archivo de registro puede tener varios formatos. Si quieres crear uno tú mismo, puedes hacer algo por el estilo:

```bash
echo "$(date +%c) Este es un registro de log" >> output.log
echo "$(date +%c) Este es otro registro" >> output.log
sentry-cli send-event -m "Evento de demostración" --logfile output.log
rm output.log
```

<div id="extra-data">
  ## Datos adicionales
</div>

Puedes adjuntar datos adicionales con el parámetro `-e` en formato `CLAVE:VALOR`. Por ejemplo, puedes enviar algunos pares clave-valor así:

```bash
sentry-cli send-event -m "un error" -e task:create-user -e object:42
```

Asimismo, se pueden enviar etiquetas con `-t` usando el mismo formato:

```bash
sentry-cli send-event -m "un error" -t task:create-user
```

<div id="stored-events">
  ## Eventos almacenados
</div>

A partir de la versión `1.71`, el comando `send-event` puede aceptar un argumento opcional que especifica la ruta al archivo con la representación JSON almacenada de un [payload de evento](https://develop.sentry.dev/sdk/data-model/event-payloads/). Al usarlo, cargará el archivo, validará el evento y lo enviará a Sentry.

```bash
sentry-cli send-event ./events/20211029150006.json
```

Este argumento también puede proporcionarse como un glob, lo que hará que procese todos los eventos que coincidan.

```bash
sentry-cli send-event "./events/*.json"
```

Si se ejecuta `send-event` con la opción `--raw`, el evento no se validará antes de enviarse.

```bash
sentry-cli send-event --raw ./events/20211029150006.json
```

<div id="specifying-releases">
  ## Especificar versiones
</div>

Puedes enviar versiones con el parámetro `--release`. Si usas sentry-cli dentro de un repositorio de Git, se detectará automáticamente una versión predeterminada.

<div id="bash-hook">
  ## Hook de Bash
</div>

Para scripts de Bash también puedes habilitar el envío automático de errores usando el hook de Bash de sentry-cli. Esto habilita `set -e` y enviará un evento de Sentry para los errores no controlados.

Las limitaciones son:

* sentry-cli solo funciona realmente si `set -e` está habilitado (lo habilitará por defecto).
* sentry-cli registra trampas (`trap`) para `EXIT` y `ERR`.

Uso:

```bash
#!/bin/bash
export SENTRY_DSN='___PUBLIC_DSN___'
eval "$(sentry-cli bash-hook)"
# el resto del script va aquí
```

Como alternativa, puedes usar otros mecanismos, como [un archivo `.sentryclirc`](/es/cli/configuration/#configuration-file), para configurar el DSN.
