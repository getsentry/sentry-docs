---
title: Muestreo dinámico
sidebar_order: 30
redirect_from:
  - /product/sentry-basics/metrics/
  - /product/sentry-basics/sampling/
  - /product/data-management-settings/server-side-sampling/
  - /product/data-management-settings/server-side-sampling/getting-started/
  - /product/data-management-settings/server-side-sampling/current-limitations/
  - >-
    /product/data-management-settings/server-side-sampling/sampling-configurations/
  - /product/data-management-settings/dynamic-sampling/current-limitations/
  - /product/data-management-settings/dynamic-sampling/sampling-configurations/
  - /product/data-management-settings/dynamic-sampling/
  - /product/performance/performance-at-scale/
  - /product/performance/performance-at-scale/getting-started/
  - /product/performance/performance-at-scale/benefits-performance-at-scale/
description: >-
  Aprende a priorizar eventos importantes y aumenta la visibilidad en
  proyectos de bajo volumen con muestreo dinámico.
og_image: /og-images/organization-dynamic-sampling.png
---

<div id="overview">
  ## Descripción general
</div>

Los proyectos que generan un gran volumen de eventos pueden consumir rápidamente tu cuota de facturación. Esto puede crear un desequilibrio en el que los proyectos de alto volumen obtienen más visibilidad, dejando una cuota insuficiente para monitorear tus otros proyectos. Ahí es donde entra el muestreo dinámico.

El muestreo dinámico utiliza técnicas avanzadas de muestreo para conservar una muestra representativa de los datos que envías a Sentry. Sus algoritmos están diseñados para priorizar la conservación de muestras valiosas para la depuración y el análisis, mientras reducen la retención de datos comunes o redundantes.

<Alert>
  El muestreo dinámico solo se aplica a spans y transacciones, no a errores.
</Alert>

Hay dos variantes disponibles de muestreo dinámico, según el tipo de plan de tu organización:

* **Muestreo dinámico con prioridades de muestreo** - disponible en planes seleccionados de Team, Business y Enterprise\
  Al analizar los patrones de tráfico entrante, el muestreo dinámico puede adaptar automáticamente su tasa de muestreo tanto al volumen real de tráfico como al contenido de las transacciones aceptadas. Para más detalles, consulta la sección [Prioridades de muestreo dinámico](#dynamic-sampling-priorities).
* **Muestreo dinámico con prioridades de muestreo y tasas de muestreo personalizadas** - disponible en planes seleccionados de Enterprise\
  Configura y ajusta las tasas de muestreo para los spans almacenados directamente desde la interfaz, sin necesidad de modificar tu SDK. Esto te permite realizar actualizaciones al instante sin esperar congelaciones de código, aprobaciones de tiendas de aplicaciones ni redepliegues. Además, al analizar los patrones de tráfico entrante, el muestreo dinámico puede priorizar los datos según el contenido de los spans aceptados. Para más detalles, consulta la sección [Configuración de tasas de muestreo personalizadas](#configuration-of-custom-sample-rates).

<div id="prerequisites">
  ## Requisitos previos
</div>

* [Permisos de nivel de administrador](/es/organization/membership/).
* La versión más reciente de uno de los siguientes SDK:
  * Python: 1.7.2 o posterior
  * JavaScript: 7.6.0 o posterior
  * Apple: 7.23.0 o posterior
  * Android: 6.5.0 o posterior
  * React Native: 4.3.0 o posterior
  * Dart y Flutter: 6.11.0 o posterior
  * PHP: 3.9.0 o posterior
  * Laravel: 3.0.0 o posterior
  * Symfony: 4.4.0 o posterior
  * Ruby: 5.5.0 o posterior
  * Java: 6.5.0 o posterior
  * .NET: 3.22.0 o posterior
  * Go: 0.16.0 o posterior

<div id="configuration-of-custom-sample-rates">
  ## Configuración de tasas de muestreo personalizadas
</div>

<Alert>
  La configuración de tasas de muestreo personalizadas está disponible en planes Enterprise seleccionados desde junio de 2024.
</Alert>

En esta sección, aprenderás a usar el muestreo dinámico en tu organización. El muestreo dinámico ofrece dos modos según el nivel de control que busques:

* **Modo predeterminado** te permite establecer una tasa de muestreo objetivo a nivel de organización y ajusta automáticamente el muestreo a nivel de proyecto para que coincida con la tasa a nivel de organización.
* **Modo avanzado** te brinda un control más granular al permitirte establecer manualmente la tasa de muestreo a nivel de proyecto.

![Descripción general de la configuración de muestreo dinámico](./img/mode-and-target-sample-rate.png)

<div id="default-mode">
  ### Modo predeterminado
</div>

Para usar Dynamic Sampling en modo predeterminado, debes especificar una tasa de muestreo objetivo para toda tu organización, lo que determina cuánto tráfico entrante debe almacenarse en todos tus proyectos. Dynamic Sampling luego distribuye esta tasa de muestreo entre tus proyectos automáticamente. Las tasas de muestreo se ajustan de forma continua para tener en cuenta los cambios en el volumen de eventos con el tiempo.

**Se realizan los siguientes ajustes:**

* Los proyectos de bajo volumen obtienen una tasa de muestreo más alta, para asegurarse de que no se pierdan datos importantes.
* Los proyectos de alto volumen tienen tasas de muestreo reducidas para equilibrar el almacenamiento general.
* Las tasas de muestreo se ajustan de forma continua según los patrones de tráfico recientes, utilizando una ventana móvil corta para adaptarse a cambios estacionales como días festivos, fines de semana y tráfico nocturno.

Dynamic Sampling también prioriza los datos más valiosos dentro de la tasa de muestreo asignada a cada proyecto. Puedes obtener más información en la sección [Dynamic Sampling Priorities](#dynamic-sampling-priorities). Este sistema dinámico garantiza que tu muestreo se adapte al tráfico cambiante y mantenga el equilibrio entre proyectos.

<div id="advanced-mode">
  ### Modo avanzado
</div>

Si quieres un control más preciso, puedes personalizar la retención de datos estableciendo tasas de muestreo individuales para proyectos específicos al habilitar el modo avanzado.

Aquí puedes configurar una tasa de muestreo fija para cada proyecto de tu organización. Este valor indicará el porcentaje del tráfico entrante que debe almacenarse para cada proyecto. La tasa de muestreo puede ir del 0% al 100% y, si no se ajusta, por defecto es del 100%.

![Configuración avanzada de muestreo dinámico](./img/advanced.png)

Cuando edites las tasas de muestreo de proyectos individuales, también se calculará una tasa de muestreo general estimada para tu organización. Es un promedio ponderado basado en el volumen de tráfico de cada proyecto. Ten en cuenta que este valor es una estimación y puede cambiar a medida que fluctúa el volumen de tráfico.

Para ajustar las tasas de muestreo de todos tus proyectos a la vez, edita la tasa de muestreo general de tu organización en la [página de configuración de Dynamic Sampling](https://sentry.io/orgredirect/organizations/:orgslug/settings/dynamic-sampling/). Esto actualizará proporcionalmente la tasa de muestreo de cada proyecto para alcanzar el objetivo que elijas. La tasa máxima es del 100% y se realizarán ajustes para equilibrar las tasas entre proyectos. Podrás revisar y confirmar las tasas de muestreo actualizadas antes de guardarlas. Asegúrate de hacer clic en el Button &quot;Apply changes&quot; para guardar las nuevas tasas de muestreo.

![Cambiar todos los proyectos a la vez en el modo avanzado](./img/advanced-org-level.png)

Esté o no activado el modo avanzado, se aplicarán las [Dynamic Sampling Priorities](#dynamic-sampling-priorities) dentro de cada proyecto, dando mayor prioridad a ciertos spans y menor a otros.

Cuando desactives el modo avanzado, el proceso de recalibración comenzará de inmediato y las tasas de muestreo por proyecto se restablecerán a los valores calculados. No hay forma de restaurar las tasas de muestreo configuradas manualmente una vez que hayas desactivado el modo avanzado.

<div id="project-preview">
  ### Vista previa del proyecto
</div>

La tabla de [vista previa del proyecto](https://sentry.io/orgredirect/organizations/:orgslug/settings/dynamic-sampling/) en la página de configuración de Dynamic Sampling te muestra cómo podrían verse afectados tus proyectos por la tasa de muestreo que has elegido. La vista previa muestra las tasas asignadas dinámicamente para tus proyectos según el tráfico de las últimas 24 horas o de los últimos 30 días.

![La configuración del modo de Dynamic Sampling y la tasa de muestreo objetivo](./img/project-sample-rate-preview.png)

Como las tasas por proyecto cambian continuamente, te recomendamos elegir la vista previa de 24 horas para obtener una imagen más precisa de tus tasas de muestreo actuales para análisis en tiempo real. Recomendamos la vista previa de 30 días para consultar las tasas de muestreo promedio de tu ciclo de facturación para la planificación a largo plazo.

<div id="sample-rates-for-distributed-traces">
  ## Tasas de muestreo para trazas distribuidas
</div>

Como las [trazas distribuidas](/es/product/tracing/#whats-distributed-tracing) pueden originarse en un proyecto y tener spans que abarcan varios otros proyectos, es importante tener en cuenta que Sentry **siempre aplica la tasa de muestreo del proyecto donde se originó la traza** a cada proyecto que forma parte de esa traza.

Por ejemplo, si una traza comienza en tu aplicación de frontend, la tasa de muestreo que configuraste allí se aplicará a una aplicación de backend conectada que forme parte de la misma traza. La misma regla se aplica si la traza comienza en una aplicación de backend.

Si vas a la tabla de [vista previa del proyecto](https://sentry.io/orgredirect/organizations/:orgslug/settings/dynamic-sampling/), verás la cantidad de spans enviados junto al proyecto de origen donde comenzó la traza. Esto incluye cualquier span de trazas propagadas en otros proyectos que estén conectados al proyecto de origen. Esto te da una vista directa de cuántos spans se verán afectados por las tasas de muestreo que configures. Para ver los conteos de spans desglosados por el proyecto al que pertenecen, haz clic en el ícono de expandir a la izquierda de cada proyecto en la vista previa.

![Diagrama que muestra el efecto del muestreo dinámico en trazas distribuidas](./img/client-to-backend-accumulated-sampling-effect.png)

<div id="sdk-versus-dynamic-sampling">
  ## SDK versus Dynamic Sampling
</div>

El muestreo del SDK ocurre a nivel de la aplicación, antes de que los eventos se envíen a Sentry. Filtra eventos enviando solo un porcentaje determinado, reduciendo el volumen de datos y la sobrecarga de instrumentación. Esto ayuda a gestionar volúmenes altos de eventos directamente en el origen.

El Dynamic Sampling, por otro lado, ocurre a nivel del servidor, después de que los eventos se envían a Sentry. Las tasas de muestreo se ajustan dinámicamente según el volumen de eventos que recibe Sentry, sin requerir cambios en la aplicación.

Las tasas de muestreo del SDK normalmente solo pueden cambiarse cuando se publica una nueva versión de la aplicación, a menos que se haya implementado un mecanismo personalizado que permita cambiar la tasa de muestreo dinámicamente. Pero con Dynamic Sampling, es posible configurar la tasa de muestreo para cada proyecto de tu organización de forma dinámica, sin requerir cambios en la aplicación.

Además, cuando el modo avanzado no está activo, Dynamic Sampling monitorea continuamente el tráfico de cada proyecto y ajusta su tasa de muestreo para priorizar los datos más relevantes.

<div id="when-to-use-dynamic-versus-sdk-sampling">
  ### Cuándo usar Dynamic Sampling frente a SDK Sampling
</div>

El mayor beneficio de Dynamic Sampling es su flexibilidad. Ajusta la tasa de muestreo según el volumen de eventos que recibe Sentry. Esto lo convierte en una excelente opción para organizaciones con proyectos tanto de alto como de bajo volumen, ya que ayuda a maximizar tu cuota al adaptar la tasa de muestreo al volumen de eventos de cada proyecto.

Dynamic Sampling puede priorizar spans según su contenido, ofreciendo más información que los SDK. Por ejemplo, puede centrarse en spans de la última versión o de proyectos de bajo volumen, dándote mejor visibilidad de las partes más importantes de tu aplicación.

El muestreo del SDK usa una tasa estática definida en la configuración del SDK. Es ideal para organizaciones con volúmenes de eventos constantes que desean limitar el porcentaje de eventos enviados a Sentry. Esto ayuda a reducir los spans para disminuir la sobrecarga, ahorrar ancho de banda (especialmente en apps móviles) o reducir la cantidad de spans aceptados.

<div id="deciding-on-your-sdk-sample-rate">
  ### Decidir la tasa de muestreo del SDK
</div>

Para darle a Sentry la imagen más completa y precisa del estado de tu aplicación, recomendamos enviarnos el 100% de tus eventos. Puedes hacerlo configurando [tracesSampleRate](/es/platform-redirect/?next=/performance/) en 1.0. Si esto no es factible para tu organización, establece un valor más bajo o cambia a muestreo selectivo usando [tracesSampler](/es/platform-redirect/?next=/performance/) para filtrar tus eventos según datos contextuales. Ten en cuenta que, al calcular el rendimiento, la medición se basa en los eventos recibidos, no en los almacenados.

<Alert>
  Los cambios en la configuración de muestreo de tu SDK pueden afectar tu cuota. Si
  aumentas la tasa de muestreo del SDK, también aumentarás el volumen de
  eventos que envías a Sentry. Esto puede requerir que ajustes tu cuota.
</Alert>

Puedes usar Dynamic Sampling y el muestreo del SDK juntos para optimizar aún más el volumen de eventos según tu caso de uso específico. Por ejemplo, puedes establecer una tasa de muestreo baja en el SDK para garantizar que solo se envíe a Sentry un determinado porcentaje de eventos y luego usar Dynamic Sampling para ajustar la tasa según el volumen de eventos que recibe Sentry.

<div id="dynamic-sampling-priorities">
  ## Prioridades de Dynamic Sampling
</div>

<Alert>
  Dynamic Sampling, incluidas las Sampling Priorities, está disponible en determinados planes de pago desde noviembre de 2022.
</Alert>

A continuación se muestra una lista de las estrategias que Dynamic Sampling utiliza para priorizar y dejar en segundo plano datos. Están habilitadas de forma predeterminada, pero se pueden ajustar por proyecto para adaptarse mejor a las necesidades de tu organización. Para personalizar este comportamiento, ve a Project Settings &gt; Performance.

<div id="how-to-change-dynamic-sampling-priorities">
  ### Cómo cambiar las prioridades de muestreo dinámico
</div>

Para modificar las prioridades de muestreo dinámico de un proyecto en Sentry, ve a **Settings &gt; Projects**, selecciona el proyecto que te interese, luego desplázate hasta &quot;Performance&quot; en la sección &quot;PROCESSING&quot; y realiza las actualizaciones que necesites en &quot;DYNAMIC SAMPLING PRIORITIES&quot; usando los interruptores. Cada uno de tus proyectos puede tener su propio conjunto de prioridades de muestreo dinámico.

<Arcade src="https://demo.arcade.software/bEv0SO2UEmqbVJVok99o?embed" />

<div id="automatic-priorities">
  ### Prioridades automáticas
</div>

Sentry prioriza o reduce la prioridad automáticamente según las siguientes reglas:

<div id="latest-release">
  #### Última versión
</div>

Las últimas versiones son una prioridad de muestreo dinámica porque, cuando creas una nueva versión, asumimos que querrás tener más visibilidad durante la fase de adopción inicial, lo que mejora tu capacidad para detectar problemas nuevos a medida que tu versión gana tracción.
Como es posible que quieras desplegar la misma versión en distintos entornos, también tendremos en cuenta el entorno y daremos prioridad a esos trazos.

<div id="dev-environments">
  #### Entornos de desarrollo
</div>

Como los entornos de desarrollo suelen generar pocos eventos en comparación con los de producción, los priorizamos durante la fase de pruebas para que puedas obtener información útil. Consideramos que un entorno es de desarrollo si su nombre coincide con alguno de los siguientes patrones glob:

* `*debug*`
* `*dev*`
* `*local*`
* `*qa*`
* `*test*`

<div id="low-volume-projects">
  #### Proyectos de bajo volumen
</div>

<Alert>
  No podrás desactivar la prioridad de muestreo dinámico de Proyectos de bajo volumen
  porque está definida a nivel de organización, no por proyecto.
</Alert>

Algunos proyectos de tu organización tienen un volumen muy alto en comparación con otros. Esto significa que los proyectos de bajo volumen podrían quedar eclipsados si tratamos todos los proyectos por igual. Para asegurarnos de que tengas suficientes muestras independientemente de la escala del proyecto, damos prioridad a los proyectos de bajo volumen.

<div id="low-volume-transactions">
  #### Transacciones de bajo volumen
</div>

Los spans pueden agruparse lógicamente por su nombre de transacción dentro de un proyecto. Esto significa que los spans con el mismo nombre de transacción probablemente indican la misma operación o ruta de código, mientras que los spans con nombres de transacción diferentes suelen indicar operaciones distintas.
Priorizamos las transacciones de bajo volumen por la misma razón que priorizamos los proyectos de bajo volumen: para que no queden opacadas por transacciones de alto volumen. Queremos asegurarnos de que las rutas de código de bajo volumen se muestren en cantidades suficientes para generar una vista completa de tu aplicación.

<div id="health-checks">
  #### Comprobaciones de estado
</div>

Damos menor prioridad a las transacciones de tipo comprobación de estado porque, aunque son importantes para verificar la estabilidad de tu aplicación, no aportan valor más allá de la tarea asociada a ellas. Consideramos que una transacción es una comprobación de estado si su nombre coincide con uno de los siguientes patrones glob:

* `*healthcheck*`
* `*heartbeat*`
* `*/health`
* `*/healthy`
* `*/healthz`
* `*/live`
* `*/livez`
* `*/ready`
* `*/readyz`
* `*/ping`

<div id="get-samples">
  ### Obtener muestras
</div>

Nuestras prioridades automatizadas de muestreo dinámico funcionan bien, de forma general, para recopilar una base de muestras, porque priorizan conservar datos valiosos para cualquier cliente en un momento dado. Sin embargo, hay ciertos escenarios (como investigar un problema específico) en los que datos muy concretos pasan a ser temporalmente más importantes. En esos casos, es posible que las prioridades de muestreo automatizadas no proporcionen suficientes muestras, por lo que quizá quieras crear reglas de investigación.

Las reglas de investigación son reglas de muestreo que pueden crearse desde la interfaz de Sentry para aumentar temporalmente la cantidad de eventos recopilados para un escenario concreto (por ejemplo, eventos con valores de etiquetas específicos). Estas reglas pueden crearse para conservar más muestras cuando hay muy pocas disponibles (menos de 5). Una vez creada, una regla estará activa hasta 48 horas o hasta que se recopilen 100 muestras. Te notificaremos por correo electrónico cuando se hayan recopilado suficientes eventos.

Las reglas de muestreo de investigación solo se aplican a transacciones y no garantizan que se muestreen trazas completas. El número máximo de reglas de muestreo que pueden existir al mismo tiempo es 50.

<div id="creating-a-new-rule">
  #### Creación de una nueva regla
</div>

Cuando consultas transacciones en [Discover](/es/product/explore/discover-queries/) o en [Transaction Summary](/es/product/performance/transaction-summary/) y recibes menos de 5 muestras, puedes hacer clic en &quot;Get Samples&quot; para crear una nueva regla de investigación y conservar más muestras de transacciones para la consulta correspondiente.

![Investigation Mode in Discover](./img/investigation-bias-discover.png)

<Alert>
  Esta función solo se aplica a las transacciones. Por lo tanto, en Discover debes especificar `event.type:transaction` en la consulta para acceder a la función, mientras que en Performance el tipo de evento es implícito.
</Alert>

Al hacer clic en este botón, se crea una regla de investigación para la consulta. Una vez que la regla se crea correctamente, aparece una notificación y el botón se sustituye por un mensaje que indica que la investigación está en curso y cuánto tiempo lleva activa.

![Rule successfully created](./img/investigation-bias-rule-created.png)

Si un usuario realiza la misma búsqueda más tarde y la investigación sigue activa, la notificación indicará que ya hay una regla activa recopilando datos para la consulta.

También es posible crear una regla desde la página de Transaction Summary en Performance.

![Investigation Mode in Transaction Summary](./img/investigation-bias-tx-summary.png)