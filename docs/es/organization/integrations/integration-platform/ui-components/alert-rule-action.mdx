---
title: Acción de regla de alerta
sidebar_order: 2
description: Conoce el componente de interfaz de usuario para acciones de reglas de alerta.
og_image: >-
  /og-images/organization-integrations-integration-platform-ui-components-alert-rule-action.png
---

El componente de acción de regla de alerta te da acceso a parámetros para definir el enrutamiento o la configuración de las reglas de alerta de tu servicio. Cuando se activan reglas de alerta para un usuario, el servicio configurado recibirá eventos de webhook de [alerta de incidencia](/es/organization/integrations/integration-platform/webhooks/issue-alerts) y de [alerta de métrica](/es/organization/integrations/integration-platform/webhooks/metric-alerts), con la configuración especificada para ese servicio, para enrutar la alerta.

![Ejemplo de un componente de IU de regla de alerta.](./img/alert-rule-component-action-example.png)

![Ejemplo de un modal de configuración de regla de alerta.](./img/alert-rule-component-modal-example.png)

<div id="schema">
  ## Esquema
</div>

```json {filename:schema.json}
{
  "elements": [
    {
      "type": "acción-de-regla-de-alerta",
      "title": <String>,
      "settings": {
        "type": "configuración-de-regla-de-alerta",
        "uri": <URI>,
        "required_fields": <Array<FormField>>,
        "optional_fields": <Array<FormField>>,
        "description": <String>
      }
    }
  ]
}
```

<div id="attributes">
  ## Atributos
</div>

* `title` - (Obligatorio) El título que se muestra en el componente de la interfaz.
* `uri` - (Obligatorio) Sentry realizará una solicitud POST a la URI cuando el usuario envíe el formulario. Si el servicio no puede procesar la solicitud (código de estado ≥ 400), este componente mostrará el error al usuario con el texto de respuesta proporcionado. Consulta nuestra documentación sobre [URI Guidelines](/es/organization/integrations/integration-platform/ui-components/#uri-guidelines) para obtener ayuda con el formato.
* `required_fields` - (Obligatorio) Lista de componentes [FormField](/es/organization/integrations/integration-platform/ui-components/formfield) que el usuario debe completar.
* `optional_fields` - (Opcional) Lista de componentes [FormField](/es/organization/integrations/integration-platform/ui-components/formfield) que el usuario puede completar.
* `description` - (Opcional) Texto que se mostrará encima del formulario. Máximo 140 caracteres.

<div id="example">
  ## Ejemplo
</div>

```json {filename:schema.json}
{
  "elements": [
    {
      "type": "alert-rule-action",
      "title": "Crear una tarea en Rekall Inc",
      "settings": {
        "type": "alert-rule-settings",
        "uri": "/sentry/alert-rule",
        "required_fields": [
          {
            "type": "select",
            "label": "Proyecto",
            "name": "project",
            "options": [["1", "cornflakes"]],
          },
          {
            "type": "select",
            "label": "Responsable"
            "name": "assignee",
            "uri": "/sentry/alert-rule/options/users/"
          }
        ]
      }
    }
  ]
}
```

<div id="issue-alert-request-format">
  ## Formato de solicitud de alerta de incidencia
</div>

Cuando se active una alerta de incidencia, tu servicio deberá leer la configuración del payload de la alerta. Los `settings` están en `data.issue_alert.settings`. Consulta la documentación completa del [webhook de alertas de incidencias](/es/organization/integrations/integration-platform/webhooks/issue-alerts) para más información.

```json
{
  ...
  "data": {
    ...
    "issue_alert": {
      ...
      "settings": [
        {
          "name": "title",
          "value": "Título del ticket"
        },
        {
          "name": "description",
          "value": "Descripción del ticket"
        }
      ]
    }
  }
}
```

<div id="metric-alert-request-format">
  ## Formato de solicitud de alerta de métricas
</div>

Cuando se active una alerta de métricas, tu servicio deberá leer la configuración desde la carga útil de la alerta. En este ejemplo, los `settings` están anidados en `data.metric_alert.alert_rule.triggers[1].actions[0].settings`. Deberás identificar qué disparador y qué acción contienen tu configuración según el tipo de webhook, por lo que `triggers[1]` y `actions[0]` pueden no ser los correctos en tu caso. Consulta la documentación completa del [webhook de Metric Alerts](/es/organization/integrations/integration-platform/webhooks/metric-alerts) para más información.

```json
{
  ...
  "data": {
    ...
    "metric_alert": {
      ...
      "alert_rule": {
        ...
        "triggers": [
          ...
          {
            ...
            "actions": [
              {
                ...
                "settings": [
                  {
                    "name": "title",
                    "value": "Activador crítico"
                  },
                  {
                    "name": "description",
                    "value": "Descripción crítica"
                  }
                ]
              }
            ]
          }
        ]
      }
    }
  }
}
```

<div id="surfacing-errors">
  ## Mostrar errores
</div>

Si un usuario que está configurando una acción de regla de alerta con tu aplicación intenta guardar una configuración incorrecta o mal formada, puedes mostrarle los errores directamente en [sentry.io](https://sentry.io) respondiendo a la solicitud POST con una respuesta JSON con este formato:

```json
{ "message": "El canal ya no existe." }
```

Como alternativa, si se devuelve un código de error (40x, 50x), mostraremos un mensaje de error genérico. Si ocurre un error, el usuario no podrá guardar la regla de alerta.
