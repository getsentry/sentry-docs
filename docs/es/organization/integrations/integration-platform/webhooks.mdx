---
title: Webhooks
sidebar_order: 3
description: >-
  Obtén más información sobre los webhooks de la plataforma de integración de Sentry y cómo permiten que tu servicio reciba solicitudes sobre recursos específicos, como instalaciones, incidencias y alertas.
og_image: /og-images/organization-integrations-integration-platform-webhooks.png
---

<Alert>
  Hemos creado una [aplicación de ejemplo](https://github.com/getsentry/integration-platform-example) para ayudarte a empezar a desarrollar sobre la plataforma de integración de Sentry. Échale un vistazo para encontrar fragmentos de código útiles para añadir estas funciones en Python y TypeScript. Consulta la [documentación](/es/organization/integrations/integration-platform/#example-app) para más información.
</Alert>

Los webhooks son una forma de que dos aplicaciones o servicios se comuniquen por la web, lo que permite que una aplicación envíe notificaciones automáticas o actualizaciones de datos a otra casi en tiempo real.

El concepto se basa en callbacks HTTP, donde se envía una solicitud HTTP POST a una URL específica (un endpoint HTTP en tu stack tecnológico) con un payload. Sentry usa webhooks JSON para enviar notificaciones de errores a tus sistemas o servicios.

![Casilla de verificación del webhook de integración de Sentry](./img/webhook-checkbox.png)

<div id="headers">
  ## Encabezados
</div>

Los webhooks de Sentry admiten varias funciones y constan de cuatro encabezados HTTP esenciales que se describen a continuación:

```json
{
  "Content-Type": "application/json",
  "Request-ID": "<request_uuid>",
  "Sentry-Hook-Resource": "<resource>",
  "Sentry-Hook-Timestamp": "<timestamp>",
  "Sentry-Hook-Signature": "<generated_signature>"
}
```

El encabezado `Content-Type` identifica el tipo de contenido del cuerpo como JSON. El encabezado `Request-ID` proporciona un identificador único para rastrear y depurar eventos específicos.

<div id="sentry-hook-resource">
  ### `Sentry-Hook-Resource`
</div>

Este header te indica qué recurso de la siguiente lista desencadenó una acción:

* `installation`
* `event_alert`
* `issue`
* `metric_alert`
* `error`
* `comment`
* `seer`

<div id="sentry-hook-signature">
  ### `Sentry-Hook-Signature`
</div>

Este encabezado representa un hash criptográfico generado con tu *Client Secret*. Su objetivo principal es garantizar que la solicitud sea auténtica y provenga de los servidores de Sentry.

**Verificación de la firma**

El siguiente fragmento de código te permite validar la firma con la carga útil del evento.

```javascript
const crypto = require("crypto");

function verifySignature(request, secret = "") {
  const hmac = crypto.createHmac("sha256", secret);
  hmac.update(JSON.stringify(request.body), "utf8");
  const digest = hmac.digest("hex");
  return digest === request.headers["sentry-hook-signature"];
}
```

```python
import hashlib
import hmac
import json

expected_digest = request.headers.get('sentry-hook-signature')  # returns None if header is missing
body = json.dumps(request.body)

digest = hmac.new(
    key=client_secret.encode('utf-8'),
    msg=body,
    digestmod=hashlib.sha256,
).hexdigest()

if not expected_digest:  # La firma no está presente
    raise UnauthorizedError

if not hmac.compare_digest(digest, expected_digest):
    raise UnauthorizedError
```

<div id="request-structure">
  ## Estructura de la solicitud
</div>

Todas las solicitudes de webhook comparten algunos elementos.

`action`

La acción que corresponde al [recurso](#sentry-hook-resource) en el encabezado. Por ejemplo, si el recurso es `issue`, la acción podría ser `created`.

`installation`

Un objeto con el `uuid` de la instalación para que puedas asociar la solicitud del webhook con la instalación correspondiente.

`data`

El objeto de datos contiene información sobre el [recurso](#sentry-hook-resource) y su contenido variará según el tipo de webhook. Es posible personalizar esta carga útil mediante [componentes de UI](/es/organization/integrations/integration-platform/ui-components).

`actor`

El actor es quien, si alguien, activó el webhook. Si un usuario en Sentry activó la acción, el actor es el usuario. Si la propia integración de Sentry activa la acción, el actor es la integración. Si la acción se activa automáticamente dentro de Sentry, el actor es &quot;Sentry&quot;.

```python
# Casos de ejemplo:

# El usuario instala la integración de Sentry
"actor": {
    "type": "user",
    "id": <user-id>,
    "name": <user-name>,
}

# La integración de Sentry hace una solicitud para asignar un issue
"actor": {
    "type": "application",
    "id": <sentry-app-uuid>,
    "name": <sentry-app-name>,
}

# Sentry (sentry.io) resuelve automáticamente un issue
"actor": {
    "type": "application",
    "id": "sentry",
    "name": "Sentry",
}
```

<div id="response">
  ## Respuesta
</div>

Los webhooks deben responder en 1 segundo. De lo contrario, se considera que la solicitud agotó el tiempo de espera.

<div id="event-types">
  ## Tipos de eventos
</div>

* [Instalación](/es/organization/integrations/integration-platform/webhooks/installation/)

* [Alertas de issues](/es/organization/integrations/integration-platform/webhooks/issue-alerts/)

* [Alertas de métricas](/es/organization/integrations/integration-platform/webhooks/metric-alerts/)

* [Issues](/es/organization/integrations/integration-platform/webhooks/issues/)

* [Comentarios](/es/organization/integrations/integration-platform/webhooks/comments/)

* [Errores](/es/organization/integrations/integration-platform/webhooks/errors/)

* [Seer](/es/organization/integrations/integration-platform/webhooks/seer/)

<div id="developing-and-testing-webhooks">
  ## Desarrollo y pruebas de webhooks
</div>

Si quieres probar la configuración de webhooks y revisar las cargas útiles antes de empezar el desarrollo, puede ser muy útil usar un servicio HTTP “catch‑all” que proporcione una URL designada donde puedas recibir cargas HTTP e inspeccionar la carga útil del evento en JSON. Después de revisar las cargas útiles de los eventos relevantes, puedes comenzar el desarrollo.

Para hacer que las pruebas y la depuración de webhooks sean más rápidas y sencillas, puedes crear túneles locales para recibir solicitudes entrantes de webhooks desde Sentry en tu máquina local. Hay varias herramientas que te permiten elegir un puerto o una dirección (como 3000 o 8080) para enrutar por el túnel y luego te proporcionan una URL pública temporal que reenvía las solicitudes a tu servidor local.