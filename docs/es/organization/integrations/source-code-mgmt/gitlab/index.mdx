---
title: GitLab
sidebar_order: 1
description: >-
  Obtén más información sobre la integración de Sentry con GitLab y cómo te ayuda a
  detectar y resolver errores más rápido utilizando datos de tus commits en GitLab.
og_image: /og-images/organization-integrations-source-code-mgmt-gitlab.png
---

<div id="install">
  ## Instalar
</div>

<p>
  Se requieren permisos de propietario, manager o admin en Sentry y permisos de propietario o maintainer en GitLab para instalar esta integración.
</p>

<Alert title="Nota">
  <p>
    Recomendamos crear una cuenta de servicio dedicada en GitLab al instalar esta integración, en lugar de usar una cuenta de usuario personal. La cuenta de servicio debe tener permisos de propietario o maintainer en GitLab.
  </p>

  <p>
    Dado que la integración usa tokens de acceso personal para la autenticación, actividades como los comentarios y la creación de elementos de trabajo se atribuirán al usuario de GitLab que creó los tokens.
  </p>

  <p>
    Usar una cuenta de servicio ayuda a mantener un control de acceso adecuado, evita interrupciones cuando los miembros del equipo se van y garantiza una atribución coherente para todas las funciones en toda tu organización.
  </p>

  <p>
    Después de crear la cuenta de servicio de GitLab, deberás iniciar sesión en Sentry con una cuenta de usuario que tenga permisos de propietario, manager o admin para instalar la integración.
  </p>
</Alert>

1. Navega a **Settings &gt; Integrations &gt; GitLab**.

   ![Instalar la integración de GitLab](./img/gitlab-overview.png)

2. En la ventana modal, haz clic en &quot;Add Installation&quot;.

   ![Conectar Sentry a una instancia de GitLab](./img/add-installation.png)

3. En la ventana emergente, sigue las instrucciones para crear una app de Sentry dentro de GitLab. Cuando termines, haz clic en &quot;Next&quot;.

   ![Modal de configuración y app de Sentry dentro de GitLab](./img/configuration-modal.png)

4. Completa el formulario de GitLab Configuration con la siguiente información:

   1. La URL de GitLab es la URL base de tu instancia de GitLab. Si usas gitlab.com, ingresa https://gitlab.com/.

   2. Busca el GitLab Group Path en la página de GitLab de tu grupo. Los grupos pueden contener subgrupos y proyectos. No especifiques la URL de ningún proyecto específico, solo la de un grupo o subgrupo.

      ![Página de GitLab que muestra la ruta del grupo](./img/gitlab-groups.png)

   3. Busca el GitLab Application ID y el Secret en la app de Sentry dentro de GitLab.

      ![ID y secreto de la aplicación de GitLab](./img/gitlab-app-id.png)

   4. Usa esta información para completar el GitLab Configuration y haz clic en &quot;Submit&quot;.

      ![Formulario de configuración de GitLab](./img/gitlab-configuration.png)

5. En el panel resultante, haz clic en &quot;Authorize&quot;.

6. En Sentry, vuelve a Organization Settings &gt; **Integrations**. Verás una nueva instancia de GitLab debajo de la lista de integraciones.

7. Junto a tu instancia de GitLab, haz clic en &quot;Configure&quot;. *Es importante configurarla para obtener todos los beneficios del seguimiento de commits.*

   ![Instancia de GitLab con grupo conectado y botón de configuración resaltado](./img/configure-button.png)

8. En la página resultante, haz clic en &quot;Add Repository&quot; para seleccionar en qué repositorios te gustaría comenzar a hacer seguimiento de commits.

   ![Agregar repositorio](./img/add-repo.png)

<div id="configure">
  ## Configurar
</div>

Usa GitLab para [hacer seguimiento de los commits](#commit-tracking), identificar [commits sospechosos](#suspect-commits), [resolver mediante un commit o una PR](#resolve-via-commit-or-pull-request) y [gestionar incidencias](#issue-management).

<div id="issue-management">
  ### Gestión de incidencias
</div>

El seguimiento de incidencias te permite crear incidencias de GitLab desde Sentry y enlazar incidencias de Sentry con incidencias existentes de GitLab.

1. Selecciona tu incidencia

   ![Lista de incidencias sin resolver](./img/sentry-unresolved-issues.png)

2. Ve a Linked Issues en el panel derecho de la página de la incidencia y haz clic en &quot;Link GitLab Issue&quot;.

   ![Logo de GitLab con el texto Link GitLab Issue](./img/link-gitlab-issue.png)

3. Tienes dos opciones para completar el enlace de la incidencia:

   1. En la ventana emergente, puedes completar los detalles correspondientes en la pestaña *Create* y luego hacer clic en &quot;Create Issue&quot;.

      ![Ventana modal emergente para crear incidencia](./img/gitlab-create-issue.png)

   2. O, en la ventana emergente, puedes hacer clic en la pestaña Link, buscar la incidencia por nombre y luego hacer clic en &quot;Link Issue&quot;. *Actualmente no se pueden buscar incidencias por número.*

      ![Ventana modal emergente para buscar el nombre de la incidencia](./img/link-issue-by-name.png)

4. Para desenlazar una incidencia, haz clic en la &quot;X&quot; junto a su nombre en Linked Issues.

   ![Logo de GitLab y proyecto junto a un ícono de X](./img/unlink-issue.png)

<div id="commit-tracking">
  ### Seguimiento de commits
</div>

El seguimiento de commits te permite identificar los commits problemáticos. Con esta funcionalidad, puedes aislar mejor lo que podría estar fallando aprovechando información de los lanzamientos, como etiquetas y metadatos.

Una vez que hayas configurado tanto el [seguimiento de lanzamientos como el de commits](/es/product/releases/), podrás ver información más detallada sobre un lanzamiento: quién hizo commits, qué incidencias se introdujeron con ese lanzamiento y qué despliegues se vieron afectados.

![Panel con el último commit resaltado](./img/last-commit-in-releases.png)

Al investigar más a fondo ese commit, puedes aprovechar información de metadatos como las etiquetas.

![Detalle de la incidencia resaltando etiquetas](./img/highlighting-tags.png)

En términos generales, esto te permite aislar problemas para ver qué commits podrían ser problemáticos.

Obtén más información sobre el [seguimiento de lanzamientos y commits](/es/product/releases/).

<div id="resolve-via-commit-or-pull-request">
  ### Resolver mediante commit o pull request
</div>

Una vez que hayas agregado un repositorio (consulta el paso 8 de configuración), puedes empezar a resolver incidencias incluyendo `fixes <SHORT-ID>` en tus mensajes de commit. Podrías escribir algo en el commit como: &quot;this fixes MyApp-AB12&quot; o &quot;Fixes MyApp-317&quot;. La palabra clave que debes incluir es **fixes**. También puedes resolver incidencias con pull requests incluyendo `fixes <SHORT-ID>` en el título o la descripción. Esto resolverá automáticamente la incidencia en la próxima versión.

Un `<SHORT-ID>` puede verse como &#39;BACKEND-C&#39; en la imagen de abajo.

![Detalle de la incidencia resaltando commits sospechosos](./img/short-id.png)

<div id="stack-trace-linking">
  ### Vinculación de trazas de pila
</div>

La vinculación de trazas de pila te lleva desde un archivo en la traza de pila de Sentry a ese mismo archivo en tu código fuente. Si tienes configurado el seguimiento de commits en Sentry, podemos llevarte a la versión exacta (usando el commit asociado con el evento) del código fuente cuando ocurrió el error. De lo contrario, te dirigiremos al estado actual del código fuente (usando la **rama** predeterminada).

1. Ve a **Settings &gt; Integrations &gt; GitLab &gt; Configurations**.

2. Haz clic en el Button &quot;Configure&quot; junto a tu instancia de GitLab.

3. Haz clic en la pestaña **Code Mappings**.

4. Configura un mapeo de código para cada proyecto en el que quieras habilitar la vinculación de trazas de pila. Para crear un nuevo mapeo de código, haz clic en **Add Mapping**.

5. Completa el formulario y luego haz clic en **Save Changes**. Cada campo del formulario se describe a continuación:

   * **Project** (obligatorio): Este es el proyecto de Sentry.
   * **Repo** (obligatorio): Este es el proyecto de GitLab asociado con el proyecto de Sentry anterior. Si usas más de un proyecto de GitLab por proyecto de Sentry, necesitarás varios mapeos de código.
   * **Branch** (obligatorio): Esta es la rama predeterminada de tu código a la que recurrimos si no tienes configurado el seguimiento de commits.
   * **Stack Trace Root** y **Source Code Root** (opcional): Consulta abajo para obtener información sobre cómo determinar estos valores.

<div id="stack-trace-root-and-source-code-root">
  #### Raíz del stack trace y raíz del código fuente
</div>

<Alert>
  La siguiente información solo es válida para plataformas que usan rutas de archivo tradicionales. Las plataformas con nombres de paquete (como **Java**, **Cocoa** y **Flutter**) requieren pasos adicionales.
</Alert>

Primero, ve a un stack trace que quieras mapear. Ubica un frame **In App**, señalado por una burbuja en el lado derecho del frame. El nombre de archivo aparece como el primer texto en el lado izquierdo del header del frame. En este ejemplo, es `src/main.py`.

<Include name="common-imgs/code-mappings-stacktrace" />

En ciertas plataformas nativas, el stack trace tendrá un aspecto diferente. En estos casos, puedes ver la ruta absoluta al pasar el cursor sobre el nombre del archivo.

![Resaltando dónde en la UI encontrar la ruta del archivo para stack traces nativos](./img/code-mappings-stacktrace-native.png)

Si no estás seguro, puedes revisar el JSON del evento haciendo clic en el botón `{}` en el header del evento. Busca el texto en `filename` o `abs_path` del frame.

<Include name="common-imgs/code-mappings-event-json" />

A continuación, localiza el archivo del stack trace en tu proveedor de código fuente (por ejemplo, GitHub). En este ejemplo, la ruta es `flask/src/main.py` (`empower` se ignora porque es el nombre del repositorio).

<Include name="common-imgs/code-mappings-source-file" />

Compara la ruta del archivo del stack trace con la ruta en tu repositorio de código fuente. En este ejemplo, la carpeta `src/` del stack trace coincide con la carpeta `flask/src` del código fuente. Con esa información, establece **Stack Trace Root** en `src/` y **Source Code Root** en `flask/src/`. Esto le indica a Sentry que reemplace todas las rutas de archivo que comiencen con `src/` por `flask/src/` al buscar el código fuente.

Para obtener mejores resultados, te recomendamos proporcionar siempre un valor no vacío para **Stack Trace Root** cuando sea posible.

<Include name="common-imgs/code-mappings-configure-modal" />

<div id="suspect-commits">
  ### Commits sospechosos
</div>

Una vez que configures el enlace de la traza de pila, Sentry puede usar información de tu proveedor de código fuente para sugerir el commit que probablemente introdujo el error. El primer marco de la traza de pila se considera sospechoso al revisar de arriba hacia abajo. Si el primer marco no es in-app, se considera sospechoso el siguiente.

Después de identificar el commit sospechoso, también puedes ver qué desarrollador lo hizo y asignarle la tarea de corregir el error.

![Detalle de la incidencia destacando commits sospechosos](./img/highlighting-suspect-commits.png)

Obtén más información sobre cómo configurar esta funcionalidad en [Commits sospechosos](/es/product/issues/suspect-commits/).

<div id="code-owners">
  ### Code Owners
</div>

<Include name="feature-available-for-plan-business.mdx" />

Importa tus archivos CODEOWNERS de GitLab existentes para asignar automáticamente incidencias de Sentry y dirigir las alertas a las personas y equipos responsables.

Para más información, consulta la documentación completa de [Code Owners](/es/product/issues/ownership-rules/#code-owners).

<div id="troubleshooting">
  ## Solución de problemas
</div>

* Estoy usando GitLab on‑premises. ¿Necesito permitir las direcciones IP de Sentry?

  * Sí. Puedes encontrar nuestros rangos de IP [aquí](/es/security-legal-pii/security/ip-ranges/).
  * Verifica que la URL de instalación proporcionada sea un nombre de dominio completo (FQDN) resolvible en internet.
  * Asegúrate de que el acceso de Sentry a tu URL de instalación no esté restringido por la ruta.
  * Para agregar el repositorio de GitLab, ve a **GitLab &gt; Admin area &gt; Settings &gt; Network &gt; Outbound requests &gt; Allow requests to the local network from hooks and services** y habilita la opción.

* Estoy usando tanto GitLab on‑premises como Sentry autogestionado y aparece el error `Error Communicating with GitLab (HTTP 422): unknown error` al intentar usar la integración. ¿Cómo puedo solucionarlo?

  * De forma predeterminada, GitLab no permite que los hooks se comuniquen con la red privada local, lo que impide que la integración con Sentry funcione. Para habilitar la comunicación con la red local en GitLab, activa &quot;Allow requests to the local network from hooks and services&quot; en la página **Admin &gt; Settings &gt; Network**.

* ¿Admiten subgrupos?

  * Actualmente, solo admitimos subgrupos para usuarios que usen GitLab 11.6 o superior.

* Mis repositorios están alojados en mi cuenta de usuario, no en una cuenta de grupo. ¿Aún puedo usar esta integración?

  * Lamentablemente no. La integración de GitLab solo funciona para repositorios alojados en cuentas de grupo.

* ¿Hay restricciones de precios?

  * Esta integración está disponible para organizaciones en el [plan Team, Business o Enterprise](https://sentry.io/pricing/).

* ¿Quién tiene permiso para instalar esto?

  * Debes tener permisos de propietario/manager/admin en Sentry y permisos de propietario en GitLab para instalar esta integración correctamente.

* ¿Por qué recibo una respuesta `500` durante la instalación o configuración?

  * Primero, asegúrate de haber permitido nuestras IP, que puedes encontrar [aquí](/es/security-legal-pii/security/ip-ranges/). La respuesta 500 proviene de GitLab, por lo que quizá debas intentarlo de nuevo o verificar que tu configuración y permisos sean correctos en GitLab. Debes tener permisos de propietario/manager/admin en Sentry, así como permisos de propietario en GitLab, para instalar esta integración correctamente.

* ¿Por qué veo un error &quot;Invalid Repository Names&quot;?

  * GitLab tiene en cuenta el espacio en blanco antes y después de la `/`. En la página Repositories (Organization Settings &gt; Repositories), notarás un espacio (por ejemplo, &quot;Owner / Repo&quot; en lugar de &quot;Owner/Repo&quot;), que deberá incluirse en cualquier comando que ejecutes. Si usas las [environment variables](https://docs.gitlab.com/ee/ci/variables/#debug-tracing) de GitLab para pasar el repositorio como `CI_PROJECT_PATH` en una solicitud cURL, por ejemplo, es posible que no incluya los espacios y tengas que poner el nombre de forma literal para que funcione.

* ¿Por qué siempre aparezco como el reporter?
  * Al usar la integración de GitLab para crear issues, el campo “reporter” se completa por defecto con la persona que configuró la integración; esto no es configurable.