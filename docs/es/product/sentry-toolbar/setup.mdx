---
title: Configurar la barra de herramientas de Sentry
sidebar_order: 10
description: >-
  Empieza con la barra de herramientas de Sentry, que incorpora información y
  herramientas clave de Sentry en tu aplicación web para ayudar a tu equipo a
  solucionar problemas de forma más eficaz.
og_image: /og-images/product-sentry-toolbar-setup.png
---

<Alert>
  La barra de herramientas de Sentry está actualmente en **beta**. Las funciones beta aún están en desarrollo y pueden tener errores. Ponte en contacto en
  [GitHub](https://github.com/getsentry/sentry-toolbar/issues) si tienes comentarios o inquietudes.
</Alert>

<div id="pre-requisites">
  ## Requisitos previos
</div>

Para que Sentry Toolbar funcione de la mejor manera, [habilita el tracing](/es/platforms/javascript/tracing/) en tu aplicación. Con el tracing habilitado, Sentry Toolbar podrá asociar incidencias y comentarios con la URL actual en la barra de direcciones del navegador.

<div id="1-allow-domains">
  ## 1. Permitir dominios
</div>

Dado que la Sentry Toolbar será visible para los usuarios dentro de tu app, es importante considerar en qué entornos debería mostrarse. Consulta las [Preguntas frecuentes: *«¿En qué entornos debería habilitar la Sentry Toolbar?»*](/es/product/sentry-toolbar/faq/#in-what-environments-should-i-enable-the-dev-toolbar) para obtener consejos.

Necesitarás editar la página de [Project Settings](https://sentry.io/orgredirect/organizations/:orgslug/settings/projects/) para permitir que la Toolbar se conecte a Sentry. Agrega a la lista los dominios de producción, staging o desarrollo que correspondan. Solo agrega dominios que controles y en los que confíes.

![Página de configuración de la Toolbar de Sentry](./img/sentry-project-settings-toolbar.png)

También puede que necesites agregar tu dominio de Sentry a la directiva [`frame-src`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-src) en los encabezados de respuesta de tu CSP. Consulta las [Preguntas frecuentes: *«¿Por qué la Toolbar se queda atascada mostrando “Connecting to ...”?»*](/es/product/sentry-toolbar/faq/#why-is-the-toolbar-stuck-saying-connecting-to-) para obtener más información.

<div id="2-install">
  ## 2. Instalación
</div>

Si estás desarrollando una aplicación basada en React, es momento de agregar Toolbar a tu `package.json`.

O bien, puedes pasar al siguiente paso para encontrar las instrucciones de configuración del CDN.

```bash {tabTitle: npm}
npm install --save @sentry/toolbar
```

```bash {tabTitle: yarn}
yarn add @sentry/toolbar
```

<div id="3-configure">
  ## 3. Configurar
</div>

Por último, tanto si tienes una aplicación de React como si cargas la barra de herramientas desde el CDN, debes inicializarla con JavaScript. Esto solicitará a cualquier visitante que inicie sesión en tu organización de Sentry.

```javascript {tabTitle: React}
import {useSentryToolbar} from '@sentry/toolbar';

useSentryToolbar({
  // Recuerda habilitar la Toolbar de forma condicional.
  // Esto reducirá el tráfico de red para los usuarios
  // que no tengan credenciales para iniciar sesión en Sentry.
  enabled,

  initProps: {
    organizationSlug: 'acme',
    projectIdOrSlug: 'website',
  },
})
```

```html {tabTitle: CDN}
<html>
<head>...</head>
<body>
    ...
    <!--
    Coloca esto al final de tu página para que no
    bloquee otros JavaScript críticos.

    Recuerda incluir el script de la Toolbar de forma condicional.
    Esto reducirá el tráfico de red para los usuarios
    que no tengan credenciales para iniciar sesión en Sentry.
    -->
    <script src="https://browser.sentry-cdn.com/sentry-toolbar/latest/toolbar.min.js"></script>
    <script>
    window.SentryToolbar.init({
      organizationSlug: 'acme',
      projectIdOrSlug: 'website',
    });
    </script>
</body>
</html>
```

Consulta las [preguntas frecuentes: *«¿Cómo puedo inicializar la barra de herramientas de forma condicional?»*](/es/product/sentry-toolbar/faq/#how-can-i-conditionally-initialize-the-toolbar) para obtener ayuda para implementar condiciones en diferentes entornos.

<div id="init-configuration-options">
  ### Opciones de configuración de Init
</div>

Como mínimo, debes establecer `organizationSlug` y `projectIdOrSlug`.

La lista completa de opciones está aquí:

| Opción | Tipo | Descripción | Valor predeterminado |
| ------ | ---- | ----------- | -------------------- |
| `organizationSlug` | `string` | La organización en la que los usuarios deben iniciar sesión. Por ejemplo: &#39;acme&#39; | *Valor requerido* |
| `projectIdOrSlug` | `string \| number` | El proyecto con el que está asociado este sitio web o aplicación web. | *Valor requerido* |
| `environment (optional)` | `string \| string[] \| undefined` | El entorno de este despliegue. Se usa para acotar los resultados de búsqueda en la interfaz de la Toolbar. Establécelo en `undefined`, `""` o `[]` si quieres ver resultados de todos los entornos. | `undefined` |
| `placement (optional)` | `'right-edge' \| 'bottom-right-corner'` | Dónde mostrar la Toolbar en la pantalla. | `'right-edge'` |
| `theme (optional)` | `'system' \| 'dark' \| 'light'` | Si se usa el modo oscuro o claro. | `'system'` |
| `featureFlags (optional)` | `FeatureFlagAdapter \| undefined` | Consulta el [Panel de feature flags](/es/product/sentry-toolbar/setup/#feature-flag-Panel) más abajo | `undefined` |
| `sentryOrigin (optional)` | `string \| undefined` | El origen donde se encuentra Sentry. Se usa para cargar la conexión con Sentry y generar enlaces al sitio web. Por ejemplo: `'https://acme.sentry.io'` | `'https://sentry.io'` |
| `domId (optional)` | `string \| undefined` | El `id` asignado al &lt;div&gt; que se crea para contener el HTML de la Toolbar. | `'sentry-toolbar'` |
| `debug (optional)` | `string \| undefined` | Una cadena separada por comas con los objetivos de depuración a habilitar. Ejemplo: `'logging,state'`. Si la lista contiene &#39;all&#39; o &#39;true&#39;, se habilitarán todos los objetivos. Objetivos válidos: `'logging' 'login-success' 'settings' 'state'` | `undefined` |
| `mountPoint (optional)` | `HTMLElement \| () => HTMLElement \| undefined` | Dónde montar la Toolbar en el DOM. | `document.body` |
| `transactionToSearchTerm (optional)` | `(transactionName: string) => string` | Hook para transformar transactionName en un término de búsqueda | Consulta [transactionToSearchTerm.ts](https://github.com/getsentry/sentry-toolbar/blob/main/src/lib/utils/transactionToSearchTerm.ts) |

<div id="extra-react-hook-options">
  ### Opciones adicionales de los hooks de React
</div>

El hook de React admite otras opciones a nivel superior. Los valores predeterminados son:

```javascript {tabTitle:React}
useSentryToolbar({
  initProps: {
    organizationSlug: 'acme',
    projectIdOrSlug: 'website',
  },

  // Opcional:
  enabled: true,

  // Opcional: usa `version` o `cdn`
  // Si ambos están configurados, `cdn` tendrá prioridad sobre `version`
  version: 'latest',
  cdn: 'https://browser.sentry-cdn.com/sentry-toolbar/latest/toolbar.min.js',
})
```

| Opciones | Tipo | Descripción | Valor predeterminado |
| ------- | ---- | ----------- | ------------- |
| `enabled` | `boolean (opcional)` | Inicializa la barra de herramientas de forma condicional. Establécelo en false para evitar solicitar el código de la barra de herramientas en el navegador o para desmontar de forma segura una instancia existente | `true` |
| `version` | `string (opcional)` | Solicita una versión específica de la barra de herramientas desde el CDN. Se recomienda usar `latest` para actualizaciones automáticas. Consulta https://github.com/getsentry/sentry-toolbar/releases para ver la lista de etiquetas de lanzamiento disponibles. | `'latest'` |
| `cdn` | `string (opcional)` | Sobrescribe el campo `version` anterior. Configurar el CDN es útil si quieres alojar por tu cuenta una versión específica de la barra de herramientas. | `'https://browser.sentry-cdn.com/sentry-toolbar/latest/toolbar.min.js'` |

<div id="unmounting-the-toolbar">
  ### Desmontar la barra de herramientas
</div>

Si has llamado a `SentryToolbar.init({...})` para renderizar la barra de herramientas, pero ahora quieres eliminarla o desmontarla manualmente de la página, puedes llamar a la función de limpieza que devuelve `init()`. Esto desmontará todo el HTML y el CSS inyectados. Las credenciales de inicio de sesión no se eliminarán, por lo que puedes volver a insertar la barra de herramientas y seguir autenticado.

Si estás usando el hook de React, la barra de herramientas se desmontará cuando se desmonte el componente de React, o si estableces `enabled: false`.

```javascript
const unmountToolbar = window.SentryToolbar.init({ ... });

// un poco más tarde...
unmountToolbar();
```

```javascript {tabTitle:React}
useSentryToolbar({
  enabled: false, // La barra de herramientas no se instalará
  initProps: {
    ...
  },
})
```

<div id="feature-flag-panel">
  ## Panel de feature flags
</div>

<Alert>
  Si usas feature flags en tu producto, configura también la [Evaluación de feature flags y el seguimiento de cambios](/es/platforms/javascript/feature-flags/) en tu SDK.
</Alert>

Para integrar tu plataforma de feature flags con la Sentry Toolbar, necesitas un adaptador que pueda leer los datos de los flags de tu proveedor. También almacenará y recuperará una lista de overrides para aplicarlos a tu sesión local del navegador.

Hay un `OpenFeatureAdapter` integrado que es compatible con [open-feature/js-sdk-contrib](https://github.com/open-feature/js-sdk-contrib). Para usarlo, llama a la implementación `SentryToolbar.OpenFeatureAdapter`.

```html {tabTitle: CDN}
<script>
// Define tu proveedor
const provider = new FlagdWebProvider({...});

// Configura el proveedor en el SDK de OpenFeature
OpenFeature.setProvider(provider);

window.SentryToolbar.init({
  ...
  // Configura el proveedor en OpenFeatureAdapter
  featureFlags: window.SentryToolbar.OpenFeatureAdapter({provider})
});
</script>
```

```typescript {tabTitle: React}
import {OpenFeature} from '@openfeature/web-sdk';
import {FlagdWebProvider} from '@openfeature/flagd-web-provider';

// Define tu proveedor
const provider = new FlagdWebProvider({...});

// Establece el proveedor en el SDK de OpenFeature
OpenFeature.setProvider(provider);

window.SentryToolbar.init({
  ...
  // Establece el proveedor en el OpenFeatureAdapter
  featureFlags: window.SentryToolbar.OpenFeatureAdapter({provider})
});
```

También puedes crear tu propio adaptador implementando la [interfaz `FeatureFlagAdapter`](https://github.com/getsentry/sentry-toolbar/blob/main/src/lib/types/featureFlags.ts).

La interfaz del adaptador es:

```typescript
type FlagValue = boolean | string | number | undefined;
type FlagMap = Record<string, FlagValue>;
interface FeatureFlagAdapter {
  /**
   * Todos los nombres de flags conocidos y sus valores resultantes.
   */
  getFlagMap: () => Promise<FlagMap>;

  /**
   * Cualquier flag forzada o establecida manualmente y sus valores.
   */
  getOverrides: () => Promise<FlagMap>;

  /**
   * Establece manualmente un flag con un valor específico, reemplazando el valor calculado.
   */
  setOverride: (name: string, override: FlagValue) => void;

  /**
   * Un callback para borrar todas las anulaciones de este navegador.
   */
  clearOverrides: () => void;

  /**
   * Enlace directo a tu proveedor externo de feature flags para obtener más información sobre
   * este flag específico.
   */
    urlTemplate?: undefined | ((name: string) => string | URL | undefined);
}
```

[MockFeatureFlagAdapter.tsx](https://github.com/getsentry/sentry-toolbar/blob/main/src/env/demo/MockFeatureFlagAdapter.tsx) es un adaptador de ejemplo que puedes usar como referencia.
