---
title: Drains de Vercel
sidebar_order: 75
description: Aprende a configurar los drains de Vercel para reenviar registros y trazas a Sentry.
---

Los drains de Vercel te permiten reenviar trazas y registros de aplicaciones que se ejecutan en Vercel a Sentry.

<div id="prerequisites">
  ## Requisitos previos
</div>

Antes de empezar, asegúrate de contar con:

- Un proyecto de Vercel que quieras monitorear
- Un proyecto de Sentry al que quieras enviar datos

<div id="set-up-a-drain">
  ## Configurar un Drain
</div>

Para configurar un Drain en Vercel, debes crear uno nuevo en la configuración de Vercel. Para más información sobre los Drains de Vercel, consulta la [documentación de Vercel sobre Drains](https://vercel.com/docs/drains).

1. Desde el panel de Vercel, ve a **Team Settings > Drains** y haz clic en **Add Drain**.
2. Elige un tipo de datos. Actualmente solo se admiten Logs y Traces.

- [Logs](#log-drains): Registros de runtime, build y estáticos de tus deployments (compatible con endpoints personalizados e integraciones nativas)
- [Traces](#trace-drains): Datos de trazas distribuidas en formato OpenTelemetry (compatible con endpoints personalizados e integraciones nativas)

<div id="log-drains">
  ### Drains de logs
</div>

<Alert>
  El soporte para Vercel Log Drains está actualmente en alfa cerrada. Escríbenos a [feedback-logging@sentry.io](mailto:feedback-logging@sentry.io) si tienes comentarios o preguntas. Las funciones en alfa aún están en desarrollo y pueden tener errores. Sí, lo sabemos.
</Alert>

Después de seleccionar el tipo de datos Logs, deberás configurar el drain para enviar datos a Sentry.

1. Asigna un nombre a tu drain y selecciona qué proyectos deben enviar datos a tu endpoint. Puedes elegir todos los proyectos o seleccionar algunos específicos.
2. Configura la tasa de muestreo para controlar el volumen de datos enviados a tu drain. Recomendamos muestrear el 100% de los datos para asegurarte de obtener toda la información que necesitas.
3. Selecciona qué fuentes de logs recopilar

* **Functions**: Emite datos de logs de Vercel Functions como API Routes
* **Edge Functions**: Emite datos de logs de Vercel Functions o Routing Middleware usando el runtime de Edge
* **Static Files**: Recopila logs de recursos estáticos como archivos HTML y CSS
* **Rewrites**: Recopila resultados de logs para [rewrites](https://vercel.com/docs/project-configuration#rewrites) externos a un dominio diferente
* **Builds**: Emite datos de logs del paso de build
* **Firewall**: Emite datos de logs de solicitudes denegadas por las reglas de [Vercel Firewall](https://vercel.com/docs/vercel-firewall)

4. Selecciona desde qué entornos extraer logs. Puedes elegir todos los entornos o seleccionar algunos específicos.
5. En la pestaña de endpoint personalizado, agrega el endpoint de Sentry Vercel Log Drain en el campo URL. Puedes encontrarlo en tu [Sentry Project Settings](https://sentry.io/settings/projects/) en **Client Keys (DSN)** &gt; **Vercel**. Puedes seleccionar la codificación JSON o NDJSON.

```
___VERCEL_LOG_DRAIN_URL___
```

6. Haz clic en el conmutador de Custom Headers y agrega el Sentry Authentication Header. También encontrarás el valor del encabezado en tus [Sentry Project Settings](https://sentry.io/settings/projects/), en **Client Keys (DSN)** &gt; **Vercel**.

```
x-sentry-auth: sentry sentry_key=___PUBLIC_KEY___
```

7. Para comprobar que el log drain está funcionando, puedes enviar un registro de prueba a tu drain haciendo clic en el Button Test.


<div id="trace-drains">
  ### Drenajes de trazas
</div>

Después de seleccionar el tipo de datos Traces, tendrás que configurar el drenaje para enviar datos a Sentry.

1. Asigna un nombre a tu drenaje y elige qué proyectos deben enviar datos a tu endpoint. Puedes seleccionar todos los proyectos o solo algunos específicos.
2. Configura la tasa de muestreo para controlar el volumen de datos que se envía a tu drenaje. Recomendamos muestrear el 100% de los datos para asegurarte de obtener toda la información que necesitas.
3. En la pestaña de endpoint personalizado, agrega el Sentry Vercel Log Drain Endpoint en el campo URL. Puedes encontrar el endpoint en tus [Sentry Project Settings](https://sentry.io/settings/projects/) en **Client Keys (DSN)** &gt; **OpenTelemetry (OTLP)**, en la sección **OTLP Traces Endpoint**.

```
___OTLP_TRACES_URL___
```

4. Haz clic en el interruptor de Custom Headers y agrega el Sentry Authentication Header. También encontrarás el valor del encabezado en tus [Sentry Project Settings](https://sentry.io/settings/projects/), en **Client Keys (DSN)** &gt; **OpenTelemetry (OTLP)**, en la sección **OTLP Traces Endpoint Headers**.

```
x-sentry-auth: sentry sentry_key=___PUBLIC_KEY___
```

5. Para comprobar que el trace drain está funcionando, puedes enviar un trace de prueba a tu drain haciendo clic en el Button Test.
