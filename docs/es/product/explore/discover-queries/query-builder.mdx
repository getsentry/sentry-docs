---
title: Generador de consultas
sidebar_order: 10
description: >-
  Aprende a usar Discover para crear una consulta, filtrar tus datos y
  agrupar resultados.
og_image: /og-images/product-explore-discover-queries-query-builder.png
---

<Include name="feature-available-for-plan-trial-business.mdx" />

Desde la página de **Discover**, puedes crear una consulta de tres maneras.

* Haz clic en &quot;Build a new query&quot;
* Haz clic en el ícono de elipsis de una tarjeta de consulta guardada para &quot;Duplicate&quot;
* Entra en cualquier consulta existente
  1. Haz clic en &quot;Save as...&quot; en la esquina superior derecha
  2. Introduce un nuevo nombre para mostrar
  3. Haz clic en &quot;Save&quot;

Hay cinco componentes principales que afectan los resultados de tu consulta guardada y cuya combinación puede usarse para acotar tu búsqueda:

1. Selección del conjunto de datos
2. Filtros de proyecto, entorno y rango de fechas
3. Condiciones de búsqueda
4. Gráfica interactiva
5. Columnas de la tabla

<div id="dataset-selection">
  ## Selección de conjunto de datos
</div>

El selector de conjuntos de datos te permite consultar errores o transacciones. Solo puedes consultar un conjunto de datos a la vez. El conjunto de datos de errores devuelve eventos relacionados con errores, mientras que el de transacciones devuelve eventos de transacción que te ayudan a ver el rendimiento de la aplicación.

<div id="filter-by-project-environment-and-date-range">
  ## Filtra por proyecto, entorno y rango de fechas
</div>

Estos filtros habituales te permiten acotar tus proyectos y entornos, y especificar el rango de fechas en el que quieres profundizar.

<div id="filter-by-search-conditions">
  ## Filtrar por condiciones de búsqueda
</div>

Todos los eventos tienen campos clave integrados o etiquetas personalizadas. Usa la barra de búsqueda para introducir estas claves y asignarles valores. Esto filtrará tu lista de eventos. Para ver la lista de campos clave integrados, consulta nuestra [documentación sobre propiedades buscables](/es/concepts/search/searchable-properties/).

{/*<!--import standardFields from "./standard-fields.json";

  <ParamTable fields={standardFields} /> -->*/}

<div id="syntax">
  ### Sintaxis
</div>

La sintaxis del Generador de consultas es idéntica a la [sintaxis de búsqueda de Sentry](/es/concepts/search/). Después de ingresar un campo clave de los anteriores o una etiqueta personalizada, puedes usar cualquiera de las sintaxis indicadas. Por ejemplo, `count()` te da la cantidad de veces que ocurre un evento. Esto se puede expresar de las siguientes maneras:

* Coincidencia exacta (es igual a): `count():99`
* Límite superior (es menor o igual que): `count():<99` o `count():<=99`
* Límite inferior (es mayor o igual que): `count():>99` o `count():>=99`
* Límites múltiples (es mayor que y menor que): `count():>10 count():<20`

Usa condiciones de búsqueda `OR` y `AND` entre filtros. Sin embargo, `OR` no se puede usar entre filtros agregados y no agregados. Para más detalles sobre estas condiciones, consulta [Uso de `OR` y `AND`](/es/concepts/search/#using-or-and-and).

También puedes buscar varios valores para la misma clave colocando los valores en una lista. Por ejemplo, &quot;x:[value1, value2]&quot; encontrará los mismos resultados que &quot;x:value1 `OR` x:value2&quot;. Puedes obtener más información en nuestro contenido sobre [Múltiples valores en la misma clave](/es/concepts/search/#multiple-values-on-the-same-key).

<div id="tag-summary-filters">
  ### Filtros de resumen de etiquetas
</div>

Cada evento tiene una lista de valores de etiqueta. El resumen de etiquetas (o mapa de facetas) es una visualización de las 10 claves principales ordenadas por frecuencia. El valor de etiqueta más común aparece justo encima de la barra con la descripción y el porcentaje. Pasa el cursor sobre cada sección de una barra para ver la distribución exacta de esa etiqueta.

Haz clic en cualquiera de estas secciones para afinar tu búsqueda. Por ejemplo, al hacer clic en una sección que representa Chrome en una barra de navegador, el resumen de etiquetas se actualizará automáticamente y añadirá Chrome a las condiciones de búsqueda.

![Mapa de facetas para etiquetas de transacción y handled. El mapa parece una barra con colores en degradado.](./img/discover-facet-map.png)

<Alert>
  Al realizar búsquedas en eventos de transacción, según tus criterios de búsqueda
  y la tasa de muestreo, los eventos disponibles pueden ser limitados porque Discover utiliza
  solo datos muestreados. Obtén más información en [nuestras prioridades de muestreo](/es/organization/dynamic-sampling/).
</Alert>

<div id="filter-by-interactive-graph">
  ## Filtrar por gráfico interactivo
</div>

Cada consulta incluye un gráfico interactivo que refleja los datos de la tabla inferior. Para acercar, haz clic y arrastra sobre el área que quieras analizar. También puedes personalizar la visualización y el eje Y. Estos ajustes se guardarán con tu consulta.

<div id="interval-options">
  ### Opciones de intervalo
</div>

El selector «Interval» te permite cambiar cómo se agrupan las fechas en el gráfico. El selector tiene límites basados en el rango de tiempo seleccionado. Esto significa que, por ejemplo, si consultas un periodo de 90 días, el intervalo máximo que puedes elegir es de 45 días y el mínimo es de una hora.

<div id="display-options">
  ### Opciones de visualización
</div>

* Período total
* Período anterior
* Marcadores de versión
* Período máximo
* Total diario
* Máximo diario
* Gráfico de barras

<div id="limit-options">
  ### Opciones de límite
</div>

Cuando la opción &quot;Display&quot; es &quot;Top Period&quot; o &quot;Top Daily&quot;, puedes definir un límite opcional. De forma predeterminada es 5 y muestra los cinco mejores resultados en el gráfico.

<div id="y-axis-options">
  ### Opciones del eje Y
</div>

* Recuento
* Duración media de la transacción
* p75
* p95
* Recuento de usuarios únicos

Cuando tu selección de &quot;Display&quot; sea &quot;Total Period&quot;, &quot;Previous Period&quot;, &quot;Total Daily&quot; o &quot;Bar Chart&quot;, puedes configurar hasta tres ejes Y seleccionando varias casillas en el menú desplegable &quot;Y-Axis&quot;.

<div id="group-stack-with-table-columns">
  ## Agrupar y apilar con columnas de la tabla
</div>

Sobre la tabla, haz clic en «Columns» para abrir el modal que muestra una lista de todas las columnas de la tabla de resultados. Puedes agregar, eliminar y mover columnas de campos clave básicos o columnas de etiquetas personalizadas por las que se agrupan los resultados.

<div id="stacking-functions">
  ### Funciones de apilamiento
</div>

También puedes añadir las siguientes funciones como columnas para apilar eventos, según el conjunto de datos seleccionado:

<div id="errors">
  #### Errores
</div>

* `count()`
* `count_if(...)`
* `count_unique(...)`
* `eps()`
* `epm()`

<div id="transactions">
  #### Transacciones
</div>

* `any(...)`
* `apdex(...)`
* `avg(...)`
* `count()`
* `count_if(...)`
* `count_miserable(...)`
* `count_unique(...)`
* `count_web_vitals(...)`
* `epm()`
* `eps()`
* `failure_count()`
* `failure_rate()`
* `last_seen()`
* `max(...)`
* `min(...)`
* `percentile(...)`
* `p50(...)`
* `p75(...)`
* `p95(...)`
* `p99(...)`
* `p100(...)`
* `sum(...)`
* `user_misery(...)`

Cada función te pedirá que definas un parámetro. Algunas son obligatorias y otras opcionales. Las funciones agruparán los eventos según los mismos valores. Si no se aplican funciones, los eventos en tu tabla “Query Results” seguirán listados individualmente. Cuando termines de editar las columnas, haz clic en “Apply” y los resultados se reflejarán en los resultados de la consulta. Ten en cuenta que la tabla puede desplazarse horizontalmente si se añaden muchas columnas.

<div id="cell-filters">
  ### Filtros de celdas
</div>

Cada celda de la tabla mostrará unos puntos suspensivos al pasar el cursor. Al hacer clic, se abrirá un menú contextual con opciones adicionales de filtrado según el tipo de valor. Por ejemplo, puedes enviar selectivamente una transacción a la barra de condiciones de Buscar haciendo clic en &quot;Agregar al filtro&quot;.

![Menú que muestra opciones adicionales para agregar al filtro o excluir del filtro](./img/discover-table-cell.png)

<div id="adding-equations">
  ### Agregar ecuaciones
</div>

También puedes añadir ecuaciones a tu consulta usando las columnas de la tabla como variables, y los resultados aparecerán en la tabla de resultados de la consulta. Más información en [Agregar ecuaciones de consulta](query-equations/).

<div id="sorting-columns">
  ### Ordenar columnas
</div>

Haz clic en el encabezado de la columna que quieres ordenar. Una flecha hacia abajo ordena la columna en orden descendente y una flecha hacia arriba la ordena en orden ascendente. Es posible que la tabla se actualice.

<div id="additional-query-actions">
  ## Acciones adicionales de búsqueda
</div>

<div id="edit-queries">
  ### Editar consultas
</div>

Si necesitas editar alguna de estas consultas, abre la consulta, realiza los cambios y aparecerá un botón en la esquina superior derecha para guardar/actualizar la consulta. Ten en cuenta que las ediciones a las condiciones de la consulta **no** se guardarán automáticamente.

Para cambiar el nombre de una consulta guardada, haz clic en el ícono de lápiz junto al Header y escribe el nombre para mostrar. Presiona Enter o haz clic fuera del área para confirmar.

<div id="share-queries">
  ### Compartir consultas
</div>

Comparte tus consultas tantas veces como quieras. Puedes compartir URL con otros usuarios que también tengan acceso a la misma organización. A medida que vas creando cada parte de la consulta, los resultados se actualizan y la URL también, de modo que las búsquedas en curso pueden compartirse por correo electrónico, chat, etc.

<div id="export-csv">
  ### Exportar CSV
</div>

Si quieres llevarte los datos a otro lugar, haz clic en «Export» para obtener un archivo CSV.

Si la exportación es grande, recibirás un correo electrónico con el enlace de descarga cuando esté listo. Esto requerirá una verificación adicional en la página de descarga de Sentry. Esta incluye una suma de verificación `SHA1` del archivo, que puedes usar para verificar su integridad con el siguiente comando:

```bash
echo "<suma de comprobación SHA1> <nombre del CSV descargado>" | sha1sum -c -
```

<Alert>
  Según la cantidad de datos, los tiempos de espera pueden variar. Los resultados
  se limitan a 10 millones de filas o 1 GB, lo que ocurra primero.
</Alert>

<div id="deleting-queries">
  ### Eliminación de consultas
</div>

<Alert>Eliminar una consulta guardada es irreversible.</Alert>

En la página **Discover**, cada tarjeta de consulta guardada tiene un icono de tres puntos que abre un menú contextual. Elimina la consulta desde allí. También puedes eliminarla en la vista Query Results haciendo clic en el icono de la papelera en la esquina superior derecha.

Para obtener más información sobre cómo ver las consultas guardadas, consulta la [documentación completa de Discover](/es/product/explore/discover-queries/)