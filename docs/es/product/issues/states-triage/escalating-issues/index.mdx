---
title: Algoritmo de escalado de incidencias
sidebar_order: 40
description: Aprende cómo funciona el algoritmo de escalado de incidencias.
og_image: /og-images/product-issues-states-triage-escalating-issues.png
---

<Include name="merge-escalating-note.mdx" />

De forma predeterminada, las incidencias archivadas pasarán a estado de no resueltas cuando aumente el número de eventos. Sentry define una incidencia como `Escalating` cuando el número de eventos es significativamente mayor que el de la semana anterior.

El algoritmo de escalado de incidencias utiliza datos históricos de la semana anterior para calcular, por incidencia, los umbrales de la semana siguiente. Si una incidencia archivada supera su umbral predefinido, se etiqueta como `Escalating`, a menos que estuviera &quot;[Archived Forever](/es/product/issues/states-triage/#archive)&quot;. Una incidencia en escalado aparece automáticamente en las pestañas &quot;Unresolved&quot; y &quot;Escalating&quot;.

<div id="escalating-limit-calculation">
  ## Cálculo del límite escalonado
</div>

### Cálculo del límite escalonado: antigüedad del issue &gt;= 7 días

Si el issue tiene más de 7 días, el límite escalonado se calcula a diario como el máximo entre un límite de pico de referencia o un límite por ráfagas:

limit<sub>escalating</sub> = max(limit<sub>spike</sub> , limit<sub>bursty</sub>)

En la mayoría de los casos, el límite de picos se aplica a issues con un volumen de eventos relativamente estable, mientras que el límite por ráfagas se aplica a issues con incrementos regulares de volumen (como jobs de cron o de Airflow y ejecutores de tareas).

<div id="spike-limit-calculation">
  #### Cálculo del límite de pico
</div>

El cálculo del límite de pico establece una base para lo que se considera un aumento significativo en el volumen de un issue. Toma el volumen promedio por hora (ponderado por día de la semana) y la varianza de la semana anterior para calcular el límite:

limit<sub>spike</sub> = avg<sub>weighted</sub> + (min(max((avg + (5 * std))/avg, 5),8) * avg)

**Ejemplo**

![Ejemplo de límite de pico](./img/spike_limit.png)

El gráfico anterior muestra los volúmenes de eventos de un issue real de Sentry que iba en aumento. La línea naranja muestra el volumen de la semana pasada, que luego se usa para generar el umbral de pico para la semana siguiente, representado por la línea verde. La línea azul muestra el volumen de la semana siguiente, que supera el umbral alrededor de la hora 148 (día 7). En ese punto, el issue se marca como en escalada.

<div id="bursty-limit-calculation">
  #### Cálculo del límite por ráfagas
</div>

Algunos problemas, como los cron jobs, generan intencionalmente un alto volumen de eventos en un período breve. Si usáramos el cálculo del límite por picos, podría marcar incorrectamente estos tipos de problemas como en escalada. Para tenerlo en cuenta, el algoritmo utiliza un cálculo de límite por ráfagas, basado en el volumen máximo por hora y el coeficiente de variación (relación entre la desviación estándar y el promedio) de la semana anterior:

limit<sub>bursty</sub> = max<sub>timeseries</sub> * min(max(2, 5e<sup>-0.65cv</sup>), 5)

**Ejemplo**
![Ejemplo de límite por ráfagas](./img/bursty_limit.png)

Este gráfico muestra un ejemplo de un issue de Sentry con ráfagas. El límite por picos, representado por la línea naranja, habría marcado incorrectamente el issue como en escalada. El algoritmo contempla este comportamiento con el nuevo límite por ráfagas, representado por la línea verde.

### Cálculo del límite escalonado: antigüedad del issue &lt; 7 días

Si el issue tiene menos de 7 días y no cuenta con datos históricos de la semana anterior, entonces el límite de picos se calcula tomando el volumen máximo por hora y multiplicándolo por 10:

limit<sub>escalating</sub> = max<sub>timeseries</sub> * 10