{"key":"flutter","type":"framework","doc_link":"https://docs.sentry.io/platforms/flutter/","name":"Flutter","aliases":[],"categories":["mobile","browser","desktop"],"body":"<p>Sentry captures data by using an SDK within your applicationâ€™s runtime. Add the following to your <code>pubspec.yaml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml highlight\"><code class=\"language-yml\"><span class=\"token key atrule\">dependencies</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">sentry_flutter</span><span class=\"token punctuation\">:</span> ^7.15.0</code></pre></div>\n<p>Import <code>sentry_flutter</code> and initialize it:</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart highlight\"><code class=\"language-dart\"><span class=\"token keyword\">import</span> <span class=\"token string-literal\"><span class=\"token string\">'package:flutter/widgets.dart'</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string-literal\"><span class=\"token string\">'package:sentry_flutter/sentry_flutter.dart'</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token class-name\">SentryFlutter</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      options<span class=\"token punctuation\">.</span>dsn <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">'___PUBLIC_DSN___'</span></span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// Set tracesSampleRate to 1.0 to capture 100% of transactions for performance monitoring.</span>\n      <span class=\"token comment\">// We recommend adjusting this value in production.</span>\n      options<span class=\"token punctuation\">.</span>tracesSampleRate <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    appRunner<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span> <span class=\"token function\">runApp</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// or define SENTRY_DSN via Dart environment variable (--dart-define)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>You can configure the <code>SENTRY_DSN</code>, <code>SENTRY_RELEASE</code>, <code>SENTRY_DIST</code>, and <code>SENTRY_ENVIRONMENT</code> via the Dart environment variables passing the <code>--dart-define</code> flag to the compiler, as noted in the code sample.</p>\n<p>Then create an intentional error, so you can test that everything is working:</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart highlight\"><code class=\"language-dart\"><span class=\"token keyword\">import</span> <span class=\"token string-literal\"><span class=\"token string\">'package:sentry/sentry.dart'</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">aMethodThatMightFail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>exception<span class=\"token punctuation\">,</span> stackTrace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token class-name\">Sentry</span><span class=\"token punctuation\">.</span><span class=\"token function\">captureException</span><span class=\"token punctuation\">(</span>\n    exception<span class=\"token punctuation\">,</span>\n    stackTrace<span class=\"token punctuation\">:</span> stackTrace<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If you're new to Sentry, use the email alert to access your account and complete a product tour.</p>\n<p>If you're an existing user and have disabled alerts, you won't receive this email.</p>\n<h2 id=\"performance\" style=\"position:relative;\">Performance</h2>\n<p>You'll be able to monitor the performance of your app using the SDK.\nFor example:</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart highlight\"><code class=\"language-dart\"><span class=\"token keyword\">import</span> <span class=\"token string-literal\"><span class=\"token string\">'package:sentry/sentry.dart'</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> transaction <span class=\"token operator\">=</span> <span class=\"token class-name\">Sentry</span><span class=\"token punctuation\">.</span><span class=\"token function\">startTransaction</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">'processOrderBatch()'</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal\"><span class=\"token string\">'task'</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">processOrderBatch</span><span class=\"token punctuation\">(</span>transaction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>exception<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  transaction<span class=\"token punctuation\">.</span>throwable <span class=\"token operator\">=</span> exception<span class=\"token punctuation\">;</span>\n  transaction<span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> <span class=\"token class-name\">SpanStatus</span><span class=\"token punctuation\">.</span><span class=\"token function\">internalError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> transaction<span class=\"token punctuation\">.</span><span class=\"token function\">finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token function\">processOrderBatch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ISentrySpan</span> span<span class=\"token punctuation\">)</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// span operation: task, span description: operation</span>\n  <span class=\"token keyword\">final</span> innerSpan <span class=\"token operator\">=</span> span<span class=\"token punctuation\">.</span><span class=\"token function\">startChild</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">'task'</span></span><span class=\"token punctuation\">,</span> description<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">'operation'</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// omitted code</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>exception<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    innerSpan<span class=\"token punctuation\">.</span>throwable <span class=\"token operator\">=</span> exception<span class=\"token punctuation\">;</span>\n    innerSpan<span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> <span class=\"token class-name\">SpanStatus</span><span class=\"token punctuation\">.</span><span class=\"token function\">notFound</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> innerSpan<span class=\"token punctuation\">.</span><span class=\"token function\">finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To learn more about the API and automatic instrumentations, check out the <a href=\"https://docs.sentry.io/platforms/flutter/tracing/instrumentation/\">performance documentation</a> .</p>\n<h2 id=\"debug-symbols\" style=\"position:relative;\">Debug Symbols</h2>\n<p>We offer a range of methods to provide Sentry with debug symbols so that you can see symbolicated stack traces and triage issues faster.</p>\n<p>Complete stack traces will be shown for your Dart error by default, but if you use <a href=\"https://flutter.dev/docs/perf/app-size#reducing-app-size\"><code>split-debug-info</code></a> and <a href=\"https://flutter.dev/docs/deployment/obfuscate\"><code>obfuscate</code></a>, you'll need to <a href=\"https://docs.sentry.io/platforms/flutter/upload-debug/\">upload the debug information files</a> generated by the <code>flutter</code> build.</p>\n<p>You'll also need to <a href=\"https://docs.sentry.io/platforms/flutter/upload-debug/\">upload the debug information files</a> generated by the <code>flutter</code> build for iOS, macOS, and Android NDK native crashes.</p>\n<h2 id=\"source-context\" style=\"position:relative;\">Source Context</h2>\n<p>If Sentry has access to your application's source code, it can show snippets of code (<em>source context</em>) around the location of stack frames, which helps to quickly pinpoint problematic code.</p>\n<p>To enable source context, you'll need to upload debug symbols to Sentry by following the <a href=\"https://docs.sentry.io/platforms/flutter/upload-debug/#uploading-source-code-context-for-flutter-android-ios-and-macos\">Uploading Source Code Context for Flutter Android, iOS, and macOS</a> guide.</p>"}
