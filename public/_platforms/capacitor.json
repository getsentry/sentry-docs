{"key":"capacitor","type":"framework","doc_link":"https://docs.sentry.io/platforms/javascript/guides/capacitor/","name":"Capacitor","aliases":[],"categories":[],"body":"<p>Install the Sentry Capacitor SDK alongside the sibling Sentry Angular SDK:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash highlight\"><code class=\"language-bash\"><span class=\"token comment\"># npm</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> @sentry/capacitor @sentry/angular-ivy\n\n<span class=\"token comment\"># yarn</span>\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> @sentry/capacitor @sentry/angular @sentry/tracing <span class=\"token parameter variable\">--exact</span></code></pre></div>\n<p>Or install the standalone Sentry Capacitor SDK if you don't use Ionic/Angular:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash highlight\"><code class=\"language-bash\"><span class=\"token comment\"># npm</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> @sentry/capacitor @sentry/tracing\n\n<span class=\"token comment\"># yarn</span>\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> @sentry/capacitor</code></pre></div>\n<note>\n<p>The version of the sibling SDK must match with the version referred by Sentry Capacitor. To check which version of the sibling SDK is installed, use the following command: <code>npm info @sentry/capacitor peerDependencies</code></p>\n</note>\n<h2 id=\"capacitor-2---android-installation\" style=\"position:relative;\">Capacitor 2 - Android Installation</h2>\n<note>\n<p>This step is not needed if you are using Capacitor 3</p>\n</note>\n<p>Then, add the <code>SentryCapacitor</code> plugin class inside the <code>onCreate</code> method of your <code>MainActivity</code> file.</p>\n<p>Java:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java highlight\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bundle</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>getcapacitor<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">BridgeActivity</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>getcapacitor<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Plugin</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>sentry<span class=\"token punctuation\">.</span>capacitor<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SentryCapacitor</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayList</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BridgeActivity</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token annotation punctuation\">@Override</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Initializes the Bridge</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Class</span><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Plugin</span><span class=\"token punctuation\">&gt;</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SentryCapacitor</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Kotlin:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin highlight\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span>Bundle\n<span class=\"token keyword\">import</span> com<span class=\"token punctuation\">.</span>getcapacitor<span class=\"token punctuation\">.</span>BridgeActivity\n<span class=\"token keyword\">import</span> com<span class=\"token punctuation\">.</span>getcapacitor<span class=\"token punctuation\">.</span>Plugin\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>sentry<span class=\"token punctuation\">.</span>capacitor<span class=\"token punctuation\">.</span>SentryCapacitor\n\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">BridgeActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Initializes the Bridge</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>\n      savedInstanceState<span class=\"token punctuation\">,</span>\n      listOf<span class=\"token operator\">&lt;</span>Class<span class=\"token operator\">&lt;</span><span class=\"token keyword\">out</span> Plugin<span class=\"token operator\">&gt;</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">(</span>SentryCapacitor<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"initializing-the-sdk\" style=\"position:relative;\">Initializing the SDK</h2>\n<p>You must initialize the Sentry SDK as early as you can:</p>\n<p>With Ionic/Angular:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript highlight\"><code class=\"language-typescript\"><span class=\"token comment\">// app.module.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">'@sentry/capacitor'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Use `@sentry/angular-ivy` for Angular 12+ or `@sentry/angular` for Angular 10 or 11</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> SentryAngular <span class=\"token keyword\">from</span> <span class=\"token string\">'@sentry/angular-ivy'</span><span class=\"token punctuation\">;</span>\n\n\nSentry<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    dsn<span class=\"token operator\">:</span> <span class=\"token string\">'___PUBLIC_DSN___'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// To set your release and dist versions</span>\n    release<span class=\"token operator\">:</span> <span class=\"token string\">'my-project-name@'</span> <span class=\"token operator\">+</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>npm_package_version<span class=\"token punctuation\">,</span>\n    dist<span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Set tracesSampleRate to 1.0 to capture 100% of transactions for performance monitoring.</span>\n    <span class=\"token comment\">// We recommend adjusting this value in production.</span>\n    tracesSampleRate<span class=\"token operator\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>\n    integrations<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token keyword\">new</span> <span class=\"token class-name\">SentryAngular</span><span class=\"token punctuation\">.</span><span class=\"token function\">BrowserTracing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Set `tracePropagationTargets` to control for which URLs distributed tracing should be enabled</span>\n        tracePropagationTargets<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^https:\\/\\/yourserver\\.io\\/api</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        routingInstrumentation<span class=\"token operator\">:</span> SentryAngular<span class=\"token punctuation\">.</span>routingInstrumentation<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// Forward the init method from @sentry/angular</span>\n  SentryAngular<span class=\"token punctuation\">.</span>init\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">NgModule</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  providers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      provide<span class=\"token operator\">:</span> ErrorHandler<span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// Attach the Sentry ErrorHandler</span>\n      useValue<span class=\"token operator\">:</span> SentryAngular<span class=\"token punctuation\">.</span><span class=\"token function\">createErrorHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      provide<span class=\"token operator\">:</span> SentryAngular<span class=\"token punctuation\">.</span>TraceService<span class=\"token punctuation\">,</span>\n      deps<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>Router<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      provide<span class=\"token operator\">:</span> <span class=\"token constant\">APP_INITIALIZER</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">useFactory</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      deps<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>SentryAngular<span class=\"token punctuation\">.</span>TraceService<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      multi<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Standalone:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token comment\">// App.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sentry/capacitor\"</span><span class=\"token punctuation\">;</span>\n\nSentry<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">dsn</span><span class=\"token operator\">:</span> <span class=\"token string\">\"___PUBLIC_DSN___\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// Set your release version, such as 'getsentry@1.0.0'</span>\n  <span class=\"token literal-property property\">release</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-project-name@&lt;release-name&gt;\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// Set your dist version, such as \"1\"</span>\n  <span class=\"token literal-property property\">dist</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;dist&gt;\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"verify\" style=\"position:relative;\">Verify</h2>\n<p>This snippet includes an intentional error, so you can test that everything is working as soon as you set it up:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sentry/capacitor\"</span><span class=\"token punctuation\">;</span>\n\nSentry<span class=\"token punctuation\">.</span><span class=\"token function\">captureException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test Captured Exception\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can also throw an error anywhere in your application:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token comment\">// Must be thrown after Sentry.init is called to be captured.</span>\n<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test Thrown Error\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Or trigger a native crash:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sentry/capacitor\"</span><span class=\"token punctuation\">;</span>\n\nSentry<span class=\"token punctuation\">.</span><span class=\"token function\">nativeCrash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}