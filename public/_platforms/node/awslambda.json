{"key":"node.awslambda","type":"framework","doc_link":"https://docs.sentry.io/platforms/node/guides/aws-lambda/","name":"AWS Lambda (Node)","aliases":[],"categories":[],"body":"<p>Create a deployment package on your local machine and install the required dependencies in the deployment package. For more information, see <a href=\"https://aws.amazon.com/premiumsupport/knowledge-center/lambda-deployment-package-nodejs/\">Building an AWS Lambda deployment package for Node.js</a>.</p>\n<p>Add <code>@sentry/serverless</code> as a dependency:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash highlight\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> @sentry/serverless</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash highlight\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> @sentry/serverless</code></pre></div>\n<p>You can use the AWS Lambda integration for the Node like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> Sentry <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@sentry/serverless\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nSentry<span class=\"token punctuation\">.</span>AWSLambda<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">dsn</span><span class=\"token operator\">:</span> <span class=\"token string\">\"___PUBLIC_DSN___\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// Set tracesSampleRate to 1.0 to capture 100%</span>\n  <span class=\"token comment\">// of transactions for performance monitoring.</span>\n  <span class=\"token comment\">// We recommend adjusting this value in production</span>\n  <span class=\"token literal-property property\">tracesSampleRate</span><span class=\"token operator\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span>handler <span class=\"token operator\">=</span> Sentry<span class=\"token punctuation\">.</span>AWSLambda<span class=\"token punctuation\">.</span><span class=\"token function\">wrapHandler</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Your handler code</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> Sentry <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@sentry/serverless\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nSentry<span class=\"token punctuation\">.</span>AWSLambda<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">dsn</span><span class=\"token operator\">:</span> <span class=\"token string\">\"___PUBLIC_DSN___\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// Set tracesSampleRate to 1.0 to capture 100%</span>\n  <span class=\"token comment\">// of transactions for performance monitoring.</span>\n  <span class=\"token comment\">// We recommend adjusting this value in production</span>\n  <span class=\"token literal-property property\">tracesSampleRate</span><span class=\"token operator\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span>handler <span class=\"token operator\">=</span> Sentry<span class=\"token punctuation\">.</span>AWSLambda<span class=\"token punctuation\">.</span><span class=\"token function\">wrapHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Your handler code</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<!-- TODO-ADD-VERIFICATION-EXAMPLE -->\n<h2 id=\"enable-timeout-warning\" style=\"position:relative;\">Enable Timeout Warning</h2>\n<p>Sentry reports timeout warning when the function is within 500ms of it's execution time. You can turn off timeout warnings by setting <code>captureTimeoutWarning</code> to <code>false</code> in the handler options. To change timeout warning limit, assign a numeric value (in ms) to <code>timeoutWarningLimit</code></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span>handler <span class=\"token operator\">=</span> Sentry<span class=\"token punctuation\">.</span>AWSLambda<span class=\"token punctuation\">.</span><span class=\"token function\">wrapHandler</span><span class=\"token punctuation\">(</span>yourHandler<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">captureTimeoutWarning</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span>handler <span class=\"token operator\">=</span> Sentry<span class=\"token punctuation\">.</span>AWSLambda<span class=\"token punctuation\">.</span><span class=\"token function\">wrapHandler</span><span class=\"token punctuation\">(</span>yourHandler<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">timeoutWarningLimit</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}