{"key":"dotnet.maui","type":"framework","doc_link":"https://docs.sentry.io/platforms/dotnet/guides/maui/","name":"Multi-platform App UI (MAUI)","aliases":[],"categories":[],"body":"<p>Install the <strong>NuGet</strong> package:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell highlight\"><code class=\"language-shell\">dotnet <span class=\"token function\">add</span> package Sentry.Maui <span class=\"token parameter variable\">-v</span> <span class=\"token number\">3.41</span>.4</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell highlight\"><code class=\"language-powershell\"><span class=\"token function\">Install-Package</span> Sentry<span class=\"token punctuation\">.</span>Maui <span class=\"token operator\">-</span>Version 3<span class=\"token punctuation\">.</span>41<span class=\"token punctuation\">.</span>4</code></pre></div>\n<p>Then add Sentry to <code>MauiProgram.cs</code> through the <code>MauiAppBuilder</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp highlight\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token return-type class-name\">MauiApp</span> <span class=\"token function\">CreateMauiApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> builder <span class=\"token operator\">=</span> MauiApp<span class=\"token punctuation\">.</span><span class=\"token function\">CreateBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    builder\n        <span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">UseMauiApp</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>App<span class=\"token punctuation\">&gt;</span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">// Add this section anywhere on the builder:</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">UseSentry</span><span class=\"token punctuation\">(</span>options <span class=\"token operator\">=&gt;</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// The DSN is the only required setting.</span>\n            options<span class=\"token punctuation\">.</span>Dsn <span class=\"token operator\">=</span> <span class=\"token string\">\"___PUBLIC_DSN___\"</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// Use debug mode if you want to see what the SDK is doing.</span>\n            <span class=\"token comment\">// Debug messages are written to stdout with Console.Writeline,</span>\n            <span class=\"token comment\">// and are viewable in your IDE's debug console or with 'adb logcat', etc.</span>\n            <span class=\"token comment\">// This option is not recommended when deploying your application.</span>\n            options<span class=\"token punctuation\">.</span>Debug <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// Set TracesSampleRate to 1.0 to capture 100% of transactions for performance monitoring.</span>\n            <span class=\"token comment\">// We recommend adjusting this value in production.</span>\n            options<span class=\"token punctuation\">.</span>TracesSampleRate <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// Other Sentry options can be set here.</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">// ... the remainder of your MAUI app setup</span>\n\n    <span class=\"token keyword\">return</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">Build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"verify\" style=\"position:relative;\">Verify</h2>\n<p>To verify your set up, you can capture a message with the SDK, anywhere in your code after the application is built, such as in a page constructor or button click event handler:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp highlight\"><code class=\"language-csharp\">SentrySdk<span class=\"token punctuation\">.</span><span class=\"token function\">CaptureMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Sentry\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"performance-monitoring\" style=\"position:relative;\">Performance monitoring</h3>\n<p>We do not yet have automatic performance instrumentation for .NET MAUI. We will be adding that in a future release.\nHowever, if desired you can still manually instrument parts of your application.</p>\n<p>For some parts of your code, <a href=\"https://docs.sentry.io/platforms/dotnet/guides/maui/performance/instrumentation/automatic-instrumentation/\">automatic instrumentation</a> is available across all of our .NET SDKs, and can be used with MAUI as well:</p>\n<ul>\n<li>If your app uses <code>HttpClient</code>, you can instrument your HTTP calls by passing our HTTP message handler:\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp highlight\"><code class=\"language-csharp\"><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> httpHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">SentryHttpMessageHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> httpClient <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">HttpClient</span><span class=\"token punctuation\">(</span>httpHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>If your app uses Entity Framework Core or SQL Client, we will automatically instrument that for you without any additional code.</li>\n</ul>\n<p>For other parts of your code, you can use <a href=\"https://docs.sentry.io/platforms/dotnet/guides/maui/performance/instrumentation/custom-instrumentation/\">custom instrumentation</a>, such as in the following example:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp highlight\"><code class=\"language-csharp\"><span class=\"token comment\">// Transaction can be started by providing, at minimum, the name and the operation</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> transaction <span class=\"token operator\">=</span> SentrySdk<span class=\"token punctuation\">.</span><span class=\"token function\">StartTransaction</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">\"test-transaction-name\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"test-transaction-operation\"</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Transactions can have child spans (and those spans can have child spans as well)</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> span <span class=\"token operator\">=</span> transaction<span class=\"token punctuation\">.</span><span class=\"token function\">StartChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test-child-operation\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n<span class=\"token comment\">// (Perform the operation represented by the span/transaction)</span>\n<span class=\"token comment\">// ...</span>\n\nspan<span class=\"token punctuation\">.</span><span class=\"token function\">Finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Mark the span as finished</span>\ntransaction<span class=\"token punctuation\">.</span><span class=\"token function\">Finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Mark the transaction as finished and send it to Sentry</span></code></pre></div>\n<h2 id=\"sample-application\" style=\"position:relative;\">Sample Application</h2>\n<p>See the <a href=\"https://github.com/getsentry/sentry-dotnet/tree/main/samples/Sentry.Samples.Maui\">MAUI Sample in the <code>sentry-dotnet</code> repository</a>.</p>"}