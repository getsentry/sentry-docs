{"key":"python.starlette","type":"framework","doc_link":"https://docs.sentry.io/platforms/python/guides/starlette/","name":"Starlette","aliases":[],"categories":[],"body":"<p>The Starlette integration adds support for the <a href=\"https://www.starlette.io/\">Starlette Framework</a>.</p>\n<ol>\n<li>Install <code>sentry-sdk</code> from PyPI with the <code>starlette</code> extra:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash highlight\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">--upgrade</span> <span class=\"token string\">'sentry-sdk[starlette]'</span></code></pre></div>\n<ol start=\"2\">\n<li>To configure the SDK, initialize it before your app has been initialized. The Sentry SDK automatically enables support for Starlette if you have the <code>starlette</code> Python package installed in your <div class=\"term-wrapper\"><span class=\"term\">project</span><span class=\"description\" role=\"tooltip\" aria-label=\"project definition\">Represents your service in Sentry and allows you to scope events to a distinct application.</span></div>. There are no configuration options you need to add when initializing the Sentry SDK as everything works out of the box:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python highlight\"><code class=\"language-python\"><span class=\"token keyword\">from</span> starlette<span class=\"token punctuation\">.</span>applications <span class=\"token keyword\">import</span> Starlette\n\n<span class=\"token keyword\">import</span> sentry_sdk\n\n\nsentry_sdk<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>\n    dsn<span class=\"token operator\">=</span><span class=\"token string\">\"___PUBLIC_DSN___\"</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\"># Set traces_sample_rate to 1.0 to capture 100%</span>\n    <span class=\"token comment\"># of transactions for performance monitoring.</span>\n    <span class=\"token comment\"># We recommend adjusting this value in production,</span>\n    traces_sample_rate<span class=\"token operator\">=</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\napp <span class=\"token operator\">=</span> Starlette<span class=\"token punctuation\">(</span>routes<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>The above configuration captures both error and performance data. To reduce the volume of performance data captured, change <code>traces_sample_rate</code> to a value between 0 and 1.</p>\n<ol start=\"3\">\n<li>You can easily verify your Sentry installation by creating a route that triggers an error:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python highlight\"><code class=\"language-python\"><span class=\"token keyword\">from</span> starlette<span class=\"token punctuation\">.</span>applications <span class=\"token keyword\">import</span> Starlette\n<span class=\"token keyword\">from</span> starlette<span class=\"token punctuation\">.</span>routing <span class=\"token keyword\">import</span> Route\n\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">trigger_error</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    division_by_zero <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token number\">0</span>\n\napp <span class=\"token operator\">=</span> Starlette<span class=\"token punctuation\">(</span>routes<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n    Route<span class=\"token punctuation\">(</span><span class=\"token string\">\"/sentry-debug\"</span><span class=\"token punctuation\">,</span> trigger_error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Visiting this route will trigger an error that will be captured by Sentry.</p>"}