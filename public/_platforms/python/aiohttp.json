{"key":"python.aiohttp","type":"framework","doc_link":"https://docs.sentry.io/platforms/python/guides/aiohttp/","name":"AIOHTTP","aliases":[],"categories":[],"body":"<p>The AIOHTTP integration adds support for the <a href=\"https://docs.aiohttp.org/en/stable/web.html\">AIOHTTP-Server Web\nFramework</a>. A Python version of\n3.6 or greater is required.</p>\n<ol>\n<li>\n<p>Install <code>sentry-sdk</code> from PyPI:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash highlight\"><code class=\"language-bash\">$ pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">--upgrade</span> sentry-sdk</code></pre></div>\n</li>\n<li>\n<p>If you're on Python 3.6, you also need the <code>aiocontextvars</code> package:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash highlight\"><code class=\"language-bash\">$ pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">--upgrade</span> aiocontextvars</code></pre></div>\n</li>\n<li>\n<p>Initialize the SDK before starting the server:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python highlight\"><code class=\"language-python\"><span class=\"token keyword\">import</span> sentry_sdk\n<span class=\"token keyword\">from</span> sentry_sdk<span class=\"token punctuation\">.</span>integrations<span class=\"token punctuation\">.</span>aiohttp <span class=\"token keyword\">import</span> AioHttpIntegration\n\nsentry_sdk<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>\n   dsn<span class=\"token operator\">=</span><span class=\"token string\">\"___PUBLIC_DSN___\"</span><span class=\"token punctuation\">,</span>\n   integrations<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n      AioHttpIntegration<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n   <span class=\"token comment\"># Set traces_sample_rate to 1.0 to capture 100%</span>\n   <span class=\"token comment\"># of transactions for performance monitoring.</span>\n   <span class=\"token comment\"># We recommend adjusting this value in production,</span>\n   traces_sample_rate<span class=\"token operator\">=</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">from</span> aiohttp <span class=\"token keyword\">import</span> web\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> web<span class=\"token punctuation\">.</span>Response<span class=\"token punctuation\">(</span>text<span class=\"token operator\">=</span><span class=\"token string\">\"Hello, world\"</span><span class=\"token punctuation\">)</span>\n\napp <span class=\"token operator\">=</span> web<span class=\"token punctuation\">.</span>Application<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span>add_routes<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>web<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> hello<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nweb<span class=\"token punctuation\">.</span>run_app<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ol>\n<!-- TODO-ADD-VERIFICATION-EXAMPLE -->"}