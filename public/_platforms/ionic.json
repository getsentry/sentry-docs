{"key":"ionic","type":"framework","doc_link":"https://docs.sentry.io/platforms/javascript/guides/capacitor/","name":"Ionic","aliases":[],"categories":[],"body":"<p>To use Sentry in your Ionic app, install the Sentry Capacitor SDK alongside the sibling Sentry SDK related to the Web framework you're using with Ionic.\nThe supported siblings are: Angular <code>@sentry/angular-ivy</code>, React <code>@sentry/react</code> and Vue <code>@sentry/vue</code>.</p>\n<p>Heres an example of installing Sentry Capacitor along with Sentry Angular:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text highlight\"><code class=\"language-text\">npm install --save @sentry/capacitor @sentry/angular</code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text highlight\"><code class=\"language-text\">yarn add @sentry/capacitor @sentry/angular</code></pre></div>\n<p>The same installation process applies to the other siblings, all you need to do is to replace <code>@sentry/angular-ivy</code> by the desired sibling.</p>\n<h2 id=\"capacitor-2---android-installation\" style=\"position:relative;\">Capacitor 2 - Android Installation</h2>\n<note>\n<p>This step is not needed if you are using Capacitor 3</p>\n</note>\n<p>Then, add the <code>SentryCapacitor</code> plugin class inside the <code>onCreate</code> method of your <code>MainActivity</code> file.</p>\n<p>Java:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java highlight\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bundle</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>getcapacitor<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">BridgeActivity</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>getcapacitor<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Plugin</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>sentry<span class=\"token punctuation\">.</span>capacitor<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SentryCapacitor</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayList</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BridgeActivity</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token annotation punctuation\">@Override</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Initializes the Bridge</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Class</span><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Plugin</span><span class=\"token punctuation\">&gt;</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SentryCapacitor</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Kotlin:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin highlight\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span>Bundle\n<span class=\"token keyword\">import</span> com<span class=\"token punctuation\">.</span>getcapacitor<span class=\"token punctuation\">.</span>BridgeActivity\n<span class=\"token keyword\">import</span> com<span class=\"token punctuation\">.</span>getcapacitor<span class=\"token punctuation\">.</span>Plugin\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>sentry<span class=\"token punctuation\">.</span>capacitor<span class=\"token punctuation\">.</span>SentryCapacitor\n\n<span class=\"token keyword\">class</span> MainActivity <span class=\"token operator\">:</span> <span class=\"token function\">BridgeActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Initializes the Bridge</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>\n      savedInstanceState<span class=\"token punctuation\">,</span>\n      listOf<span class=\"token operator\">&lt;</span>Class<span class=\"token operator\">&lt;</span><span class=\"token keyword\">out</span> Plugin<span class=\"token operator\">&gt;</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">(</span>SentryCapacitor<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"initializing-the-sdk\" style=\"position:relative;\">Initializing the SDK</h2>\n<p>You must initialize the Sentry SDK as early as you can:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sentry/capacitor\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// The example is using Angular 12+. Import '@sentry/angular' for Angular 10 and 11. Import '@sentry/vue' or '@sentry/react' when using a Sibling different than Angular.</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> SentrySibling <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sentry/angular-ivy\"</span><span class=\"token punctuation\">;</span>\n\nSentry<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">dsn</span><span class=\"token operator\">:</span> <span class=\"token string\">\"___PUBLIC_DSN___\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// To set your release and dist versions</span>\n    <span class=\"token literal-property property\">release</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-project-name@\"</span> <span class=\"token operator\">+</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>npm_package_version<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">dist</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// Set tracesSampleRate to 1.0 to capture 100% of transactions for performance monitoring.</span>\n    <span class=\"token comment\">// We recommend adjusting this value in production.</span>\n    <span class=\"token literal-property property\">tracesSampleRate</span><span class=\"token operator\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">integrations</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token keyword\">new</span> <span class=\"token class-name\">SentrySibling<span class=\"token punctuation\">.</span>BrowserTracing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Set `tracePropagationTargets` to control for which URLs distributed tracing should be enabled</span>\n        <span class=\"token literal-property property\">tracePropagationTargets</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^https:\\/\\/yourserver\\.io\\/api</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">routingInstrumentation</span><span class=\"token operator\">:</span> SentrySibling<span class=\"token punctuation\">.</span>routingInstrumentation<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// Forward the init method to the sibling Framework.</span>\n  SentrySibling<span class=\"token punctuation\">.</span>init\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Additionally for Angular, you will also need to configure your root <code>app.module.ts</code> (same code doesn't apply to other siblings):</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\">@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">providers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">provide</span><span class=\"token operator\">:</span> ErrorHandler<span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// Attach the Sentry ErrorHandler</span>\n      <span class=\"token literal-property property\">useValue</span><span class=\"token operator\">:</span> SentrySibling<span class=\"token punctuation\">.</span><span class=\"token function\">createErrorHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">provide</span><span class=\"token operator\">:</span> SentrySibling<span class=\"token punctuation\">.</span>TraceService<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">deps</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>Router<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">provide</span><span class=\"token operator\">:</span> <span class=\"token constant\">APP_INITIALIZER</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">useFactory</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">deps</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>SentrySibling<span class=\"token punctuation\">.</span>TraceService<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">multi</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"verify\" style=\"position:relative;\">Verify</h2>\n<p>This snippet includes an intentional error, so you can test that everything is working as soon as you set it up:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sentry/capacitor\"</span><span class=\"token punctuation\">;</span>\n\nSentry<span class=\"token punctuation\">.</span><span class=\"token function\">captureException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test Captured Exception\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can also throw an error anywhere in your application:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token comment\">// Must be thrown after Sentry.init is called to be captured.</span>\n<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test Thrown Error\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Or trigger a native crash:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript highlight\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Sentry <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sentry/capacitor\"</span><span class=\"token punctuation\">;</span>\n\nSentry<span class=\"token punctuation\">.</span><span class=\"token function\">nativeCrash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}