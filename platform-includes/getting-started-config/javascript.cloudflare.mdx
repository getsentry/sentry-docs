Configuration should happen as early as possible in your application's lifecycle.

To use the SDK, you'll need to set either the `nodejs_compat` or `nodejs_als` compatibility flags in your `wrangler.jsonc` / `wrangler.toml` config. This is because the SDK needs access to the `AsyncLocalStorage` API to work correctly.

```jsonc {tabTitle:JSON} {filename:wrangler.jsonc}
{
  "compatibility_flags": [
    "nodejs_als",
    // "nodejs_compat"
  ],
}
```

```toml {tabTitle:Toml} {filename:wrangler.toml}
compatibility_flags = ["nodejs_als"]
# compatibility_flags = ["nodejs_compat"]
```

You will also want to add the `CF_VERSION_METADATA` binding:

```jsonc {tabTitle:JSON} {filename:wrangler.jsonc}
{
  // ...
  "version_metadata": {
    "binding": "CF_VERSION_METADATA"
  },
}
```

```toml {tabTitle:Toml} {filename:wrangler.toml}
version_metadata = { binding = "CF_VERSION_METADATA" }
```
