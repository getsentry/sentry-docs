## Check-Ins (Recommended)

Check-in monitoring allows you to track a job's progress by completing two check-ins: one at the start of your job and another at the end of your job. This two-step process allows Sentry to notify you if your job didn't start when expected (missed) or if it exceeded its maximum runtime (failed).

```csharp
// 游리 Notify Sentry your job is running:
var checkInId = SentrySdk.CaptureCheckIn("<monitor-slug>", CheckInStatus.InProgress);

// Execute your scheduled task here...

// 游릭 Notify Sentry your job has completed successfully:
SentrySdk.CaptureCheckIn("<monitor-slug>", CheckInStatus.Ok, checkInId);
```

If your job execution fails, you can notify Sentry about the failure:

```csharp
// 游댮 Notify Sentry your job has failed:
SentrySdk.CaptureCheckIn("<monitor-slug>", CheckInStatus.Error, checkInId);
```

## Heartbeat

Heartbeat monitoring notifies Sentry of a job's status through one check-in. This setup will only notify you if your job didn't run when expected (missed). If you want to monitor job timeouts, use the `InProgress` check-ins as indicated in the previous section.

```csharp
// Execute your scheduled task...

// 游릭 Notify Sentry your job completed successfully:
SentrySdk.CaptureCheckIn(
    "<monitor-slug>",
    CheckInStatus.Ok,
    // Optionally annotate the check-in with the job duration
    duration: TimeSpan.FromSeconds(10)
);
```

If your job execution fails, you can:

```csharp
// 游댮 Notify Sentry your job has failed:
SentrySdk.CaptureCheckIn(
    "<monitor-slug>",
    CheckInStatus.Error,
    duration: TimeSpan.FromSeconds(10)
);
```

## Upserting Cron Monitors

You can create and update your Monitors programmatically with code
rather than [creating and configuring them in Sentry.io](https://sentry.io/issues/alerts/new/crons/).

```csharp
// 游리 Notify Sentry your job is running:
var checkInId = SentrySdk.CaptureCheckIn(
    "<monitor-slug>",
    CheckInStatus.InProgress,
    configureMonitorOptions: options =>
    {
        // Use a crontab schedule (every 10 minutes)
        options.Interval("*/10 * * * *");
        options.CheckInMargin = TimeSpan.FromMinutes(5);
        options.MaxRuntime = TimeSpan.FromMinutes(15);
        options.TimeZone = "Europe/Vienna";
        options.FailureIssueThreshold = 2;
        options.RecoveryThreshold = 5;
    });

// Execute your scheduled task here...

// 游릭 Notify Sentry your job has completed successfully:
SentrySdk.CaptureCheckIn("<monitor-slug>", CheckInStatus.Ok, checkInId);
```

Alternatively, you can use an interval schedule:

```csharp
// 游리 Notify Sentry your job is running:
var checkInId = SentrySdk.CaptureCheckIn(
    "<monitor-slug>",
    CheckInStatus.InProgress,
    configureMonitorOptions: options =>
    {
        // Use an interval schedule (every 10 minutes)
        options.Interval(10, SentryMonitorInterval.Minute);
        options.CheckInMargin = TimeSpan.FromMinutes(5);
        options.MaxRuntime = TimeSpan.FromMinutes(15);
        options.TimeZone = "Europe/Vienna";
    });

// Execute your scheduled task here...

// 游릭 Notify Sentry your job has completed successfully:
SentrySdk.CaptureCheckIn("<monitor-slug>", CheckInStatus.Ok, checkInId);
```

Supported units are:

- `SentryMonitorInterval.Minute`
- `SentryMonitorInterval.Hour`
- `SentryMonitorInterval.Day`
- `SentryMonitorInterval.Week`
- `SentryMonitorInterval.Month`
- `SentryMonitorInterval.Year`
