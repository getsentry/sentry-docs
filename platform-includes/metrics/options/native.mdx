### before_send_metric

To filter metrics or modify them before they are sent to Sentry, use the `before_send_metric` option:

```c
static sentry_value_t
before_send_metric_callback(sentry_value_t metric, void *user_data)
{
    (void)user_data;

    // Drop metrics with specific attributes
    sentry_value_t attributes = sentry_value_get_by_key(metric, "attributes");
    if (!sentry_value_is_null(sentry_value_get_by_key(attributes, "debug"))) {
        sentry_value_decref(metric);
        return sentry_value_new_null();
    }

    // Return the metric to send it
    return metric;
}

sentry_options_set_before_send_metric(options, before_send_metric_callback, NULL);
```

Return the metric to send it, or free it with `sentry_value_decref()` and return `sentry_value_new_null()` to discard it.

### Disable Metrics

To disable metrics collection entirely, set the `enable_metrics` option to `false`:

```c
sentry_options_t *options = sentry_options_new();
sentry_options_set_enable_metrics(options, false);
```
