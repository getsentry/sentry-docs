To enable logging in your Unreal Engine project, you need to configure the Sentry SDK with structured logging enabled.

### Project Settings Configuration

1. Open your project settings: **Project Settings > Plugins > Sentry**
2. Check the **Enable Structured Logging** option

### Programmatic Configuration

Alternatively, you can enable logging programmatically when initializing the SDK:

```cpp
#include "SentrySubsystem.h"

void ConfigureSentryWithLogs()
{
    USentrySubsystem* SentrySubsystem = GEngine->GetEngineSubsystem<USentrySubsystem>();

    // Create settings with logging enabled
    SentrySubsystem->InitializeWithSettings(FConfigureSettingsNativeDelegate::CreateLambda([=](USentrySettings* Settings)
    {
        Settings->EnableStructuredLogging = true;
    }));
}
```

### Advanced Configuration Options

The Sentry SDK provides you with some advanced options to configure the log capture.

#### Automatic Unreal Engine Log Forwarding

You can configure the SDK to automatically forward Unreal Engine's native `UE_LOG` calls to Sentry based on the enabled severity levels:

```cpp
USentrySubsystem* SentrySubsystem = GEngine->GetEngineSubsystem<USentrySubsystem>();

// Configure automatic log forwarding programmatically
SentrySubsystem->InitializeWithSettings(FConfigureSettingsNativeDelegate::CreateLambda([=](USentrySettings* Settings)
{
    Settings->EnableStructuredLogging = true;

    // Enable specific severity levels for UE_LOG forwarding
    Settings->StructuredLoggingLevels.bOnDebugLog = false;
    Settings->StructuredLoggingLevels.bOnInfoLog = true;
    Settings->StructuredLoggingLevels.bOnWarningLog = true;
    Settings->StructuredLoggingLevels.bOnErrorLog = true;
    Settings->StructuredLoggingLevels.bOnFatalLog = true;

    Settings->bSendBreadcrumbsWithStructuredLogging = false; // Send as structured logs instead of breadcrumbs
}));
```

#### Log Category Filtering

You can filter which log categories are sent to Sentry:

```cpp
// Configure category filtering
USentrySubsystem* SentrySubsystem = GEngine->GetEngineSubsystem<USentrySubsystem>();

// Create settings with logging enabled
SentrySubsystem->InitializeWithSettings(FConfigureSettingsNativeDelegate::CreateLambda([=](USentrySettings* Settings)
{
    Settings->EnableStructuredLogging = true;

    // Only forward logs from specific categories
    TArray<FString> AllowedCategories;
    AllowedCategories.Add(TEXT("LogGameFlow"));
    AllowedCategories.Add(TEXT("LogPlayerSystem"));
    AllowedCategories.Add(TEXT("LogSentrySdk"));
    Settings->StructuredLoggingCategories = AllowedCategories;

}));
```

#### Before-Log Handler

To filter logs, or update them before they are sent to Sentry, you can create a custom before-log handler class.

<Alert level="info">
  Logging additional messages in the BeforeLog handler can cause recursive call of the handler, resulting in a stack overflow!
</Alert>

```cpp
UCLASS()
class UCustomLogFilter : public USentryBeforeLogHandler
{
    GENERATED_BODY()
public:
    virtual USentryLog* HandleBeforeLog_Implementation(USentryLog* LogData) override
    {
        // Filter out all debug logs
        if (LogData->GetLevel() == ESentryLevel::Debug)
        {
            return nullptr; // Return null to prevent sending
        }

        // Filter out logs based on message content
        if (LogData->GetBody().Contains(TEXT("Sensitive")))
        {
            return nullptr; // Filter out sensitive logs
        }

        // Filter based on specific categories
        if (LogData->GetBody().Contains(TEXT("Password")) ||
            LogData->GetBody().Contains(TEXT("Token")))
        {
            return nullptr; // Filter out authentication-related logs
        }

        return LogData; // Return modified event
    }
};

// Configure settings using delegate
FConfigureSettingsDelegate SettingsDelegate;
SettingsDelegate.BindDynamic(this, &USomeClass::HandleSettingsDelegate);

void USomeClass::HandleSettingsDelegate(USentrySettings* Settings)
{
    // Enable structured logging
    Settings->EnableStructuredLogging = true;

    // Configure individual severity levels
    Settings->StructuredLoggingLevels.bOnDebugLog = false;
    Settings->StructuredLoggingLevels.bOnInfoLog = true;
    Settings->StructuredLoggingLevels.bOnWarningLog = true;
    Settings->StructuredLoggingLevels.bOnErrorLog = true;
    Settings->StructuredLoggingLevels.bOnFatalLog = true;

    // Set custom before-log handler
    Settings->BeforeLogHandler = UCustomLogFilter::StaticClass();
}

// Initialize with settings delegate
USentrySubsystem* SentrySubsystem = GEngine->GetEngineSubsystem<USentrySubsystem>();
SentrySubsystem->InitializeWithSettings(SettingsDelegate);
```

The `HandleBeforeLog_Implementation` method receives a `USentryLog` object, and should return the log event if you want it to be sent to Sentry, or `nullptr` if you want to discard it.

The `USentryLog` object has the following methods:
- `GetLevel()`: Returns the severity level of the log (`ESentryLevel`)
- `GetBody()`: Returns the formatted log message (`FString`)
- `SetLevel(ESentryLevel Level)`: Sets the Level of the Log Event
- `SetBody(FString& Body)`: Sets the Body of the Log Event
- `SetAttribute(Key, Value)`: Sets a custom attribute on the log
- `GetAttribute(Key)`: Gets an attribute value
- `TryGetAttribute(Key, OutValue)`: Returns `true` if attribute exists
- `RemoveAttribute(Key)`: Removes an attribute
- `AddAttributes(AttributesMap)`: Adds multiple attributes at once
